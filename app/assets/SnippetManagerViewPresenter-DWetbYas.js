import{u as U,r as o,D as F,N as T,j as e,a as _}from"./index-De9zKBtm.js";import"./react-vendor-P8ZuH1e3.js";import"./monaco-editor-BYMRfcD5.js";function Y({theme:n}){const{setShowSnippetManager:j,savedSnippets:a,addSnippet:w,removeSnippet:I,updateSnippet:N,loadSnippets:z}=U(),[l,h]=o.useState(null),[d,v]=o.useState(""),[c,C]=o.useState(""),[y,m]=o.useState(""),[g,k]=o.useState("*"),[b,E]=o.useState(""),[p,S]=o.useState(!1);o.useEffect(()=>{z()},[]);const i=a.find(t=>t.id===l);o.useEffect(()=>{i&&(v(i.name),C(i.prefix),m(i.body),k(i.language),E(i.description||""),S(!1))},[l]);const D=o.useCallback(()=>{S(!0),h(null),v(""),C(""),m(""),k("*"),E("")},[]),B=o.useCallback(()=>{d.trim().length===0||c.trim().length===0||(p?(w({name:d.trim(),prefix:c.trim(),body:y,language:g,description:b.trim()||void 0}),S(!1)):l&&N(l,{name:d.trim(),prefix:c.trim(),body:y,language:g,description:b.trim()||void 0}))},[p,l,d,c,y,g,b]),R=o.useCallback(()=>{l&&(I(l),h(null),S(!1))},[l]),L=o.useCallback(()=>{i&&(F(T.INSERT_SNIPPET,{body:i.body}),j(!1))},[i]),$=o.useCallback(()=>{const t=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),f=URL.createObjectURL(t),r=document.createElement("a");r.href=f,r.download="notemac-snippets.json",r.click(),URL.revokeObjectURL(f)},[a]),M=o.useCallback(()=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async()=>{var r;const f=(r=t.files)==null?void 0:r[0];if(f)try{const P=await f.text(),O=JSON.parse(P);for(const u of O)w({name:u.name,prefix:u.prefix,body:u.body,language:u.language||"*",description:u.description})}catch{}},t.click()},[]),x={width:"100%",padding:"6px 8px",fontSize:12,backgroundColor:n.bg,color:n.text,border:`1px solid ${n.border}`,borderRadius:4,outline:"none"},s={padding:"4px 12px",fontSize:12,backgroundColor:n.bg,color:n.text,border:`1px solid ${n.border}`,borderRadius:4,cursor:"pointer"};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.4)",zIndex:_,display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>j(!1),children:e.jsxs("div",{style:{width:720,height:520,backgroundColor:n.bgSecondary,border:`1px solid ${n.border}`,borderRadius:8,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",overflow:"hidden"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{padding:"10px 16px",borderBottom:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:14,fontWeight:600,color:n.text},children:"Snippet Manager"}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{onClick:M,style:s,children:"Import"}),e.jsx("button",{onClick:$,style:s,children:"Export"}),e.jsx("button",{onClick:()=>j(!1),style:s,children:"Close"})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[e.jsxs("div",{style:{width:220,borderRight:`1px solid ${n.border}`,display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:8},children:e.jsx("button",{onClick:D,style:{...s,width:"100%"},children:"+ New Snippet"})}),e.jsxs("div",{style:{flex:1,overflowY:"auto"},children:[a.map(t=>e.jsxs("div",{onClick:()=>h(t.id),style:{padding:"8px 12px",cursor:"pointer",backgroundColor:t.id===l?n.accent+"22":"transparent",borderLeft:t.id===l?`2px solid ${n.accent}`:"2px solid transparent"},children:[e.jsx("div",{style:{fontSize:13,color:n.text},children:t.name}),e.jsxs("div",{style:{fontSize:11,color:n.textSecondary},children:[t.prefix," \\u2022 ",t.language]})]},t.id)),a.length===0&&e.jsx("div",{style:{padding:"16px 12px",fontSize:12,color:n.textSecondary,textAlign:"center"},children:"No snippets yet"})]})]}),e.jsx("div",{style:{flex:1,padding:16,overflowY:"auto",display:"flex",flexDirection:"column",gap:10},children:l||p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:11,color:n.textSecondary,display:"block",marginBottom:4},children:"Name"}),e.jsx("input",{value:d,onChange:t=>v(t.target.value),style:x})]}),e.jsxs("div",{style:{display:"flex",gap:10},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:11,color:n.textSecondary,display:"block",marginBottom:4},children:"Prefix (trigger)"}),e.jsx("input",{value:c,onChange:t=>C(t.target.value),style:x,placeholder:"e.g. log, fn, cls"})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:11,color:n.textSecondary,display:"block",marginBottom:4},children:"Language"}),e.jsx("input",{value:g,onChange:t=>k(t.target.value),style:x,placeholder:"* for all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:11,color:n.textSecondary,display:"block",marginBottom:4},children:"Description"}),e.jsx("input",{value:b,onChange:t=>E(t.target.value),style:x})]}),e.jsxs("div",{style:{flex:1,minHeight:120},children:[e.jsx("label",{style:{fontSize:11,color:n.textSecondary,display:"block",marginBottom:4},children:"Body (use $1, $2 for tab stops, $0 for final cursor)"}),e.jsx("textarea",{value:y,onChange:t=>m(t.target.value),style:{...x,height:140,resize:"vertical",fontFamily:"'SF Mono', 'Menlo', monospace"}})]}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[!p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:L,style:{...s,backgroundColor:n.accent,color:"#fff"},children:"Insert"}),e.jsx("button",{onClick:R,style:{...s,color:"#ff4444"},children:"Delete"})]}),e.jsx("button",{onClick:B,style:{...s,backgroundColor:n.accent,color:"#fff"},children:p?"Create":"Save"})]})]}):e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:n.textSecondary,fontSize:13},children:"Select a snippet or create a new one"})})]})]})})}export{Y as SnippetManagerViewPresenter};
