import{u as C,r as o,H as A,j as t,U as I,a as v,b as T,d as k}from"./index-BhsHZCtg.js";import{a as F}from"./ShortcutConfig-CNB-8NLK.js";import{F as D,a as R}from"./FuzzySearchHelpers-xz3AmAn2.js";import"./react-vendor-P8ZuH1e3.js";import"./monaco-editor-C1KnpKkb.js";function L(){const a=[],c=F(),d=c.length;for(let i=0;i<d;i++){const n=c[i];a.push({id:n.action,label:n.name,category:n.category,keybinding:n.shortcut,action:n.action})}const g=[{id:"command-palette",label:"Command Palette",category:"View",action:"command-palette"},{id:"quick-open",label:"Quick Open File",category:"File",action:"quick-open"},{id:"compare-files",label:"Compare Files",category:"Edit",action:"compare-files"},{id:"snippet-manager",label:"Snippet Manager",category:"Edit",action:"snippet-manager"},{id:"toggle-terminal",label:"Toggle Terminal",category:"View",action:"toggle-terminal"},{id:"open-folder",label:"Open Folder as Workspace",category:"File",action:"open-folder"},{id:"save-copy-as",label:"Save Copy As...",category:"File",action:"save-copy-as"},{id:"save-all",label:"Save All",category:"File",action:"save-all"},{id:"reload-from-disk",label:"Reload from Disk",category:"File",action:"reload-from-disk"},{id:"rename-file",label:"Rename File",category:"File",action:"rename-file"},{id:"close-all",label:"Close All Tabs",category:"File",action:"close-all"},{id:"close-others",label:"Close Other Tabs",category:"File",action:"close-others"},{id:"close-unchanged",label:"Close Unchanged Tabs",category:"File",action:"close-unchanged"},{id:"pin-tab",label:"Pin/Unpin Tab",category:"File",action:"pin-tab"},{id:"incremental-search",label:"Incremental Search",category:"Search",action:"incremental-search"},{id:"find-char-in-range",label:"Find Characters in Range",category:"Search",action:"find-char-in-range"},{id:"show-whitespace",label:"Toggle Show Whitespace",category:"View",action:"show-whitespace"},{id:"show-eol",label:"Toggle Show EOL",category:"View",action:"show-eol"},{id:"toggle-minimap",label:"Toggle Minimap",category:"View",action:"toggle-minimap"},{id:"show-line-numbers",label:"Toggle Line Numbers",category:"View",action:"show-line-numbers"},{id:"indent-guide",label:"Toggle Indent Guides",category:"View",action:"indent-guide"},{id:"distraction-free",label:"Distraction Free Mode",category:"View",action:"distraction-free"},{id:"split-right",label:"Split Editor Right",category:"View",action:"split-right"},{id:"split-down",label:"Split Editor Down",category:"View",action:"split-down"},{id:"close-split",label:"Close Split",category:"View",action:"close-split"},{id:"show-summary",label:"Summary",category:"View",action:"show-summary"},{id:"show-doc-list",label:"Document List",category:"View",action:"show-doc-list"},{id:"show-function-list",label:"Function List",category:"View",action:"show-function-list"},{id:"show-project-panel",label:"Project Panel",category:"View",action:"show-project-panel"},{id:"clipboard-history",label:"Clipboard History",category:"Edit",action:"clipboard-history"},{id:"char-panel",label:"Character Panel",category:"Edit",action:"char-panel"},{id:"run-command",label:"Run Command...",category:"Run",action:"run-command"},{id:"search-google",label:"Search on Google",category:"Run",action:"search-google"},{id:"search-wikipedia",label:"Search on Wikipedia",category:"Run",action:"search-wikipedia"},{id:"save-session",label:"Save Session",category:"File",action:"save-session"},{id:"load-session",label:"Load Session",category:"File",action:"load-session"},{id:"about",label:"About Notemac++",category:"Help",action:"about"},{id:"uppercase",label:"UPPERCASE",category:"Edit",action:"uppercase"},{id:"lowercase",label:"lowercase",category:"Edit",action:"lowercase"},{id:"titlecase",label:"Title Case",category:"Edit",action:"titlecase"},{id:"sort-asc",label:"Sort Lines Ascending",category:"Edit",action:"sort-asc"},{id:"sort-desc",label:"Sort Lines Descending",category:"Edit",action:"sort-desc"},{id:"remove-duplicates",label:"Remove Duplicate Lines",category:"Edit",action:"remove-duplicates"},{id:"trim-trailing",label:"Trim Trailing Spaces",category:"Edit",action:"trim-trailing"},{id:"trim-leading",label:"Trim Leading Spaces",category:"Edit",action:"trim-leading"},{id:"join-lines",label:"Join Lines",category:"Edit",action:"join-lines"},{id:"split-lines",label:"Split Lines",category:"Edit",action:"split-lines"},{id:"reverse-lines",label:"Reverse Line Order",category:"Edit",action:"reverse-lines"},{id:"base64-encode",label:"Base64 Encode",category:"Edit",action:"base64-encode"},{id:"base64-decode",label:"Base64 Decode",category:"Edit",action:"base64-decode"},{id:"url-encode",label:"URL Encode",category:"Edit",action:"url-encode"},{id:"url-decode",label:"URL Decode",category:"Edit",action:"url-decode"},{id:"show-git-panel",label:"Source Control Panel",category:"Git",action:"show-git-panel"},{id:"clone-repository",label:"Clone Repository",category:"Git",action:"clone-repository"},{id:"git-settings",label:"Git Settings",category:"Git",action:"git-settings"},{id:"ai-chat",label:"AI Chat Panel",category:"AI",action:"ai-chat"},{id:"ai-explain",label:"AI: Explain Code",category:"AI",action:"ai-explain"},{id:"ai-refactor",label:"AI: Refactor Code",category:"AI",action:"ai-refactor"},{id:"ai-generate-tests",label:"AI: Generate Tests",category:"AI",action:"ai-generate-tests"},{id:"ai-generate-docs",label:"AI: Generate Documentation",category:"AI",action:"ai-generate-docs"},{id:"ai-fix-error",label:"AI: Fix Error",category:"AI",action:"ai-fix-error"},{id:"ai-simplify",label:"AI: Simplify Code",category:"AI",action:"ai-simplify"},{id:"ai-convert-language",label:"AI: Convert Language",category:"AI",action:"ai-convert-language"},{id:"ai-settings",label:"AI Settings",category:"AI",action:"ai-settings"},{id:"ai-toggle-inline",label:"AI: Toggle Inline Completions",category:"AI",action:"ai-toggle-inline"}],p=new Set(a.map(i=>i.action));for(const i of g)p.has(i.action)||a.push(i);return a}function G({theme:a}){const{setShowCommandPalette:c,activeTabId:d,tabs:g,zoomLevel:p}=C(),[i,n]=o.useState(""),[r,b]=o.useState(0),h=o.useRef(null),y=o.useRef(null),u=o.useMemo(()=>L(),[]),s=o.useMemo(()=>i.length===0?u:D(i,u,e=>e.label),[i,u]);o.useEffect(()=>{var e;(e=h.current)==null||e.focus()},[]),o.useEffect(()=>{b(0)},[i]),o.useEffect(()=>{if(y.current){const e=y.current.children[r];e&&e.scrollIntoView({block:"nearest"})}},[r]);const m=o.useCallback(e=>{c(!1),A(e.action,d,g,p)},[d,g,p]),w=o.useCallback(e=>{e.key==="ArrowDown"?(e.preventDefault(),b(l=>Math.min(l+1,s.length-1))):e.key==="ArrowUp"?(e.preventDefault(),b(l=>Math.max(l-1,0))):e.key==="Enter"?(e.preventDefault(),s[r]&&m(s[r])):e.key==="Escape"&&(e.preventDefault(),c(!1))},[s,r,m]),E=e=>{if(i.length===0)return e.label;const l=R(i,e.label);return l.match?e.label.split("").map((S,f)=>{const x=l.indices.includes(f);return t.jsx("span",{style:{fontWeight:x?700:400,color:x?a.accent:"inherit"},children:S},f)}):e.label};return t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.4)",zIndex:v,display:"flex",justifyContent:"center",paddingTop:I},onClick:()=>c(!1),children:t.jsxs("div",{style:{width:k,maxHeight:T,backgroundColor:a.bgSecondary,border:`1px solid ${a.border}`,borderRadius:8,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",overflow:"hidden",alignSelf:"flex-start"},onClick:e=>e.stopPropagation(),children:[t.jsx("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${a.border}`},children:t.jsx("input",{ref:h,type:"text",value:i,onChange:e=>n(e.target.value),onKeyDown:w,placeholder:"Type a command...",style:{width:"100%",padding:"8px 12px",fontSize:14,backgroundColor:a.bg,color:a.text,border:`1px solid ${a.border}`,borderRadius:4,outline:"none",fontFamily:"inherit"}})}),t.jsxs("div",{ref:y,style:{flex:1,overflowY:"auto",padding:"4px 0"},children:[s.map((e,l)=>t.jsxs("div",{onClick:()=>m(e),onMouseEnter:()=>b(l),style:{padding:"8px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",backgroundColor:l===r?a.accent+"22":"transparent",borderLeft:l===r?`2px solid ${a.accent}`:"2px solid transparent"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:10,color:a.textSecondary,minWidth:48},children:e.category}),t.jsx("span",{style:{fontSize:13,color:a.text},children:E(e)})]}),e.keybinding&&t.jsx("span",{style:{fontSize:11,color:a.textSecondary,backgroundColor:a.bg,padding:"2px 6px",borderRadius:3,fontFamily:"monospace"},children:e.keybinding})]},e.id)),s.length===0&&t.jsx("div",{style:{padding:"20px 16px",textAlign:"center",color:a.textSecondary,fontSize:13},children:"No matching commands"})]})]})})}export{G as CommandPaletteViewPresenter};
