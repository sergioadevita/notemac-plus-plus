import{u as m,r as t,j as r}from"./index-De9zKBtm.js";import"./react-vendor-P8ZuH1e3.js";import"./monaco-editor-BYMRfcD5.js";function C({theme:o}){const{setShowRunCommand:i}=m(),[d,g]=t.useState(""),[l,a]=t.useState(""),[s,c]=t.useState(!1),u=t.useRef(null);t.useEffect(()=>{var e;(e=u.current)==null||e.focus()},[]);const p=async()=>{var e,x;if(d.trim()){if(c(!0),a(""),window.electronAPI)try{const n=await((x=(e=window.electronAPI).runCommand)==null?void 0:x.call(e,d));a(n&&(n.stdout||n.stderr)||"Command executed.")}catch(n){a(`Error: ${n instanceof Error?n.message:String(n)}`)}else a(`Run command is only available in the desktop version.
In the web version, you can open a terminal separately.`);c(!1)}};return r.jsx("div",{className:"dialog-overlay",onClick:()=>i(!1),children:r.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":"run-command-title",onClick:e=>e.stopPropagation(),style:{backgroundColor:o.bgSecondary,border:`1px solid ${o.border}`,borderRadius:8,padding:20,width:500,boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[r.jsx("h3",{id:"run-command-title",style:{color:o.text,fontSize:16,marginBottom:12,fontWeight:600},children:"Run Command"}),r.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[r.jsx("input",{ref:u,type:"text",value:d,onChange:e=>g(e.target.value),onKeyDown:e=>{e.key==="Enter"&&p(),e.key==="Escape"&&i(!1)},placeholder:"Enter command to run...",style:{flex:1,height:32,backgroundColor:o.bg,color:o.text,border:`1px solid ${o.border}`,borderRadius:6,padding:"0 12px",fontSize:14,fontFamily:"monospace"}}),r.jsx("button",{onClick:p,disabled:s,style:{backgroundColor:o.accent,color:o.accentText,border:"none",borderRadius:6,padding:"0 20px",cursor:s?"wait":"pointer",fontSize:13,fontWeight:600},children:s?"Running...":"Run"})]}),l&&r.jsx("pre",{style:{backgroundColor:o.bg,color:o.text,padding:12,borderRadius:6,border:`1px solid ${o.border}`,fontSize:12,fontFamily:"monospace",maxHeight:200,overflowY:"auto",whiteSpace:"pre-wrap",wordBreak:"break-all",margin:0},children:l}),r.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:r.jsx("button",{onClick:()=>i(!1),style:{backgroundColor:"transparent",color:o.textSecondary,border:`1px solid ${o.border}`,borderRadius:6,padding:"6px 16px",cursor:"pointer",fontSize:13},children:"Close"})})]})})}export{C as RunCommandDialog};
