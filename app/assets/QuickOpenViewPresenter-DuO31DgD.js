import{u as C,r,j as s,U as v,b as w,d as D,e as I}from"./index-Dwm8dw8C.js";import{F as _,a as A}from"./FuzzySearchHelpers-xz3AmAn2.js";import"./react-vendor-P8ZuH1e3.js";import"./monaco-editor-BYMRfcD5.js";function L({theme:n}){const{setShowQuickOpen:p,tabs:g,recentFiles:f,setActiveTab:j}=C(),[a,S]=r.useState(""),[l,d]=r.useState(0),b=r.useRef(null),u=r.useRef(null),x=r.useMemo(()=>{const e=[],t=new Set;for(const o of g){const i=o.path||o.name;t.has(i)||(t.add(i),e.push({id:o.id,name:o.name,path:o.path,isOpen:!0,isModified:o.isModified}))}if(f)for(const o of f){const i=o.path||o.name;t.has(i)||(t.add(i),e.push({id:i,name:o.name,path:o.path,isOpen:!1,isModified:!1}))}return e},[g,f]),c=r.useMemo(()=>a.length===0?x:_(a,x,e=>e.name+(e.path?" "+e.path:"")),[a,x]);r.useEffect(()=>{var e;(e=b.current)==null||e.focus()},[]),r.useEffect(()=>{d(0)},[a]),r.useEffect(()=>{if(u.current){const e=u.current.children[l];e&&e.scrollIntoView({block:"nearest"})}},[l]);const h=r.useCallback(e=>{p(!1),e.isOpen&&j(e.id)},[]),M=r.useCallback(e=>{e.key==="ArrowDown"?(e.preventDefault(),d(t=>Math.min(t+1,c.length-1))):e.key==="ArrowUp"?(e.preventDefault(),d(t=>Math.max(t-1,0))):e.key==="Enter"?(e.preventDefault(),c[l]&&h(c[l])):e.key==="Escape"&&(e.preventDefault(),p(!1))},[c,l,h]),k=e=>{if(a.length===0)return e.name;const t=A(a,e.name);return t.match?e.name.split("").map((i,y)=>{const m=t.indices.includes(y);return s.jsx("span",{style:{fontWeight:m?700:400,color:m?n.accent:"inherit"},children:i},`char-${y}-${i}`)}):e.name},E=e=>{var i;const t=((i=e.split(".").pop())==null?void 0:i.toLowerCase())||"";return{ts:"ðŸ“˜",tsx:"ðŸ“˜",js:"ðŸ“’",jsx:"ðŸ“’",py:"ðŸ",rs:"ðŸ¦€",go:"ðŸ”µ",html:"ðŸŒ",css:"ðŸŽ¨",json:"ðŸ“‹",md:"ðŸ“",txt:"ðŸ“„"}[t]||"ðŸ“„"};return s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.4)",zIndex:w,display:"flex",justifyContent:"center",paddingTop:v},onClick:()=>p(!1),children:s.jsxs("div",{style:{width:I,maxHeight:D,backgroundColor:n.bgSecondary,border:`1px solid ${n.border}`,borderRadius:8,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",overflow:"hidden",alignSelf:"flex-start"},onClick:e=>e.stopPropagation(),children:[s.jsx("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${n.border}`},children:s.jsx("input",{ref:b,type:"text",value:a,onChange:e=>S(e.target.value),onKeyDown:M,placeholder:"Search files by name...",style:{width:"100%",padding:"8px 12px",fontSize:14,backgroundColor:n.bg,color:n.text,border:`1px solid ${n.border}`,borderRadius:4,outline:"none",fontFamily:"inherit"}})}),s.jsxs("div",{ref:u,style:{flex:1,overflowY:"auto",padding:"4px 0"},children:[c.map((e,t)=>s.jsxs("div",{onClick:()=>h(e),onMouseEnter:()=>d(t),style:{padding:"8px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",backgroundColor:t===l?n.accent+"22":"transparent",borderLeft:t===l?`2px solid ${n.accent}`:"2px solid transparent"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("span",{style:{fontSize:14},children:E(e.name)}),s.jsxs("span",{style:{fontSize:13,color:n.text},children:[k(e),e.isModified&&s.jsx("span",{style:{color:n.accent,marginLeft:4},children:"â€¢"})]}),e.path&&s.jsx("span",{style:{fontSize:11,color:n.textSecondary,marginLeft:4},children:e.path})]}),e.isOpen&&s.jsx("span",{style:{fontSize:10,color:n.textSecondary,backgroundColor:n.bg,padding:"2px 6px",borderRadius:3},children:"open"})]},e.id)),c.length===0&&s.jsx("div",{style:{padding:"20px 16px",textAlign:"center",color:n.textSecondary,fontSize:13},children:"No matching files"})]})]})})}export{L as QuickOpenViewPresenter};
