import{u as R,r as i,a as m,j as e}from"./index-BxO2YTdS.js";import"./react-vendor-P8ZuH1e3.js";import"./monaco-editor-C1KnpKkb.js";function T(l){return i.useMemo(()=>({inputField:{height:28,backgroundColor:l.bg,color:l.text,border:`1px solid ${l.border}`,borderRadius:4,padding:"0 8px",fontSize:13,width:80},dialogContainer:{backgroundColor:l.bgSecondary,border:`1px solid ${l.border}`,borderRadius:8,padding:20,width:450,maxHeight:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},dialogTitle:{color:l.text,fontSize:16,marginBottom:12,fontWeight:600},rangeInputContainer:{display:"flex",alignItems:"center",gap:8,marginBottom:12},rangeLabel:{fontSize:13,color:l.textSecondary},findButton:{backgroundColor:l.accent,color:l.accentText,border:"none",borderRadius:6,padding:"0 16px",height:28,cursor:"pointer",fontSize:13,fontWeight:600},helperText:{fontSize:12,color:l.textMuted,marginBottom:8},resultsContainer:{flex:1,overflowY:"auto",backgroundColor:l.bg,border:`1px solid ${l.border}`,borderRadius:4,maxHeight:300},table:{width:"100%",borderCollapse:"collapse",fontSize:12},tableHeaderRow:{backgroundColor:l.bgTertiary},tableHeaderCell:{padding:"4px 8px",textAlign:"left",color:l.textSecondary},tableBodyRow:r=>({borderTop:`1px solid ${l.border}`,cursor:r?"pointer":"default"}),tableCell:{padding:"3px 8px",color:l.text},tableCellAccent:{padding:"3px 8px",color:l.accent,fontFamily:"monospace"},tableCellMuted:{padding:"3px 8px",color:l.textMuted,fontFamily:"monospace"},resultsSummary:{fontSize:12,color:l.textMuted,marginTop:8},buttonContainer:{display:"flex",justifyContent:"flex-end",marginTop:12},closeButton:{backgroundColor:"transparent",color:l.textSecondary,border:`1px solid ${l.border}`,borderRadius:6,padding:"6px 16px",cursor:"pointer",fontSize:13}}),[l])}function F({theme:l}){const{setShowCharInRange:r,tabs:C,activeTabId:y}=R(),[u,f]=i.useState("0"),[x,j]=i.useState("127"),[s,S]=i.useState([]),p=i.useRef(null),t=T(l);m(p,!0,()=>r(!1));const v=()=>{const n=C.find(o=>o.id===y);if(!n)return;const g=parseInt(u),b=parseInt(x);if(isNaN(g)||isNaN(b))return;const h=[],d=n.content.split(`
`);for(let o=0;o<d.length;o++)for(let a=0;a<d[o].length;a++){const c=d[o].charCodeAt(a);c>=g&&c<=b&&h.push({line:o+1,col:a+1,char:d[o][a],code:c})}S(h.slice(0,500))};return e.jsx("div",{className:"dialog-overlay",onClick:()=>r(!1),children:e.jsxs("div",{ref:p,role:"dialog","aria-modal":"true","aria-labelledby":"char-range-title",onClick:n=>n.stopPropagation(),style:t.dialogContainer,children:[e.jsx("h3",{id:"char-range-title",style:t.dialogTitle,children:"Find Characters in Range"}),e.jsxs("div",{style:t.rangeInputContainer,children:[e.jsx("span",{style:t.rangeLabel,children:"From:"}),e.jsx("input",{type:"number",value:u,onChange:n=>f(n.target.value),style:t.inputField}),e.jsx("span",{style:t.rangeLabel,children:"To:"}),e.jsx("input",{type:"number",value:x,onChange:n=>j(n.target.value),style:t.inputField}),e.jsx("button",{onClick:v,style:t.findButton,children:"Find"})]}),e.jsx("div",{style:t.helperText,children:"Common ranges: ASCII (0-127), Non-ASCII (128-65535), Control (0-31)"}),s.length>0&&e.jsx("div",{style:t.resultsContainer,children:e.jsxs("table",{style:t.table,children:[e.jsx("thead",{children:e.jsxs("tr",{style:t.tableHeaderRow,children:[e.jsx("th",{style:t.tableHeaderCell,children:"Line"}),e.jsx("th",{style:t.tableHeaderCell,children:"Col"}),e.jsx("th",{style:t.tableHeaderCell,children:"Char"}),e.jsx("th",{style:t.tableHeaderCell,children:"Code"}),e.jsx("th",{style:t.tableHeaderCell,children:"Hex"})]})}),e.jsx("tbody",{children:s.map(n=>e.jsxs("tr",{style:t.tableBodyRow(!0),onClick:()=>{document.dispatchEvent(new CustomEvent("notemac-goto-line",{detail:{line:n.line}}))},children:[e.jsx("td",{style:{...t.tableCell,cursor:"pointer"},children:n.line}),e.jsx("td",{style:t.tableCell,children:n.col}),e.jsx("td",{style:t.tableCellAccent,children:n.code<32?"â–¡":n.char}),e.jsx("td",{style:t.tableCell,children:n.code}),e.jsxs("td",{style:t.tableCellMuted,children:["0x",n.code.toString(16).toUpperCase()]})]},`char-${n.line}-${n.col}-${n.char}`))})]})}),e.jsx("div",{style:t.resultsSummary,children:s.length>0?`${s.length} characters found`:"Enter a range and click Find"}),e.jsx("div",{style:t.buttonContainer,children:e.jsx("button",{onClick:()=>r(!1),style:t.closeButton,children:"Close"})})]})})}export{F as CharInRangeDialog};
