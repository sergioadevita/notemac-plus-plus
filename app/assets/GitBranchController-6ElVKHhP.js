const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./GitStatusController-CrQX4KYi.js","./index-D4hoCMq2.js","./react-vendor-P8ZuH1e3.js","./monaco-editor-BYMRfcD5.js","./monaco-editor-C3yYqDe4.css","./index-CMGmaL8j.css","./GitLogController-DVAtUBfz.js"])))=>i.map(i=>d[i]);
import{_ as f}from"./monaco-editor-BYMRfcD5.js";import{F as c,q as s,J as u,D as p,N as E,u as B}from"./index-D4hoCMq2.js";import"./react-vendor-P8ZuH1e3.js";function m(){return B.getState()}async function _(r){const e=m(),a=c();if(a!==null)try{e.SetGitOperationError(null),await s.checkout({fs:a,dir:u(),ref:r}),e.SetCurrentBranch(r);const{RefreshGitStatus:t}=await f(async()=>{const{RefreshGitStatus:n}=await import("./GitStatusController-CrQX4KYi.js");return{RefreshGitStatus:n}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),{FetchCommitLog:o}=await f(async()=>{const{FetchCommitLog:n}=await import("./GitLogController-DVAtUBfz.js");return{FetchCommitLog:n}},__vite__mapDeps([6,1,2,3,4,5]),import.meta.url);await t(),await o(),p(E.GIT_BRANCH_CHANGED,{branch:r})}catch(t){e.SetGitOperationError(t instanceof Error?t.message:String(t))}}async function y(r,e=!0){const a=m(),t=c();if(t!==null)try{a.SetGitOperationError(null),await s.branch({fs:t,dir:u(),ref:r}),e?await _(r):await S()}catch(o){a.SetGitOperationError(o instanceof Error?o.message:String(o))}}async function C(r){const e=m(),a=c();if(a!==null)try{e.SetGitOperationError(null),await s.deleteBranch({fs:a,dir:u(),ref:r}),await S()}catch(t){e.SetGitOperationError(t instanceof Error?t.message:String(t))}}async function S(){const r=m(),e=c();if(e!==null)try{const a=u(),t=await s.listBranches({fs:e,dir:a}),o=r.currentBranch,n=t.map(i=>({name:i,isRemote:!1,isCurrentBranch:i===o,lastCommitOid:""}));try{const i=await s.listBranches({fs:e,dir:a,remote:"origin"});for(const l of i)n.push({name:`origin/${l}`,isRemote:!0,isCurrentBranch:!1,lastCommitOid:""})}catch{}r.SetBranches(n);try{const l=(await s.listRemotes({fs:e,dir:a})).map(h=>({name:h.remote,url:h.url}));r.SetRemotes(l)}catch{r.SetRemotes([])}}catch{}}export{_ as CheckoutBranch,y as CreateBranch,C as DeleteBranch,S as RefreshBranches};
