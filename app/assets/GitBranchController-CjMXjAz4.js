const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GitStatusController-Cxx7qoDh.js","assets/index-DKn5mDFJ.js","assets/react-vendor-P8ZuH1e3.js","assets/monaco-editor-C1KnpKkb.js","assets/monaco-editor-DyN27ZSr.css","assets/index-BEzU1RrQ.css","assets/GitLogController-BPgDBoIr.js"])))=>i.map(i=>d[i]);
import{_ as l}from"./monaco-editor-C1KnpKkb.js";import{z as c,o as s,B as u,D as B,N as E,u as p}from"./index-DKn5mDFJ.js";import"./react-vendor-P8ZuH1e3.js";function m(){return p.getState()}async function _(r){const e=m(),a=c();if(a!==null)try{e.SetGitOperationError(null),await s.checkout({fs:a,dir:u(),ref:r}),e.SetCurrentBranch(r);const{RefreshGitStatus:t}=await l(async()=>{const{RefreshGitStatus:o}=await import("./GitStatusController-Cxx7qoDh.js");return{RefreshGitStatus:o}},__vite__mapDeps([0,1,2,3,4,5])),{FetchCommitLog:n}=await l(async()=>{const{FetchCommitLog:o}=await import("./GitLogController-BPgDBoIr.js");return{FetchCommitLog:o}},__vite__mapDeps([6,1,2,3,4,5]));await t(),await n(),B(E.GIT_BRANCH_CHANGED,{branch:r})}catch(t){e.SetGitOperationError(t instanceof Error?t.message:String(t))}}async function y(r,e=!0){const a=m(),t=c();if(t!==null)try{a.SetGitOperationError(null),await s.branch({fs:t,dir:u(),ref:r}),e?await _(r):await S()}catch(n){a.SetGitOperationError(n instanceof Error?n.message:String(n))}}async function C(r){const e=m(),a=c();if(a!==null)try{e.SetGitOperationError(null),await s.deleteBranch({fs:a,dir:u(),ref:r}),await S()}catch(t){e.SetGitOperationError(t instanceof Error?t.message:String(t))}}async function S(){const r=m(),e=c();if(e!==null)try{const a=u(),t=await s.listBranches({fs:e,dir:a}),n=r.currentBranch,o=t.map(i=>({name:i,isRemote:!1,isCurrentBranch:i===n,lastCommitOid:""}));try{const i=await s.listBranches({fs:e,dir:a,remote:"origin"});for(const h of i)o.push({name:`origin/${h}`,isRemote:!0,isCurrentBranch:!1,lastCommitOid:""})}catch{}r.SetBranches(o);try{const h=(await s.listRemotes({fs:e,dir:a})).map(f=>({name:f.remote,url:f.url}));r.SetRemotes(h)}catch{r.SetRemotes([])}}catch{}}export{_ as CheckoutBranch,y as CreateBranch,C as DeleteBranch,S as RefreshBranches};
