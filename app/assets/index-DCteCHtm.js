const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GitPanelViewPresenter-59KPzuKZ.js","assets/react-vendor-P8ZuH1e3.js","assets/monaco-editor-C1KnpKkb.js","assets/monaco-editor-DyN27ZSr.css","assets/AIChatPanelViewPresenter-BKNEFjbT.js","assets/SettingsDialogViewPresenter-C_j0QCRF.js","assets/GoToLineDialogViewPresenter-CVvkqqdF.js","assets/AboutDialogViewPresenter-D9Ndo33r.js","assets/RunCommandDialogViewPresenter-B02qNzUA.js","assets/ColumnEditorDialogViewPresenter-B3D7d_kq.js","assets/SummaryDialogViewPresenter-FgpLPeRF.js","assets/CharInRangeDialogViewPresenter-C_A47Xyl.js","assets/ShortcutMapperDialogViewPresenter-BStmJtPp.js","assets/ShortcutConfig-CNB-8NLK.js","assets/CommandPaletteViewPresenter-Dc1j_sei.js","assets/FuzzySearchHelpers-xz3AmAn2.js","assets/QuickOpenViewPresenter-CtxwNbRR.js","assets/DiffViewerViewPresenter-BpF1wQme.js","assets/SnippetManagerViewPresenter-CH-qWYwm.js","assets/TerminalPanelViewPresenter-DeRGdjlz.js","assets/CloneRepositoryViewPresenter-BkaXjiPh.js","assets/GitSettingsViewPresenter-C_8u8XhU.js","assets/AISettingsViewPresenter-DykWXR0r.js"])))=>i.map(i=>d[i]);
import{r as Bi,g as Yn,a as Lp,c as Ai,b as $p}from"./react-vendor-P8ZuH1e3.js";import{_ as Rt}from"./monaco-editor-C1KnpKkb.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function n(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(c){if(c.ep)return;c.ep=!0;const u=n(c);fetch(c.href,u)}})();var da={exports:{}},Nn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fl;function Np(){if(Fl)return Nn;Fl=1;var e=Bi(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,c=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function p(d,h,S){var x,_={},R=null,y=null;S!==void 0&&(R=""+S),h.key!==void 0&&(R=""+h.key),h.ref!==void 0&&(y=h.ref);for(x in h)s.call(h,x)&&!u.hasOwnProperty(x)&&(_[x]=h[x]);if(d&&d.defaultProps)for(x in h=d.defaultProps,h)_[x]===void 0&&(_[x]=h[x]);return{$$typeof:r,type:d,key:R,ref:y,props:_,_owner:c.current}}return Nn.Fragment=n,Nn.jsx=p,Nn.jsxs=p,Nn}var Dl;function Up(){return Dl||(Dl=1,da.exports=Np()),da.exports}var C=Up(),ve=Bi();const kt=Yn(ve);var pi={},Ll;function zp(){if(Ll)return pi;Ll=1;var e=Lp();return pi.createRoot=e.createRoot,pi.hydrateRoot=e.hydrateRoot,pi}var Gp=zp();const Hp=Yn(Gp),qp={},$l=e=>{let r;const n=new Set,s=(x,_)=>{const R=typeof x=="function"?x(r):x;if(!Object.is(R,r)){const y=r;r=_??(typeof R!="object"||R===null)?R:Object.assign({},r,R),n.forEach(j=>j(r,y))}},c=()=>r,h={setState:s,getState:c,getInitialState:()=>S,subscribe:x=>(n.add(x),()=>n.delete(x)),destroy:()=>{n.clear()}},S=r=e(s,c,h);return h},Wp=e=>e?$l(e):$l;var ha={exports:{}},pa={},ga={exports:{}},ma={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nl;function Vp(){if(Nl)return ma;Nl=1;var e=Bi();function r(_,R){return _===R&&(_!==0||1/_===1/R)||_!==_&&R!==R}var n=typeof Object.is=="function"?Object.is:r,s=e.useState,c=e.useEffect,u=e.useLayoutEffect,p=e.useDebugValue;function d(_,R){var y=R(),j=s({inst:{value:y,getSnapshot:R}}),X=j[0].inst,L=j[1];return u(function(){X.value=y,X.getSnapshot=R,h(X)&&L({inst:X})},[_,y,R]),c(function(){return h(X)&&L({inst:X}),_(function(){h(X)&&L({inst:X})})},[_]),p(y),y}function h(_){var R=_.getSnapshot;_=_.value;try{var y=R();return!n(_,y)}catch{return!0}}function S(_,R){return R()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:d;return ma.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:x,ma}var Ul;function Zp(){return Ul||(Ul=1,ga.exports=Vp()),ga.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl;function Kp(){if(zl)return pa;zl=1;var e=Bi(),r=Zp();function n(S,x){return S===x&&(S!==0||1/S===1/x)||S!==S&&x!==x}var s=typeof Object.is=="function"?Object.is:n,c=r.useSyncExternalStore,u=e.useRef,p=e.useEffect,d=e.useMemo,h=e.useDebugValue;return pa.useSyncExternalStoreWithSelector=function(S,x,_,R,y){var j=u(null);if(j.current===null){var X={hasValue:!1,value:null};j.current=X}else X=j.current;j=d(function(){function F(Z){if(!N){if(N=!0,G=Z,Z=R(Z),y!==void 0&&X.hasValue){var z=X.value;if(y(z,Z))return W=z}return W=Z}if(z=W,s(G,Z))return z;var B=R(Z);return y!==void 0&&y(z,B)?(G=Z,z):(G=Z,W=B)}var N=!1,G,W,ne=_===void 0?null:_;return[function(){return F(x())},ne===null?void 0:function(){return F(ne())}]},[x,_,R,y]);var L=c(S,j[0],j[1]);return p(function(){X.hasValue=!0,X.value=L},[L]),h(L),L},pa}var Gl;function Xp(){return Gl||(Gl=1,ha.exports=Kp()),ha.exports}var Yp=Xp();const Jp=Yn(Yp),wd={},{useDebugValue:Qp}=kt,{useSyncExternalStoreWithSelector:eg}=Jp;let Hl=!1;const tg=e=>e;function rg(e,r=tg,n){(wd?"production":void 0)!=="production"&&n&&!Hl&&(Hl=!0);const s=eg(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,n);return Qp(s),s}const ng=e=>{const r=typeof e=="function"?Wp(e):e,n=(s,c)=>rg(r,s,c);return Object.assign(n,r),n},ig=e=>ng;var yd=Symbol.for("immer-nothing"),ql=Symbol.for("immer-draftable"),Xt=Symbol.for("immer-state");function sr(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Vn=Object.getPrototypeOf;function dn(e){return!!e&&!!e[Xt]}function Gr(e){var r;return e?bd(e)||Array.isArray(e)||!!e[ql]||!!((r=e.constructor)!=null&&r[ql])||Jn(e)||Fi(e):!1}var ag=Object.prototype.constructor.toString(),Wl=new WeakMap;function bd(e){if(!e||typeof e!="object")return!1;const r=Object.getPrototypeOf(e);if(r===null||r===Object.prototype)return!0;const n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let s=Wl.get(n);return s===void 0&&(s=Function.toString.call(n),Wl.set(n,s)),s===ag}function Ii(e,r,n=!0){ji(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(c=>{r(c,e[c],e)}):e.forEach((s,c)=>r(c,s,e))}function ji(e){const r=e[Xt];return r?r.type_:Array.isArray(e)?1:Jn(e)?2:Fi(e)?3:0}function fs(e,r){return ji(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function vd(e,r,n){const s=ji(e);s===2?e.set(r,n):s===3?e.add(n):e[r]=n}function og(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function Jn(e){return e instanceof Map}function Fi(e){return e instanceof Set}function zr(e){return e.copy_||e.base_}function ds(e,r){if(Jn(e))return new Map(e);if(Fi(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=bd(e);if(r===!0||r==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(e);delete s[Xt];let c=Reflect.ownKeys(s);for(let u=0;u<c.length;u++){const p=c[u],d=s[p];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(s[p]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[p]})}return Object.create(Vn(e),s)}else{const s=Vn(e);if(s!==null&&n)return{...e};const c=Object.create(s);return Object.assign(c,e)}}function ws(e,r=!1){return Di(e)||dn(e)||!Gr(e)||(ji(e)>1&&Object.defineProperties(e,{set:gi,add:gi,clear:gi,delete:gi}),Object.freeze(e),r&&Object.values(e).forEach(n=>ws(n,!0))),e}function sg(){sr(2)}var gi={value:sg};function Di(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var cg={};function Hr(e){const r=cg[e];return r||sr(0,e),r}var Zn;function xd(){return Zn}function lg(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Vl(e,r){r&&(Hr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function hs(e){ps(e),e.drafts_.forEach(ug),e.drafts_=null}function ps(e){e===Zn&&(Zn=e.parent_)}function Zl(e){return Zn=lg(Zn,e)}function ug(e){const r=e[Xt];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function Kl(e,r){r.unfinalizedDrafts_=r.drafts_.length;const n=r.drafts_[0];return e!==void 0&&e!==n?(n[Xt].modified_&&(hs(r),sr(4)),Gr(e)&&(e=Ci(r,e),r.parent_||Ti(r,e)),r.patches_&&Hr("Patches").generateReplacementPatches_(n[Xt].base_,e,r.patches_,r.inversePatches_)):e=Ci(r,n,[]),hs(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==yd?e:void 0}function Ci(e,r,n){if(Di(r))return r;const s=e.immer_.shouldUseStrictIteration(),c=r[Xt];if(!c)return Ii(r,(u,p)=>Xl(e,c,r,u,p,n),s),r;if(c.scope_!==e)return r;if(!c.modified_)return Ti(e,c.base_,!0),c.base_;if(!c.finalized_){c.finalized_=!0,c.scope_.unfinalizedDrafts_--;const u=c.copy_;let p=u,d=!1;c.type_===3&&(p=new Set(u),u.clear(),d=!0),Ii(p,(h,S)=>Xl(e,c,u,h,S,n,d),s),Ti(e,u,!1),n&&e.patches_&&Hr("Patches").generatePatches_(c,n,e.patches_,e.inversePatches_)}return c.copy_}function Xl(e,r,n,s,c,u,p){if(c==null||typeof c!="object"&&!p)return;const d=Di(c);if(!(d&&!p)){if(dn(c)){const h=u&&r&&r.type_!==3&&!fs(r.assigned_,s)?u.concat(s):void 0,S=Ci(e,c,h);if(vd(n,s,S),dn(S))e.canAutoFreeze_=!1;else return}else p&&n.add(c);if(Gr(c)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||r&&r.base_&&r.base_[s]===c&&d)return;Ci(e,c),(!r||!r.scope_.parent_)&&typeof s!="symbol"&&(Jn(n)?n.has(s):Object.prototype.propertyIsEnumerable.call(n,s))&&Ti(e,c)}}}function Ti(e,r,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ws(r,n)}function fg(e,r){const n=Array.isArray(e),s={type_:n?1:0,scope_:r?r.scope_:xd(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let c=s,u=ys;n&&(c=[s],u=Kn);const{revoke:p,proxy:d}=Proxy.revocable(c,u);return s.draft_=d,s.revoke_=p,d}var ys={get(e,r){if(r===Xt)return e;const n=zr(e);if(!fs(n,r))return dg(e,n,r);const s=n[r];return e.finalized_||!Gr(s)?s:s===wa(e.base_,r)?(ya(e),e.copy_[r]=ms(s,e)):s},has(e,r){return r in zr(e)},ownKeys(e){return Reflect.ownKeys(zr(e))},set(e,r,n){const s=_d(zr(e),r);if(s!=null&&s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const c=wa(zr(e),r),u=c==null?void 0:c[Xt];if(u&&u.base_===n)return e.copy_[r]=n,e.assigned_[r]=!1,!0;if(og(n,c)&&(n!==void 0||fs(e.base_,r)))return!0;ya(e),gs(e)}return e.copy_[r]===n&&(n!==void 0||r in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=n,e.assigned_[r]=!0),!0},deleteProperty(e,r){return wa(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,ya(e),gs(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const n=zr(e),s=Reflect.getOwnPropertyDescriptor(n,r);return s&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:s.enumerable,value:n[r]}},defineProperty(){sr(11)},getPrototypeOf(e){return Vn(e.base_)},setPrototypeOf(){sr(12)}},Kn={};Ii(ys,(e,r)=>{Kn[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});Kn.deleteProperty=function(e,r){return Kn.set.call(this,e,r,void 0)};Kn.set=function(e,r,n){return ys.set.call(this,e[0],r,n,e[0])};function wa(e,r){const n=e[Xt];return(n?zr(n):e)[r]}function dg(e,r,n){var c;const s=_d(r,n);return s?"value"in s?s.value:(c=s.get)==null?void 0:c.call(e.draft_):void 0}function _d(e,r){if(!(r in e))return;let n=Vn(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,r);if(s)return s;n=Vn(n)}}function gs(e){e.modified_||(e.modified_=!0,e.parent_&&gs(e.parent_))}function ya(e){e.copy_||(e.copy_=ds(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var hg=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(r,n,s)=>{if(typeof r=="function"&&typeof n!="function"){const u=n;n=r;const p=this;return function(h=u,...S){return p.produce(h,x=>n.call(this,x,...S))}}typeof n!="function"&&sr(6),s!==void 0&&typeof s!="function"&&sr(7);let c;if(Gr(r)){const u=Zl(this),p=ms(r,void 0);let d=!0;try{c=n(p),d=!1}finally{d?hs(u):ps(u)}return Vl(u,s),Kl(c,u)}else if(!r||typeof r!="object"){if(c=n(r),c===void 0&&(c=r),c===yd&&(c=void 0),this.autoFreeze_&&ws(c,!0),s){const u=[],p=[];Hr("Patches").generateReplacementPatches_(r,c,u,p),s(u,p)}return c}else sr(1,r)},this.produceWithPatches=(r,n)=>{if(typeof r=="function")return(p,...d)=>this.produceWithPatches(p,h=>r(h,...d));let s,c;return[this.produce(r,n,(p,d)=>{s=p,c=d}),s,c]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Gr(e)||sr(8),dn(e)&&(e=pg(e));const r=Zl(this),n=ms(e,void 0);return n[Xt].isManual_=!0,ps(r),n}finishDraft(e,r){const n=e&&e[Xt];(!n||!n.isManual_)&&sr(9);const{scope_:s}=n;return Vl(s,r),Kl(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const c=r[n];if(c.path.length===0&&c.op==="replace"){e=c.value;break}}n>-1&&(r=r.slice(n+1));const s=Hr("Patches").applyPatches_;return dn(e)?s(e,r):this.produce(e,c=>s(c,r))}};function ms(e,r){const n=Jn(e)?Hr("MapSet").proxyMap_(e,r):Fi(e)?Hr("MapSet").proxySet_(e,r):fg(e,r);return(r?r.scope_:xd()).drafts_.push(n),n}function pg(e){return dn(e)||sr(10,e),Sd(e)}function Sd(e){if(!Gr(e)||Di(e))return e;const r=e[Xt];let n,s=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=ds(e,r.scope_.immer_.useStrictShallowCopy_),s=r.scope_.immer_.shouldUseStrictIteration()}else n=ds(e,!0);return Ii(n,(c,u)=>{vd(n,c,Sd(u))},s),r&&(r.finalized_=!1),n}var gg=new hg,nt=gg.produce;const mg={".js":"javascript",".jsx":"javascript",".ts":"typescript",".tsx":"typescript",".py":"python",".rb":"ruby",".go":"go",".rs":"rust",".c":"c",".h":"c",".cpp":"cpp",".cc":"cpp",".cxx":"cpp",".hpp":"cpp",".cs":"csharp",".java":"java",".swift":"swift",".kt":"kotlin",".php":"php",".html":"html",".htm":"html",".css":"css",".scss":"scss",".less":"less",".json":"json",".xml":"xml",".yaml":"yaml",".yml":"yaml",".md":"markdown",".sql":"sql",".sh":"shell",".bash":"shell",".zsh":"shell",".ps1":"powershell",".r":"r",".lua":"lua",".pl":"perl",".pm":"perl",".dart":"dart",".ex":"elixir",".exs":"elixir",".erl":"erlang",".hs":"haskell",".scala":"scala",".clj":"clojure",".coffee":"coffeescript",".bat":"bat",".cmd":"bat",".ini":"ini",".toml":"ini",".dockerfile":"dockerfile",".graphql":"graphql",".gql":"graphql",".vue":"html",".svelte":"html",".log":"plaintext",".txt":"plaintext",".env":"plaintext",".gitignore":"plaintext",".makefile":"plaintext"};function dr(e){if(!e)return"plaintext";const r=e.toLowerCase();if(r==="dockerfile")return"dockerfile";if(r==="makefile")return"makefile";if(r==="cmakelists.txt")return"cmake";const n=r.lastIndexOf(".");if(n===-1)return"plaintext";const s=r.substring(n);return mg[s]||"plaintext"}function Ar(e){const r=(e.match(/\r\n/g)||[]).length,n=(e.match(new RegExp("(?<!\\r)\\n","g"))||[]).length,s=(e.match(/\r(?!\n)/g)||[]).length;return r>=n&&r>=s?"CRLF":s>n?"CR":"LF"}function Ir(){return Math.random().toString(36).substring(2,11)+Date.now().toString(36)}const mi="SavedSnippets",wg={1:"#ff4444",2:"#44ff44",3:"#4488ff",4:"#ff44ff",5:"#ffaa00"},Yl={none:"transparent",color1:"#ff4444",color2:"#44bb44",color3:"#4488ff",color4:"#ff8800",color5:"#cc44cc"},yg=14,bg=4,vg="'SF Mono', 'Menlo', 'Monaco', 'Courier New', monospace",xg=5e3,_g="https://www.google.com/search?q=",Sg="yyyy-MM-dd HH:mm:ss",kg=20,Eg=20,Ag=50,Ig=-5,Cg=10,Tg=200,Rg=100,Og=600,wi="GitCredentials",ba="GitAuthor",va="GitSettings",yi="BrowserWorkspaces",Pg=50,kd="https://cors.isomorphic-git.org",Mg="Notemac++ User",Bg="user@notemac.app",Jl="AIProviders",ar="AICredentials",xa="AISettings",Ql="AIConversations",Ed=500,jg=8e3,Fg=.3,Dg=.7,eu=50,Lg=256,bi=24,Ub=8,zb="Iv1.CONFIGURE_YOUR_APP",$g=150,Ng=500,_a=36,Ug=100,zg=200,tu=18,Gg=32,Hg=300,Gb=560,Hb=420,qb=80,qg=4,Wg=9998,Vg=9999,Wb=1e4,Vb=2e3,Zb=5,Kb=60,Xb=3600,Yb=86400,Jb=604800,Zg=(e,r)=>({tabs:[],activeTabId:null,closedTabs:[],recentFiles:[],addTab:n=>{const s=Ir(),c={id:s,name:(n==null?void 0:n.name)||`new ${r().tabs.length+1}`,path:(n==null?void 0:n.path)||null,content:(n==null?void 0:n.content)||"",originalContent:(n==null?void 0:n.content)||"",language:(n==null?void 0:n.language)||dr((n==null?void 0:n.name)||""),encoding:(n==null?void 0:n.encoding)||"utf-8",lineEnding:(n==null?void 0:n.lineEnding)||"LF",isModified:!1,isReadOnly:(n==null?void 0:n.isReadOnly)||!1,isPinned:!1,tabColor:"none",cursorLine:1,cursorColumn:1,scrollTop:0,bookmarks:[],marks:[],hiddenLines:[],isMonitoring:!1};return e(nt(u=>{u.tabs.push(c),u.activeTabId=s})),s},closeTab:n=>{e(nt(s=>{const c=s.tabs.findIndex(u=>u.id===n);if(c!==-1&&(s.closedTabs.push({...s.tabs[c]}),s.closedTabs.length>kg&&s.closedTabs.shift(),s.tabs.splice(c,1),s.activeTabId===n))if(0<s.tabs.length){const u=Math.min(c,s.tabs.length-1);s.activeTabId=s.tabs[u].id}else s.activeTabId=null}))},closeAllTabs:()=>{const n=r().tabs;e(nt(s=>{s.closedTabs.push(...n),s.tabs=[],s.activeTabId=null}))},closeOtherTabs:n=>{e(nt(s=>{const c=s.tabs.filter(u=>u.id!==n);s.closedTabs.push(...c),s.tabs=s.tabs.filter(u=>u.id===n),s.activeTabId=n}))},closeTabsToLeft:n=>{e(nt(s=>{const c=s.tabs.findIndex(p=>p.id===n);if(0>=c)return;const u=s.tabs.splice(0,c);s.closedTabs.push(...u)}))},closeTabsToRight:n=>{e(nt(s=>{const c=s.tabs.findIndex(p=>p.id===n);if(c===-1||c>=s.tabs.length-1)return;const u=s.tabs.splice(c+1);s.closedTabs.push(...u)}))},closeUnchangedTabs:()=>{e(nt(n=>{const s=n.tabs.filter(c=>!c.isModified);n.closedTabs.push(...s),n.tabs=n.tabs.filter(c=>c.isModified),0<n.tabs.length&&!n.tabs.find(c=>c.id===n.activeTabId)?n.activeTabId=n.tabs[0].id:n.tabs.length===0&&(n.activeTabId=null)}))},closeAllButPinned:()=>{e(nt(n=>{const s=n.tabs.filter(c=>!c.isPinned);n.closedTabs.push(...s),n.tabs=n.tabs.filter(c=>c.isPinned),0<n.tabs.length&&!n.tabs.find(c=>c.id===n.activeTabId)?n.activeTabId=n.tabs[0].id:n.tabs.length===0&&(n.activeTabId=null)}))},restoreLastClosedTab:()=>{e(nt(n=>{if(n.closedTabs.length===0)return;const s=n.closedTabs.pop();s.id=Ir(),n.tabs.push(s),n.activeTabId=s.id}))},setActiveTab:n=>e({activeTabId:n}),updateTab:(n,s)=>{e(nt(c=>{const u=c.tabs.find(p=>p.id===n);u&&Object.assign(u,s)}))},updateTabContent:(n,s)=>{e(nt(c=>{const u=c.tabs.find(p=>p.id===n);u&&(u.content=s,u.isModified=s!==u.originalContent)}))},togglePinTab:n=>{e(nt(s=>{const c=s.tabs.find(u=>u.id===n);c&&(c.isPinned=!c.isPinned)}))},setTabColor:(n,s)=>{e(nt(c=>{const u=c.tabs.find(p=>p.id===n);u&&(u.tabColor=s)}))},moveTab:(n,s)=>{e(nt(c=>{const[u]=c.tabs.splice(n,1);c.tabs.splice(s,0,u)}))},nextTab:()=>{const{tabs:n,activeTabId:s}=r();if(1>=n.length)return;const u=(n.findIndex(p=>p.id===s)+1)%n.length;e({activeTabId:n[u].id})},prevTab:()=>{const{tabs:n,activeTabId:s}=r();if(1>=n.length)return;const u=(n.findIndex(p=>p.id===s)-1+n.length)%n.length;e({activeTabId:n[u].id})},goToTab:n=>{const{tabs:s}=r();0<=n&&n<s.length&&e({activeTabId:s[n].id})},moveTabForward:()=>{const{tabs:n,activeTabId:s}=r(),c=n.findIndex(u=>u.id===s);c<n.length-1&&e(nt(u=>{const[p]=u.tabs.splice(c,1);u.tabs.splice(c+1,0,p)}))},moveTabBackward:()=>{const{tabs:n,activeTabId:s}=r(),c=n.findIndex(u=>u.id===s);0<c&&e(nt(u=>{const[p]=u.tabs.splice(c,1);u.tabs.splice(c-1,0,p)}))},addRecentFile:(n,s)=>{e(nt(c=>{c.recentFiles=c.recentFiles.filter(u=>u.path!==n),c.recentFiles.unshift({path:n,name:s}),c.recentFiles.length>Eg&&c.recentFiles.pop()}))}}),Kg={query:"",replaceText:"",isRegex:!1,isCaseSensitive:!1,isWholeWord:!1,searchInSelection:!1,wrapAround:!0},Xg=(e,r)=>({showFindReplace:!1,findReplaceMode:"find",searchOptions:{...Kg},searchResults:[],showIncrementalSearch:!1,setShowFindReplace:(n,s)=>e({showFindReplace:n,findReplaceMode:s||r().findReplaceMode}),updateSearchOptions:n=>{e(s=>({searchOptions:{...s.searchOptions,...n}}))},setShowIncrementalSearch:n=>e({showIncrementalSearch:n})}),Yg=(e,r)=>({isRecordingMacro:!1,currentMacroActions:[],savedMacros:[],startRecordingMacro:()=>e({isRecordingMacro:!0,currentMacroActions:[]}),stopRecordingMacro:()=>e({isRecordingMacro:!1}),addMacroAction:n=>{r().isRecordingMacro&&e(nt(s=>{s.currentMacroActions.push(n)}))},saveMacro:n=>{const s=r().currentMacroActions;s.length!==0&&e(nt(c=>{c.savedMacros.push({id:Ir(),name:n,actions:[...s]})}))}}),Jg={theme:"dark",fontSize:yg,fontFamily:vg,tabSize:bg,insertSpaces:!0,wordWrap:!1,showWhitespace:!1,showLineNumbers:!0,showMinimap:!0,showIndentGuides:!0,showEOL:!1,showNonPrintable:!1,showWrapSymbol:!1,autoSave:!1,autoSaveDelay:xg,highlightCurrentLine:!0,matchBrackets:!0,autoCloseBrackets:!0,autoCloseQuotes:!0,autoIndent:!0,smoothScrolling:!0,cursorBlinking:"blink",cursorStyle:"line",renderWhitespace:"none",virtualSpace:!1,alwaysOnTop:!1,distractionFreeMode:!1,darkMode:!0,syncScrollVertical:!1,syncScrollHorizontal:!1,rememberLastSession:!0,searchEngine:_g,dateTimeFormat:Sg};function Qg(){return{...Jg}}const em=(e,r)=>({sidebarPanel:null,sidebarWidth:260,showStatusBar:!0,showToolbar:!0,splitView:"none",splitTabId:null,zoomLevel:0,foldAllState:!1,clipboardHistory:[],settings:Qg(),showSettings:!1,showGoToLine:!1,showAbout:!1,showRunCommand:!1,showColumnEditor:!1,showSummary:!1,showCharInRange:!1,showShortcutMapper:!1,showCommandPalette:!1,showQuickOpen:!1,showDiffViewer:!1,showSnippetManager:!1,showTerminalPanel:!1,terminalHeight:Tg,showCloneDialog:!1,showGitSettings:!1,setSidebarPanel:n=>e({sidebarPanel:n}),toggleSidebar:()=>{const n=r().sidebarPanel;e({sidebarPanel:n?null:"explorer"})},setZoomLevel:n=>e({zoomLevel:Math.max(Ig,Math.min(Cg,n))}),setSplitView:(n,s)=>e({splitView:n,splitTabId:s||null}),addClipboardEntry:n=>{e(nt(s=>{s.clipboardHistory.unshift({text:n,timestamp:Date.now()}),s.clipboardHistory.length>Ag&&s.clipboardHistory.pop()}))},updateSettings:n=>{e(nt(s=>{Object.assign(s.settings,n)}))},setShowSettings:n=>e({showSettings:n}),setShowGoToLine:n=>e({showGoToLine:n}),setShowAbout:n=>e({showAbout:n}),setShowRunCommand:n=>e({showRunCommand:n}),setShowColumnEditor:n=>e({showColumnEditor:n}),setShowSummary:n=>e({showSummary:n}),setShowCharInRange:n=>e({showCharInRange:n}),setShowShortcutMapper:n=>e({showShortcutMapper:n}),setShowCommandPalette:n=>e({showCommandPalette:n}),setShowQuickOpen:n=>e({showQuickOpen:n}),setShowDiffViewer:n=>e({showDiffViewer:n}),setShowSnippetManager:n=>e({showSnippetManager:n}),setShowTerminalPanel:n=>e({showTerminalPanel:n}),setShowCloneDialog:n=>e({showCloneDialog:n}),setShowGitSettings:n=>e({showGitSettings:n}),setTerminalHeight:n=>e({terminalHeight:Math.max(Rg,Math.min(Og,n))}),saveSession:()=>{const n=r();return{tabs:n.tabs.map(s=>({path:s.path,name:s.name,language:s.language,cursorLine:s.cursorLine,cursorColumn:s.cursorColumn,scrollTop:s.scrollTop,content:s.path?void 0:s.content})),activeTabIndex:n.tabs.findIndex(s=>s.id===n.activeTabId),sidebarPanel:n.sidebarPanel}},loadSession:n=>{var c,u;const s=n.tabs.map(p=>({id:Ir(),name:p.name,path:p.path,content:p.content||"",originalContent:p.content||"",language:p.language,encoding:"utf-8",lineEnding:"LF",isModified:!1,isReadOnly:!1,isPinned:!1,tabColor:"none",cursorLine:p.cursorLine,cursorColumn:p.cursorColumn,scrollTop:p.scrollTop,bookmarks:[],marks:[],hiddenLines:[],isMonitoring:!1}));e({tabs:s,activeTabId:((c=s[n.activeTabIndex])==null?void 0:c.id)||((u=s[0])==null?void 0:u.id)||null,sidebarPanel:n.sidebarPanel})}}),tm=e=>({fileTree:[],workspacePath:null,setFileTree:r=>e({fileTree:r}),setWorkspacePath:r=>e({workspacePath:r}),toggleTreeNode:r=>{e(nt(n=>{const s=c=>{for(const u of c){if(u.path===r)return u.isExpanded=!u.isExpanded,!0;if(u.children&&s(u.children))return!0}return!1};s(n.fileTree)}))}});function mr(e,r){try{const n=localStorage.getItem(e);return n===null?r??null:JSON.parse(n)}catch{return null}}function jt(e,r){try{localStorage.setItem(e,JSON.stringify(r))}catch{}}function rm(e){try{localStorage.removeItem(e)}catch{}}const nm=(e,r)=>({savedSnippets:[],addSnippet:n=>{e(nt(s=>{const c={...n,id:Ir()};s.savedSnippets.push(c)})),jt(mi,r().savedSnippets)},removeSnippet:n=>{e(nt(s=>{const c=s.savedSnippets.findIndex(u=>u.id===n);c!==-1&&s.savedSnippets.splice(c,1)})),jt(mi,r().savedSnippets)},updateSnippet:(n,s)=>{e(nt(c=>{const u=c.savedSnippets.find(p=>p.id===n);u&&Object.assign(u,s)})),jt(mi,r().savedSnippets)},loadSnippets:()=>{const n=mr(mi);n&&e({savedSnippets:n})}});function ru(){return{autoFetch:!0,autoFetchInterval:3e5,showUntracked:!0,showIgnored:!1,corsProxy:kd}}function nu(){return{name:Mg,email:Bg}}const im=(e,r)=>({isRepoInitialized:!1,currentBranch:"main",branches:[],remotes:[],gitStatus:null,commitLog:[],gitCredentials:null,gitAuthor:nu(),gitSettings:ru(),isBrowserWorkspace:!1,browserWorkspaces:[],isGitOperationInProgress:!1,currentGitOperation:null,gitOperationProgress:0,gitOperationError:null,SetRepoInitialized:n=>e({isRepoInitialized:n}),SetCurrentBranch:n=>e({currentBranch:n}),SetBranches:n=>e({branches:n}),SetRemotes:n=>e({remotes:n}),SetGitStatus:n=>e({gitStatus:n}),SetCommitLog:n=>e({commitLog:n}),SetGitCredentials:n=>{e({gitCredentials:n}),n!==null?jt(wi,{type:n.type,username:n.username}):jt(wi,null)},SetGitAuthor:n=>{e({gitAuthor:n}),jt(ba,n)},UpdateGitSettings:n=>{e(nt(c=>{Object.assign(c.gitSettings,n)}));const s=r().gitSettings;jt(va,s)},SetIsBrowserWorkspace:n=>e({isBrowserWorkspace:n}),AddBrowserWorkspace:n=>{e(nt(s=>{const c=s.browserWorkspaces.findIndex(u=>u.id===n.id);c!==-1?s.browserWorkspaces[c]=n:s.browserWorkspaces.push(n)})),jt(yi,r().browserWorkspaces)},RemoveBrowserWorkspace:n=>{e(nt(s=>{const c=s.browserWorkspaces.findIndex(u=>u.id===n);c!==-1&&s.browserWorkspaces.splice(c,1)})),jt(yi,r().browserWorkspaces)},SetGitOperationInProgress:n=>e({isGitOperationInProgress:n}),SetCurrentGitOperation:n=>e({currentGitOperation:n}),SetGitOperationProgress:n=>e({gitOperationProgress:n}),SetGitOperationError:n=>e({gitOperationError:n}),LoadGitState:()=>{const n=mr(wi),s=mr(ba),c=mr(va),u=mr(yi);e({gitCredentials:n||null,gitAuthor:s||nu(),gitSettings:c||ru(),browserWorkspaces:u||[]})},SaveGitState:()=>{const n=r();n.gitCredentials!==null&&jt(wi,{type:n.gitCredentials.type,username:n.gitCredentials.username}),jt(ba,n.gitAuthor),jt(va,n.gitSettings),jt(yi,n.browserWorkspaces)},GetStagedFileCount:()=>{var n;return((n=r().gitStatus)==null?void 0:n.stagedFiles.length)||0},GetChangedFileCount:()=>{const n=r().gitStatus;return n===null?0:n.stagedFiles.length+n.unstagedFiles.length+n.untrackedFiles.length}});function iu(){return{inlineCompletionEnabled:!0,inlineDebounceMs:Ed,inlineMaxTokens:Lg,chatTemperature:Dg,codeTemperature:Fg,maxContextTokens:jg,systemPrompt:"",showAiStatusIndicator:!0}}function au(){return[{id:"openai",name:"OpenAI",type:"openai",baseUrl:"https://api.openai.com",isBuiltIn:!0,models:am()},{id:"anthropic",name:"Anthropic",type:"anthropic",baseUrl:"https://api.anthropic.com",isBuiltIn:!0,models:om()},{id:"google",name:"Google AI",type:"google",baseUrl:"https://generativelanguage.googleapis.com",isBuiltIn:!0,models:sm()}]}function am(){return[{id:"gpt-4o",name:"GPT-4o",providerId:"openai",contextWindow:128e3,supportsStreaming:!0,supportsFIM:!1},{id:"gpt-4o-mini",name:"GPT-4o Mini",providerId:"openai",contextWindow:128e3,supportsStreaming:!0,supportsFIM:!1},{id:"gpt-4-turbo",name:"GPT-4 Turbo",providerId:"openai",contextWindow:128e3,supportsStreaming:!0,supportsFIM:!1},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",providerId:"openai",contextWindow:16385,supportsStreaming:!0,supportsFIM:!1},{id:"o1",name:"o1",providerId:"openai",contextWindow:2e5,supportsStreaming:!0,supportsFIM:!1},{id:"o1-mini",name:"o1-mini",providerId:"openai",contextWindow:128e3,supportsStreaming:!0,supportsFIM:!1}]}function om(){return[{id:"claude-sonnet-4-5-20250514",name:"Claude Sonnet 4.5",providerId:"anthropic",contextWindow:2e5,supportsStreaming:!0,supportsFIM:!1},{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",providerId:"anthropic",contextWindow:2e5,supportsStreaming:!0,supportsFIM:!1},{id:"claude-haiku-4-5-20251001",name:"Claude Haiku 4.5",providerId:"anthropic",contextWindow:2e5,supportsStreaming:!0,supportsFIM:!1},{id:"claude-opus-4-20250514",name:"Claude Opus 4",providerId:"anthropic",contextWindow:2e5,supportsStreaming:!0,supportsFIM:!1}]}function sm(){return[{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",providerId:"google",contextWindow:1048576,supportsStreaming:!0,supportsFIM:!1},{id:"gemini-2.0-flash-lite",name:"Gemini 2.0 Flash Lite",providerId:"google",contextWindow:1048576,supportsStreaming:!0,supportsFIM:!1},{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",providerId:"google",contextWindow:2097152,supportsStreaming:!0,supportsFIM:!1}]}function Qb(e,r,n,s){return{id:e,name:r,type:"custom",baseUrl:n,isBuiltIn:!1,models:s}}function ev(e,r,n,s=8192){return{id:e,name:r,providerId:n,contextWindow:s,supportsStreaming:!0,supportsFIM:!1}}function Li(){const e=window.electronAPI;return e==null||typeof e.safeStorageEncrypt!="function"?null:e}function cm(){return Li()!==null}async function lm(){const e=Li();if(e===null)return!1;try{return await e.isSafeStorageAvailable()}catch{return!1}}async function um(e){const r=Li();if(r===null)throw new Error("Electron safeStorage not available");return await r.safeStorageEncrypt(e)}async function fm(e){const r=Li();if(r===null)throw new Error("Electron safeStorage not available");return await r.safeStorageDecrypt(e)}const dm="NotemacKeyStore",hn="keys",Ad="NotemacCryptoKey_v1",bs="AES-GCM",hm=256,qn=12;let an=null;function vs(){return typeof crypto<"u"&&crypto.subtle!==null&&typeof crypto.subtle<"u"}function Id(){return new Promise((e,r)=>{const n=indexedDB.open(dm,1);n.onupgradeneeded=()=>{const s=n.result;s.objectStoreNames.contains(hn)||s.createObjectStore(hn,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>r(n.error)})}async function pm(){try{const e=await Id();return new Promise(r=>{const c=e.transaction(hn,"readonly").objectStore(hn).get(Ad);c.onsuccess=()=>{const u=c.result;r(u!=null?u.key:null)},c.onerror=()=>r(null)})}catch{return null}}async function gm(e){try{const r=await Id();return new Promise((n,s)=>{const c=r.transaction(hn,"readwrite");c.objectStore(hn).put({id:Ad,key:e}),c.oncomplete=()=>n(),c.onerror=()=>s(c.error)})}catch{}}async function Cd(){if(an!==null)return an;const e=await pm();if(e!==null)return an=e,an;const r=await crypto.subtle.generateKey({name:bs,length:hm},!1,["encrypt","decrypt"]);return await gm(r),an=r,an}async function mm(e){if(!vs())return e;try{const r=await Cd(),n=crypto.getRandomValues(new Uint8Array(qn)),c=new TextEncoder().encode(e),u=await crypto.subtle.encrypt({name:bs,iv:n},r,c),p=new Uint8Array(qn+u.byteLength);return p.set(n,0),p.set(new Uint8Array(u),qn),btoa(String.fromCharCode(...p))}catch{return e}}async function wm(e){if(!vs())return e;try{const r=await Cd(),n=atob(e),s=new Uint8Array(n.length);for(let h=0,S=n.length;h<S;h++)s[h]=n.charCodeAt(h);const c=s.slice(0,qn),u=s.slice(qn),p=await crypto.subtle.decrypt({name:bs,iv:c},r,u);return new TextDecoder().decode(p)}catch{return e}}const ym="SecureCred_",Ri=new Map;function Oi(e){return`${ym}${e}`}async function bm(){return cm()&&await lm()?"safeStorage":vs()?"cryptoSubtle":"none"}async function vm(e,r){return r==="safeStorage"?await um(e):r==="cryptoSubtle"?await mm(e):e}async function xm(e,r){return r==="safeStorage"?await fm(e):r==="cryptoSubtle"?await wm(e):e}function _m(e){return e.expiresAt===null?!1:Date.now()>e.expiresAt}async function Un(e,r,n){if(n===0){Ri.set(e,r);return}try{const s=await bm(),u={encrypted:await vm(r,s),method:s,storedAt:Date.now(),expiresAt:n!=null?Date.now()+n*1e3:null};localStorage.setItem(Oi(e),JSON.stringify(u))}catch{Ri.set(e,r)}}async function Sm(e){const r=Ri.get(e);if(r!==void 0)return r;try{const n=localStorage.getItem(Oi(e));if(n===null)return null;const s=JSON.parse(n);return _m(s)?(localStorage.removeItem(Oi(e)),null):await xm(s.encrypted,s.method)}catch{return null}}function Sa(e){Ri.delete(e);try{localStorage.removeItem(Oi(e))}catch{}}const km=(e,r)=>({aiEnabled:!1,activeProviderId:"openai",activeModelId:"gpt-4o-mini",providers:au(),credentials:[],aiSettings:iu(),conversations:[],activeConversationId:null,isAiStreaming:!1,aiStreamContent:"",inlineSuggestionEnabled:!0,currentInlineSuggestion:null,aiContextItems:[],commitMessageDraft:"",showAiSettings:!1,aiOperationError:null,SetAiEnabled:n=>e({aiEnabled:n}),SetActiveProvider:n=>e({activeProviderId:n}),SetActiveModel:n=>e({activeModelId:n}),SetProviders:n=>e({providers:n}),AddProvider:n=>{e(nt(s=>{const c=s.providers.findIndex(u=>u.id===n.id);c!==-1?s.providers[c]=n:s.providers.push(n)})),r().SaveAIState()},RemoveProvider:n=>{e(nt(s=>{const c=s.providers.findIndex(u=>u.id===n);c!==-1&&!s.providers[c].isBuiltIn&&s.providers.splice(c,1)})),r().SaveAIState()},SetCredentials:n=>e({credentials:n}),SetCredentialForProvider:(n,s,c)=>{e(nt(h=>{const S=h.credentials.findIndex(_=>_.providerId===n),x={providerId:n,apiKey:s,rememberKey:c};S!==-1?h.credentials[S]=x:h.credentials.push(x)}));const u=r().credentials,p=u.filter(h=>h.rememberKey).map(h=>({providerId:h.providerId,apiKey:h.apiKey,rememberKey:!0}));0<p.length?Un(ar,JSON.stringify(p),bi*3600):Sa(ar);const d=u.filter(h=>!h.rememberKey);0<d.length&&Un(ar+"_session",JSON.stringify(d),0)},RemoveCredentialForProvider:n=>{e(nt(u=>{const p=u.credentials.findIndex(d=>d.providerId===n);p!==-1&&u.credentials.splice(p,1)}));const c=r().credentials.filter(u=>u.rememberKey);0<c.length?Un(ar,JSON.stringify(c),bi*3600):Sa(ar)},UpdateAISettings:n=>{e(nt(s=>{Object.assign(s.aiSettings,n)})),jt(xa,r().aiSettings)},SetConversations:n=>e({conversations:n}),AddConversation:n=>{e(nt(s=>{s.conversations.unshift(n),eu<s.conversations.length&&(s.conversations.length=eu)})),e({activeConversationId:n.id})},RemoveConversation:n=>{e(nt(s=>{const c=s.conversations.findIndex(u=>u.id===n);c!==-1&&s.conversations.splice(c,1),n===s.activeConversationId&&(s.activeConversationId=0<s.conversations.length?s.conversations[0].id:null)}))},SetActiveConversation:n=>e({activeConversationId:n}),AddMessageToConversation:(n,s)=>{e(nt(c=>{const u=c.conversations.find(p=>p.id===n);u&&u.messages.push(s)}))},UpdateLastMessage:(n,s)=>{e(nt(c=>{const u=c.conversations.find(p=>p.id===n);if(u&&0<u.messages.length){const p=u.messages[u.messages.length-1];p.content=s}}))},SetIsAiStreaming:n=>e({isAiStreaming:n}),SetAiStreamContent:n=>e({aiStreamContent:n}),SetInlineSuggestionEnabled:n=>e({inlineSuggestionEnabled:n}),SetCurrentInlineSuggestion:n=>e({currentInlineSuggestion:n}),AddAiContextItem:n=>{e(nt(s=>{s.aiContextItems.push(n)}))},RemoveAiContextItem:n=>{e(nt(s=>{0<=n&&n<s.aiContextItems.length&&s.aiContextItems.splice(n,1)}))},ClearAiContext:()=>e({aiContextItems:[]}),SetCommitMessageDraft:n=>e({commitMessageDraft:n}),SetShowAiSettings:n=>e({showAiSettings:n}),SetAiOperationError:n=>e({aiOperationError:n}),LoadAIState:()=>{const n=mr(xa),s=mr(Jl),c=mr(Ql),u=au();let p=u;if(s!=null){const d=s.filter(h=>!h.isBuiltIn);p=[...u,...d]}Sm(ar).then(d=>{let h=[];if(d!==null)try{h=JSON.parse(d)}catch{h=[]}else{const S=mr(ar);if(S!==null&&0<S.length){h=S;const x=S.filter(_=>_.rememberKey);0<x.length&&Un(ar,JSON.stringify(x),bi*3600),rm(ar)}}e({credentials:h,aiEnabled:0<h.length})}),e({aiSettings:n||iu(),credentials:[],providers:p,conversations:c||[],aiEnabled:!1})},SaveAIState:()=>{const n=r();jt(xa,n.aiSettings);const s=n.providers.filter(u=>!u.isBuiltIn);0<s.length&&jt(Jl,s);const c=n.credentials.filter(u=>u.rememberKey);0<c.length?Un(ar,JSON.stringify(c),bi*3600):Sa(ar),jt(Ql,n.conversations)},GetActiveProvider:()=>{const n=r();return n.providers.find(s=>s.id===n.activeProviderId)||null},GetActiveModel:()=>{const n=r(),s=n.providers.find(c=>c.id===n.activeProviderId);return s==null?null:s.models.find(c=>c.id===n.activeModelId)||null},GetCredentialForProvider:n=>r().credentials.find(s=>s.providerId===n)||null,GetActiveConversation:()=>{const n=r();return n.activeConversationId===null?null:n.conversations.find(s=>s.id===n.activeConversationId)||null}}),$e=ig()((...e)=>({...Zg(...e),...Xg(...e),...Yg(...e),...em(...e),...tm(...e),...nm(...e),...im(...e),...km(...e)})),ou={dark:{bg:"#1e1e1e",bgSecondary:"#252526",bgTertiary:"#2d2d30",bgHover:"#3e3e42",bgActive:"#094771",text:"#cccccc",textSecondary:"#969696",textMuted:"#6e6e6e",border:"#3e3e42",accent:"#007acc",accentHover:"#1a8ad4",accentText:"#ffffff",danger:"#f44747",warning:"#cca700",success:"#89d185",tabBg:"#2d2d30",tabActiveBg:"#1e1e1e",tabActiveText:"#ffffff",tabBorder:"#3e3e42",menuBg:"#2d2d30",menuHover:"#094771",menuText:"#cccccc",statusBarBg:"#007acc",statusBarText:"#ffffff",sidebarBg:"#252526",sidebarText:"#cccccc",scrollbarBg:"transparent",scrollbarThumb:"#424242",editorBg:"#1e1e1e",editorMonacoTheme:"vs-dark",findBg:"#252526"},light:{bg:"#ffffff",bgSecondary:"#f3f3f3",bgTertiary:"#ececec",bgHover:"#e0e0e0",bgActive:"#cce5ff",text:"#333333",textSecondary:"#666666",textMuted:"#999999",border:"#d4d4d4",accent:"#0078d4",accentHover:"#106ebe",accentText:"#ffffff",danger:"#d32f2f",warning:"#f9a825",success:"#2e7d32",tabBg:"#ececec",tabActiveBg:"#ffffff",tabActiveText:"#333333",tabBorder:"#d4d4d4",menuBg:"#f3f3f3",menuHover:"#0078d4",menuText:"#333333",statusBarBg:"#0078d4",statusBarText:"#ffffff",sidebarBg:"#f3f3f3",sidebarText:"#333333",scrollbarBg:"transparent",scrollbarThumb:"#c4c4c4",editorBg:"#ffffff",editorMonacoTheme:"vs",findBg:"#f3f3f3"},monokai:{bg:"#272822",bgSecondary:"#1e1f1c",bgTertiary:"#3e3d32",bgHover:"#49483e",bgActive:"#49483e",text:"#f8f8f2",textSecondary:"#a6a69c",textMuted:"#75715e",border:"#3e3d32",accent:"#a6e22e",accentHover:"#b8f340",accentText:"#272822",danger:"#f92672",warning:"#e6db74",success:"#a6e22e",tabBg:"#1e1f1c",tabActiveBg:"#272822",tabActiveText:"#f8f8f2",tabBorder:"#3e3d32",menuBg:"#1e1f1c",menuHover:"#49483e",menuText:"#f8f8f2",statusBarBg:"#49483e",statusBarText:"#f8f8f2",sidebarBg:"#1e1f1c",sidebarText:"#f8f8f2",scrollbarBg:"transparent",scrollbarThumb:"#49483e",editorBg:"#272822",editorMonacoTheme:"monokai",findBg:"#1e1f1c"},dracula:{bg:"#282a36",bgSecondary:"#21222c",bgTertiary:"#343746",bgHover:"#44475a",bgActive:"#44475a",text:"#f8f8f2",textSecondary:"#bd93f9",textMuted:"#6272a4",border:"#44475a",accent:"#bd93f9",accentHover:"#caa9fa",accentText:"#282a36",danger:"#ff5555",warning:"#f1fa8c",success:"#50fa7b",tabBg:"#21222c",tabActiveBg:"#282a36",tabActiveText:"#f8f8f2",tabBorder:"#44475a",menuBg:"#21222c",menuHover:"#44475a",menuText:"#f8f8f2",statusBarBg:"#44475a",statusBarText:"#f8f8f2",sidebarBg:"#21222c",sidebarText:"#f8f8f2",scrollbarBg:"transparent",scrollbarThumb:"#44475a",editorBg:"#282a36",editorMonacoTheme:"dracula",findBg:"#21222c"},"solarized-dark":{bg:"#002b36",bgSecondary:"#073642",bgTertiary:"#073642",bgHover:"#0a4858",bgActive:"#0a4858",text:"#839496",textSecondary:"#657b83",textMuted:"#586e75",border:"#073642",accent:"#268bd2",accentHover:"#2aa7f5",accentText:"#fdf6e3",danger:"#dc322f",warning:"#b58900",success:"#859900",tabBg:"#073642",tabActiveBg:"#002b36",tabActiveText:"#93a1a1",tabBorder:"#073642",menuBg:"#073642",menuHover:"#0a4858",menuText:"#839496",statusBarBg:"#073642",statusBarText:"#839496",sidebarBg:"#073642",sidebarText:"#839496",scrollbarBg:"transparent",scrollbarThumb:"#0a4858",editorBg:"#002b36",editorMonacoTheme:"solarized-dark",findBg:"#073642"},"solarized-light":{bg:"#fdf6e3",bgSecondary:"#eee8d5",bgTertiary:"#eee8d5",bgHover:"#e4ddc8",bgActive:"#e4ddc8",text:"#657b83",textSecondary:"#839496",textMuted:"#93a1a1",border:"#eee8d5",accent:"#268bd2",accentHover:"#2aa7f5",accentText:"#fdf6e3",danger:"#dc322f",warning:"#b58900",success:"#859900",tabBg:"#eee8d5",tabActiveBg:"#fdf6e3",tabActiveText:"#586e75",tabBorder:"#eee8d5",menuBg:"#eee8d5",menuHover:"#e4ddc8",menuText:"#657b83",statusBarBg:"#eee8d5",statusBarText:"#657b83",sidebarBg:"#eee8d5",sidebarText:"#657b83",scrollbarBg:"transparent",scrollbarThumb:"#d3cbb7",editorBg:"#fdf6e3",editorMonacoTheme:"solarized-light",findBg:"#eee8d5"}};function Em(e){return ou[e]||ou.dark}function Am(e){e.editor.defineTheme("monokai",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"75715e",fontStyle:"italic"},{token:"keyword",foreground:"f92672"},{token:"string",foreground:"e6db74"},{token:"number",foreground:"ae81ff"},{token:"type",foreground:"66d9ef",fontStyle:"italic"},{token:"function",foreground:"a6e22e"},{token:"variable",foreground:"f8f8f2"}],colors:{"editor.background":"#272822","editor.foreground":"#f8f8f2","editor.lineHighlightBackground":"#3e3d32","editor.selectionBackground":"#49483e","editorCursor.foreground":"#f8f8f0"}}),e.editor.defineTheme("dracula",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"6272a4",fontStyle:"italic"},{token:"keyword",foreground:"ff79c6"},{token:"string",foreground:"f1fa8c"},{token:"number",foreground:"bd93f9"},{token:"type",foreground:"8be9fd",fontStyle:"italic"},{token:"function",foreground:"50fa7b"},{token:"variable",foreground:"f8f8f2"}],colors:{"editor.background":"#282a36","editor.foreground":"#f8f8f2","editor.lineHighlightBackground":"#44475a","editor.selectionBackground":"#44475a","editorCursor.foreground":"#f8f8f2"}}),e.editor.defineTheme("solarized-dark",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"586e75",fontStyle:"italic"},{token:"keyword",foreground:"859900"},{token:"string",foreground:"2aa198"},{token:"number",foreground:"d33682"},{token:"type",foreground:"b58900"},{token:"function",foreground:"268bd2"}],colors:{"editor.background":"#002b36","editor.foreground":"#839496","editor.lineHighlightBackground":"#073642","editor.selectionBackground":"#073642"}}),e.editor.defineTheme("solarized-light",{base:"vs",inherit:!0,rules:[{token:"comment",foreground:"93a1a1",fontStyle:"italic"},{token:"keyword",foreground:"859900"},{token:"string",foreground:"2aa198"},{token:"number",foreground:"d33682"},{token:"type",foreground:"b58900"},{token:"function",foreground:"268bd2"}],colors:{"editor.background":"#fdf6e3","editor.foreground":"#657b83","editor.lineHighlightBackground":"#eee8d5","editor.selectionBackground":"#eee8d5"}})}function Im(e,r,n){const s=e.metaKey||e.ctrlKey,c=$e.getState();s&&e.key==="n"?(e.preventDefault(),c.addTab()):s&&e.key==="w"?(e.preventDefault(),r!==null&&c.closeTab(r)):s&&e.shiftKey&&e.key==="T"?(e.preventDefault(),c.restoreLastClosedTab()):s&&e.key==="f"?(e.preventDefault(),c.setShowFindReplace(!0,"find")):s&&e.key==="h"?(e.preventDefault(),c.setShowFindReplace(!0,"replace")):s&&e.key==="g"?(e.preventDefault(),c.setShowGoToLine(!0)):s&&e.key==="b"?(e.preventDefault(),c.toggleSidebar()):s&&e.key===","?(e.preventDefault(),c.setShowSettings(!0)):s&&e.key==="="?(e.preventDefault(),c.setZoomLevel(n+1)):s&&e.key==="-"?(e.preventDefault(),c.setZoomLevel(n-1)):s&&e.key==="0"?(e.preventDefault(),c.setZoomLevel(0)):s&&e.shiftKey&&e.key==="P"?(e.preventDefault(),c.setShowCommandPalette(!0)):s&&e.shiftKey&&e.key==="F"?(e.preventDefault(),c.setShowFindReplace(!0,"findInFiles")):s&&e.key==="p"?(e.preventDefault(),c.setShowQuickOpen(!0)):e.ctrlKey&&e.key==="`"?(e.preventDefault(),c.setShowTerminalPanel(!c.showTerminalPanel)):e.ctrlKey&&e.shiftKey&&e.key==="G"?(e.preventDefault(),c.setSidebarPanel(c.sidebarPanel==="git"?null:"git")):e.key==="Escape"&&(c.setShowFindReplace(!1),c.setShowSettings(!1),c.setShowGoToLine(!1),c.setShowAbout(!1),c.setShowRunCommand(!1),c.setShowColumnEditor(!1),c.setShowSummary(!1),c.setShowCharInRange(!1),c.setShowShortcutMapper(!1),c.setShowCommandPalette(!1),c.setShowQuickOpen(!1),c.setShowDiffViewer(!1),c.setShowSnippetManager(!1),c.setShowCloneDialog(!1),c.setShowGitSettings(!1))}let xs=null,_s=null;function Cm(e){xs=e}function tv(){return xs}function Tm(){xs=null}function Rm(e){_s=e}function Td(){return _s}function Om(){_s=null}function Rd(e,r,n,s,c){var d,h,S,x;const u=$e.getState(),p=Td();switch(e){case"new":u.addTab();break;case"open":Pm();break;case"open-folder":Mm();break;case"save":ka(r,n,!1);break;case"save-as":ka(r,n,!0);break;case"save-copy-as":ka(r,n,!0);break;case"save-all":Bm(n);break;case"reload-from-disk":jm(r,n);break;case"rename-file":Fm(r,n);break;case"delete-file":r!==null&&u.closeTab(r);break;case"close-tab":r!==null&&u.closeTab(r);break;case"close-all":u.closeAllTabs();break;case"close-others":r!==null&&u.closeOtherTabs(r);break;case"close-tabs-to-left":r!==null&&u.closeTabsToLeft(r);break;case"close-tabs-to-right":r!==null&&u.closeTabsToRight(r);break;case"close-unchanged":u.closeUnchangedTabs();break;case"close-all-but-pinned":u.closeAllButPinned();break;case"restore-last-closed":u.restoreLastClosedTab();break;case"pin-tab":r!==null&&u.togglePinTab(r);break;case"print":window.print();break;case"find":u.setShowFindReplace(!0,"find");break;case"replace":u.setShowFindReplace(!0,"replace");break;case"find-in-files":u.setShowFindReplace(!0,"findInFiles");break;case"mark":u.setShowFindReplace(!0,"mark");break;case"incremental-search":u.setShowIncrementalSearch(!0);break;case"goto-line":u.setShowGoToLine(!0);break;case"find-char-in-range":u.setShowCharInRange(!0);break;case"word-wrap":u.updateSettings({wordWrap:c});break;case"show-whitespace":u.updateSettings({showWhitespace:c,renderWhitespace:c?"all":"none"});break;case"show-eol":u.updateSettings({showEOL:c});break;case"show-non-printable":u.updateSettings({showNonPrintable:c});break;case"show-wrap-symbol":u.updateSettings({showWrapSymbol:c});break;case"indent-guide":u.updateSettings({showIndentGuides:c});break;case"show-line-numbers":u.updateSettings({showLineNumbers:c});break;case"toggle-minimap":u.updateSettings({showMinimap:c});break;case"zoom-in":u.setZoomLevel(s+1);break;case"zoom-out":u.setZoomLevel(s-1);break;case"zoom-reset":u.setZoomLevel(0);break;case"toggle-sidebar":u.toggleSidebar();break;case"show-doc-list":u.setSidebarPanel("docList");break;case"show-function-list":u.setSidebarPanel("functions");break;case"show-project-panel":u.setSidebarPanel("project");break;case"distraction-free":u.updateSettings({distractionFreeMode:c});break;case"always-on-top":{u.updateSettings({alwaysOnTop:c}),window.electronAPI&&((h=(d=window.electronAPI).setAlwaysOnTop)==null||h.call(d,c));break}case"sync-scroll-v":u.updateSettings({syncScrollVertical:c});break;case"sync-scroll-h":u.updateSettings({syncScrollHorizontal:c});break;case"split-right":r!==null&&u.setSplitView("vertical",r);break;case"split-down":r!==null&&u.setSplitView("horizontal",r);break;case"close-split":u.setSplitView("none");break;case"show-summary":u.setShowSummary(!0);break;case"toggle-monitoring":{if(r!==null){const _=n.find(R=>R.id===r);_&&u.updateTab(r,{isMonitoring:!_.isMonitoring})}break}case"language":r!==null&&u.updateTab(r,{language:c});break;case"encoding":r!==null&&u.updateTab(r,{encoding:c});break;case"line-ending":r!==null&&u.updateTab(r,{lineEnding:c});break;case"macro-start":u.startRecordingMacro();break;case"macro-stop":u.stopRecordingMacro();break;case"command-palette":u.setShowCommandPalette(!0);break;case"quick-open":u.setShowQuickOpen(!0);break;case"compare-files":u.setShowDiffViewer(!0);break;case"snippet-manager":u.setShowSnippetManager(!0);break;case"toggle-terminal":u.setShowTerminalPanel(!u.showTerminalPanel);break;case"clone-repository":u.setShowCloneDialog(!0);break;case"git-settings":u.setShowGitSettings(!0);break;case"show-git-panel":u.setSidebarPanel("git");break;case"ai-chat":u.setSidebarPanel("ai");break;case"ai-settings":u.SetShowAiSettings(!0);break;case"ai-explain":case"ai-refactor":case"ai-generate-tests":case"ai-generate-docs":case"ai-fix-error":case"ai-simplify":case"ai-convert-language":p&&p(e);break;case"ai-toggle-inline":u.SetInlineSuggestionEnabled(!u.inlineSuggestionEnabled);break;case"preferences":u.setShowSettings(!0);break;case"about":u.setShowAbout(!0);break;case"run-command":u.setShowRunCommand(!0);break;case"column-editor":u.setShowColumnEditor(!0);break;case"shortcut-mapper":u.setShowShortcutMapper(!0);break;case"clipboard-history":u.setSidebarPanel("clipboardHistory");break;case"char-panel":u.setSidebarPanel("charPanel");break;case"search-google":{const _=(S=window.getSelection())==null?void 0:S.toString();_&&window.open(`https://www.google.com/search?q=${encodeURIComponent(_)}`,"_blank");break}case"search-wikipedia":{const _=(x=window.getSelection())==null?void 0:x.toString();_&&window.open(`https://en.wikipedia.org/wiki/${encodeURIComponent(_)}`,"_blank");break}case"open-in-browser":{const _=n.find(R=>R.id===r);_&&_.path&&window.open(`file://${_.path}`,"_blank");break}case"save-session":{const _=u.saveSession(),R=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),y=URL.createObjectURL(R),j=document.createElement("a");j.href=y,j.download="session.json",j.click(),URL.revokeObjectURL(y);break}case"load-session":{const _=document.createElement("input");_.type="file",_.accept=".json",_.onchange=async R=>{var j;const y=(j=R.target.files)==null?void 0:j[0];if(y){const X=await y.text();try{$e.getState().loadSession(JSON.parse(X))}catch{}}},_.click();break}default:p&&p(e,c);break}}function Pm(){var r,n;if(window.electronAPI){(n=(r=window.electronAPI).openFile)==null||n.call(r);return}const e=document.createElement("input");e.type="file",e.multiple=!0,e.onchange=async()=>{if(!e.files)return;const s=$e.getState();for(const c of Array.from(e.files)){const u=await c.text();s.addTab({name:c.name,content:u,language:dr(c.name),lineEnding:Ar(u)})}},e.click()}function Mm(){var r,n;if(window.electronAPI){(n=(r=window.electronAPI).openFolder)==null||n.call(r);return}const e=document.createElement("input");e.type="file",e.webkitdirectory=!0,e.onchange=async()=>{if(!e.files||e.files.length===0)return;const s=$e.getState();for(const c of Array.from(e.files)){const u=await c.text();s.addTab({name:c.name,content:u,language:dr(c.name),lineEnding:Ar(u)})}},e.click()}function ka(e,r,n){var d,h,S,x;if(e===null)return;const s=r.find(_=>_.id===e);if(!s)return;if(window.electronAPI){n||!s.path?(h=(d=window.electronAPI).saveFileAs)==null||h.call(d,s.content,s.name):(x=(S=window.electronAPI).saveFile)==null||x.call(S,s.content,s.path),$e.getState().updateTab(e,{isModified:!1});return}const c=new Blob([s.content],{type:"text/plain;charset=utf-8"}),u=URL.createObjectURL(c),p=document.createElement("a");p.href=u,p.download=s.name,p.click(),URL.revokeObjectURL(u),$e.getState().updateTab(e,{isModified:!1})}function Bm(e){var n,s;const r=$e.getState();for(const c of e)if(c.isModified)if(window.electronAPI&&c.path)(s=(n=window.electronAPI).saveFile)==null||s.call(n,c.content,c.path),r.updateTab(c.id,{isModified:!1});else{const u=new Blob([c.content],{type:"text/plain;charset=utf-8"}),p=URL.createObjectURL(u),d=document.createElement("a");d.href=p,d.download=c.name,d.click(),URL.revokeObjectURL(p),r.updateTab(c.id,{isModified:!1})}}function jm(e,r){var c,u;if(e===null)return;const n=r.find(p=>p.id===e);if(!n)return;if(window.electronAPI&&n.path){(u=(c=window.electronAPI).readFile)==null||u.call(c,n.path).then(p=>{$e.getState().updateTabContent(e,p),$e.getState().updateTab(e,{isModified:!1})}).catch(p=>{});return}const s=document.createElement("input");s.type="file",s.onchange=async()=>{var d;const p=(d=s.files)==null?void 0:d[0];if(p){const h=await p.text();$e.getState().updateTabContent(e,h),$e.getState().updateTab(e,{isModified:!1,name:p.name})}},s.click()}function Fm(e,r){var c,u;if(e===null)return;const n=r.find(p=>p.id===e);if(!n)return;const s=prompt("Enter new file name:",n.name);s&&s!==n.name&&($e.getState().updateTab(e,{name:s}),window.electronAPI&&n.path&&((u=(c=window.electronAPI).renameFile)==null||u.call(c,n.path,s)))}var De={},Ea,su;function Dm(){if(su)return Ea;su=1;var e=function(r){if(r=r||{},this.Promise=r.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=r.domainReentrant||!1,this.domainReentrant){if(typeof process>"u"||typeof process.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=r.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=r.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=r.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,r.maxPending===1/0||Number.isInteger(r.maxPending)&&r.maxPending>=0?this.maxPending=r.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(r,n,s,c){if(Array.isArray(r))return this._acquireBatch(r,n,s,c);if(typeof n!="function")throw new Error("You must pass a function to execute");var u=null,p=null,d=null;typeof s!="function"&&(c=s,s=null,d=new this.Promise(function(G,W){u=G,p=W})),c=c||{};var h=!1,S=null,x=null,_=null,R=this,y=function(G,W,ne){x&&(clearTimeout(x),x=null),_&&(clearTimeout(_),_=null),G&&(R.queues[r]&&R.queues[r].length===0&&delete R.queues[r],R.domainReentrant&&delete R.domains[r]),h||(d?W?p(W):u(ne):typeof s=="function"&&s(W,ne),h=!0),G&&R.queues[r]&&R.queues[r].length>0&&R.queues[r].shift()()},j=function(G){if(h)return y(G);S&&(clearTimeout(S),S=null),R.domainReentrant&&G&&(R.domains[r]=process.domain);var W=c.maxExecutionTime||R.maxExecutionTime;if(W&&(_=setTimeout(function(){R.queues[r]&&y(G,new Error("Maximum execution time is exceeded "+r))},W)),n.length===1){var ne=!1;try{n(function(Z,z){ne||(ne=!0,y(G,Z,z))})}catch(Z){ne||(ne=!0,y(G,Z))}}else R._promiseTry(function(){return n()}).then(function(Z){y(G,void 0,Z)},function(Z){y(G,Z)})};R.domainReentrant&&process.domain&&(j=process.domain.bind(j));var X=c.maxPending||R.maxPending;if(!R.queues[r])R.queues[r]=[],j(!0);else if(R.domainReentrant&&process.domain&&process.domain===R.domains[r])j(!1);else if(R.queues[r].length>=X)y(!1,new Error("Too many pending tasks in queue "+r));else{var L=function(){j(!0)};c.skipQueue?R.queues[r].unshift(L):R.queues[r].push(L);var F=c.timeout||R.timeout;F&&(S=setTimeout(function(){S=null,y(!1,new Error("async-lock timed out in queue "+r))},F))}var N=c.maxOccupationTime||R.maxOccupationTime;if(N&&(x=setTimeout(function(){R.queues[r]&&y(!1,new Error("Maximum occupation time is exceeded in queue "+r))},N)),d)return d},e.prototype._acquireBatch=function(r,n,s,c){typeof s!="function"&&(c=s,s=null);var u=this,p=function(h,S){return function(x){u.acquire(h,S,x,c)}},d=r.reduceRight(function(h,S){return p(S,h)},n);if(typeof s=="function")d(s);else return new this.Promise(function(h,S){d.length===1?d(function(x,_){x?S(x):h(_)}):h(d())})},e.prototype.isBusy=function(r){return r?!!this.queues[r]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(r){try{return this.Promise.resolve(r())}catch(n){return this.Promise.reject(n)}},Ea=e,Ea}var Aa,cu;function Lm(){return cu||(cu=1,Aa=Dm()),Aa}var vi={exports:{}},lu;function $m(){return lu||(lu=1,typeof Object.create=="function"?vi.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:vi.exports=function(r,n){if(n){r.super_=n;var s=function(){};s.prototype=n.prototype,r.prototype=new s,r.prototype.constructor=r}}),vi.exports}var xi={exports:{}},Ia={},zn={},uu;function Nm(){if(uu)return zn;uu=1,zn.byteLength=d,zn.toByteArray=S,zn.fromByteArray=R;for(var e=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,u=s.length;c<u;++c)e[c]=s[c],r[s.charCodeAt(c)]=c;r[45]=62,r[95]=63;function p(y){var j=y.length;if(j%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var X=y.indexOf("=");X===-1&&(X=j);var L=X===j?0:4-X%4;return[X,L]}function d(y){var j=p(y),X=j[0],L=j[1];return(X+L)*3/4-L}function h(y,j,X){return(j+X)*3/4-X}function S(y){var j,X=p(y),L=X[0],F=X[1],N=new n(h(y,L,F)),G=0,W=F>0?L-4:L,ne;for(ne=0;ne<W;ne+=4)j=r[y.charCodeAt(ne)]<<18|r[y.charCodeAt(ne+1)]<<12|r[y.charCodeAt(ne+2)]<<6|r[y.charCodeAt(ne+3)],N[G++]=j>>16&255,N[G++]=j>>8&255,N[G++]=j&255;return F===2&&(j=r[y.charCodeAt(ne)]<<2|r[y.charCodeAt(ne+1)]>>4,N[G++]=j&255),F===1&&(j=r[y.charCodeAt(ne)]<<10|r[y.charCodeAt(ne+1)]<<4|r[y.charCodeAt(ne+2)]>>2,N[G++]=j>>8&255,N[G++]=j&255),N}function x(y){return e[y>>18&63]+e[y>>12&63]+e[y>>6&63]+e[y&63]}function _(y,j,X){for(var L,F=[],N=j;N<X;N+=3)L=(y[N]<<16&16711680)+(y[N+1]<<8&65280)+(y[N+2]&255),F.push(x(L));return F.join("")}function R(y){for(var j,X=y.length,L=X%3,F=[],N=16383,G=0,W=X-L;G<W;G+=N)F.push(_(y,G,G+N>W?W:G+N));return L===1?(j=y[X-1],F.push(e[j>>2]+e[j<<4&63]+"==")):L===2&&(j=(y[X-2]<<8)+y[X-1],F.push(e[j>>10]+e[j>>4&63]+e[j<<2&63]+"=")),F.join("")}return zn}var _i={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var fu;function Um(){return fu||(fu=1,_i.read=function(e,r,n,s,c){var u,p,d=c*8-s-1,h=(1<<d)-1,S=h>>1,x=-7,_=n?c-1:0,R=n?-1:1,y=e[r+_];for(_+=R,u=y&(1<<-x)-1,y>>=-x,x+=d;x>0;u=u*256+e[r+_],_+=R,x-=8);for(p=u&(1<<-x)-1,u>>=-x,x+=s;x>0;p=p*256+e[r+_],_+=R,x-=8);if(u===0)u=1-S;else{if(u===h)return p?NaN:(y?-1:1)*(1/0);p=p+Math.pow(2,s),u=u-S}return(y?-1:1)*p*Math.pow(2,u-s)},_i.write=function(e,r,n,s,c,u){var p,d,h,S=u*8-c-1,x=(1<<S)-1,_=x>>1,R=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=s?0:u-1,j=s?1:-1,X=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(d=isNaN(r)?1:0,p=x):(p=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-p))<1&&(p--,h*=2),p+_>=1?r+=R/h:r+=R*Math.pow(2,1-_),r*h>=2&&(p++,h/=2),p+_>=x?(d=0,p=x):p+_>=1?(d=(r*h-1)*Math.pow(2,c),p=p+_):(d=r*Math.pow(2,_-1)*Math.pow(2,c),p=0));c>=8;e[n+y]=d&255,y+=j,d/=256,c-=8);for(p=p<<c|d,S+=c;S>0;e[n+y]=p&255,y+=j,p/=256,S-=8);e[n+y-j]|=X*128}),_i}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var du;function zm(){return du||(du=1,(function(e){var r=Nm(),n=Um(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=N,e.INSPECT_MAX_BYTES=50;var c=2147483647;e.kMaxLength=c,d.TYPED_ARRAY_SUPPORT=u(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u";function u(){try{var O=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(O,g),O.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function p(O){if(O>c)throw new RangeError('The value "'+O+'" is invalid for option "size"');var g=new Uint8Array(O);return Object.setPrototypeOf(g,d.prototype),g}function d(O,g,b){if(typeof O=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(O)}return h(O,g,b)}d.poolSize=8192;function h(O,g,b){if(typeof O=="string")return R(O,g);if(ArrayBuffer.isView(O))return j(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Qe(O,ArrayBuffer)||O&&Qe(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Qe(O,SharedArrayBuffer)||O&&Qe(O.buffer,SharedArrayBuffer)))return X(O,g,b);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var $=O.valueOf&&O.valueOf();if($!=null&&$!==O)return d.from($,g,b);var te=L(O);if(te)return te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return d.from(O[Symbol.toPrimitive]("string"),g,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}d.from=function(O,g,b){return h(O,g,b)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array);function S(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function x(O,g,b){return S(O),O<=0?p(O):g!==void 0?typeof b=="string"?p(O).fill(g,b):p(O).fill(g):p(O)}d.alloc=function(O,g,b){return x(O,g,b)};function _(O){return S(O),p(O<0?0:F(O)|0)}d.allocUnsafe=function(O){return _(O)},d.allocUnsafeSlow=function(O){return _(O)};function R(O,g){if((typeof g!="string"||g==="")&&(g="utf8"),!d.isEncoding(g))throw new TypeError("Unknown encoding: "+g);var b=G(O,g)|0,$=p(b),te=$.write(O,g);return te!==b&&($=$.slice(0,te)),$}function y(O){for(var g=O.length<0?0:F(O.length)|0,b=p(g),$=0;$<g;$+=1)b[$]=O[$]&255;return b}function j(O){if(Qe(O,Uint8Array)){var g=new Uint8Array(O);return X(g.buffer,g.byteOffset,g.byteLength)}return y(O)}function X(O,g,b){if(g<0||O.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<g+(b||0))throw new RangeError('"length" is outside of buffer bounds');var $;return g===void 0&&b===void 0?$=new Uint8Array(O):b===void 0?$=new Uint8Array(O,g):$=new Uint8Array(O,g,b),Object.setPrototypeOf($,d.prototype),$}function L(O){if(d.isBuffer(O)){var g=F(O.length)|0,b=p(g);return b.length===0||O.copy(b,0,0,g),b}if(O.length!==void 0)return typeof O.length!="number"||ht(O.length)?p(0):y(O);if(O.type==="Buffer"&&Array.isArray(O.data))return y(O.data)}function F(O){if(O>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return O|0}function N(O){return+O!=O&&(O=0),d.alloc(+O)}d.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==d.prototype},d.compare=function(g,b){if(Qe(g,Uint8Array)&&(g=d.from(g,g.offset,g.byteLength)),Qe(b,Uint8Array)&&(b=d.from(b,b.offset,b.byteLength)),!d.isBuffer(g)||!d.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===b)return 0;for(var $=g.length,te=b.length,ye=0,xe=Math.min($,te);ye<xe;++ye)if(g[ye]!==b[ye]){$=g[ye],te=b[ye];break}return $<te?-1:te<$?1:0},d.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(g,b){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return d.alloc(0);var $;if(b===void 0)for(b=0,$=0;$<g.length;++$)b+=g[$].length;var te=d.allocUnsafe(b),ye=0;for($=0;$<g.length;++$){var xe=g[$];if(Qe(xe,Uint8Array))ye+xe.length>te.length?d.from(xe).copy(te,ye):Uint8Array.prototype.set.call(te,xe,ye);else if(d.isBuffer(xe))xe.copy(te,ye);else throw new TypeError('"list" argument must be an Array of Buffers');ye+=xe.length}return te};function G(O,g){if(d.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Qe(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var b=O.length,$=arguments.length>2&&arguments[2]===!0;if(!$&&b===0)return 0;for(var te=!1;;)switch(g){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Me(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return at(O).length;default:if(te)return $?-1:Me(O).length;g=(""+g).toLowerCase(),te=!0}}d.byteLength=G;function W(O,g,b){var $=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,g>>>=0,b<=g))return"";for(O||(O="utf8");;)switch(O){case"hex":return he(this,g,b);case"utf8":case"utf-8":return re(this,g,b);case"ascii":return ie(this,g,b);case"latin1":case"binary":return se(this,g,b);case"base64":return de(this,g,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,g,b);default:if($)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),$=!0}}d.prototype._isBuffer=!0;function ne(O,g,b){var $=O[g];O[g]=O[b],O[b]=$}d.prototype.swap16=function(){var g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<g;b+=2)ne(this,b,b+1);return this},d.prototype.swap32=function(){var g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<g;b+=4)ne(this,b,b+3),ne(this,b+1,b+2);return this},d.prototype.swap64=function(){var g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<g;b+=8)ne(this,b,b+7),ne(this,b+1,b+6),ne(this,b+2,b+5),ne(this,b+3,b+4);return this},d.prototype.toString=function(){var g=this.length;return g===0?"":arguments.length===0?re(this,0,g):W.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(g){if(!d.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:d.compare(this,g)===0},d.prototype.inspect=function(){var g="",b=e.INSPECT_MAX_BYTES;return g=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(g+=" ... "),"<Buffer "+g+">"},s&&(d.prototype[s]=d.prototype.inspect),d.prototype.compare=function(g,b,$,te,ye){if(Qe(g,Uint8Array)&&(g=d.from(g,g.offset,g.byteLength)),!d.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(b===void 0&&(b=0),$===void 0&&($=g?g.length:0),te===void 0&&(te=0),ye===void 0&&(ye=this.length),b<0||$>g.length||te<0||ye>this.length)throw new RangeError("out of range index");if(te>=ye&&b>=$)return 0;if(te>=ye)return-1;if(b>=$)return 1;if(b>>>=0,$>>>=0,te>>>=0,ye>>>=0,this===g)return 0;for(var xe=ye-te,Je=$-b,tt=Math.min(xe,Je),it=this.slice(te,ye),ft=g.slice(b,$),st=0;st<tt;++st)if(it[st]!==ft[st]){xe=it[st],Je=ft[st];break}return xe<Je?-1:Je<xe?1:0};function Z(O,g,b,$,te){if(O.length===0)return-1;if(typeof b=="string"?($=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,ht(b)&&(b=te?0:O.length-1),b<0&&(b=O.length+b),b>=O.length){if(te)return-1;b=O.length-1}else if(b<0)if(te)b=0;else return-1;if(typeof g=="string"&&(g=d.from(g,$)),d.isBuffer(g))return g.length===0?-1:z(O,g,b,$,te);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?te?Uint8Array.prototype.indexOf.call(O,g,b):Uint8Array.prototype.lastIndexOf.call(O,g,b):z(O,[g],b,$,te);throw new TypeError("val must be string, number or Buffer")}function z(O,g,b,$,te){var ye=1,xe=O.length,Je=g.length;if($!==void 0&&($=String($).toLowerCase(),$==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(O.length<2||g.length<2)return-1;ye=2,xe/=2,Je/=2,b/=2}function tt(Dt,rr){return ye===1?Dt[rr]:Dt.readUInt16BE(rr*ye)}var it;if(te){var ft=-1;for(it=b;it<xe;it++)if(tt(O,it)===tt(g,ft===-1?0:it-ft)){if(ft===-1&&(ft=it),it-ft+1===Je)return ft*ye}else ft!==-1&&(it-=it-ft),ft=-1}else for(b+Je>xe&&(b=xe-Je),it=b;it>=0;it--){for(var st=!0,wt=0;wt<Je;wt++)if(tt(O,it+wt)!==tt(g,wt)){st=!1;break}if(st)return it}return-1}d.prototype.includes=function(g,b,$){return this.indexOf(g,b,$)!==-1},d.prototype.indexOf=function(g,b,$){return Z(this,g,b,$,!0)},d.prototype.lastIndexOf=function(g,b,$){return Z(this,g,b,$,!1)};function B(O,g,b,$){b=Number(b)||0;var te=O.length-b;$?($=Number($),$>te&&($=te)):$=te;var ye=g.length;$>ye/2&&($=ye/2);for(var xe=0;xe<$;++xe){var Je=parseInt(g.substr(xe*2,2),16);if(ht(Je))return xe;O[b+xe]=Je}return xe}function Y(O,g,b,$){return Ze(Me(g,O.length-b),O,b,$)}function U(O,g,b,$){return Ze(Xe(g),O,b,$)}function ce(O,g,b,$){return Ze(at(g),O,b,$)}function oe(O,g,b,$){return Ze(Ye(g,O.length-b),O,b,$)}d.prototype.write=function(g,b,$,te){if(b===void 0)te="utf8",$=this.length,b=0;else if($===void 0&&typeof b=="string")te=b,$=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite($)?($=$>>>0,te===void 0&&(te="utf8")):(te=$,$=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ye=this.length-b;if(($===void 0||$>ye)&&($=ye),g.length>0&&($<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");for(var xe=!1;;)switch(te){case"hex":return B(this,g,b,$);case"utf8":case"utf-8":return Y(this,g,b,$);case"ascii":case"latin1":case"binary":return U(this,g,b,$);case"base64":return ce(this,g,b,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,g,b,$);default:if(xe)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),xe=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function de(O,g,b){return g===0&&b===O.length?r.fromByteArray(O):r.fromByteArray(O.slice(g,b))}function re(O,g,b){b=Math.min(O.length,b);for(var $=[],te=g;te<b;){var ye=O[te],xe=null,Je=ye>239?4:ye>223?3:ye>191?2:1;if(te+Je<=b){var tt,it,ft,st;switch(Je){case 1:ye<128&&(xe=ye);break;case 2:tt=O[te+1],(tt&192)===128&&(st=(ye&31)<<6|tt&63,st>127&&(xe=st));break;case 3:tt=O[te+1],it=O[te+2],(tt&192)===128&&(it&192)===128&&(st=(ye&15)<<12|(tt&63)<<6|it&63,st>2047&&(st<55296||st>57343)&&(xe=st));break;case 4:tt=O[te+1],it=O[te+2],ft=O[te+3],(tt&192)===128&&(it&192)===128&&(ft&192)===128&&(st=(ye&15)<<18|(tt&63)<<12|(it&63)<<6|ft&63,st>65535&&st<1114112&&(xe=st))}}xe===null?(xe=65533,Je=1):xe>65535&&(xe-=65536,$.push(xe>>>10&1023|55296),xe=56320|xe&1023),$.push(xe),te+=Je}return ae($)}var me=4096;function ae(O){var g=O.length;if(g<=me)return String.fromCharCode.apply(String,O);for(var b="",$=0;$<g;)b+=String.fromCharCode.apply(String,O.slice($,$+=me));return b}function ie(O,g,b){var $="";b=Math.min(O.length,b);for(var te=g;te<b;++te)$+=String.fromCharCode(O[te]&127);return $}function se(O,g,b){var $="";b=Math.min(O.length,b);for(var te=g;te<b;++te)$+=String.fromCharCode(O[te]);return $}function he(O,g,b){var $=O.length;(!g||g<0)&&(g=0),(!b||b<0||b>$)&&(b=$);for(var te="",ye=g;ye<b;++ye)te+=mt[O[ye]];return te}function Ne(O,g,b){for(var $=O.slice(g,b),te="",ye=0;ye<$.length-1;ye+=2)te+=String.fromCharCode($[ye]+$[ye+1]*256);return te}d.prototype.slice=function(g,b){var $=this.length;g=~~g,b=b===void 0?$:~~b,g<0?(g+=$,g<0&&(g=0)):g>$&&(g=$),b<0?(b+=$,b<0&&(b=0)):b>$&&(b=$),b<g&&(b=g);var te=this.subarray(g,b);return Object.setPrototypeOf(te,d.prototype),te};function _e(O,g,b){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+g>b)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(g,b,$){g=g>>>0,b=b>>>0,$||_e(g,b,this.length);for(var te=this[g],ye=1,xe=0;++xe<b&&(ye*=256);)te+=this[g+xe]*ye;return te},d.prototype.readUintBE=d.prototype.readUIntBE=function(g,b,$){g=g>>>0,b=b>>>0,$||_e(g,b,this.length);for(var te=this[g+--b],ye=1;b>0&&(ye*=256);)te+=this[g+--b]*ye;return te},d.prototype.readUint8=d.prototype.readUInt8=function(g,b){return g=g>>>0,b||_e(g,1,this.length),this[g]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(g,b){return g=g>>>0,b||_e(g,2,this.length),this[g]|this[g+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(g,b){return g=g>>>0,b||_e(g,2,this.length),this[g]<<8|this[g+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},d.prototype.readIntLE=function(g,b,$){g=g>>>0,b=b>>>0,$||_e(g,b,this.length);for(var te=this[g],ye=1,xe=0;++xe<b&&(ye*=256);)te+=this[g+xe]*ye;return ye*=128,te>=ye&&(te-=Math.pow(2,8*b)),te},d.prototype.readIntBE=function(g,b,$){g=g>>>0,b=b>>>0,$||_e(g,b,this.length);for(var te=b,ye=1,xe=this[g+--te];te>0&&(ye*=256);)xe+=this[g+--te]*ye;return ye*=128,xe>=ye&&(xe-=Math.pow(2,8*b)),xe},d.prototype.readInt8=function(g,b){return g=g>>>0,b||_e(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},d.prototype.readInt16LE=function(g,b){g=g>>>0,b||_e(g,2,this.length);var $=this[g]|this[g+1]<<8;return $&32768?$|4294901760:$},d.prototype.readInt16BE=function(g,b){g=g>>>0,b||_e(g,2,this.length);var $=this[g+1]|this[g]<<8;return $&32768?$|4294901760:$},d.prototype.readInt32LE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},d.prototype.readInt32BE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},d.prototype.readFloatLE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),n.read(this,g,!0,23,4)},d.prototype.readFloatBE=function(g,b){return g=g>>>0,b||_e(g,4,this.length),n.read(this,g,!1,23,4)},d.prototype.readDoubleLE=function(g,b){return g=g>>>0,b||_e(g,8,this.length),n.read(this,g,!0,52,8)},d.prototype.readDoubleBE=function(g,b){return g=g>>>0,b||_e(g,8,this.length),n.read(this,g,!1,52,8)};function Be(O,g,b,$,te,ye){if(!d.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>te||g<ye)throw new RangeError('"value" argument is out of bounds');if(b+$>O.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(g,b,$,te){if(g=+g,b=b>>>0,$=$>>>0,!te){var ye=Math.pow(2,8*$)-1;Be(this,g,b,$,ye,0)}var xe=1,Je=0;for(this[b]=g&255;++Je<$&&(xe*=256);)this[b+Je]=g/xe&255;return b+$},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(g,b,$,te){if(g=+g,b=b>>>0,$=$>>>0,!te){var ye=Math.pow(2,8*$)-1;Be(this,g,b,$,ye,0)}var xe=$-1,Je=1;for(this[b+xe]=g&255;--xe>=0&&(Je*=256);)this[b+xe]=g/Je&255;return b+$},d.prototype.writeUint8=d.prototype.writeUInt8=function(g,b,$){return g=+g,b=b>>>0,$||Be(this,g,b,1,255,0),this[b]=g&255,b+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(g,b,$){return g=+g,b=b>>>0,$||Be(this,g,b,2,65535,0),this[b]=g&255,this[b+1]=g>>>8,b+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(g,b,$){return g=+g,b=b>>>0,$||Be(this,g,b,2,65535,0),this[b]=g>>>8,this[b+1]=g&255,b+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(g,b,$){return g=+g,b=b>>>0,$||Be(this,g,b,4,4294967295,0),this[b+3]=g>>>24,this[b+2]=g>>>16,this[b+1]=g>>>8,this[b]=g&255,b+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(g,b,$){return g=+g,b=b>>>0,$||Be(this,g,b,4,4294967295,0),this[b]=g>>>24,this[b+1]=g>>>16,this[b+2]=g>>>8,this[b+3]=g&255,b+4},d.prototype.writeIntLE=function(g,b,$,te){if(g=+g,b=b>>>0,!te){var ye=Math.pow(2,8*$-1);Be(this,g,b,$,ye-1,-ye)}var xe=0,Je=1,tt=0;for(this[b]=g&255;++xe<$&&(Je*=256);)g<0&&tt===0&&this[b+xe-1]!==0&&(tt=1),this[b+xe]=(g/Je>>0)-tt&255;return b+$},d.prototype.writeIntBE=function(g,b,$,te){if(g=+g,b=b>>>0,!te){var ye=Math.pow(2,8*$-1);Be(this,g,b,$,ye-1,-ye)}var xe=$-1,Je=1,tt=0;for(this[b+xe]=g&255;--xe>=0&&(Je*=256);)g<0&&tt===0&&this[b+xe+1]!==0&&(tt=1),this[b+xe]=(g/Je>>0)-tt&255;return b+$},d.prototype.writeInt8=function(g,b,$){return g=+g,b=b>>>0,$||Be(this,g,b,1,127,-128),g<0&&(g=255+g+1),this[b]=g&255,b+1},d.prototype.writeInt16LE=function(g,b,$){return g=+g,b=b>>>0,$||Be(this,g,b,2,32767,-32768),this[b]=g&255,this[b+1]=g>>>8,b+2},d.prototype.writeInt16BE=function(g,b,$){return g=+g,b=b>>>0,$||Be(this,g,b,2,32767,-32768),this[b]=g>>>8,this[b+1]=g&255,b+2},d.prototype.writeInt32LE=function(g,b,$){return g=+g,b=b>>>0,$||Be(this,g,b,4,2147483647,-2147483648),this[b]=g&255,this[b+1]=g>>>8,this[b+2]=g>>>16,this[b+3]=g>>>24,b+4},d.prototype.writeInt32BE=function(g,b,$){return g=+g,b=b>>>0,$||Be(this,g,b,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[b]=g>>>24,this[b+1]=g>>>16,this[b+2]=g>>>8,this[b+3]=g&255,b+4};function q(O,g,b,$,te,ye){if(b+$>O.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function ke(O,g,b,$,te){return g=+g,b=b>>>0,te||q(O,g,b,4),n.write(O,g,b,$,23,4),b+4}d.prototype.writeFloatLE=function(g,b,$){return ke(this,g,b,!0,$)},d.prototype.writeFloatBE=function(g,b,$){return ke(this,g,b,!1,$)};function Ie(O,g,b,$,te){return g=+g,b=b>>>0,te||q(O,g,b,8),n.write(O,g,b,$,52,8),b+8}d.prototype.writeDoubleLE=function(g,b,$){return Ie(this,g,b,!0,$)},d.prototype.writeDoubleBE=function(g,b,$){return Ie(this,g,b,!1,$)},d.prototype.copy=function(g,b,$,te){if(!d.isBuffer(g))throw new TypeError("argument should be a Buffer");if($||($=0),!te&&te!==0&&(te=this.length),b>=g.length&&(b=g.length),b||(b=0),te>0&&te<$&&(te=$),te===$||g.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),g.length-b<te-$&&(te=g.length-b+$);var ye=te-$;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,$,te):Uint8Array.prototype.set.call(g,this.subarray($,te),b),ye},d.prototype.fill=function(g,b,$,te){if(typeof g=="string"){if(typeof b=="string"?(te=b,b=0,$=this.length):typeof $=="string"&&(te=$,$=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!d.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(g.length===1){var ye=g.charCodeAt(0);(te==="utf8"&&ye<128||te==="latin1")&&(g=ye)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(b<0||this.length<b||this.length<$)throw new RangeError("Out of range index");if($<=b)return this;b=b>>>0,$=$===void 0?this.length:$>>>0,g||(g=0);var xe;if(typeof g=="number")for(xe=b;xe<$;++xe)this[xe]=g;else{var Je=d.isBuffer(g)?g:d.from(g,te),tt=Je.length;if(tt===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(xe=0;xe<$-b;++xe)this[xe+b]=Je[xe%tt]}return this};var Oe=/[^+/0-9A-Za-z-_]/g;function Fe(O){if(O=O.split("=")[0],O=O.trim().replace(Oe,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}function Me(O,g){g=g||1/0;for(var b,$=O.length,te=null,ye=[],xe=0;xe<$;++xe){if(b=O.charCodeAt(xe),b>55295&&b<57344){if(!te){if(b>56319){(g-=3)>-1&&ye.push(239,191,189);continue}else if(xe+1===$){(g-=3)>-1&&ye.push(239,191,189);continue}te=b;continue}if(b<56320){(g-=3)>-1&&ye.push(239,191,189),te=b;continue}b=(te-55296<<10|b-56320)+65536}else te&&(g-=3)>-1&&ye.push(239,191,189);if(te=null,b<128){if((g-=1)<0)break;ye.push(b)}else if(b<2048){if((g-=2)<0)break;ye.push(b>>6|192,b&63|128)}else if(b<65536){if((g-=3)<0)break;ye.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((g-=4)<0)break;ye.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return ye}function Xe(O){for(var g=[],b=0;b<O.length;++b)g.push(O.charCodeAt(b)&255);return g}function Ye(O,g){for(var b,$,te,ye=[],xe=0;xe<O.length&&!((g-=2)<0);++xe)b=O.charCodeAt(xe),$=b>>8,te=b%256,ye.push(te),ye.push($);return ye}function at(O){return r.toByteArray(Fe(O))}function Ze(O,g,b,$){for(var te=0;te<$&&!(te+b>=g.length||te>=O.length);++te)g[te+b]=O[te];return te}function Qe(O,g){return O instanceof g||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===g.name}function ht(O){return O!==O}var mt=(function(){for(var O="0123456789abcdef",g=new Array(256),b=0;b<16;++b)for(var $=b*16,te=0;te<16;++te)g[$+te]=O[b]+O[te];return g})()})(Ia)),Ia}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hu;function Ss(){return hu||(hu=1,(function(e,r){var n=zm(),s=n.Buffer;function c(p,d){for(var h in p)d[h]=p[h]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=n:(c(n,r),r.Buffer=u);function u(p,d,h){return s(p,d,h)}u.prototype=Object.create(s.prototype),c(s,u),u.from=function(p,d,h){if(typeof p=="number")throw new TypeError("Argument must not be a number");return s(p,d,h)},u.alloc=function(p,d,h){if(typeof p!="number")throw new TypeError("Argument must be a number");var S=s(p);return d!==void 0?typeof h=="string"?S.fill(d,h):S.fill(d):S.fill(0),S},u.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return s(p)},u.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(p)}})(xi,xi.exports)),xi.exports}var Ca,pu;function Gm(){if(pu)return Ca;pu=1;var e={}.toString;return Ca=Array.isArray||function(r){return e.call(r)=="[object Array]"},Ca}var Ta,gu;function Qn(){return gu||(gu=1,Ta=TypeError),Ta}var Ra,mu;function Od(){return mu||(mu=1,Ra=Object),Ra}var Oa,wu;function Hm(){return wu||(wu=1,Oa=Error),Oa}var Pa,yu;function qm(){return yu||(yu=1,Pa=EvalError),Pa}var Ma,bu;function Wm(){return bu||(bu=1,Ma=RangeError),Ma}var Ba,vu;function Vm(){return vu||(vu=1,Ba=ReferenceError),Ba}var ja,xu;function Pd(){return xu||(xu=1,ja=SyntaxError),ja}var Fa,_u;function Zm(){return _u||(_u=1,Fa=URIError),Fa}var Da,Su;function Km(){return Su||(Su=1,Da=Math.abs),Da}var La,ku;function Xm(){return ku||(ku=1,La=Math.floor),La}var $a,Eu;function Ym(){return Eu||(Eu=1,$a=Math.max),$a}var Na,Au;function Jm(){return Au||(Au=1,Na=Math.min),Na}var Ua,Iu;function Qm(){return Iu||(Iu=1,Ua=Math.pow),Ua}var za,Cu;function ew(){return Cu||(Cu=1,za=Math.round),za}var Ga,Tu;function tw(){return Tu||(Tu=1,Ga=Number.isNaN||function(r){return r!==r}),Ga}var Ha,Ru;function rw(){if(Ru)return Ha;Ru=1;var e=tw();return Ha=function(n){return e(n)||n===0?n:n<0?-1:1},Ha}var qa,Ou;function nw(){return Ou||(Ou=1,qa=Object.getOwnPropertyDescriptor),qa}var Wa,Pu;function ei(){if(Pu)return Wa;Pu=1;var e=nw();if(e)try{e([],"length")}catch{e=null}return Wa=e,Wa}var Va,Mu;function $i(){if(Mu)return Va;Mu=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Va=e,Va}var Za,Bu;function Md(){return Bu||(Bu=1,Za=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},n=Symbol("test"),s=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var c=42;r[n]=c;for(var u in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var p=Object.getOwnPropertySymbols(r);if(p.length!==1||p[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(r,n);if(d.value!==c||d.enumerable!==!0)return!1}return!0}),Za}var Ka,ju;function iw(){if(ju)return Ka;ju=1;var e=typeof Symbol<"u"&&Symbol,r=Md();return Ka=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:r()},Ka}var Xa,Fu;function Bd(){return Fu||(Fu=1,Xa=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Xa}var Ya,Du;function jd(){if(Du)return Ya;Du=1;var e=Od();return Ya=e.getPrototypeOf||null,Ya}var Ja,Lu;function aw(){if(Lu)return Ja;Lu=1;var e="Function.prototype.bind called on incompatible ",r=Object.prototype.toString,n=Math.max,s="[object Function]",c=function(h,S){for(var x=[],_=0;_<h.length;_+=1)x[_]=h[_];for(var R=0;R<S.length;R+=1)x[R+h.length]=S[R];return x},u=function(h,S){for(var x=[],_=S,R=0;_<h.length;_+=1,R+=1)x[R]=h[_];return x},p=function(d,h){for(var S="",x=0;x<d.length;x+=1)S+=d[x],x+1<d.length&&(S+=h);return S};return Ja=function(h){var S=this;if(typeof S!="function"||r.apply(S)!==s)throw new TypeError(e+S);for(var x=u(arguments,1),_,R=function(){if(this instanceof _){var F=S.apply(this,c(x,arguments));return Object(F)===F?F:this}return S.apply(h,c(x,arguments))},y=n(0,S.length-x.length),j=[],X=0;X<y;X++)j[X]="$"+X;if(_=Function("binder","return function ("+p(j,",")+"){ return binder.apply(this,arguments); }")(R),S.prototype){var L=function(){};L.prototype=S.prototype,_.prototype=new L,L.prototype=null}return _},Ja}var Qa,$u;function ti(){if($u)return Qa;$u=1;var e=aw();return Qa=Function.prototype.bind||e,Qa}var eo,Nu;function ks(){return Nu||(Nu=1,eo=Function.prototype.call),eo}var to,Uu;function Es(){return Uu||(Uu=1,to=Function.prototype.apply),to}var ro,zu;function ow(){return zu||(zu=1,ro=typeof Reflect<"u"&&Reflect&&Reflect.apply),ro}var no,Gu;function Fd(){if(Gu)return no;Gu=1;var e=ti(),r=Es(),n=ks(),s=ow();return no=s||e.call(n,r),no}var io,Hu;function As(){if(Hu)return io;Hu=1;var e=ti(),r=Qn(),n=ks(),s=Fd();return io=function(u){if(u.length<1||typeof u[0]!="function")throw new r("a function is required");return s(e,n,u)},io}var ao,qu;function sw(){if(qu)return ao;qu=1;var e=As(),r=ei(),n;try{n=[].__proto__===Array.prototype}catch(p){if(!p||typeof p!="object"||!("code"in p)||p.code!=="ERR_PROTO_ACCESS")throw p}var s=!!n&&r&&r(Object.prototype,"__proto__"),c=Object,u=c.getPrototypeOf;return ao=s&&typeof s.get=="function"?e([s.get]):typeof u=="function"?function(d){return u(d==null?d:c(d))}:!1,ao}var oo,Wu;function Dd(){if(Wu)return oo;Wu=1;var e=Bd(),r=jd(),n=sw();return oo=e?function(c){return e(c)}:r?function(c){if(!c||typeof c!="object"&&typeof c!="function")throw new TypeError("getProto: not an object");return r(c)}:n?function(c){return n(c)}:null,oo}var so,Vu;function cw(){if(Vu)return so;Vu=1;var e=Function.prototype.call,r=Object.prototype.hasOwnProperty,n=ti();return so=n.call(e,r),so}var co,Zu;function Ld(){if(Zu)return co;Zu=1;var e,r=Od(),n=Hm(),s=qm(),c=Wm(),u=Vm(),p=Pd(),d=Qn(),h=Zm(),S=Km(),x=Xm(),_=Ym(),R=Jm(),y=Qm(),j=ew(),X=rw(),L=Function,F=function(Xe){try{return L('"use strict"; return ('+Xe+").constructor;")()}catch{}},N=ei(),G=$i(),W=function(){throw new d},ne=N?(function(){try{return arguments.callee,W}catch{try{return N(arguments,"callee").get}catch{return W}}})():W,Z=iw()(),z=Dd(),B=jd(),Y=Bd(),U=Es(),ce=ks(),oe={},de=typeof Uint8Array>"u"||!z?e:z(Uint8Array),re={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":Z&&z?z([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":oe,"%AsyncGenerator%":oe,"%AsyncGeneratorFunction%":oe,"%AsyncIteratorPrototype%":oe,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":s,"%Float16Array%":typeof Float16Array>"u"?e:Float16Array,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":L,"%GeneratorFunction%":oe,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Z&&z?z(z([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Z||!z?e:z(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":r,"%Object.getOwnPropertyDescriptor%":N,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":c,"%ReferenceError%":u,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Z||!z?e:z(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Z&&z?z(""[Symbol.iterator]()):e,"%Symbol%":Z?Symbol:e,"%SyntaxError%":p,"%ThrowTypeError%":ne,"%TypedArray%":de,"%TypeError%":d,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":h,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet,"%Function.prototype.call%":ce,"%Function.prototype.apply%":U,"%Object.defineProperty%":G,"%Object.getPrototypeOf%":B,"%Math.abs%":S,"%Math.floor%":x,"%Math.max%":_,"%Math.min%":R,"%Math.pow%":y,"%Math.round%":j,"%Math.sign%":X,"%Reflect.getPrototypeOf%":Y};if(z)try{null.error}catch(Xe){var me=z(z(Xe));re["%Error.prototype%"]=me}var ae=function Xe(Ye){var at;if(Ye==="%AsyncFunction%")at=F("async function () {}");else if(Ye==="%GeneratorFunction%")at=F("function* () {}");else if(Ye==="%AsyncGeneratorFunction%")at=F("async function* () {}");else if(Ye==="%AsyncGenerator%"){var Ze=Xe("%AsyncGeneratorFunction%");Ze&&(at=Ze.prototype)}else if(Ye==="%AsyncIteratorPrototype%"){var Qe=Xe("%AsyncGenerator%");Qe&&z&&(at=z(Qe.prototype))}return re[Ye]=at,at},ie={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},se=ti(),he=cw(),Ne=se.call(ce,Array.prototype.concat),_e=se.call(U,Array.prototype.splice),Be=se.call(ce,String.prototype.replace),q=se.call(ce,String.prototype.slice),ke=se.call(ce,RegExp.prototype.exec),Ie=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Oe=/\\(\\)?/g,Fe=function(Ye){var at=q(Ye,0,1),Ze=q(Ye,-1);if(at==="%"&&Ze!=="%")throw new p("invalid intrinsic syntax, expected closing `%`");if(Ze==="%"&&at!=="%")throw new p("invalid intrinsic syntax, expected opening `%`");var Qe=[];return Be(Ye,Ie,function(ht,mt,O,g){Qe[Qe.length]=O?Be(g,Oe,"$1"):mt||ht}),Qe},Me=function(Ye,at){var Ze=Ye,Qe;if(he(ie,Ze)&&(Qe=ie[Ze],Ze="%"+Qe[0]+"%"),he(re,Ze)){var ht=re[Ze];if(ht===oe&&(ht=ae(Ze)),typeof ht>"u"&&!at)throw new d("intrinsic "+Ye+" exists, but is not available. Please file an issue!");return{alias:Qe,name:Ze,value:ht}}throw new p("intrinsic "+Ye+" does not exist!")};return co=function(Ye,at){if(typeof Ye!="string"||Ye.length===0)throw new d("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof at!="boolean")throw new d('"allowMissing" argument must be a boolean');if(ke(/^%?[^%]*%?$/,Ye)===null)throw new p("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ze=Fe(Ye),Qe=Ze.length>0?Ze[0]:"",ht=Me("%"+Qe+"%",at),mt=ht.name,O=ht.value,g=!1,b=ht.alias;b&&(Qe=b[0],_e(Ze,Ne([0,1],b)));for(var $=1,te=!0;$<Ze.length;$+=1){var ye=Ze[$],xe=q(ye,0,1),Je=q(ye,-1);if((xe==='"'||xe==="'"||xe==="`"||Je==='"'||Je==="'"||Je==="`")&&xe!==Je)throw new p("property names with quotes must have matching quotes");if((ye==="constructor"||!te)&&(g=!0),Qe+="."+ye,mt="%"+Qe+"%",he(re,mt))O=re[mt];else if(O!=null){if(!(ye in O)){if(!at)throw new d("base intrinsic for "+Ye+" exists, but the property is not available.");return}if(N&&$+1>=Ze.length){var tt=N(O,ye);te=!!tt,te&&"get"in tt&&!("originalValue"in tt.get)?O=tt.get:O=O[ye]}else te=he(O,ye),O=O[ye];te&&!g&&(re[mt]=O)}}return O},co}var lo,Ku;function $d(){if(Ku)return lo;Ku=1;var e=Ld(),r=As(),n=r([e("%String.prototype.indexOf%")]);return lo=function(c,u){var p=e(c,!!u);return typeof p=="function"&&n(c,".prototype.")>-1?r([p]):p},lo}var uo,Xu;function lw(){if(Xu)return uo;Xu=1;var e=Function.prototype.toString,r=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,s;if(typeof r=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw s}}),s={},r(function(){throw 42},null,n)}catch(N){N!==s&&(r=null)}else r=null;var c=/^\s*class\b/,u=function(G){try{var W=e.call(G);return c.test(W)}catch{return!1}},p=function(G){try{return u(G)?!1:(e.call(G),!0)}catch{return!1}},d=Object.prototype.toString,h="[object Object]",S="[object Function]",x="[object GeneratorFunction]",_="[object HTMLAllCollection]",R="[object HTML document.all class]",y="[object HTMLCollection]",j=typeof Symbol=="function"&&!!Symbol.toStringTag,X=!(0 in[,]),L=function(){return!1};if(typeof document=="object"){var F=document.all;d.call(F)===d.call(document.all)&&(L=function(G){if((X||!G)&&(typeof G>"u"||typeof G=="object"))try{var W=d.call(G);return(W===_||W===R||W===y||W===h)&&G("")==null}catch{}return!1})}return uo=r?function(G){if(L(G))return!0;if(!G||typeof G!="function"&&typeof G!="object")return!1;try{r(G,null,n)}catch(W){if(W!==s)return!1}return!u(G)&&p(G)}:function(G){if(L(G))return!0;if(!G||typeof G!="function"&&typeof G!="object")return!1;if(j)return p(G);if(u(G))return!1;var W=d.call(G);return W!==S&&W!==x&&!/^\[object HTML/.test(W)?!1:p(G)},uo}var fo,Yu;function uw(){if(Yu)return fo;Yu=1;var e=lw(),r=Object.prototype.toString,n=Object.prototype.hasOwnProperty,s=function(h,S,x){for(var _=0,R=h.length;_<R;_++)n.call(h,_)&&(x==null?S(h[_],_,h):S.call(x,h[_],_,h))},c=function(h,S,x){for(var _=0,R=h.length;_<R;_++)x==null?S(h.charAt(_),_,h):S.call(x,h.charAt(_),_,h)},u=function(h,S,x){for(var _ in h)n.call(h,_)&&(x==null?S(h[_],_,h):S.call(x,h[_],_,h))};function p(d){return r.call(d)==="[object Array]"}return fo=function(h,S,x){if(!e(S))throw new TypeError("iterator must be a function");var _;arguments.length>=3&&(_=x),p(h)?s(h,S,_):typeof h=="string"?c(h,S,_):u(h,S,_)},fo}var ho,Ju;function fw(){return Ju||(Ju=1,ho=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),ho}var po,Qu;function dw(){if(Qu)return po;Qu=1;var e=fw(),r=typeof globalThis>"u"?Ai:globalThis;return po=function(){for(var s=[],c=0;c<e.length;c++)typeof r[e[c]]=="function"&&(s[s.length]=e[c]);return s},po}var go={exports:{}},mo,ef;function hw(){if(ef)return mo;ef=1;var e=$i(),r=Pd(),n=Qn(),s=ei();return mo=function(u,p,d){if(!u||typeof u!="object"&&typeof u!="function")throw new n("`obj` must be an object or a function`");if(typeof p!="string"&&typeof p!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var h=arguments.length>3?arguments[3]:null,S=arguments.length>4?arguments[4]:null,x=arguments.length>5?arguments[5]:null,_=arguments.length>6?arguments[6]:!1,R=!!s&&s(u,p);if(e)e(u,p,{configurable:x===null&&R?R.configurable:!x,enumerable:h===null&&R?R.enumerable:!h,value:d,writable:S===null&&R?R.writable:!S});else if(_||!h&&!S&&!x)u[p]=d;else throw new r("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},mo}var wo,tf;function pw(){if(tf)return wo;tf=1;var e=$i(),r=function(){return!!e};return r.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},wo=r,wo}var yo,rf;function gw(){if(rf)return yo;rf=1;var e=Ld(),r=hw(),n=pw()(),s=ei(),c=Qn(),u=e("%Math.floor%");return yo=function(d,h){if(typeof d!="function")throw new c("`fn` is not a function");if(typeof h!="number"||h<0||h>4294967295||u(h)!==h)throw new c("`length` must be a positive 32-bit integer");var S=arguments.length>2&&!!arguments[2],x=!0,_=!0;if("length"in d&&s){var R=s(d,"length");R&&!R.configurable&&(x=!1),R&&!R.writable&&(_=!1)}return(x||_||!S)&&(n?r(d,"length",h,!0,!0):r(d,"length",h)),d},yo}var bo,nf;function mw(){if(nf)return bo;nf=1;var e=ti(),r=Es(),n=Fd();return bo=function(){return n(e,r,arguments)},bo}var af;function ww(){return af||(af=1,(function(e){var r=gw(),n=$i(),s=As(),c=mw();e.exports=function(p){var d=s(arguments),h=p.length-(arguments.length-1);return r(d,1+(h>0?h:0),!0)},n?n(e.exports,"apply",{value:c}):e.exports.apply=c})(go)),go.exports}var vo,of;function yw(){if(of)return vo;of=1;var e=Md();return vo=function(){return e()&&!!Symbol.toStringTag},vo}var xo,sf;function bw(){if(sf)return xo;sf=1;var e=uw(),r=dw(),n=ww(),s=$d(),c=ei(),u=Dd(),p=s("Object.prototype.toString"),d=yw()(),h=typeof globalThis>"u"?Ai:globalThis,S=r(),x=s("String.prototype.slice"),_=s("Array.prototype.indexOf",!0)||function(L,F){for(var N=0;N<L.length;N+=1)if(L[N]===F)return N;return-1},R={__proto__:null};d&&c&&u?e(S,function(X){var L=new h[X];if(Symbol.toStringTag in L&&u){var F=u(L),N=c(F,Symbol.toStringTag);if(!N&&F){var G=u(F);N=c(G,Symbol.toStringTag)}if(N&&N.get){var W=n(N.get);R["$"+X]=W}}}):e(S,function(X){var L=new h[X],F=L.slice||L.set;if(F){var N=n(F);R["$"+X]=N}});var y=function(L){var F=!1;return e(R,function(N,G){if(!F)try{"$"+N(L)===G&&(F=x(G,1))}catch{}}),F},j=function(L){var F=!1;return e(R,function(N,G){if(!F)try{N(L),F=x(G,1)}catch{}}),F};return xo=function(L){if(!L||typeof L!="object")return!1;if(!d){var F=x(p(L),8,-1);return _(S,F)>-1?F:F!=="Object"?!1:j(L)}return c?y(L):null},xo}var _o,cf;function vw(){if(cf)return _o;cf=1;var e=bw();return _o=function(n){return!!e(n)},_o}var So,lf;function xw(){if(lf)return So;lf=1;var e=Qn(),r=$d(),n=r("TypedArray.prototype.buffer",!0),s=vw();return So=n||function(u){if(!s(u))throw new e("Not a Typed Array");return u.buffer},So}var ko,uf;function _w(){if(uf)return ko;uf=1;var e=Ss().Buffer,r=Gm(),n=xw(),s=ArrayBuffer.isView||function(h){try{return n(h),!0}catch{return!1}},c=typeof Uint8Array<"u",u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",p=u&&(e.prototype instanceof Uint8Array||e.TYPED_ARRAY_SUPPORT);return ko=function(h,S){if(e.isBuffer(h))return h.constructor&&!("isBuffer"in h)?e.from(h):h;if(typeof h=="string")return e.from(h,S);if(u&&s(h)){if(h.byteLength===0)return e.alloc(0);if(p){var x=e.from(h.buffer,h.byteOffset,h.byteLength);if(x.byteLength===h.byteLength)return x}var _=h instanceof Uint8Array?h:new Uint8Array(h.buffer,h.byteOffset,h.byteLength),R=e.from(_);if(R.length===h.byteLength)return R}if(c&&h instanceof Uint8Array)return e.from(h);var y=r(h);if(y)for(var j=0;j<h.length;j+=1){var X=h[j];if(typeof X!="number"||X<0||X>255||~~X!==X)throw new RangeError("Array items must be numbers in the range 0-255.")}if(y||e.isBuffer(h)&&h.constructor&&typeof h.constructor.isBuffer=="function"&&h.constructor.isBuffer(h))return e.from(h);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},ko}var Eo,ff;function Sw(){if(ff)return Eo;ff=1;var e=Ss().Buffer,r=_w();function n(s,c){this._block=e.alloc(s),this._finalSize=c,this._blockSize=s,this._len=0}return n.prototype.update=function(s,c){s=r(s,c||"utf8");for(var u=this._block,p=this._blockSize,d=s.length,h=this._len,S=0;S<d;){for(var x=h%p,_=Math.min(d-S,p-x),R=0;R<_;R++)u[x+R]=s[S+R];h+=_,S+=_,h%p===0&&this._update(u)}return this._len+=d,this},n.prototype.digest=function(s){var c=this._len%this._blockSize;this._block[c]=128,this._block.fill(0,c+1),c>=this._finalSize&&(this._update(this._block),this._block.fill(0));var u=this._len*8;if(u<=4294967295)this._block.writeUInt32BE(u,this._blockSize-4);else{var p=(u&4294967295)>>>0,d=(u-p)/4294967296;this._block.writeUInt32BE(d,this._blockSize-8),this._block.writeUInt32BE(p,this._blockSize-4)}this._update(this._block);var h=this._hash();return s?h.toString(s):h},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Eo=n,Eo}var Ao,df;function kw(){if(df)return Ao;df=1;var e=$m(),r=Sw(),n=Ss().Buffer,s=[1518500249,1859775393,-1894007588,-899497514],c=new Array(80);function u(){this.init(),this._w=c,r.call(this,64,56)}e(u,r),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function p(x){return x<<1|x>>>31}function d(x){return x<<5|x>>>27}function h(x){return x<<30|x>>>2}function S(x,_,R,y){return x===0?_&R|~_&y:x===2?_&R|_&y|R&y:_^R^y}return u.prototype._update=function(x){for(var _=this._w,R=this._a|0,y=this._b|0,j=this._c|0,X=this._d|0,L=this._e|0,F=0;F<16;++F)_[F]=x.readInt32BE(F*4);for(;F<80;++F)_[F]=p(_[F-3]^_[F-8]^_[F-14]^_[F-16]);for(var N=0;N<80;++N){var G=~~(N/20),W=d(R)+S(G,y,j,X)+L+_[N]+s[G]|0;L=X,X=j,j=h(y),y=R,R=W}this._a=R+this._a|0,this._b=y+this._b|0,this._c=j+this._c|0,this._d=X+this._d|0,this._e=L+this._e|0},u.prototype._hash=function(){var x=n.allocUnsafe(20);return x.writeInt32BE(this._a|0,0),x.writeInt32BE(this._b|0,4),x.writeInt32BE(this._c|0,8),x.writeInt32BE(this._d|0,12),x.writeInt32BE(this._e|0,16),x},Ao=u,Ao}var Io={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var hf;function Ew(){return hf||(hf=1,(function(e){(function(r){r(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(r){r.version="1.2.2";function n(){for(var B=0,Y=new Array(256),U=0;U!=256;++U)B=U,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,Y[U]=B;return typeof Int32Array<"u"?new Int32Array(Y):Y}var s=n();function c(B){var Y=0,U=0,ce=0,oe=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ce=0;ce!=256;++ce)oe[ce]=B[ce];for(ce=0;ce!=256;++ce)for(U=B[ce],Y=256+ce;Y<4096;Y+=256)U=oe[Y]=U>>>8^B[U&255];var de=[];for(ce=1;ce!=16;++ce)de[ce-1]=typeof Int32Array<"u"?oe.subarray(ce*256,ce*256+256):oe.slice(ce*256,ce*256+256);return de}var u=c(s),p=u[0],d=u[1],h=u[2],S=u[3],x=u[4],_=u[5],R=u[6],y=u[7],j=u[8],X=u[9],L=u[10],F=u[11],N=u[12],G=u[13],W=u[14];function ne(B,Y){for(var U=Y^-1,ce=0,oe=B.length;ce<oe;)U=U>>>8^s[(U^B.charCodeAt(ce++))&255];return~U}function Z(B,Y){for(var U=Y^-1,ce=B.length-15,oe=0;oe<ce;)U=W[B[oe++]^U&255]^G[B[oe++]^U>>8&255]^N[B[oe++]^U>>16&255]^F[B[oe++]^U>>>24]^L[B[oe++]]^X[B[oe++]]^j[B[oe++]]^y[B[oe++]]^R[B[oe++]]^_[B[oe++]]^x[B[oe++]]^S[B[oe++]]^h[B[oe++]]^d[B[oe++]]^p[B[oe++]]^s[B[oe++]];for(ce+=15;oe<ce;)U=U>>>8^s[(U^B[oe++])&255];return~U}function z(B,Y){for(var U=Y^-1,ce=0,oe=B.length,de=0,re=0;ce<oe;)de=B.charCodeAt(ce++),de<128?U=U>>>8^s[(U^de)&255]:de<2048?(U=U>>>8^s[(U^(192|de>>6&31))&255],U=U>>>8^s[(U^(128|de&63))&255]):de>=55296&&de<57344?(de=(de&1023)+64,re=B.charCodeAt(ce++)&1023,U=U>>>8^s[(U^(240|de>>8&7))&255],U=U>>>8^s[(U^(128|de>>2&63))&255],U=U>>>8^s[(U^(128|re>>6&15|(de&3)<<4))&255],U=U>>>8^s[(U^(128|re&63))&255]):(U=U>>>8^s[(U^(224|de>>12&15))&255],U=U>>>8^s[(U^(128|de>>6&63))&255],U=U>>>8^s[(U^(128|de&63))&255]);return~U}r.table=s,r.bstr=ne,r.buf=Z,r.str=z})})(Io)),Io}var Co={},pf;function Cr(){return pf||(pf=1,(function(e){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(u,p){return Object.prototype.hasOwnProperty.call(u,p)}e.assign=function(u){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var d=p.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)n(d,h)&&(u[h]=d[h])}}return u},e.shrinkBuf=function(u,p){return u.length===p?u:u.subarray?u.subarray(0,p):(u.length=p,u)};var s={arraySet:function(u,p,d,h,S){if(p.subarray&&u.subarray){u.set(p.subarray(d,d+h),S);return}for(var x=0;x<h;x++)u[S+x]=p[d+x]},flattenChunks:function(u){var p,d,h,S,x,_;for(h=0,p=0,d=u.length;p<d;p++)h+=u[p].length;for(_=new Uint8Array(h),S=0,p=0,d=u.length;p<d;p++)x=u[p],_.set(x,S),S+=x.length;return _}},c={arraySet:function(u,p,d,h,S){for(var x=0;x<h;x++)u[S+x]=p[d+x]},flattenChunks:function(u){return[].concat.apply([],u)}};e.setTyped=function(u){u?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,s)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,c))},e.setTyped(r)})(Co)),Co}var on={},or={},Nr={},gf;function Aw(){if(gf)return Nr;gf=1;var e=Cr(),r=4,n=0,s=1,c=2;function u(P){for(var Se=P.length;--Se>=0;)P[Se]=0}var p=0,d=1,h=2,S=3,x=258,_=29,R=256,y=R+1+_,j=30,X=19,L=2*y+1,F=15,N=16,G=7,W=256,ne=16,Z=17,z=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=512,de=new Array((y+2)*2);u(de);var re=new Array(j*2);u(re);var me=new Array(oe);u(me);var ae=new Array(x-S+1);u(ae);var ie=new Array(_);u(ie);var se=new Array(j);u(se);function he(P,Se,Ae,ze,Q){this.static_tree=P,this.extra_bits=Se,this.extra_base=Ae,this.elems=ze,this.max_length=Q,this.has_stree=P&&P.length}var Ne,_e,Be;function q(P,Se){this.dyn_tree=P,this.max_code=0,this.stat_desc=Se}function ke(P){return P<256?me[P]:me[256+(P>>>7)]}function Ie(P,Se){P.pending_buf[P.pending++]=Se&255,P.pending_buf[P.pending++]=Se>>>8&255}function Oe(P,Se,Ae){P.bi_valid>N-Ae?(P.bi_buf|=Se<<P.bi_valid&65535,Ie(P,P.bi_buf),P.bi_buf=Se>>N-P.bi_valid,P.bi_valid+=Ae-N):(P.bi_buf|=Se<<P.bi_valid&65535,P.bi_valid+=Ae)}function Fe(P,Se,Ae){Oe(P,Ae[Se*2],Ae[Se*2+1])}function Me(P,Se){var Ae=0;do Ae|=P&1,P>>>=1,Ae<<=1;while(--Se>0);return Ae>>>1}function Xe(P){P.bi_valid===16?(Ie(P,P.bi_buf),P.bi_buf=0,P.bi_valid=0):P.bi_valid>=8&&(P.pending_buf[P.pending++]=P.bi_buf&255,P.bi_buf>>=8,P.bi_valid-=8)}function Ye(P,Se){var Ae=Se.dyn_tree,ze=Se.max_code,Q=Se.stat_desc.static_tree,ue=Se.stat_desc.has_stree,E=Se.stat_desc.extra_bits,Ee=Se.stat_desc.extra_base,Ke=Se.stat_desc.max_length,m,H,pe,I,K,le,Ve=0;for(I=0;I<=F;I++)P.bl_count[I]=0;for(Ae[P.heap[P.heap_max]*2+1]=0,m=P.heap_max+1;m<L;m++)H=P.heap[m],I=Ae[Ae[H*2+1]*2+1]+1,I>Ke&&(I=Ke,Ve++),Ae[H*2+1]=I,!(H>ze)&&(P.bl_count[I]++,K=0,H>=Ee&&(K=E[H-Ee]),le=Ae[H*2],P.opt_len+=le*(I+K),ue&&(P.static_len+=le*(Q[H*2+1]+K)));if(Ve!==0){do{for(I=Ke-1;P.bl_count[I]===0;)I--;P.bl_count[I]--,P.bl_count[I+1]+=2,P.bl_count[Ke]--,Ve-=2}while(Ve>0);for(I=Ke;I!==0;I--)for(H=P.bl_count[I];H!==0;)pe=P.heap[--m],!(pe>ze)&&(Ae[pe*2+1]!==I&&(P.opt_len+=(I-Ae[pe*2+1])*Ae[pe*2],Ae[pe*2+1]=I),H--)}}function at(P,Se,Ae){var ze=new Array(F+1),Q=0,ue,E;for(ue=1;ue<=F;ue++)ze[ue]=Q=Q+Ae[ue-1]<<1;for(E=0;E<=Se;E++){var Ee=P[E*2+1];Ee!==0&&(P[E*2]=Me(ze[Ee]++,Ee))}}function Ze(){var P,Se,Ae,ze,Q,ue=new Array(F+1);for(Ae=0,ze=0;ze<_-1;ze++)for(ie[ze]=Ae,P=0;P<1<<B[ze];P++)ae[Ae++]=ze;for(ae[Ae-1]=ze,Q=0,ze=0;ze<16;ze++)for(se[ze]=Q,P=0;P<1<<Y[ze];P++)me[Q++]=ze;for(Q>>=7;ze<j;ze++)for(se[ze]=Q<<7,P=0;P<1<<Y[ze]-7;P++)me[256+Q++]=ze;for(Se=0;Se<=F;Se++)ue[Se]=0;for(P=0;P<=143;)de[P*2+1]=8,P++,ue[8]++;for(;P<=255;)de[P*2+1]=9,P++,ue[9]++;for(;P<=279;)de[P*2+1]=7,P++,ue[7]++;for(;P<=287;)de[P*2+1]=8,P++,ue[8]++;for(at(de,y+1,ue),P=0;P<j;P++)re[P*2+1]=5,re[P*2]=Me(P,5);Ne=new he(de,B,R+1,y,F),_e=new he(re,Y,0,j,F),Be=new he(new Array(0),U,0,X,G)}function Qe(P){var Se;for(Se=0;Se<y;Se++)P.dyn_ltree[Se*2]=0;for(Se=0;Se<j;Se++)P.dyn_dtree[Se*2]=0;for(Se=0;Se<X;Se++)P.bl_tree[Se*2]=0;P.dyn_ltree[W*2]=1,P.opt_len=P.static_len=0,P.last_lit=P.matches=0}function ht(P){P.bi_valid>8?Ie(P,P.bi_buf):P.bi_valid>0&&(P.pending_buf[P.pending++]=P.bi_buf),P.bi_buf=0,P.bi_valid=0}function mt(P,Se,Ae,ze){ht(P),Ie(P,Ae),Ie(P,~Ae),e.arraySet(P.pending_buf,P.window,Se,Ae,P.pending),P.pending+=Ae}function O(P,Se,Ae,ze){var Q=Se*2,ue=Ae*2;return P[Q]<P[ue]||P[Q]===P[ue]&&ze[Se]<=ze[Ae]}function g(P,Se,Ae){for(var ze=P.heap[Ae],Q=Ae<<1;Q<=P.heap_len&&(Q<P.heap_len&&O(Se,P.heap[Q+1],P.heap[Q],P.depth)&&Q++,!O(Se,ze,P.heap[Q],P.depth));)P.heap[Ae]=P.heap[Q],Ae=Q,Q<<=1;P.heap[Ae]=ze}function b(P,Se,Ae){var ze,Q,ue=0,E,Ee;if(P.last_lit!==0)do ze=P.pending_buf[P.d_buf+ue*2]<<8|P.pending_buf[P.d_buf+ue*2+1],Q=P.pending_buf[P.l_buf+ue],ue++,ze===0?Fe(P,Q,Se):(E=ae[Q],Fe(P,E+R+1,Se),Ee=B[E],Ee!==0&&(Q-=ie[E],Oe(P,Q,Ee)),ze--,E=ke(ze),Fe(P,E,Ae),Ee=Y[E],Ee!==0&&(ze-=se[E],Oe(P,ze,Ee)));while(ue<P.last_lit);Fe(P,W,Se)}function $(P,Se){var Ae=Se.dyn_tree,ze=Se.stat_desc.static_tree,Q=Se.stat_desc.has_stree,ue=Se.stat_desc.elems,E,Ee,Ke=-1,m;for(P.heap_len=0,P.heap_max=L,E=0;E<ue;E++)Ae[E*2]!==0?(P.heap[++P.heap_len]=Ke=E,P.depth[E]=0):Ae[E*2+1]=0;for(;P.heap_len<2;)m=P.heap[++P.heap_len]=Ke<2?++Ke:0,Ae[m*2]=1,P.depth[m]=0,P.opt_len--,Q&&(P.static_len-=ze[m*2+1]);for(Se.max_code=Ke,E=P.heap_len>>1;E>=1;E--)g(P,Ae,E);m=ue;do E=P.heap[1],P.heap[1]=P.heap[P.heap_len--],g(P,Ae,1),Ee=P.heap[1],P.heap[--P.heap_max]=E,P.heap[--P.heap_max]=Ee,Ae[m*2]=Ae[E*2]+Ae[Ee*2],P.depth[m]=(P.depth[E]>=P.depth[Ee]?P.depth[E]:P.depth[Ee])+1,Ae[E*2+1]=Ae[Ee*2+1]=m,P.heap[1]=m++,g(P,Ae,1);while(P.heap_len>=2);P.heap[--P.heap_max]=P.heap[1],Ye(P,Se),at(Ae,Ke,P.bl_count)}function te(P,Se,Ae){var ze,Q=-1,ue,E=Se[1],Ee=0,Ke=7,m=4;for(E===0&&(Ke=138,m=3),Se[(Ae+1)*2+1]=65535,ze=0;ze<=Ae;ze++)ue=E,E=Se[(ze+1)*2+1],!(++Ee<Ke&&ue===E)&&(Ee<m?P.bl_tree[ue*2]+=Ee:ue!==0?(ue!==Q&&P.bl_tree[ue*2]++,P.bl_tree[ne*2]++):Ee<=10?P.bl_tree[Z*2]++:P.bl_tree[z*2]++,Ee=0,Q=ue,E===0?(Ke=138,m=3):ue===E?(Ke=6,m=3):(Ke=7,m=4))}function ye(P,Se,Ae){var ze,Q=-1,ue,E=Se[1],Ee=0,Ke=7,m=4;for(E===0&&(Ke=138,m=3),ze=0;ze<=Ae;ze++)if(ue=E,E=Se[(ze+1)*2+1],!(++Ee<Ke&&ue===E)){if(Ee<m)do Fe(P,ue,P.bl_tree);while(--Ee!==0);else ue!==0?(ue!==Q&&(Fe(P,ue,P.bl_tree),Ee--),Fe(P,ne,P.bl_tree),Oe(P,Ee-3,2)):Ee<=10?(Fe(P,Z,P.bl_tree),Oe(P,Ee-3,3)):(Fe(P,z,P.bl_tree),Oe(P,Ee-11,7));Ee=0,Q=ue,E===0?(Ke=138,m=3):ue===E?(Ke=6,m=3):(Ke=7,m=4)}}function xe(P){var Se;for(te(P,P.dyn_ltree,P.l_desc.max_code),te(P,P.dyn_dtree,P.d_desc.max_code),$(P,P.bl_desc),Se=X-1;Se>=3&&P.bl_tree[ce[Se]*2+1]===0;Se--);return P.opt_len+=3*(Se+1)+5+5+4,Se}function Je(P,Se,Ae,ze){var Q;for(Oe(P,Se-257,5),Oe(P,Ae-1,5),Oe(P,ze-4,4),Q=0;Q<ze;Q++)Oe(P,P.bl_tree[ce[Q]*2+1],3);ye(P,P.dyn_ltree,Se-1),ye(P,P.dyn_dtree,Ae-1)}function tt(P){var Se=4093624447,Ae;for(Ae=0;Ae<=31;Ae++,Se>>>=1)if(Se&1&&P.dyn_ltree[Ae*2]!==0)return n;if(P.dyn_ltree[18]!==0||P.dyn_ltree[20]!==0||P.dyn_ltree[26]!==0)return s;for(Ae=32;Ae<R;Ae++)if(P.dyn_ltree[Ae*2]!==0)return s;return n}var it=!1;function ft(P){it||(Ze(),it=!0),P.l_desc=new q(P.dyn_ltree,Ne),P.d_desc=new q(P.dyn_dtree,_e),P.bl_desc=new q(P.bl_tree,Be),P.bi_buf=0,P.bi_valid=0,Qe(P)}function st(P,Se,Ae,ze){Oe(P,(p<<1)+(ze?1:0),3),mt(P,Se,Ae)}function wt(P){Oe(P,d<<1,3),Fe(P,W,de),Xe(P)}function Dt(P,Se,Ae,ze){var Q,ue,E=0;P.level>0?(P.strm.data_type===c&&(P.strm.data_type=tt(P)),$(P,P.l_desc),$(P,P.d_desc),E=xe(P),Q=P.opt_len+3+7>>>3,ue=P.static_len+3+7>>>3,ue<=Q&&(Q=ue)):Q=ue=Ae+5,Ae+4<=Q&&Se!==-1?st(P,Se,Ae,ze):P.strategy===r||ue===Q?(Oe(P,(d<<1)+(ze?1:0),3),b(P,de,re)):(Oe(P,(h<<1)+(ze?1:0),3),Je(P,P.l_desc.max_code+1,P.d_desc.max_code+1,E+1),b(P,P.dyn_ltree,P.dyn_dtree)),Qe(P),ze&&ht(P)}function rr(P,Se,Ae){return P.pending_buf[P.d_buf+P.last_lit*2]=Se>>>8&255,P.pending_buf[P.d_buf+P.last_lit*2+1]=Se&255,P.pending_buf[P.l_buf+P.last_lit]=Ae&255,P.last_lit++,Se===0?P.dyn_ltree[Ae*2]++:(P.matches++,Se--,P.dyn_ltree[(ae[Ae]+R+1)*2]++,P.dyn_dtree[ke(Se)*2]++),P.last_lit===P.lit_bufsize-1}return Nr._tr_init=ft,Nr._tr_stored_block=st,Nr._tr_flush_block=Dt,Nr._tr_tally=rr,Nr._tr_align=wt,Nr}var To,mf;function Nd(){if(mf)return To;mf=1;function e(r,n,s,c){for(var u=r&65535|0,p=r>>>16&65535|0,d=0;s!==0;){d=s>2e3?2e3:s,s-=d;do u=u+n[c++]|0,p=p+u|0;while(--d);u%=65521,p%=65521}return u|p<<16|0}return To=e,To}var Ro,wf;function Ud(){if(wf)return Ro;wf=1;function e(){for(var s,c=[],u=0;u<256;u++){s=u;for(var p=0;p<8;p++)s=s&1?3988292384^s>>>1:s>>>1;c[u]=s}return c}var r=e();function n(s,c,u,p){var d=r,h=p+u;s^=-1;for(var S=p;S<h;S++)s=s>>>8^d[(s^c[S])&255];return s^-1}return Ro=n,Ro}var Oo,yf;function Is(){return yf||(yf=1,Oo={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),Oo}var bf;function Iw(){if(bf)return or;bf=1;var e=Cr(),r=Aw(),n=Nd(),s=Ud(),c=Is(),u=0,p=1,d=3,h=4,S=5,x=0,_=1,R=-2,y=-3,j=-5,X=-1,L=1,F=2,N=3,G=4,W=0,ne=2,Z=8,z=9,B=15,Y=8,U=29,ce=256,oe=ce+1+U,de=30,re=19,me=2*oe+1,ae=15,ie=3,se=258,he=se+ie+1,Ne=32,_e=42,Be=69,q=73,ke=91,Ie=103,Oe=113,Fe=666,Me=1,Xe=2,Ye=3,at=4,Ze=3;function Qe(m,H){return m.msg=c[H],H}function ht(m){return(m<<1)-(m>4?9:0)}function mt(m){for(var H=m.length;--H>=0;)m[H]=0}function O(m){var H=m.state,pe=H.pending;pe>m.avail_out&&(pe=m.avail_out),pe!==0&&(e.arraySet(m.output,H.pending_buf,H.pending_out,pe,m.next_out),m.next_out+=pe,H.pending_out+=pe,m.total_out+=pe,m.avail_out-=pe,H.pending-=pe,H.pending===0&&(H.pending_out=0))}function g(m,H){r._tr_flush_block(m,m.block_start>=0?m.block_start:-1,m.strstart-m.block_start,H),m.block_start=m.strstart,O(m.strm)}function b(m,H){m.pending_buf[m.pending++]=H}function $(m,H){m.pending_buf[m.pending++]=H>>>8&255,m.pending_buf[m.pending++]=H&255}function te(m,H,pe,I){var K=m.avail_in;return K>I&&(K=I),K===0?0:(m.avail_in-=K,e.arraySet(H,m.input,m.next_in,K,pe),m.state.wrap===1?m.adler=n(m.adler,H,K,pe):m.state.wrap===2&&(m.adler=s(m.adler,H,K,pe)),m.next_in+=K,m.total_in+=K,K)}function ye(m,H){var pe=m.max_chain_length,I=m.strstart,K,le,Ve=m.prev_length,Le=m.nice_match,Pe=m.strstart>m.w_size-he?m.strstart-(m.w_size-he):0,rt=m.window,Yt=m.w_mask,pt=m.prev,ot=m.strstart+se,bt=rt[I+Ve-1],Et=rt[I+Ve];m.prev_length>=m.good_match&&(pe>>=2),Le>m.lookahead&&(Le=m.lookahead);do if(K=H,!(rt[K+Ve]!==Et||rt[K+Ve-1]!==bt||rt[K]!==rt[I]||rt[++K]!==rt[I+1])){I+=2,K++;do;while(rt[++I]===rt[++K]&&rt[++I]===rt[++K]&&rt[++I]===rt[++K]&&rt[++I]===rt[++K]&&rt[++I]===rt[++K]&&rt[++I]===rt[++K]&&rt[++I]===rt[++K]&&rt[++I]===rt[++K]&&I<ot);if(le=se-(ot-I),I=ot-se,le>Ve){if(m.match_start=H,Ve=le,le>=Le)break;bt=rt[I+Ve-1],Et=rt[I+Ve]}}while((H=pt[H&Yt])>Pe&&--pe!==0);return Ve<=m.lookahead?Ve:m.lookahead}function xe(m){var H=m.w_size,pe,I,K,le,Ve;do{if(le=m.window_size-m.lookahead-m.strstart,m.strstart>=H+(H-he)){e.arraySet(m.window,m.window,H,H,0),m.match_start-=H,m.strstart-=H,m.block_start-=H,I=m.hash_size,pe=I;do K=m.head[--pe],m.head[pe]=K>=H?K-H:0;while(--I);I=H,pe=I;do K=m.prev[--pe],m.prev[pe]=K>=H?K-H:0;while(--I);le+=H}if(m.strm.avail_in===0)break;if(I=te(m.strm,m.window,m.strstart+m.lookahead,le),m.lookahead+=I,m.lookahead+m.insert>=ie)for(Ve=m.strstart-m.insert,m.ins_h=m.window[Ve],m.ins_h=(m.ins_h<<m.hash_shift^m.window[Ve+1])&m.hash_mask;m.insert&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[Ve+ie-1])&m.hash_mask,m.prev[Ve&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=Ve,Ve++,m.insert--,!(m.lookahead+m.insert<ie)););}while(m.lookahead<he&&m.strm.avail_in!==0)}function Je(m,H){var pe=65535;for(pe>m.pending_buf_size-5&&(pe=m.pending_buf_size-5);;){if(m.lookahead<=1){if(xe(m),m.lookahead===0&&H===u)return Me;if(m.lookahead===0)break}m.strstart+=m.lookahead,m.lookahead=0;var I=m.block_start+pe;if((m.strstart===0||m.strstart>=I)&&(m.lookahead=m.strstart-I,m.strstart=I,g(m,!1),m.strm.avail_out===0)||m.strstart-m.block_start>=m.w_size-he&&(g(m,!1),m.strm.avail_out===0))return Me}return m.insert=0,H===h?(g(m,!0),m.strm.avail_out===0?Ye:at):(m.strstart>m.block_start&&(g(m,!1),m.strm.avail_out===0),Me)}function tt(m,H){for(var pe,I;;){if(m.lookahead<he){if(xe(m),m.lookahead<he&&H===u)return Me;if(m.lookahead===0)break}if(pe=0,m.lookahead>=ie&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+ie-1])&m.hash_mask,pe=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),pe!==0&&m.strstart-pe<=m.w_size-he&&(m.match_length=ye(m,pe)),m.match_length>=ie)if(I=r._tr_tally(m,m.strstart-m.match_start,m.match_length-ie),m.lookahead-=m.match_length,m.match_length<=m.max_lazy_match&&m.lookahead>=ie){m.match_length--;do m.strstart++,m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+ie-1])&m.hash_mask,pe=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart;while(--m.match_length!==0);m.strstart++}else m.strstart+=m.match_length,m.match_length=0,m.ins_h=m.window[m.strstart],m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+1])&m.hash_mask;else I=r._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++;if(I&&(g(m,!1),m.strm.avail_out===0))return Me}return m.insert=m.strstart<ie-1?m.strstart:ie-1,H===h?(g(m,!0),m.strm.avail_out===0?Ye:at):m.last_lit&&(g(m,!1),m.strm.avail_out===0)?Me:Xe}function it(m,H){for(var pe,I,K;;){if(m.lookahead<he){if(xe(m),m.lookahead<he&&H===u)return Me;if(m.lookahead===0)break}if(pe=0,m.lookahead>=ie&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+ie-1])&m.hash_mask,pe=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),m.prev_length=m.match_length,m.prev_match=m.match_start,m.match_length=ie-1,pe!==0&&m.prev_length<m.max_lazy_match&&m.strstart-pe<=m.w_size-he&&(m.match_length=ye(m,pe),m.match_length<=5&&(m.strategy===L||m.match_length===ie&&m.strstart-m.match_start>4096)&&(m.match_length=ie-1)),m.prev_length>=ie&&m.match_length<=m.prev_length){K=m.strstart+m.lookahead-ie,I=r._tr_tally(m,m.strstart-1-m.prev_match,m.prev_length-ie),m.lookahead-=m.prev_length-1,m.prev_length-=2;do++m.strstart<=K&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+ie-1])&m.hash_mask,pe=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart);while(--m.prev_length!==0);if(m.match_available=0,m.match_length=ie-1,m.strstart++,I&&(g(m,!1),m.strm.avail_out===0))return Me}else if(m.match_available){if(I=r._tr_tally(m,0,m.window[m.strstart-1]),I&&g(m,!1),m.strstart++,m.lookahead--,m.strm.avail_out===0)return Me}else m.match_available=1,m.strstart++,m.lookahead--}return m.match_available&&(I=r._tr_tally(m,0,m.window[m.strstart-1]),m.match_available=0),m.insert=m.strstart<ie-1?m.strstart:ie-1,H===h?(g(m,!0),m.strm.avail_out===0?Ye:at):m.last_lit&&(g(m,!1),m.strm.avail_out===0)?Me:Xe}function ft(m,H){for(var pe,I,K,le,Ve=m.window;;){if(m.lookahead<=se){if(xe(m),m.lookahead<=se&&H===u)return Me;if(m.lookahead===0)break}if(m.match_length=0,m.lookahead>=ie&&m.strstart>0&&(K=m.strstart-1,I=Ve[K],I===Ve[++K]&&I===Ve[++K]&&I===Ve[++K])){le=m.strstart+se;do;while(I===Ve[++K]&&I===Ve[++K]&&I===Ve[++K]&&I===Ve[++K]&&I===Ve[++K]&&I===Ve[++K]&&I===Ve[++K]&&I===Ve[++K]&&K<le);m.match_length=se-(le-K),m.match_length>m.lookahead&&(m.match_length=m.lookahead)}if(m.match_length>=ie?(pe=r._tr_tally(m,1,m.match_length-ie),m.lookahead-=m.match_length,m.strstart+=m.match_length,m.match_length=0):(pe=r._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++),pe&&(g(m,!1),m.strm.avail_out===0))return Me}return m.insert=0,H===h?(g(m,!0),m.strm.avail_out===0?Ye:at):m.last_lit&&(g(m,!1),m.strm.avail_out===0)?Me:Xe}function st(m,H){for(var pe;;){if(m.lookahead===0&&(xe(m),m.lookahead===0)){if(H===u)return Me;break}if(m.match_length=0,pe=r._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++,pe&&(g(m,!1),m.strm.avail_out===0))return Me}return m.insert=0,H===h?(g(m,!0),m.strm.avail_out===0?Ye:at):m.last_lit&&(g(m,!1),m.strm.avail_out===0)?Me:Xe}function wt(m,H,pe,I,K){this.good_length=m,this.max_lazy=H,this.nice_length=pe,this.max_chain=I,this.func=K}var Dt;Dt=[new wt(0,0,0,0,Je),new wt(4,4,8,4,tt),new wt(4,5,16,8,tt),new wt(4,6,32,32,tt),new wt(4,4,16,16,it),new wt(8,16,32,32,it),new wt(8,16,128,128,it),new wt(8,32,128,256,it),new wt(32,128,258,1024,it),new wt(32,258,258,4096,it)];function rr(m){m.window_size=2*m.w_size,mt(m.head),m.max_lazy_match=Dt[m.level].max_lazy,m.good_match=Dt[m.level].good_length,m.nice_match=Dt[m.level].nice_length,m.max_chain_length=Dt[m.level].max_chain,m.strstart=0,m.block_start=0,m.lookahead=0,m.insert=0,m.match_length=m.prev_length=ie-1,m.match_available=0,m.ins_h=0}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(me*2),this.dyn_dtree=new e.Buf16((2*de+1)*2),this.bl_tree=new e.Buf16((2*re+1)*2),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ae+1),this.heap=new e.Buf16(2*oe+1),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*oe+1),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Se(m){var H;return!m||!m.state?Qe(m,R):(m.total_in=m.total_out=0,m.data_type=ne,H=m.state,H.pending=0,H.pending_out=0,H.wrap<0&&(H.wrap=-H.wrap),H.status=H.wrap?_e:Oe,m.adler=H.wrap===2?0:1,H.last_flush=u,r._tr_init(H),x)}function Ae(m){var H=Se(m);return H===x&&rr(m.state),H}function ze(m,H){return!m||!m.state||m.state.wrap!==2?R:(m.state.gzhead=H,x)}function Q(m,H,pe,I,K,le){if(!m)return R;var Ve=1;if(H===X&&(H=6),I<0?(Ve=0,I=-I):I>15&&(Ve=2,I-=16),K<1||K>z||pe!==Z||I<8||I>15||H<0||H>9||le<0||le>G)return Qe(m,R);I===8&&(I=9);var Le=new P;return m.state=Le,Le.strm=m,Le.wrap=Ve,Le.gzhead=null,Le.w_bits=I,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=K+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+ie-1)/ie),Le.window=new e.Buf8(Le.w_size*2),Le.head=new e.Buf16(Le.hash_size),Le.prev=new e.Buf16(Le.w_size),Le.lit_bufsize=1<<K+6,Le.pending_buf_size=Le.lit_bufsize*4,Le.pending_buf=new e.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=H,Le.strategy=le,Le.method=pe,Ae(m)}function ue(m,H){return Q(m,H,Z,B,Y,W)}function E(m,H){var pe,I,K,le;if(!m||!m.state||H>S||H<0)return m?Qe(m,R):R;if(I=m.state,!m.output||!m.input&&m.avail_in!==0||I.status===Fe&&H!==h)return Qe(m,m.avail_out===0?j:R);if(I.strm=m,pe=I.last_flush,I.last_flush=H,I.status===_e)if(I.wrap===2)m.adler=0,b(I,31),b(I,139),b(I,8),I.gzhead?(b(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),b(I,I.gzhead.time&255),b(I,I.gzhead.time>>8&255),b(I,I.gzhead.time>>16&255),b(I,I.gzhead.time>>24&255),b(I,I.level===9?2:I.strategy>=F||I.level<2?4:0),b(I,I.gzhead.os&255),I.gzhead.extra&&I.gzhead.extra.length&&(b(I,I.gzhead.extra.length&255),b(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(m.adler=s(m.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=Be):(b(I,0),b(I,0),b(I,0),b(I,0),b(I,0),b(I,I.level===9?2:I.strategy>=F||I.level<2?4:0),b(I,Ze),I.status=Oe);else{var Ve=Z+(I.w_bits-8<<4)<<8,Le=-1;I.strategy>=F||I.level<2?Le=0:I.level<6?Le=1:I.level===6?Le=2:Le=3,Ve|=Le<<6,I.strstart!==0&&(Ve|=Ne),Ve+=31-Ve%31,I.status=Oe,$(I,Ve),I.strstart!==0&&($(I,m.adler>>>16),$(I,m.adler&65535)),m.adler=1}if(I.status===Be)if(I.gzhead.extra){for(K=I.pending;I.gzindex<(I.gzhead.extra.length&65535)&&!(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>K&&(m.adler=s(m.adler,I.pending_buf,I.pending-K,K)),O(m),K=I.pending,I.pending===I.pending_buf_size));)b(I,I.gzhead.extra[I.gzindex]&255),I.gzindex++;I.gzhead.hcrc&&I.pending>K&&(m.adler=s(m.adler,I.pending_buf,I.pending-K,K)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=q)}else I.status=q;if(I.status===q)if(I.gzhead.name){K=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>K&&(m.adler=s(m.adler,I.pending_buf,I.pending-K,K)),O(m),K=I.pending,I.pending===I.pending_buf_size)){le=1;break}I.gzindex<I.gzhead.name.length?le=I.gzhead.name.charCodeAt(I.gzindex++)&255:le=0,b(I,le)}while(le!==0);I.gzhead.hcrc&&I.pending>K&&(m.adler=s(m.adler,I.pending_buf,I.pending-K,K)),le===0&&(I.gzindex=0,I.status=ke)}else I.status=ke;if(I.status===ke)if(I.gzhead.comment){K=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>K&&(m.adler=s(m.adler,I.pending_buf,I.pending-K,K)),O(m),K=I.pending,I.pending===I.pending_buf_size)){le=1;break}I.gzindex<I.gzhead.comment.length?le=I.gzhead.comment.charCodeAt(I.gzindex++)&255:le=0,b(I,le)}while(le!==0);I.gzhead.hcrc&&I.pending>K&&(m.adler=s(m.adler,I.pending_buf,I.pending-K,K)),le===0&&(I.status=Ie)}else I.status=Ie;if(I.status===Ie&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&O(m),I.pending+2<=I.pending_buf_size&&(b(I,m.adler&255),b(I,m.adler>>8&255),m.adler=0,I.status=Oe)):I.status=Oe),I.pending!==0){if(O(m),m.avail_out===0)return I.last_flush=-1,x}else if(m.avail_in===0&&ht(H)<=ht(pe)&&H!==h)return Qe(m,j);if(I.status===Fe&&m.avail_in!==0)return Qe(m,j);if(m.avail_in!==0||I.lookahead!==0||H!==u&&I.status!==Fe){var Pe=I.strategy===F?st(I,H):I.strategy===N?ft(I,H):Dt[I.level].func(I,H);if((Pe===Ye||Pe===at)&&(I.status=Fe),Pe===Me||Pe===Ye)return m.avail_out===0&&(I.last_flush=-1),x;if(Pe===Xe&&(H===p?r._tr_align(I):H!==S&&(r._tr_stored_block(I,0,0,!1),H===d&&(mt(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),O(m),m.avail_out===0))return I.last_flush=-1,x}return H!==h?x:I.wrap<=0?_:(I.wrap===2?(b(I,m.adler&255),b(I,m.adler>>8&255),b(I,m.adler>>16&255),b(I,m.adler>>24&255),b(I,m.total_in&255),b(I,m.total_in>>8&255),b(I,m.total_in>>16&255),b(I,m.total_in>>24&255)):($(I,m.adler>>>16),$(I,m.adler&65535)),O(m),I.wrap>0&&(I.wrap=-I.wrap),I.pending!==0?x:_)}function Ee(m){var H;return!m||!m.state?R:(H=m.state.status,H!==_e&&H!==Be&&H!==q&&H!==ke&&H!==Ie&&H!==Oe&&H!==Fe?Qe(m,R):(m.state=null,H===Oe?Qe(m,y):x))}function Ke(m,H){var pe=H.length,I,K,le,Ve,Le,Pe,rt,Yt;if(!m||!m.state||(I=m.state,Ve=I.wrap,Ve===2||Ve===1&&I.status!==_e||I.lookahead))return R;for(Ve===1&&(m.adler=n(m.adler,H,pe,0)),I.wrap=0,pe>=I.w_size&&(Ve===0&&(mt(I.head),I.strstart=0,I.block_start=0,I.insert=0),Yt=new e.Buf8(I.w_size),e.arraySet(Yt,H,pe-I.w_size,I.w_size,0),H=Yt,pe=I.w_size),Le=m.avail_in,Pe=m.next_in,rt=m.input,m.avail_in=pe,m.next_in=0,m.input=H,xe(I);I.lookahead>=ie;){K=I.strstart,le=I.lookahead-(ie-1);do I.ins_h=(I.ins_h<<I.hash_shift^I.window[K+ie-1])&I.hash_mask,I.prev[K&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=K,K++;while(--le);I.strstart=K,I.lookahead=ie-1,xe(I)}return I.strstart+=I.lookahead,I.block_start=I.strstart,I.insert=I.lookahead,I.lookahead=0,I.match_length=I.prev_length=ie-1,I.match_available=0,m.next_in=Pe,m.input=rt,m.avail_in=Le,I.wrap=Ve,x}return or.deflateInit=ue,or.deflateInit2=Q,or.deflateReset=Ae,or.deflateResetKeep=Se,or.deflateSetHeader=ze,or.deflate=E,or.deflateEnd=Ee,or.deflateSetDictionary=Ke,or.deflateInfo="pako deflate (from Nodeca project)",or}var Ur={},vf;function zd(){if(vf)return Ur;vf=1;var e=Cr(),r=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var s=new e.Buf8(256),c=0;c<256;c++)s[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;s[254]=s[254]=1,Ur.string2buf=function(p){var d,h,S,x,_,R=p.length,y=0;for(x=0;x<R;x++)h=p.charCodeAt(x),(h&64512)===55296&&x+1<R&&(S=p.charCodeAt(x+1),(S&64512)===56320&&(h=65536+(h-55296<<10)+(S-56320),x++)),y+=h<128?1:h<2048?2:h<65536?3:4;for(d=new e.Buf8(y),_=0,x=0;_<y;x++)h=p.charCodeAt(x),(h&64512)===55296&&x+1<R&&(S=p.charCodeAt(x+1),(S&64512)===56320&&(h=65536+(h-55296<<10)+(S-56320),x++)),h<128?d[_++]=h:h<2048?(d[_++]=192|h>>>6,d[_++]=128|h&63):h<65536?(d[_++]=224|h>>>12,d[_++]=128|h>>>6&63,d[_++]=128|h&63):(d[_++]=240|h>>>18,d[_++]=128|h>>>12&63,d[_++]=128|h>>>6&63,d[_++]=128|h&63);return d};function u(p,d){if(d<65534&&(p.subarray&&n||!p.subarray&&r))return String.fromCharCode.apply(null,e.shrinkBuf(p,d));for(var h="",S=0;S<d;S++)h+=String.fromCharCode(p[S]);return h}return Ur.buf2binstring=function(p){return u(p,p.length)},Ur.binstring2buf=function(p){for(var d=new e.Buf8(p.length),h=0,S=d.length;h<S;h++)d[h]=p.charCodeAt(h);return d},Ur.buf2string=function(p,d){var h,S,x,_,R=d||p.length,y=new Array(R*2);for(S=0,h=0;h<R;){if(x=p[h++],x<128){y[S++]=x;continue}if(_=s[x],_>4){y[S++]=65533,h+=_-1;continue}for(x&=_===2?31:_===3?15:7;_>1&&h<R;)x=x<<6|p[h++]&63,_--;if(_>1){y[S++]=65533;continue}x<65536?y[S++]=x:(x-=65536,y[S++]=55296|x>>10&1023,y[S++]=56320|x&1023)}return u(y,S)},Ur.utf8border=function(p,d){var h;for(d=d||p.length,d>p.length&&(d=p.length),h=d-1;h>=0&&(p[h]&192)===128;)h--;return h<0||h===0?d:h+s[p[h]]>d?h:d},Ur}var Po,xf;function Gd(){if(xf)return Po;xf=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return Po=e,Po}var _f;function Cw(){if(_f)return on;_f=1;var e=Iw(),r=Cr(),n=zd(),s=Is(),c=Gd(),u=Object.prototype.toString,p=0,d=4,h=0,S=1,x=2,_=-1,R=0,y=8;function j(N){if(!(this instanceof j))return new j(N);this.options=r.assign({level:_,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:R,to:""},N||{});var G=this.options;G.raw&&G.windowBits>0?G.windowBits=-G.windowBits:G.gzip&&G.windowBits>0&&G.windowBits<16&&(G.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var W=e.deflateInit2(this.strm,G.level,G.method,G.windowBits,G.memLevel,G.strategy);if(W!==h)throw new Error(s[W]);if(G.header&&e.deflateSetHeader(this.strm,G.header),G.dictionary){var ne;if(typeof G.dictionary=="string"?ne=n.string2buf(G.dictionary):u.call(G.dictionary)==="[object ArrayBuffer]"?ne=new Uint8Array(G.dictionary):ne=G.dictionary,W=e.deflateSetDictionary(this.strm,ne),W!==h)throw new Error(s[W]);this._dict_set=!0}}j.prototype.push=function(N,G){var W=this.strm,ne=this.options.chunkSize,Z,z;if(this.ended)return!1;z=G===~~G?G:G===!0?d:p,typeof N=="string"?W.input=n.string2buf(N):u.call(N)==="[object ArrayBuffer]"?W.input=new Uint8Array(N):W.input=N,W.next_in=0,W.avail_in=W.input.length;do{if(W.avail_out===0&&(W.output=new r.Buf8(ne),W.next_out=0,W.avail_out=ne),Z=e.deflate(W,z),Z!==S&&Z!==h)return this.onEnd(Z),this.ended=!0,!1;(W.avail_out===0||W.avail_in===0&&(z===d||z===x))&&(this.options.to==="string"?this.onData(n.buf2binstring(r.shrinkBuf(W.output,W.next_out))):this.onData(r.shrinkBuf(W.output,W.next_out)))}while((W.avail_in>0||W.avail_out===0)&&Z!==S);return z===d?(Z=e.deflateEnd(this.strm),this.onEnd(Z),this.ended=!0,Z===h):(z===x&&(this.onEnd(h),W.avail_out=0),!0)},j.prototype.onData=function(N){this.chunks.push(N)},j.prototype.onEnd=function(N){N===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg};function X(N,G){var W=new j(G);if(W.push(N,!0),W.err)throw W.msg||s[W.err];return W.result}function L(N,G){return G=G||{},G.raw=!0,X(N,G)}function F(N,G){return G=G||{},G.gzip=!0,X(N,G)}return on.Deflate=j,on.deflate=X,on.deflateRaw=L,on.gzip=F,on}var sn={},tr={},Mo,Sf;function Tw(){if(Sf)return Mo;Sf=1;var e=30,r=12;return Mo=function(s,c){var u,p,d,h,S,x,_,R,y,j,X,L,F,N,G,W,ne,Z,z,B,Y,U,ce,oe,de;u=s.state,p=s.next_in,oe=s.input,d=p+(s.avail_in-5),h=s.next_out,de=s.output,S=h-(c-s.avail_out),x=h+(s.avail_out-257),_=u.dmax,R=u.wsize,y=u.whave,j=u.wnext,X=u.window,L=u.hold,F=u.bits,N=u.lencode,G=u.distcode,W=(1<<u.lenbits)-1,ne=(1<<u.distbits)-1;e:do{F<15&&(L+=oe[p++]<<F,F+=8,L+=oe[p++]<<F,F+=8),Z=N[L&W];t:for(;;){if(z=Z>>>24,L>>>=z,F-=z,z=Z>>>16&255,z===0)de[h++]=Z&65535;else if(z&16){B=Z&65535,z&=15,z&&(F<z&&(L+=oe[p++]<<F,F+=8),B+=L&(1<<z)-1,L>>>=z,F-=z),F<15&&(L+=oe[p++]<<F,F+=8,L+=oe[p++]<<F,F+=8),Z=G[L&ne];r:for(;;){if(z=Z>>>24,L>>>=z,F-=z,z=Z>>>16&255,z&16){if(Y=Z&65535,z&=15,F<z&&(L+=oe[p++]<<F,F+=8,F<z&&(L+=oe[p++]<<F,F+=8)),Y+=L&(1<<z)-1,Y>_){s.msg="invalid distance too far back",u.mode=e;break e}if(L>>>=z,F-=z,z=h-S,Y>z){if(z=Y-z,z>y&&u.sane){s.msg="invalid distance too far back",u.mode=e;break e}if(U=0,ce=X,j===0){if(U+=R-z,z<B){B-=z;do de[h++]=X[U++];while(--z);U=h-Y,ce=de}}else if(j<z){if(U+=R+j-z,z-=j,z<B){B-=z;do de[h++]=X[U++];while(--z);if(U=0,j<B){z=j,B-=z;do de[h++]=X[U++];while(--z);U=h-Y,ce=de}}}else if(U+=j-z,z<B){B-=z;do de[h++]=X[U++];while(--z);U=h-Y,ce=de}for(;B>2;)de[h++]=ce[U++],de[h++]=ce[U++],de[h++]=ce[U++],B-=3;B&&(de[h++]=ce[U++],B>1&&(de[h++]=ce[U++]))}else{U=h-Y;do de[h++]=de[U++],de[h++]=de[U++],de[h++]=de[U++],B-=3;while(B>2);B&&(de[h++]=de[U++],B>1&&(de[h++]=de[U++]))}}else if((z&64)===0){Z=G[(Z&65535)+(L&(1<<z)-1)];continue r}else{s.msg="invalid distance code",u.mode=e;break e}break}}else if((z&64)===0){Z=N[(Z&65535)+(L&(1<<z)-1)];continue t}else if(z&32){u.mode=r;break e}else{s.msg="invalid literal/length code",u.mode=e;break e}break}}while(p<d&&h<x);B=F>>3,p-=B,F-=B<<3,L&=(1<<F)-1,s.next_in=p,s.next_out=h,s.avail_in=p<d?5+(d-p):5-(p-d),s.avail_out=h<x?257+(x-h):257-(h-x),u.hold=L,u.bits=F},Mo}var Bo,kf;function Rw(){if(kf)return Bo;kf=1;var e=Cr(),r=15,n=852,s=592,c=0,u=1,p=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],S=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],x=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return Bo=function(R,y,j,X,L,F,N,G){var W=G.bits,ne=0,Z=0,z=0,B=0,Y=0,U=0,ce=0,oe=0,de=0,re=0,me,ae,ie,se,he,Ne=null,_e=0,Be,q=new e.Buf16(r+1),ke=new e.Buf16(r+1),Ie=null,Oe=0,Fe,Me,Xe;for(ne=0;ne<=r;ne++)q[ne]=0;for(Z=0;Z<X;Z++)q[y[j+Z]]++;for(Y=W,B=r;B>=1&&q[B]===0;B--);if(Y>B&&(Y=B),B===0)return L[F++]=1<<24|64<<16|0,L[F++]=1<<24|64<<16|0,G.bits=1,0;for(z=1;z<B&&q[z]===0;z++);for(Y<z&&(Y=z),oe=1,ne=1;ne<=r;ne++)if(oe<<=1,oe-=q[ne],oe<0)return-1;if(oe>0&&(R===c||B!==1))return-1;for(ke[1]=0,ne=1;ne<r;ne++)ke[ne+1]=ke[ne]+q[ne];for(Z=0;Z<X;Z++)y[j+Z]!==0&&(N[ke[y[j+Z]]++]=Z);if(R===c?(Ne=Ie=N,Be=19):R===u?(Ne=d,_e-=257,Ie=h,Oe-=257,Be=256):(Ne=S,Ie=x,Be=-1),re=0,Z=0,ne=z,he=F,U=Y,ce=0,ie=-1,de=1<<Y,se=de-1,R===u&&de>n||R===p&&de>s)return 1;for(;;){Fe=ne-ce,N[Z]<Be?(Me=0,Xe=N[Z]):N[Z]>Be?(Me=Ie[Oe+N[Z]],Xe=Ne[_e+N[Z]]):(Me=96,Xe=0),me=1<<ne-ce,ae=1<<U,z=ae;do ae-=me,L[he+(re>>ce)+ae]=Fe<<24|Me<<16|Xe|0;while(ae!==0);for(me=1<<ne-1;re&me;)me>>=1;if(me!==0?(re&=me-1,re+=me):re=0,Z++,--q[ne]===0){if(ne===B)break;ne=y[j+N[Z]]}if(ne>Y&&(re&se)!==ie){for(ce===0&&(ce=Y),he+=z,U=ne-ce,oe=1<<U;U+ce<B&&(oe-=q[U+ce],!(oe<=0));)U++,oe<<=1;if(de+=1<<U,R===u&&de>n||R===p&&de>s)return 1;ie=re&se,L[ie]=Y<<24|U<<16|he-F|0}}return re!==0&&(L[he+re]=ne-ce<<24|64<<16|0),G.bits=Y,0},Bo}var Ef;function Ow(){if(Ef)return tr;Ef=1;var e=Cr(),r=Nd(),n=Ud(),s=Tw(),c=Rw(),u=0,p=1,d=2,h=4,S=5,x=6,_=0,R=1,y=2,j=-2,X=-3,L=-4,F=-5,N=8,G=1,W=2,ne=3,Z=4,z=5,B=6,Y=7,U=8,ce=9,oe=10,de=11,re=12,me=13,ae=14,ie=15,se=16,he=17,Ne=18,_e=19,Be=20,q=21,ke=22,Ie=23,Oe=24,Fe=25,Me=26,Xe=27,Ye=28,at=29,Ze=30,Qe=31,ht=32,mt=852,O=592,g=15,b=g;function $(Q){return(Q>>>24&255)+(Q>>>8&65280)+((Q&65280)<<8)+((Q&255)<<24)}function te(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ye(Q){var ue;return!Q||!Q.state?j:(ue=Q.state,Q.total_in=Q.total_out=ue.total=0,Q.msg="",ue.wrap&&(Q.adler=ue.wrap&1),ue.mode=G,ue.last=0,ue.havedict=0,ue.dmax=32768,ue.head=null,ue.hold=0,ue.bits=0,ue.lencode=ue.lendyn=new e.Buf32(mt),ue.distcode=ue.distdyn=new e.Buf32(O),ue.sane=1,ue.back=-1,_)}function xe(Q){var ue;return!Q||!Q.state?j:(ue=Q.state,ue.wsize=0,ue.whave=0,ue.wnext=0,ye(Q))}function Je(Q,ue){var E,Ee;return!Q||!Q.state||(Ee=Q.state,ue<0?(E=0,ue=-ue):(E=(ue>>4)+1,ue<48&&(ue&=15)),ue&&(ue<8||ue>15))?j:(Ee.window!==null&&Ee.wbits!==ue&&(Ee.window=null),Ee.wrap=E,Ee.wbits=ue,xe(Q))}function tt(Q,ue){var E,Ee;return Q?(Ee=new te,Q.state=Ee,Ee.window=null,E=Je(Q,ue),E!==_&&(Q.state=null),E):j}function it(Q){return tt(Q,b)}var ft=!0,st,wt;function Dt(Q){if(ft){var ue;for(st=new e.Buf32(512),wt=new e.Buf32(32),ue=0;ue<144;)Q.lens[ue++]=8;for(;ue<256;)Q.lens[ue++]=9;for(;ue<280;)Q.lens[ue++]=7;for(;ue<288;)Q.lens[ue++]=8;for(c(p,Q.lens,0,288,st,0,Q.work,{bits:9}),ue=0;ue<32;)Q.lens[ue++]=5;c(d,Q.lens,0,32,wt,0,Q.work,{bits:5}),ft=!1}Q.lencode=st,Q.lenbits=9,Q.distcode=wt,Q.distbits=5}function rr(Q,ue,E,Ee){var Ke,m=Q.state;return m.window===null&&(m.wsize=1<<m.wbits,m.wnext=0,m.whave=0,m.window=new e.Buf8(m.wsize)),Ee>=m.wsize?(e.arraySet(m.window,ue,E-m.wsize,m.wsize,0),m.wnext=0,m.whave=m.wsize):(Ke=m.wsize-m.wnext,Ke>Ee&&(Ke=Ee),e.arraySet(m.window,ue,E-Ee,Ke,m.wnext),Ee-=Ke,Ee?(e.arraySet(m.window,ue,E-Ee,Ee,0),m.wnext=Ee,m.whave=m.wsize):(m.wnext+=Ke,m.wnext===m.wsize&&(m.wnext=0),m.whave<m.wsize&&(m.whave+=Ke))),0}function P(Q,ue){var E,Ee,Ke,m,H,pe,I,K,le,Ve,Le,Pe,rt,Yt,pt=0,ot,bt,Et,Lt,Rr,Or,vt,Gt,At=new e.Buf8(4),Jt,Qt,ni=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Q||!Q.state||!Q.output||!Q.input&&Q.avail_in!==0)return j;E=Q.state,E.mode===re&&(E.mode=me),H=Q.next_out,Ke=Q.output,I=Q.avail_out,m=Q.next_in,Ee=Q.input,pe=Q.avail_in,K=E.hold,le=E.bits,Ve=pe,Le=I,Gt=_;e:for(;;)switch(E.mode){case G:if(E.wrap===0){E.mode=me;break}for(;le<16;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}if(E.wrap&2&&K===35615){E.check=0,At[0]=K&255,At[1]=K>>>8&255,E.check=n(E.check,At,2,0),K=0,le=0,E.mode=W;break}if(E.flags=0,E.head&&(E.head.done=!1),!(E.wrap&1)||(((K&255)<<8)+(K>>8))%31){Q.msg="incorrect header check",E.mode=Ze;break}if((K&15)!==N){Q.msg="unknown compression method",E.mode=Ze;break}if(K>>>=4,le-=4,vt=(K&15)+8,E.wbits===0)E.wbits=vt;else if(vt>E.wbits){Q.msg="invalid window size",E.mode=Ze;break}E.dmax=1<<vt,Q.adler=E.check=1,E.mode=K&512?oe:re,K=0,le=0;break;case W:for(;le<16;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}if(E.flags=K,(E.flags&255)!==N){Q.msg="unknown compression method",E.mode=Ze;break}if(E.flags&57344){Q.msg="unknown header flags set",E.mode=Ze;break}E.head&&(E.head.text=K>>8&1),E.flags&512&&(At[0]=K&255,At[1]=K>>>8&255,E.check=n(E.check,At,2,0)),K=0,le=0,E.mode=ne;case ne:for(;le<32;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}E.head&&(E.head.time=K),E.flags&512&&(At[0]=K&255,At[1]=K>>>8&255,At[2]=K>>>16&255,At[3]=K>>>24&255,E.check=n(E.check,At,4,0)),K=0,le=0,E.mode=Z;case Z:for(;le<16;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}E.head&&(E.head.xflags=K&255,E.head.os=K>>8),E.flags&512&&(At[0]=K&255,At[1]=K>>>8&255,E.check=n(E.check,At,2,0)),K=0,le=0,E.mode=z;case z:if(E.flags&1024){for(;le<16;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}E.length=K,E.head&&(E.head.extra_len=K),E.flags&512&&(At[0]=K&255,At[1]=K>>>8&255,E.check=n(E.check,At,2,0)),K=0,le=0}else E.head&&(E.head.extra=null);E.mode=B;case B:if(E.flags&1024&&(Pe=E.length,Pe>pe&&(Pe=pe),Pe&&(E.head&&(vt=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),e.arraySet(E.head.extra,Ee,m,Pe,vt)),E.flags&512&&(E.check=n(E.check,Ee,Pe,m)),pe-=Pe,m+=Pe,E.length-=Pe),E.length))break e;E.length=0,E.mode=Y;case Y:if(E.flags&2048){if(pe===0)break e;Pe=0;do vt=Ee[m+Pe++],E.head&&vt&&E.length<65536&&(E.head.name+=String.fromCharCode(vt));while(vt&&Pe<pe);if(E.flags&512&&(E.check=n(E.check,Ee,Pe,m)),pe-=Pe,m+=Pe,vt)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=U;case U:if(E.flags&4096){if(pe===0)break e;Pe=0;do vt=Ee[m+Pe++],E.head&&vt&&E.length<65536&&(E.head.comment+=String.fromCharCode(vt));while(vt&&Pe<pe);if(E.flags&512&&(E.check=n(E.check,Ee,Pe,m)),pe-=Pe,m+=Pe,vt)break e}else E.head&&(E.head.comment=null);E.mode=ce;case ce:if(E.flags&512){for(;le<16;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}if(K!==(E.check&65535)){Q.msg="header crc mismatch",E.mode=Ze;break}K=0,le=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),Q.adler=E.check=0,E.mode=re;break;case oe:for(;le<32;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}Q.adler=E.check=$(K),K=0,le=0,E.mode=de;case de:if(E.havedict===0)return Q.next_out=H,Q.avail_out=I,Q.next_in=m,Q.avail_in=pe,E.hold=K,E.bits=le,y;Q.adler=E.check=1,E.mode=re;case re:if(ue===S||ue===x)break e;case me:if(E.last){K>>>=le&7,le-=le&7,E.mode=Xe;break}for(;le<3;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}switch(E.last=K&1,K>>>=1,le-=1,K&3){case 0:E.mode=ae;break;case 1:if(Dt(E),E.mode=Be,ue===x){K>>>=2,le-=2;break e}break;case 2:E.mode=he;break;case 3:Q.msg="invalid block type",E.mode=Ze}K>>>=2,le-=2;break;case ae:for(K>>>=le&7,le-=le&7;le<32;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}if((K&65535)!==(K>>>16^65535)){Q.msg="invalid stored block lengths",E.mode=Ze;break}if(E.length=K&65535,K=0,le=0,E.mode=ie,ue===x)break e;case ie:E.mode=se;case se:if(Pe=E.length,Pe){if(Pe>pe&&(Pe=pe),Pe>I&&(Pe=I),Pe===0)break e;e.arraySet(Ke,Ee,m,Pe,H),pe-=Pe,m+=Pe,I-=Pe,H+=Pe,E.length-=Pe;break}E.mode=re;break;case he:for(;le<14;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}if(E.nlen=(K&31)+257,K>>>=5,le-=5,E.ndist=(K&31)+1,K>>>=5,le-=5,E.ncode=(K&15)+4,K>>>=4,le-=4,E.nlen>286||E.ndist>30){Q.msg="too many length or distance symbols",E.mode=Ze;break}E.have=0,E.mode=Ne;case Ne:for(;E.have<E.ncode;){for(;le<3;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}E.lens[ni[E.have++]]=K&7,K>>>=3,le-=3}for(;E.have<19;)E.lens[ni[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,Jt={bits:E.lenbits},Gt=c(u,E.lens,0,19,E.lencode,0,E.work,Jt),E.lenbits=Jt.bits,Gt){Q.msg="invalid code lengths set",E.mode=Ze;break}E.have=0,E.mode=_e;case _e:for(;E.have<E.nlen+E.ndist;){for(;pt=E.lencode[K&(1<<E.lenbits)-1],ot=pt>>>24,bt=pt>>>16&255,Et=pt&65535,!(ot<=le);){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}if(Et<16)K>>>=ot,le-=ot,E.lens[E.have++]=Et;else{if(Et===16){for(Qt=ot+2;le<Qt;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}if(K>>>=ot,le-=ot,E.have===0){Q.msg="invalid bit length repeat",E.mode=Ze;break}vt=E.lens[E.have-1],Pe=3+(K&3),K>>>=2,le-=2}else if(Et===17){for(Qt=ot+3;le<Qt;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}K>>>=ot,le-=ot,vt=0,Pe=3+(K&7),K>>>=3,le-=3}else{for(Qt=ot+7;le<Qt;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}K>>>=ot,le-=ot,vt=0,Pe=11+(K&127),K>>>=7,le-=7}if(E.have+Pe>E.nlen+E.ndist){Q.msg="invalid bit length repeat",E.mode=Ze;break}for(;Pe--;)E.lens[E.have++]=vt}}if(E.mode===Ze)break;if(E.lens[256]===0){Q.msg="invalid code -- missing end-of-block",E.mode=Ze;break}if(E.lenbits=9,Jt={bits:E.lenbits},Gt=c(p,E.lens,0,E.nlen,E.lencode,0,E.work,Jt),E.lenbits=Jt.bits,Gt){Q.msg="invalid literal/lengths set",E.mode=Ze;break}if(E.distbits=6,E.distcode=E.distdyn,Jt={bits:E.distbits},Gt=c(d,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,Jt),E.distbits=Jt.bits,Gt){Q.msg="invalid distances set",E.mode=Ze;break}if(E.mode=Be,ue===x)break e;case Be:E.mode=q;case q:if(pe>=6&&I>=258){Q.next_out=H,Q.avail_out=I,Q.next_in=m,Q.avail_in=pe,E.hold=K,E.bits=le,s(Q,Le),H=Q.next_out,Ke=Q.output,I=Q.avail_out,m=Q.next_in,Ee=Q.input,pe=Q.avail_in,K=E.hold,le=E.bits,E.mode===re&&(E.back=-1);break}for(E.back=0;pt=E.lencode[K&(1<<E.lenbits)-1],ot=pt>>>24,bt=pt>>>16&255,Et=pt&65535,!(ot<=le);){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}if(bt&&(bt&240)===0){for(Lt=ot,Rr=bt,Or=Et;pt=E.lencode[Or+((K&(1<<Lt+Rr)-1)>>Lt)],ot=pt>>>24,bt=pt>>>16&255,Et=pt&65535,!(Lt+ot<=le);){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}K>>>=Lt,le-=Lt,E.back+=Lt}if(K>>>=ot,le-=ot,E.back+=ot,E.length=Et,bt===0){E.mode=Me;break}if(bt&32){E.back=-1,E.mode=re;break}if(bt&64){Q.msg="invalid literal/length code",E.mode=Ze;break}E.extra=bt&15,E.mode=ke;case ke:if(E.extra){for(Qt=E.extra;le<Qt;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}E.length+=K&(1<<E.extra)-1,K>>>=E.extra,le-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=Ie;case Ie:for(;pt=E.distcode[K&(1<<E.distbits)-1],ot=pt>>>24,bt=pt>>>16&255,Et=pt&65535,!(ot<=le);){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}if((bt&240)===0){for(Lt=ot,Rr=bt,Or=Et;pt=E.distcode[Or+((K&(1<<Lt+Rr)-1)>>Lt)],ot=pt>>>24,bt=pt>>>16&255,Et=pt&65535,!(Lt+ot<=le);){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}K>>>=Lt,le-=Lt,E.back+=Lt}if(K>>>=ot,le-=ot,E.back+=ot,bt&64){Q.msg="invalid distance code",E.mode=Ze;break}E.offset=Et,E.extra=bt&15,E.mode=Oe;case Oe:if(E.extra){for(Qt=E.extra;le<Qt;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}E.offset+=K&(1<<E.extra)-1,K>>>=E.extra,le-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){Q.msg="invalid distance too far back",E.mode=Ze;break}E.mode=Fe;case Fe:if(I===0)break e;if(Pe=Le-I,E.offset>Pe){if(Pe=E.offset-Pe,Pe>E.whave&&E.sane){Q.msg="invalid distance too far back",E.mode=Ze;break}Pe>E.wnext?(Pe-=E.wnext,rt=E.wsize-Pe):rt=E.wnext-Pe,Pe>E.length&&(Pe=E.length),Yt=E.window}else Yt=Ke,rt=H-E.offset,Pe=E.length;Pe>I&&(Pe=I),I-=Pe,E.length-=Pe;do Ke[H++]=Yt[rt++];while(--Pe);E.length===0&&(E.mode=q);break;case Me:if(I===0)break e;Ke[H++]=E.length,I--,E.mode=q;break;case Xe:if(E.wrap){for(;le<32;){if(pe===0)break e;pe--,K|=Ee[m++]<<le,le+=8}if(Le-=I,Q.total_out+=Le,E.total+=Le,Le&&(Q.adler=E.check=E.flags?n(E.check,Ke,Le,H-Le):r(E.check,Ke,Le,H-Le)),Le=I,(E.flags?K:$(K))!==E.check){Q.msg="incorrect data check",E.mode=Ze;break}K=0,le=0}E.mode=Ye;case Ye:if(E.wrap&&E.flags){for(;le<32;){if(pe===0)break e;pe--,K+=Ee[m++]<<le,le+=8}if(K!==(E.total&4294967295)){Q.msg="incorrect length check",E.mode=Ze;break}K=0,le=0}E.mode=at;case at:Gt=R;break e;case Ze:Gt=X;break e;case Qe:return L;case ht:default:return j}return Q.next_out=H,Q.avail_out=I,Q.next_in=m,Q.avail_in=pe,E.hold=K,E.bits=le,(E.wsize||Le!==Q.avail_out&&E.mode<Ze&&(E.mode<Xe||ue!==h))&&rr(Q,Q.output,Q.next_out,Le-Q.avail_out),Ve-=Q.avail_in,Le-=Q.avail_out,Q.total_in+=Ve,Q.total_out+=Le,E.total+=Le,E.wrap&&Le&&(Q.adler=E.check=E.flags?n(E.check,Ke,Le,Q.next_out-Le):r(E.check,Ke,Le,Q.next_out-Le)),Q.data_type=E.bits+(E.last?64:0)+(E.mode===re?128:0)+(E.mode===Be||E.mode===ie?256:0),(Ve===0&&Le===0||ue===h)&&Gt===_&&(Gt=F),Gt}function Se(Q){if(!Q||!Q.state)return j;var ue=Q.state;return ue.window&&(ue.window=null),Q.state=null,_}function Ae(Q,ue){var E;return!Q||!Q.state||(E=Q.state,(E.wrap&2)===0)?j:(E.head=ue,ue.done=!1,_)}function ze(Q,ue){var E=ue.length,Ee,Ke,m;return!Q||!Q.state||(Ee=Q.state,Ee.wrap!==0&&Ee.mode!==de)?j:Ee.mode===de&&(Ke=1,Ke=r(Ke,ue,E,0),Ke!==Ee.check)?X:(m=rr(Q,ue,E,E),m?(Ee.mode=Qe,L):(Ee.havedict=1,_))}return tr.inflateReset=xe,tr.inflateReset2=Je,tr.inflateResetKeep=ye,tr.inflateInit=it,tr.inflateInit2=tt,tr.inflate=P,tr.inflateEnd=Se,tr.inflateGetHeader=Ae,tr.inflateSetDictionary=ze,tr.inflateInfo="pako inflate (from Nodeca project)",tr}var jo,Af;function Hd(){return Af||(Af=1,jo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),jo}var Fo,If;function Pw(){if(If)return Fo;If=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return Fo=e,Fo}var Cf;function Mw(){if(Cf)return sn;Cf=1;var e=Ow(),r=Cr(),n=zd(),s=Hd(),c=Is(),u=Gd(),p=Pw(),d=Object.prototype.toString;function h(_){if(!(this instanceof h))return new h(_);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},_||{});var R=this.options;R.raw&&R.windowBits>=0&&R.windowBits<16&&(R.windowBits=-R.windowBits,R.windowBits===0&&(R.windowBits=-15)),R.windowBits>=0&&R.windowBits<16&&!(_&&_.windowBits)&&(R.windowBits+=32),R.windowBits>15&&R.windowBits<48&&(R.windowBits&15)===0&&(R.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=e.inflateInit2(this.strm,R.windowBits);if(y!==s.Z_OK)throw new Error(c[y]);if(this.header=new p,e.inflateGetHeader(this.strm,this.header),R.dictionary&&(typeof R.dictionary=="string"?R.dictionary=n.string2buf(R.dictionary):d.call(R.dictionary)==="[object ArrayBuffer]"&&(R.dictionary=new Uint8Array(R.dictionary)),R.raw&&(y=e.inflateSetDictionary(this.strm,R.dictionary),y!==s.Z_OK)))throw new Error(c[y])}h.prototype.push=function(_,R){var y=this.strm,j=this.options.chunkSize,X=this.options.dictionary,L,F,N,G,W,ne=!1;if(this.ended)return!1;F=R===~~R?R:R===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof _=="string"?y.input=n.binstring2buf(_):d.call(_)==="[object ArrayBuffer]"?y.input=new Uint8Array(_):y.input=_,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new r.Buf8(j),y.next_out=0,y.avail_out=j),L=e.inflate(y,s.Z_NO_FLUSH),L===s.Z_NEED_DICT&&X&&(L=e.inflateSetDictionary(this.strm,X)),L===s.Z_BUF_ERROR&&ne===!0&&(L=s.Z_OK,ne=!1),L!==s.Z_STREAM_END&&L!==s.Z_OK)return this.onEnd(L),this.ended=!0,!1;y.next_out&&(y.avail_out===0||L===s.Z_STREAM_END||y.avail_in===0&&(F===s.Z_FINISH||F===s.Z_SYNC_FLUSH))&&(this.options.to==="string"?(N=n.utf8border(y.output,y.next_out),G=y.next_out-N,W=n.buf2string(y.output,N),y.next_out=G,y.avail_out=j-G,G&&r.arraySet(y.output,y.output,N,G,0),this.onData(W)):this.onData(r.shrinkBuf(y.output,y.next_out))),y.avail_in===0&&y.avail_out===0&&(ne=!0)}while((y.avail_in>0||y.avail_out===0)&&L!==s.Z_STREAM_END);return L===s.Z_STREAM_END&&(F=s.Z_FINISH),F===s.Z_FINISH?(L=e.inflateEnd(this.strm),this.onEnd(L),this.ended=!0,L===s.Z_OK):(F===s.Z_SYNC_FLUSH&&(this.onEnd(s.Z_OK),y.avail_out=0),!0)},h.prototype.onData=function(_){this.chunks.push(_)},h.prototype.onEnd=function(_){_===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function S(_,R){var y=new h(R);if(y.push(_,!0),y.err)throw y.msg||c[y.err];return y.result}function x(_,R){return R=R||{},R.raw=!0,S(_,R)}return sn.Inflate=h,sn.inflate=S,sn.inflateRaw=x,sn.ungzip=S,sn}var Do,Tf;function Bw(){if(Tf)return Do;Tf=1;var e=Cr().assign,r=Cw(),n=Mw(),s=Hd(),c={};return e(c,r,n,s),Do=c,Do}var Lo,Rf;function jw(){if(Rf)return Lo;Rf=1;const e=(r,n)=>function(...s){const c=n.promiseModule;return new c((u,p)=>{n.multiArgs?s.push((...d)=>{n.errorFirst?d[0]?p(d):(d.shift(),u(d)):u(d)}):n.errorFirst?s.push((d,h)=>{d?p(d):u(h)}):s.push(u),r.apply(this,s)})};return Lo=(r,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const s=typeof r;if(!(r!==null&&(s==="object"||s==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${r===null?"null":s}\``);const c=p=>{const d=h=>typeof h=="string"?p===h:h.test(p);return n.include?n.include.some(d):!n.exclude.some(d)};let u;s==="function"?u=function(...p){return n.excludeMain?r(...p):e(r,n).apply(this,p)}:u=Object.create(Object.getPrototypeOf(r));for(const p in r){const d=r[p];u[p]=typeof d=="function"&&c(p)?e(d,n):d}return u},Lo}var $o,Of;function Fw(){if(Of)return $o;Of=1;var e={};function r(ie){return Array.isArray(ie)?ie:[ie]}const n="",s=" ",c="\\",u=/^\s+$/,p=/(?:[^\\]|^)\\$/,d=/^\\!/,h=/^\\#/,S=/\r?\n/g,x=/^\.*\/|^\.+$/,_="/";let R="node-ignore";typeof Symbol<"u"&&(R=Symbol.for("node-ignore"));const y=R,j=(ie,se,he)=>Object.defineProperty(ie,se,{value:he}),X=/([0-z])-([0-z])/g,L=()=>!1,F=ie=>ie.replace(X,(se,he,Ne)=>he.charCodeAt(0)<=Ne.charCodeAt(0)?se:n),N=ie=>{const{length:se}=ie;return ie.slice(0,se-se%2)},G=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(ie,se,he)=>se+(he.indexOf("\\")===0?s:n)],[/(\\+?)\s/g,(ie,se)=>{const{length:he}=se;return se.slice(0,he-he%2)+s}],[/[\\$.|*+(){^]/g,ie=>`\\${ie}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(ie,se,he)=>se+6<he.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(ie,se,he)=>{const Ne=he.replace(/\\\*/g,"[^\\/]*");return se+Ne}],[/\\\\\\(?=[$.|*+(){^])/g,()=>c],[/\\\\/g,()=>c],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(ie,se,he,Ne,_e)=>se===c?`\\[${he}${N(Ne)}${_e}`:_e==="]"&&Ne.length%2===0?`[${F(he)}${Ne}]`:"[]"],[/(?:[^*])$/,ie=>/\/$/.test(ie)?`${ie}$`:`${ie}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(ie,se)=>`${se?`${se}[^/]+`:"[^/]*"}(?=$|\\/$)`]],W=Object.create(null),ne=(ie,se)=>{let he=W[ie];return he||(he=G.reduce((Ne,[_e,Be])=>Ne.replace(_e,Be.bind(ie)),ie),W[ie]=he),se?new RegExp(he,"i"):new RegExp(he)},Z=ie=>typeof ie=="string",z=ie=>ie&&Z(ie)&&!u.test(ie)&&!p.test(ie)&&ie.indexOf("#")!==0,B=ie=>ie.split(S);class Y{constructor(se,he,Ne,_e){this.origin=se,this.pattern=he,this.negative=Ne,this.regex=_e}}const U=(ie,se)=>{const he=ie;let Ne=!1;ie.indexOf("!")===0&&(Ne=!0,ie=ie.substr(1)),ie=ie.replace(d,"!").replace(h,"#");const _e=ne(ie,se);return new Y(he,ie,Ne,_e)},ce=(ie,se)=>{throw new se(ie)},oe=(ie,se,he)=>Z(ie)?ie?oe.isNotRelative(ie)?he(`path should be a \`path.relative()\`d string, but got "${se}"`,RangeError):!0:he("path must not be empty",TypeError):he(`path must be a string, but got \`${se}\``,TypeError),de=ie=>x.test(ie);oe.isNotRelative=de,oe.convert=ie=>ie;class re{constructor({ignorecase:se=!0,ignoreCase:he=se,allowRelativePaths:Ne=!1}={}){j(this,y,!0),this._rules=[],this._ignoreCase=he,this._allowRelativePaths=Ne,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(se){if(se&&se[y]){this._rules=this._rules.concat(se._rules),this._added=!0;return}if(z(se)){const he=U(se,this._ignoreCase);this._added=!0,this._rules.push(he)}}add(se){return this._added=!1,r(Z(se)?B(se):se).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(se){return this.add(se)}_testOne(se,he){let Ne=!1,_e=!1;return this._rules.forEach(Be=>{const{negative:q}=Be;if(_e===q&&Ne!==_e||q&&!Ne&&!_e&&!he)return;Be.regex.test(se)&&(Ne=!q,_e=q)}),{ignored:Ne,unignored:_e}}_test(se,he,Ne,_e){const Be=se&&oe.convert(se);return oe(Be,se,this._allowRelativePaths?L:ce),this._t(Be,he,Ne,_e)}_t(se,he,Ne,_e){if(se in he)return he[se];if(_e||(_e=se.split(_)),_e.pop(),!_e.length)return he[se]=this._testOne(se,Ne);const Be=this._t(_e.join(_)+_,he,Ne,_e);return he[se]=Be.ignored?Be:this._testOne(se,Ne)}ignores(se){return this._test(se,this._ignoreCache,!1).ignored}createFilter(){return se=>!this.ignores(se)}filter(se){return r(se).filter(this.createFilter())}test(se){return this._test(se,this._testCache,!0)}}const me=ie=>new re(ie),ae=ie=>oe(ie&&oe.convert(ie),ie,L);if(me.isPathValid=ae,me.default=me,$o=me,typeof process<"u"&&(e&&e.IGNORE_TEST_WIN32||process.platform==="win32")){const ie=he=>/^\\\\\?\\/.test(he)||/["<>|\u0000-\u001F]+/u.test(he)?he:he.replace(/\\/g,"/");oe.convert=ie;const se=/^[a-z]:\//i;oe.isNotRelative=he=>se.test(he)||de(he)}return $o}var No,Pf;function Dw(){if(Pf)return No;Pf=1;function e(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(s,c,u){return c=c instanceof RegExp?c:new RegExp(e(c),"g"),s.replace(c,u)}var n={clean:function(c){if(typeof c!="string")throw new Error("Expected a string, received: "+c);return c=r(c,"./","/"),c=r(c,"..","."),c=r(c," ","-"),c=r(c,/^[~^:?*\\\-]/g,""),c=r(c,/[~^:?*\\]/g,"-"),c=r(c,/[~^:?*\\\-]$/g,""),c=r(c,"@{","-"),c=r(c,/\.$/g,""),c=r(c,/\/$/g,""),c=r(c,/\.lock$/g,""),c}};return No=n,No}var Uo,Mf;function Lw(){return Mf||(Mf=1,Uo=function(e,r){var n=e,s=r,c=n.length,u=s.length,p=!1,d=null,h=c+1,S=[],x=[],_=[],R="",y=-1,j=0,X=1,L,F,N=function(){c>=u&&(L=n,F=c,n=s,s=L,c=u,u=F,p=!0,h=c+1)},G=function(z,B,Y){return{x:z,y:B,k:Y}},W=function(z,B){return{elem:z,t:B}},ne=function(z,B,Y){var U,ce,oe;for(B>Y?U=S[z-1+h]:U=S[z+1+h],oe=Math.max(B,Y),ce=oe-z;ce<c&&oe<u&&n[ce]===s[oe];)++ce,++oe;return S[z+h]=x.length,x[x.length]=new G(ce,oe,U),oe},Z=function(z){var B,Y,U;for(B=Y=0,U=z.length-1;U>=0;--U)for(;B<z[U].x||Y<z[U].y;)z[U].y-z[U].x>Y-B?(p?_[_.length]=new W(s[Y],y):_[_.length]=new W(s[Y],X),++Y):z[U].y-z[U].x<Y-B?(p?_[_.length]=new W(n[B],X):_[_.length]=new W(n[B],y),++B):(_[_.length]=new W(n[B],j),R+=n[B],++B,++Y)};return N(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return d},getlcs:function(){return R},getses:function(){return _},compose:function(){var z,B,Y,U,ce,oe,de,re;for(z=u-c,B=c+u+3,Y={},de=0;de<B;++de)Y[de]=-1,S[de]=-1;U=-1;do{for(++U,re=-U;re<=z-1;++re)Y[re+h]=ne(re,Y[re-1+h]+1,Y[re+1+h]);for(re=z+U;re>=z+1;--re)Y[re+h]=ne(re,Y[re-1+h]+1,Y[re+1+h]);Y[z+h]=ne(z,Y[z-1+h]+1,Y[z+1+h])}while(Y[z+h]!==u);for(d=z+2*U,ce=S[z+h],oe=[];ce!==-1;)oe[oe.length]=new G(x[ce].x,x[ce].y,null),ce=x[ce].k;Z(oe)}}}),Uo}var zo,Bf;function $w(){if(Bf)return zo;Bf=1;var e=Lw();function r(u,p){var d=new e(u,p);d.compose();for(var h=d.getses(),S,x,_=u.length-1,R=p.length-1,y=h.length-1;y>=0;--y)h[y].t===d.SES_COMMON?(x?(x.chain={file1index:_,file2index:R,chain:null},x=x.chain):(S={file1index:_,file2index:R,chain:null},x=S),_--,R--):h[y].t===d.SES_DELETE?_--:h[y].t===d.SES_ADD&&R--;var j={file1index:-1,file2index:-1,chain:null};return x?(x.chain=j,S):j}function n(u,p){for(var d=[],h=u.length,S=p.length,x=r(u,p);x!==null;x=x.chain){var _=h-x.file1index-1,R=S-x.file2index-1;h=x.file1index,S=x.file2index,(_||R)&&d.push({file1:[h+1,_],file2:[S+1,R]})}return d.reverse(),d}function s(u,p,d){var h,S=n(p,u),x=n(p,d),_=[];function R(se,he){_.push([se.file1[0],he,se.file1[1],se.file2[0],se.file2[1]])}for(h=0;h<S.length;h++)R(S[h],0);for(h=0;h<x.length;h++)R(x[h],2);_.sort(function(se,he){return se[0]-he[0]});var y=[],j=0;function X(se){se>j&&(y.push([1,j,se-j]),j=se)}for(var L=0;L<_.length;L++){for(var F=L,N=_[L],G=N[0],W=G+N[2];L<_.length-1;){var ne=_[L+1],Z=ne[0];if(Z>W)break;W=Math.max(W,Z+ne[2]),L++}if(X(G),F==L)N[4]>0&&y.push([N[1],N[3],N[4]]);else{var z={0:[u.length,-1,p.length,-1],2:[d.length,-1,p.length,-1]};for(h=F;h<=L;h++){N=_[h];var B=N[1],Y=z[B],U=N[0],ce=U+N[2],oe=N[3],de=oe+N[4];Y[0]=Math.min(oe,Y[0]),Y[1]=Math.max(de,Y[1]),Y[2]=Math.min(U,Y[2]),Y[3]=Math.max(ce,Y[3])}var re=z[0][0]+(G-z[0][2]),me=z[0][1]+(W-z[0][3]),ae=z[2][0]+(G-z[2][2]),ie=z[2][1]+(W-z[2][3]);y.push([-1,re,me-re,G,W-G,ae,ie-ae])}j=W}return X(p.length),y}function c(u,p,d){var h=[],S=[u,p,d],x=s(u,p,d),_=[];function R(){_.length&&h.push({ok:_}),_=[]}function y(N){for(var G=0;G<N.length;G++)_.push(N[G])}function j(N){if(N[2]!=N[6])return!0;for(var G=N[1],W=N[5],ne=0;ne<N[2];ne++)if(u[ne+G]!=d[ne+W])return!0;return!1}for(var X=0;X<x.length;X++){var L=x[X],F=L[0];F==-1?j(L)?(R(),h.push({conflict:{a:u.slice(L[1],L[1]+L[2]),aIndex:L[1],o:p.slice(L[3],L[3]+L[4]),oIndex:L[3],b:d.slice(L[5],L[5]+L[6]),bIndex:L[5]}})):y(S[0].slice(L[1],L[1]+L[2])):y(S[F].slice(L[1],L[1]+L[2]))}return R(),h}return zo=c,zo}var jf;function Nw(){if(jf)return De;jf=1,Object.defineProperty(De,"__esModule",{value:!0});function e(a){return a&&typeof a=="object"&&"default"in a?a.default:a}var r=e(Lm()),n=e(kw()),s=e(Ew()),c=e(Bw()),u=e(jw()),p=e(Fw()),d=e(Dw()),h=e($w());class S extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const i=new S(t.message);return i.code=t.code,i.data=t.data,i.caller=t.caller,i.stack=t.stack,i}get isIsomorphicGitError(){return!0}}class x extends S{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=x.code,this.data={filepaths:t}}}x.code="UnmergedPathsError";class _ extends S{constructor(t){super(`An internal error caused this command to fail.

If you're not a developer, report the bug to the developers of the application you're using. If this is a bug in isomorphic-git then you should create a proper bug yourselves. The bug should include a minimal reproduction and details about the version and environment.

Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=_.code,this.data={message:t}}}_.code="InternalError";class R extends S{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=R.code,this.data={filepath:t}}}R.code="UnsafeFilepathError";class y{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const i=this.buffer.slice(this._start,this._start+t);return this._start+=t,i}toString(t,i){const o=this.buffer.toString(t,this._start,this._start+i);return this._start+=i,o}write(t,i,o){const l=this.buffer.write(t,this._start,i,o);return this._start+=i,l}copy(t,i,o){const l=t.copy(this.buffer,this._start,i,o);return this._start+=l,l}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const i=this.buffer.writeUInt8(t,this._start);return this._start+=1,i}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const i=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,i}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const i=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,i}}function j(a,t){return-(a<t)||+(a>t)}function X(a,t){return j(a.path,t.path)}function L(a){let t=a>0?a>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let i=a&511;return i&73?i=493:i=420,t!==8&&(i=0),(t<<12)+i}const F=2**32;function N(a,t,i,o){if(a!==void 0&&t!==void 0)return[a,t];i===void 0&&(i=o.valueOf());const l=Math.floor(i/1e3),f=(i-l*1e3)*1e6;return[l,f]}function G(a){const[t,i]=N(a.ctimeSeconds,a.ctimeNanoseconds,a.ctimeMs,a.ctime),[o,l]=N(a.mtimeSeconds,a.mtimeNanoseconds,a.mtimeMs,a.mtime);return{ctimeSeconds:t%F,ctimeNanoseconds:i%F,mtimeSeconds:o%F,mtimeNanoseconds:l%F,dev:a.dev%F,ino:a.ino%F,mode:L(a.mode%F),uid:a.uid%F,gid:a.gid%F,size:a.size>-1?a.size%F:0}}function W(a){let t="";for(const i of new Uint8Array(a))i<16&&(t+="0"),t+=i.toString(16);return t}let ne=null;async function Z(a){return ne===null&&(ne=await Y()),ne?B(a):z(a)}function z(a){return new n().update(a).digest("hex")}async function B(a){const t=await crypto.subtle.digest("SHA-1",a);return W(t)}async function Y(){try{return await B(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709"}catch{}return!1}function U(a){return{assumeValid:!!(a&32768),extended:!!(a&16384),stage:(a&12288)>>12,nameLength:a&4095}}function ce(a){const t=a.flags;return t.extended=!1,t.nameLength=Math.min(Buffer.from(a.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class oe{constructor(t,i){this._dirty=!1,this._unmergedPaths=i||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let i=this._entries.get(t.path);i||(this._entries.set(t.path,t),i=t),i.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Buffer.isBuffer(t))return oe.fromBuffer(t);if(t===null)return new oe(null);throw new _("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new _("Index file is empty (.git/index)");const i=new oe,o=new y(t),l=o.toString("utf8",4);if(l!=="DIRC")throw new _(`Invalid dircache magic file number: ${l}`);const f=await Z(t.slice(0,-20)),w=t.slice(-20).toString("hex");if(w!==f)throw new _(`Invalid checksum in GitIndex buffer: expected ${w} but saw ${f}`);const v=o.readUInt32BE();if(v!==2)throw new _(`Unsupported dircache version: ${v}`);const A=o.readUInt32BE();let T=0;for(;!o.eof()&&T<A;){const k={};k.ctimeSeconds=o.readUInt32BE(),k.ctimeNanoseconds=o.readUInt32BE(),k.mtimeSeconds=o.readUInt32BE(),k.mtimeNanoseconds=o.readUInt32BE(),k.dev=o.readUInt32BE(),k.ino=o.readUInt32BE(),k.mode=o.readUInt32BE(),k.uid=o.readUInt32BE(),k.gid=o.readUInt32BE(),k.size=o.readUInt32BE(),k.oid=o.slice(20).toString("hex");const M=o.readUInt16BE();k.flags=U(M);const D=t.indexOf(0,o.tell()+1)-o.tell();if(D<1)throw new _(`Got a path length of: ${D}`);if(k.path=o.toString("utf8",D),k.path.includes("..\\")||k.path.includes("../"))throw new R(k.path);let V=8-(o.tell()-12)%8;for(V===0&&(V=8);V--;){const ee=o.readUInt8();if(ee!==0)throw new _(`Expected 1-8 null characters but got '${ee}' after ${k.path}`);if(o.eof())throw new _("Unexpected end of file")}k.stages=[],i._addEntry(k),T++}return i}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(X)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(i=>i):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:i,oid:o,stage:l=0}){i||(i={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),i=G(i);const f=Buffer.from(t),w={ctimeSeconds:i.ctimeSeconds,ctimeNanoseconds:i.ctimeNanoseconds,mtimeSeconds:i.mtimeSeconds,mtimeNanoseconds:i.mtimeNanoseconds,dev:i.dev,ino:i.ino,mode:i.mode||33188,uid:i.uid,gid:i.gid,size:i.size,path:t,oid:o,flags:{assumeValid:!1,extended:!1,stage:l,nameLength:f.length<4095?f.length:4095},stages:[]};this._addEntry(w),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const i of this._entries.keys())i.startsWith(t+"/")&&this._entries.delete(i);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const i=Buffer.from(t.path),o=Math.ceil((62+i.length+1)/8)*8,l=Buffer.alloc(o),f=new y(l),w=G(t);return f.writeUInt32BE(w.ctimeSeconds),f.writeUInt32BE(w.ctimeNanoseconds),f.writeUInt32BE(w.mtimeSeconds),f.writeUInt32BE(w.mtimeNanoseconds),f.writeUInt32BE(w.dev),f.writeUInt32BE(w.ino),f.writeUInt32BE(w.mode),f.writeUInt32BE(w.uid),f.writeUInt32BE(w.gid),f.writeUInt32BE(w.size),f.write(t.oid,20,"hex"),f.writeUInt16BE(ce(t)),f.write(t.path,i.length,"utf8"),l}async toObject(){const t=Buffer.alloc(12),i=new y(t);i.write("DIRC",4,"utf8"),i.writeUInt32BE(2),i.writeUInt32BE(this.entriesFlat.length);let o=[];for(const v of this.entries)if(o.push(oe._entryToBuffer(v)),v.stages.length>1)for(const A of v.stages)A&&A!==v&&o.push(oe._entryToBuffer(A));o=await Promise.all(o);const l=Buffer.concat(o),f=Buffer.concat([t,l]),w=await Z(f);return Buffer.concat([f,Buffer.from(w,"hex")])}}function de(a,t,i=!0,o=!0){const l=G(a),f=G(t);return i&&l.mode!==f.mode||l.mtimeSeconds!==f.mtimeSeconds||l.ctimeSeconds!==f.ctimeSeconds||l.uid!==f.uid||l.gid!==f.gid||o&&l.ino!==f.ino||l.size!==f.size}let re=null;const me=Symbol("IndexCache");function ae(){return{map:new Map,stats:new Map}}async function ie(a,t,i){const[o,l]=await Promise.all([a.lstat(t),a.read(t)]),f=await oe.from(l);i.map.set(t,f),i.stats.set(t,o)}async function se(a,t,i){const o=i.stats.get(t);if(o===void 0)return!0;if(o===null)return!1;const l=await a.lstat(t);return l===null?!1:de(o,l)}class he{static async acquire({fs:t,gitdir:i,cache:o,allowUnmerged:l=!0},f){o[me]||(o[me]=ae());const w=`${i}/index`;re===null&&(re=new r({maxPending:1/0}));let v,A=[];return await re.acquire(w,async()=>{const T=o[me];await se(t,w,T)&&await ie(t,w,T);const k=T.map.get(w);if(A=k.unmergedPaths,A.length&&!l)throw new x(A);if(v=await f(k),k._dirty){const M=await k.toObject();await t.write(w,M),T.stats.set(w,await t.lstat(w)),k._dirty=!1}}),v}}function Ne(a){const t=Math.max(a.lastIndexOf("/"),a.lastIndexOf("\\"));return t>-1&&(a=a.slice(t+1)),a}function _e(a){const t=Math.max(a.lastIndexOf("/"),a.lastIndexOf("\\"));return t===-1?".":t===0?"/":a.slice(0,t)}function Be(a){const t=new Map,i=function(l){if(!t.has(l)){const f={type:"tree",fullpath:l,basename:Ne(l),metadata:{},children:[]};t.set(l,f),f.parent=i(_e(l)),f.parent&&f.parent!==f&&f.parent.children.push(f)}return t.get(l)},o=function(l,f){if(!t.has(l)){const w={type:"blob",fullpath:l,basename:Ne(l),metadata:f,parent:i(_e(l)),children:[]};w.parent&&w.parent.children.push(w),t.set(l,w)}return t.get(l)};i(".");for(const l of a)o(l.path,l);return t}function q(a){switch(a){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new _(`Unexpected GitTree entry mode: ${a.toString(8)}`)}class ke{constructor({fs:t,gitdir:i,cache:o}){this.treePromise=he.acquire({fs:t,gitdir:i,cache:o},async function(f){return Be(f.entries)});const l=this;this.ConstructEntry=class{constructor(w){this._fullpath=w,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return l.type(this)}async mode(){return l.mode(this)}async stat(){return l.stat(this)}async content(){return l.content(this)}async oid(){return l.oid(this)}}}async readdir(t){const i=t._fullpath,l=(await this.treePromise).get(i);if(!l||l.type==="blob")return null;if(l.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${i}'`);const f=l.children.map(w=>w.fullpath);return f.sort(j),f}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const o=(await this.treePromise).get(t._fullpath);if(!o)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const l=o.type==="tree"?{}:G(o.metadata);t._type=o.type==="tree"?"tree":q(l.mode),t._mode=l.mode,o.type==="tree"?t._stat=void 0:t._stat=l}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const o=(await this.treePromise).get(t._fullpath);t._oid=o.metadata.oid}return t._oid}}const Ie=Symbol("GitWalkSymbol");function Oe(){const a=Object.create(null);return Object.defineProperty(a,Ie,{value:function({fs:t,gitdir:i,cache:o}){return new ke({fs:t,gitdir:i,cache:o})}}),Object.freeze(a),a}class Fe extends S{constructor(t){super(`Could not find ${t}.`),this.code=this.name=Fe.code,this.data={what:t}}}Fe.code="NotFoundError";class Me extends S{constructor(t,i,o,l){super(`Object ${t} ${l?`at ${l}`:""}was anticipated to be a ${o} but it is a ${i}.`),this.code=this.name=Me.code,this.data={oid:t,actual:i,expected:o,filepath:l}}}Me.code="ObjectTypeError";class Xe extends S{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Xe.code,this.data={value:t}}}Xe.code="InvalidOidError";class Ye extends S{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=Ye.code,this.data={remote:t}}}Ye.code="NoRefspecError";class at{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let i=null;this.parsedConfig=t.trim().split(`
`).map(o=>{if(/^\s*#/.test(o))return{line:o,comment:!0};const l=o.indexOf(" ");if(o.startsWith("^")){const f=o.slice(1);return this.refs.set(i+"^{}",f),{line:o,ref:i,peeled:f}}else{const f=o.slice(0,l);return i=o.slice(l+1),this.refs.set(i,f),{line:o,ref:i,oid:f}}})}return this}static from(t){return new at(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(i=>i.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Ze{constructor({remotePath:t,localPath:i,force:o,matchPrefix:l}){Object.assign(this,{remotePath:t,localPath:i,force:o,matchPrefix:l})}static from(t){const[i,o,l,f,w]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),v=i==="+",A=l==="*";if(A!==(w==="*"))throw new _("Invalid refspec");return new Ze({remotePath:o,localPath:f,force:v,matchPrefix:A})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class Qe{constructor(t=[]){this.rules=t}static from(t){const i=[];for(const o of t)i.push(Ze.from(o));return new Qe(i)}add(t){const i=Ze.from(t);this.rules.push(i)}translate(t){const i=[];for(const o of this.rules)for(const l of t){const f=o.translate(l);f&&i.push([l,f])}return i}translateOne(t){let i=null;for(const o of this.rules){const l=o.translate(t);l&&(i=l)}return i}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function ht(a,t){const i=a.replace(/\^\{\}$/,""),o=t.replace(/\^\{\}$/,""),l=-(i<o)||+(i>o);return l===0?a.endsWith("^{}")?1:-1:l}/*!
 * This code for `path.join` is directly copied from @zenfs/core/path for bundle size improvements.
 * SPDX-License-Identifier: LGPL-3.0-or-later
 * Copyright (c) James Prevett and other ZenFS contributors.
 */function mt(a,t){let i="",o=0,l=-1,f=0,w="\0";for(let v=0;v<=a.length;++v){if(v<a.length)w=a[v];else{if(w==="/")break;w="/"}if(w==="/"){if(!(l===v-1||f===1))if(f===2){if(i.length<2||o!==2||i.at(-1)!=="."||i.at(-2)!=="."){if(i.length>2){const A=i.lastIndexOf("/");A===-1?(i="",o=0):(i=i.slice(0,A),o=i.length-1-i.lastIndexOf("/")),l=v,f=0;continue}else if(i.length!==0){i="",o=0,l=v,f=0;continue}}t&&(i+=i.length>0?"/..":"..",o=2)}else i.length>0?i+="/"+a.slice(l+1,v):i=a.slice(l+1,v),o=v-l-1;l=v,f=0}else w==="."&&f!==-1?++f:f=-1}return i}function O(a){if(!a.length)return".";const t=a[0]==="/",i=a.at(-1)==="/";return a=mt(a,!t),a.length?(i&&(a+="/"),t?`/${a}`:a):t?"/":i?"./":"."}function g(...a){if(a.length===0)return".";let t;for(let i=0;i<a.length;++i){const o=a[i];o.length>0&&(t===void 0?t=o:t+="/"+o)}return t===void 0?".":O(t)}const b=a=>{if(typeof a=="number")return a;a=a.toLowerCase();let t=parseInt(a);return a.endsWith("k")&&(t*=1024),a.endsWith("m")&&(t*=1024*1024),a.endsWith("g")&&(t*=1024*1024*1024),t},$=a=>{if(typeof a=="boolean")return a;if(a=a.trim().toLowerCase(),a==="true"||a==="yes"||a==="on")return!0;if(a==="false"||a==="no"||a==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${a}`)},te={core:{filemode:$,bare:$,logallrefupdates:$,symlinks:$,ignorecase:$,bigFileThreshold:b}},ye=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,xe=/^[A-Za-z0-9-.]+$/,Je=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,tt=/^[A-Za-z][A-Za-z-]*$/,it=/^(.*?)( *[#;].*)$/,ft=a=>{const t=ye.exec(a);if(t!=null){const[i,o]=t.slice(1);return[i,o]}return null},st=a=>{const t=Je.exec(a);if(t!=null){const[i,o="true"]=t.slice(1),l=wt(o),f=rr(l);return[i,f]}return null},wt=a=>{const t=it.exec(a);if(t==null)return a;const[i,o]=t.slice(1);return Dt(i)&&Dt(o)?`${i}${o}`:i},Dt=a=>(a.match(/(?:^|[^\\])"/g)||[]).length%2!==0,rr=a=>a.split("").reduce((t,i,o,l)=>{const f=i==='"'&&l[o-1]!=="\\",w=i==="\\"&&l[o+1]==='"';return f||w?t:t+i},""),P=a=>a!=null?a.toLowerCase():null,Se=(a,t,i)=>[P(a),t,P(i)].filter(o=>o!=null).join("."),Ae=a=>{const t=a.split("."),i=t.shift(),o=t.pop(),l=t.length?t.join("."):void 0;return{section:i,subsection:l,name:o,path:Se(i,l,o),sectionPath:Se(i,l,null),isSection:!!i}},ze=(a,t)=>a.reduce((i,o,l)=>t(o)?l:i,-1);class Q{constructor(t){let i=null,o=null;this.parsedConfig=t?t.split(`
`).map(l=>{let f=null,w=null;const v=l.trim(),A=ft(v),T=A!=null;if(T)[i,o]=A;else{const M=st(v);M!=null&&([f,w]=M)}const k=Se(i,o,f);return{line:l,isSection:T,section:i,subsection:o,name:f,value:w,path:k}}):[]}static from(t){return new Q(t)}async get(t,i=!1){const o=Ae(t).path,l=this.parsedConfig.filter(f=>f.path===o).map(({section:f,name:w,value:v})=>{const A=te[f]&&te[f][w];return A?A(v):v});return i?l:l.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(i=>i.isSection&&i.section===t).map(i=>i.subsection)}async deleteSection(t,i){this.parsedConfig=this.parsedConfig.filter(o=>!(o.section===t&&o.subsection===i))}async append(t,i){return this.set(t,i,!0)}async set(t,i,o=!1){const{section:l,subsection:f,name:w,path:v,sectionPath:A,isSection:T}=Ae(t),k=ze(this.parsedConfig,M=>M.path===v);if(i==null)k!==-1&&this.parsedConfig.splice(k,1);else if(k!==-1){const M=this.parsedConfig[k],D=Object.assign({},M,{name:w,value:i,modified:!0});o?this.parsedConfig.splice(k+1,0,D):this.parsedConfig[k]=D}else{const M=this.parsedConfig.findIndex(V=>V.path===A),D={section:l,subsection:f,name:w,value:i,modified:!0,path:v};if(xe.test(l)&&tt.test(w))if(M>=0)this.parsedConfig.splice(M+1,0,D);else{const V={isSection:T,section:l,subsection:f,modified:!0,path:A};this.parsedConfig.push(V,D)}}}toString(){return this.parsedConfig.map(({line:t,section:i,subsection:o,name:l,value:f,modified:w=!1})=>w?l!=null&&f!=null?typeof f=="string"&&/[#;]/.test(f)?`	${l} = "${f}"`:`	${l} = ${f}`:o!=null?`[${i} "${o}"]`:`[${i}]`:t).join(`
`)}}class ue{static async get({fs:t,gitdir:i}){const o=await t.read(`${i}/config`,{encoding:"utf8"});return Q.from(o)}static async save({fs:t,gitdir:i,config:o}){await t.write(`${i}/config`,o.toString(),{encoding:"utf8"})}}const E=a=>[`${a}`,`refs/${a}`,`refs/tags/${a}`,`refs/heads/${a}`,`refs/remotes/${a}`,`refs/remotes/${a}/HEAD`],Ee=["config","description","index","shallow","commondir"];let Ke;async function m(a,t){return Ke===void 0&&(Ke=new r),Ke.acquire(a,t)}class H{static async updateRemoteRefs({fs:t,gitdir:i,remote:o,refs:l,symrefs:f,tags:w,refspecs:v=void 0,prune:A=!1,pruneTags:T=!1}){for(const fe of l.values())if(!fe.match(/[0-9a-f]{40}/))throw new Xe(fe);const k=await ue.get({fs:t,gitdir:i});if(!v){if(v=await k.getall(`remote.${o}.fetch`),v.length===0)throw new Ye(o);v.unshift(`+HEAD:refs/remotes/${o}/HEAD`)}const M=Qe.from(v),D=new Map;if(T){const fe=await H.listRefs({fs:t,gitdir:i,filepath:"refs/tags"});await H.deleteRefs({fs:t,gitdir:i,refs:fe.map(we=>`refs/tags/${we}`)})}if(w){for(const fe of l.keys())if(fe.startsWith("refs/tags")&&!fe.endsWith("^{}")&&!await H.exists({fs:t,gitdir:i,ref:fe})){const we=l.get(fe);D.set(fe,we)}}const V=M.translate([...l.keys()]);for(const[fe,we]of V){const be=l.get(fe);D.set(we,be)}const ee=M.translate([...f.keys()]);for(const[fe,we]of ee){const be=f.get(fe),Re=M.translateOne(be);Re&&D.set(we,`ref: ${Re}`)}const ge=[];if(A){for(const fe of M.localNamespaces()){const we=(await H.listRefs({fs:t,gitdir:i,filepath:fe})).map(be=>`${fe}/${be}`);for(const be of we)D.has(be)||ge.push(be)}ge.length>0&&await H.deleteRefs({fs:t,gitdir:i,refs:ge})}for(const[fe,we]of D)await m(fe,async()=>t.write(g(i,fe),`${we.trim()}
`,"utf8"));return{pruned:ge}}static async writeRef({fs:t,gitdir:i,ref:o,value:l}){if(!l.match(/[0-9a-f]{40}/))throw new Xe(l);await m(o,async()=>t.write(g(i,o),`${l.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:i,ref:o,value:l}){await m(o,async()=>t.write(g(i,o),`ref: ${l.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:i,ref:o}){return H.deleteRefs({fs:t,gitdir:i,refs:[o]})}static async deleteRefs({fs:t,gitdir:i,refs:o}){await Promise.all(o.map(v=>t.rm(g(i,v))));let l=await m("packed-refs",async()=>t.read(`${i}/packed-refs`,{encoding:"utf8"}));const f=at.from(l),w=f.refs.size;for(const v of o)f.refs.has(v)&&f.delete(v);f.refs.size<w&&(l=f.toString(),await m("packed-refs",async()=>t.write(`${i}/packed-refs`,l,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:i,ref:o,depth:l=void 0}){if(l!==void 0&&(l--,l===-1))return o;if(o.startsWith("ref: "))return o=o.slice(5),H.resolve({fs:t,gitdir:i,ref:o,depth:l});if(o.length===40&&/[0-9a-f]{40}/.test(o))return o;const f=await H.packedRefs({fs:t,gitdir:i}),w=E(o).filter(v=>!Ee.includes(v));for(const v of w){const A=await m(v,async()=>await t.read(`${i}/${v}`,{encoding:"utf8"})||f.get(v));if(A)return H.resolve({fs:t,gitdir:i,ref:A.trim(),depth:l})}throw new Fe(o)}static async exists({fs:t,gitdir:i,ref:o}){try{return await H.expand({fs:t,gitdir:i,ref:o}),!0}catch{return!1}}static async expand({fs:t,gitdir:i,ref:o}){if(o.length===40&&/[0-9a-f]{40}/.test(o))return o;const l=await H.packedRefs({fs:t,gitdir:i}),f=E(o);for(const w of f)if(await m(w,async()=>t.exists(`${i}/${w}`))||l.has(w))return w;throw new Fe(o)}static async expandAgainstMap({ref:t,map:i}){const o=E(t);for(const l of o)if(await i.has(l))return l;throw new Fe(t)}static resolveAgainstMap({ref:t,fullref:i=t,depth:o=void 0,map:l}){if(o!==void 0&&(o--,o===-1))return{fullref:i,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),H.resolveAgainstMap({ref:t,fullref:i,depth:o,map:l});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:i,oid:t};const f=E(t);for(const w of f){const v=l.get(w);if(v)return H.resolveAgainstMap({ref:v.trim(),fullref:w,depth:o,map:l})}throw new Fe(t)}static async packedRefs({fs:t,gitdir:i}){const o=await m("packed-refs",async()=>t.read(`${i}/packed-refs`,{encoding:"utf8"}));return at.from(o).refs}static async listRefs({fs:t,gitdir:i,filepath:o}){const l=H.packedRefs({fs:t,gitdir:i});let f=null;try{f=await t.readdirDeep(`${i}/${o}`),f=f.map(w=>w.replace(`${i}/${o}/`,""))}catch{f=[]}for(let w of(await l).keys())w.startsWith(o)&&(w=w.replace(o+"/",""),f.includes(w)||f.push(w));return f.sort(ht),f}static async listBranches({fs:t,gitdir:i,remote:o}){return o?H.listRefs({fs:t,gitdir:i,filepath:`refs/remotes/${o}`}):H.listRefs({fs:t,gitdir:i,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:i}){return(await H.listRefs({fs:t,gitdir:i,filepath:"refs/tags"})).filter(l=>!l.endsWith("^{}"))}}function pe(a,t){return j(I(a),I(t))}function I(a){return a.mode==="040000"?a.path+"/":a.path}function K(a){switch(a){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new _(`Unexpected GitTree entry mode: ${a}`)}function le(a){const t=[];let i=0;for(;i<a.length;){const o=a.indexOf(32,i);if(o===-1)throw new _(`GitTree: Error parsing buffer at byte location ${i}: Could not find the next space character.`);const l=a.indexOf(0,i);if(l===-1)throw new _(`GitTree: Error parsing buffer at byte location ${i}: Could not find the next null character.`);let f=a.slice(i,o).toString("utf8");f==="40000"&&(f="040000");const w=K(f),v=a.slice(o+1,l).toString("utf8");if(v.includes("\\")||v.includes("/"))throw new R(v);const A=a.slice(l+1,l+21).toString("hex");i=l+21,t.push({mode:f,path:v,oid:A,type:w})}return t}function Ve(a){if(typeof a=="number"&&(a=a.toString(8)),a.match(/^0?4.*/))return"040000";if(a.match(/^1006.*/))return"100644";if(a.match(/^1007.*/))return"100755";if(a.match(/^120.*/))return"120000";if(a.match(/^160.*/))return"160000";throw new _(`Could not understand file mode: ${a}`)}function Le(a){return!a.oid&&a.sha&&(a.oid=a.sha),a.mode=Ve(a.mode),a.type||(a.type=K(a.mode)),a}class Pe{constructor(t){if(Buffer.isBuffer(t))this._entries=le(t);else if(Array.isArray(t))this._entries=t.map(Le);else throw new _("invalid type passed to GitTree constructor");this._entries.sort(X)}static from(t){return new Pe(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(pe),Buffer.concat(t.map(i=>{const o=Buffer.from(i.mode.replace(/^0/,"")),l=Buffer.from(" "),f=Buffer.from(i.path,"utf8"),w=Buffer.from([0]),v=Buffer.from(i.oid,"hex");return Buffer.concat([o,l,f,w,v])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class rt{static wrap({type:t,object:i}){const o=`${t} ${i.length}\0`,l=o.length,f=l+i.length,w=new Uint8Array(f);for(let v=0;v<l;v++)w[v]=o.charCodeAt(v);return w.set(i,l),w}static unwrap(t){const i=t.indexOf(32),o=t.indexOf(0),l=t.slice(0,i).toString("utf8"),f=t.slice(i+1,o).toString("utf8"),w=t.length-(o+1);if(parseInt(f)!==w)throw new _(`Length mismatch: expected ${f} bytes but got ${w} instead.`);return{type:l,object:Buffer.from(t.slice(o+1))}}}async function Yt({fs:a,gitdir:t,oid:i}){const o=`objects/${i.slice(0,2)}/${i.slice(2)}`,l=await a.read(`${t}/${o}`);return l?{object:l,format:"deflated",source:o}:null}function pt(a,t){const i=new y(a),o=ot(i);if(o!==t.byteLength)throw new _(`applyDelta expected source buffer to be ${o} bytes but the provided buffer was ${t.length} bytes`);const l=ot(i);let f;const w=Et(i,t);if(w.byteLength===l)f=w;else{f=Buffer.alloc(l);const v=new y(f);for(v.copy(w);!i.eof();)v.copy(Et(i,t));const A=v.tell();if(l!==A)throw new _(`applyDelta expected target buffer to be ${l} bytes but the resulting buffer was ${A} bytes`)}return f}function ot(a){let t=0,i=0,o=null;do o=a.readUInt8(),t|=(o&127)<<i,i+=7;while(o&128);return t}function bt(a,t,i){let o=0,l=0;for(;i--;)t&1&&(o|=a.readUInt8()<<l),t>>=1,l+=8;return o}function Et(a,t){const i=a.readUInt8(),o=128,l=15,f=112;if(i&o){const w=bt(a,i&l,4);let v=bt(a,(i&f)>>4,3);return v===0&&(v=65536),t.slice(w,w+v)}else return a.slice(i)}function Lt(a){let t=[a];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Rr(a){return a[Symbol.asyncIterator]?a[Symbol.asyncIterator]():a[Symbol.iterator]?a[Symbol.iterator]():a.next?a:Lt(a)}class Or{constructor(t){if(typeof Buffer>"u")throw new Error("Missing Buffer dependency");this.stream=Rr(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:i}=await this.stream.next();return t&&(this._ended=!0,!i)?Buffer.alloc(0):(i&&(i=Buffer.from(i)),i)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const i=[this.buffer];for(;this.cursor+t>vt(i);){const o=await this._next();if(this._ended)break;i.push(o)}this.buffer=Buffer.concat(i)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function vt(a){return a.reduce((t,i)=>t+i.length,0)}async function Gt(a,t){const i=new Or(a);let o=await i.read(4);if(o=o.toString("utf8"),o!=="PACK")throw new _(`Invalid PACK header '${o}'`);let l=await i.read(4);if(l=l.readUInt32BE(0),l!==2)throw new _(`Invalid packfile version: ${l}`);let f=await i.read(4);if(f=f.readUInt32BE(0),!(f<1))for(;!i.eof()&&f--;){const w=i.tell(),{type:v,length:A,ofs:T,reference:k}=await At(i),M=new c.Inflate;for(;!M.result;){const D=await i.chunk();if(!D)break;if(M.push(D,!1),M.err)throw new _(`Pako error: ${M.msg}`);if(M.result){if(M.result.length!==A)throw new _("Inflated object size is different from that stated in packfile.");await i.undo(),await i.read(D.length-M.strm.avail_in);const V=i.tell();await t({data:M.result,type:v,num:f,offset:w,end:V,reference:k,ofs:T})}}}}async function At(a){let t=await a.byte();const i=t>>4&7;let o=t&15;if(t&128){let w=4;do t=await a.byte(),o|=(t&127)<<w,w+=7;while(t&128)}let l,f;if(i===6){let w=0;l=0;const v=[];do t=await a.byte(),l|=(t&127)<<w,w+=7,v.push(t);while(t&128);f=Buffer.from(v)}return i===7&&(f=await a.read(20)),{type:i,length:o,ofs:l,reference:f}}async function Jt(a){return c.inflate(a)}function Qt(a){const t=[];let i=0,o=0;do{i=a.readUInt8();const l=i&127;t.push(l),o=i&128}while(o);return t.reduce((l,f)=>l+1<<7|f,-1)}function ni(a,t){let i=t,o=4,l=null;do l=a.readUInt8(),i|=(l&127)<<o,o+=7;while(l&128);return i}class Vr{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:i}){const o=new y(t);if(o.slice(4).toString("hex")!=="ff744f63")return;const f=o.readUInt32BE();if(f!==2)throw new _(`Unable to read version ${f} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new _("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");o.seek(o.tell()+1020);const w=o.readUInt32BE(),v=[];for(let k=0;k<w;k++){const M=o.slice(20).toString("hex");v[k]=M}o.seek(o.tell()+4*w);const A=new Map;for(let k=0;k<w;k++)A.set(v[k],o.readUInt32BE());const T=o.slice(20).toString("hex");return new Vr({hashes:v,crcs:{},offsets:A,packfileSha:T,getExternalRefDelta:i})}static async fromPack({pack:t,getExternalRefDelta:i,onProgress:o}){const l={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},f={},w=t.slice(-20).toString("hex"),v=[],A={},T=new Map;let k=null,M=null;await Gt([t],async({data:fe,type:we,reference:be,offset:Re,num:Ue})=>{k===null&&(k=Ue);const Ge=Math.floor((k-Ue)*100/k);Ge!==M&&o&&await o({phase:"Receiving objects",loaded:k-Ue,total:k}),M=Ge,we=l[we],["commit","tree","blob","tag"].includes(we)?f[Re]={type:we,offset:Re}:we==="ofs-delta"?f[Re]={type:we,offset:Re}:we==="ref-delta"&&(f[Re]={type:we,offset:Re})});const D=Object.keys(f).map(Number);for(const[fe,we]of D.entries()){const be=fe+1===D.length?t.byteLength-20:D[fe+1],Re=f[we],Ue=s.buf(t.slice(we,be))>>>0;Re.end=be,Re.crc=Ue}const V=new Vr({pack:Promise.resolve(t),packfileSha:w,crcs:A,hashes:v,offsets:T,getExternalRefDelta:i});M=null;let ee=0;const ge=[0,0,0,0,0,0,0,0,0,0,0,0];for(let fe in f){fe=Number(fe);const we=Math.floor(ee*100/k);we!==M&&o&&await o({phase:"Resolving deltas",loaded:ee,total:k}),ee++,M=we;const be=f[fe];if(!be.oid)try{V.readDepth=0,V.externalReadDepth=0;const{type:Re,object:Ue}=await V.readSlice({start:fe});ge[V.readDepth]+=1;const Ge=await Z(rt.wrap({type:Re,object:Ue}));be.oid=Ge,v.push(Ge),T.set(Ge,fe),A[Ge]=be.crc}catch{continue}}return v.sort(),V}async toBuffer(){const t=[],i=(T,k)=>{t.push(Buffer.from(T,k))};i("ff744f63","hex"),i("00000002","hex");const o=new y(Buffer.alloc(256*4));for(let T=0;T<256;T++){let k=0;for(const M of this.hashes)parseInt(M.slice(0,2),16)<=T&&k++;o.writeUInt32BE(k)}t.push(o.buffer);for(const T of this.hashes)i(T,"hex");const l=new y(Buffer.alloc(this.hashes.length*4));for(const T of this.hashes)l.writeUInt32BE(this.crcs[T]);t.push(l.buffer);const f=new y(Buffer.alloc(this.hashes.length*4));for(const T of this.hashes)f.writeUInt32BE(this.offsets.get(T));t.push(f.buffer),i(this.packfileSha,"hex");const w=Buffer.concat(t),v=await Z(w),A=Buffer.alloc(20);return A.write(v,"hex"),Buffer.concat([w,A])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new _(`Could not read object ${t} from packfile`)}const i=this.offsets.get(t);return this.readSlice({start:i})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const i={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new _("Tried to read from a GitPackIndex with no packfile loaded into memory");const o=(await this.pack).slice(t),l=new y(o),f=l.readUInt8(),w=f&112;let v=i[w];if(v===void 0)throw new _("Unrecognized type: 0b"+w.toString(2));const A=f&15;let T=A;f&128&&(T=ni(l,A));let M=null,D=null;if(v==="ofs_delta"){const ee=Qt(l),ge=t-ee;({object:M,type:v}=await this.readSlice({start:ge}))}if(v==="ref_delta"){const ee=l.slice(20).toString("hex");({object:M,type:v}=await this.read({oid:ee}))}const V=o.slice(l.tell());if(D=Buffer.from(await Jt(V)),D.byteLength!==T)throw new _(`Packfile told us object would have length ${T} but it had length ${D.byteLength}`);return M&&(D=Buffer.from(pt(D,M))),this.readDepth>3&&(this.offsetCache[t]={type:v,object:D}),{type:v,format:"content",object:D}}}const ii=Symbol("PackfileCache");async function mh({fs:a,filename:t,getExternalRefDelta:i,emitter:o,emitterPrefix:l}){const f=await a.read(t);return Vr.fromIdx({idx:f,getExternalRefDelta:i})}function qi({fs:a,cache:t,filename:i,getExternalRefDelta:o,emitter:l,emitterPrefix:f}){t[ii]||(t[ii]=new Map);let w=t[ii].get(i);return w||(w=mh({fs:a,filename:i,getExternalRefDelta:o,emitter:l,emitterPrefix:f}),t[ii].set(i,w)),w}async function wh({fs:a,cache:t,gitdir:i,oid:o,format:l="content",getExternalRefDelta:f}){let w=await a.readdir(g(i,"objects/pack"));w=w.filter(v=>v.endsWith(".idx"));for(const v of w){const A=`${i}/objects/pack/${v}`,T=await qi({fs:a,cache:t,filename:A,getExternalRefDelta:f});if(T.error)throw new _(T.error);if(T.offsets.has(o)){if(!T.pack){const M=A.replace(/idx$/,"pack");T.pack=a.read(M)}const k=await T.read({oid:o,getExternalRefDelta:f});return k.format="content",k.source=`objects/pack/${v.replace(/idx$/,"pack")}`,k}}return null}async function dt({fs:a,cache:t,gitdir:i,oid:o,format:l="content"}){const f=k=>dt({fs:a,cache:t,gitdir:i,oid:k});let w;if(o==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(w={format:"wrapped",object:Buffer.from("tree 0\0")}),w||(w=await Yt({fs:a,gitdir:i,oid:o})),!w){if(w=await wh({fs:a,cache:t,gitdir:i,oid:o,getExternalRefDelta:f}),!w)throw new Fe(o);return w}if(l==="deflated"||(w.format==="deflated"&&(w.object=Buffer.from(await Jt(w.object)),w.format="wrapped"),l==="wrapped"))return w;const v=await Z(w.object);if(v!==o)throw new _(`SHA check failed! Expected ${o}, computed ${v}`);const{object:A,type:T}=rt.unwrap(w.object);if(w.type=T,w.object=A,w.format="content",l==="content")return w;throw new _(`invalid requested format "${l}"`)}class nr extends S{constructor(t,i,o=!0){super(`Failed to create ${t} at ${i} because it already exists.${o?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=nr.code,this.data={noun:t,where:i,canForce:o}}}nr.code="AlreadyExistsError";class gn extends S{constructor(t,i,o){super(`Found multiple ${t} matching "${i}" (${o.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=gn.code,this.data={nouns:t,short:i,matches:o}}}gn.code="AmbiguousError";class mn extends S{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=mn.code,this.data={filepaths:t}}}mn.code="CheckoutConflictError";class wn extends S{constructor(t,i){super(`Cannot cherry-pick merge commit ${t}. Merge commits have ${i} parents and require specifying which parent to use as the base.`),this.code=this.name=wn.code,this.data={oid:t,parentCount:i}}}wn.code="CherryPickMergeCommitError";class yn extends S{constructor(t){super(`Cannot cherry-pick root commit ${t}. Root commits have no parents.`),this.code=this.name=yn.code,this.data={oid:t}}}yn.code="CherryPickRootCommitError";class bn extends S{constructor(t,i){super(`Failed to checkout "${t}" because commit ${i} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=bn.code,this.data={ref:t,oid:i}}}bn.code="CommitNotFetchedError";class vn extends S{constructor(){super("Empty response from git server."),this.code=this.name=vn.code,this.data={}}}vn.code="EmptyServerResponseError";class xn extends S{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=xn.code,this.data={}}}xn.code="FastForwardError";class _n extends S{constructor(t,i){super(`One or more branches were not updated: ${t}`),this.code=this.name=_n.code,this.data={prettyDetails:t,result:i}}}_n.code="GitPushError";class Zr extends S{constructor(t,i,o){super(`HTTP Error: ${t} ${i}`),this.code=this.name=Zr.code,this.data={statusCode:t,statusMessage:i,response:o}}}Zr.code="HttpError";class yr extends S{constructor(t){let i="invalid filepath";t==="leading-slash"||t==="trailing-slash"?i='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(i='"filepath" should not be a directory.'),super(i),this.code=this.name=yr.code,this.data={reason:t}}}yr.code="InvalidFilepathError";class ir extends S{constructor(t,i){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${i}".)`),this.code=this.name=ir.code,this.data={ref:t,suggestion:i}}}ir.code="InvalidRefNameError";class Sn extends S{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=Sn.code,this.data={depth:t}}}Sn.code="MaxDepthError";class Kr extends S{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Kr.code,this.data={}}}Kr.code="MergeNotSupportedError";class Pr extends S{constructor(t,i,o,l){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Pr.code,this.data={filepaths:t,bothModified:i,deleteByUs:o,deleteByTheirs:l}}}Pr.code="MergeConflictError";class Ot extends S{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Ot.code,this.data={role:t}}}Ot.code="MissingNameError";class Ht extends S{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Ht.code,this.data={parameter:t}}}Ht.code="MissingParameterError";class kn extends S{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=kn.code,this.data={errors:t},this.errors=t}}kn.code="MultipleGitError";class Mr extends S{constructor(t,i){super(`Expected "${t}" but received "${i}".`),this.code=this.name=Mr.code,this.data={expected:t,actual:i}}}Mr.code="ParseError";class Xr extends S{constructor(t){let i="";t==="not-fast-forward"?i=" because it was not a simple fast-forward":t==="tag-exists"&&(i=" because tag already exists"),super(`Push rejected${i}. Use "force: true" to override.`),this.code=this.name=Xr.code,this.data={reason:t}}}Xr.code="PushRejectedError";class br extends S{constructor(t,i){super(`Remote does not support the "${t}" so the "${i}" parameter cannot be used.`),this.code=this.name=br.code,this.data={capability:t,parameter:i}}}br.code="RemoteCapabilityError";class En extends S{constructor(t,i){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=En.code,this.data={preview:t,response:i}}}En.code="SmartHttpError";class An extends S{constructor(t,i,o){super(`Git remote "${t}" uses an unrecognized transport protocol: "${i}"`),this.code=this.name=An.code,this.data={url:t,transport:i,suggestion:o}}}An.code="UnknownTransportError";class In extends S{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=In.code,this.data={url:t}}}In.code="UrlParseError";class Yr extends S{constructor(){super("The operation was canceled."),this.code=this.name=Yr.code,this.data={}}}Yr.code="UserCanceledError";class Cn extends S{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=Cn.code,this.data={filepath:t}}}Cn.code="IndexResetError";class Tn extends S{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Tn.code,this.data={ref:t}}}Tn.code="NoCommitError";var Os=Object.freeze({__proto__:null,AlreadyExistsError:nr,AmbiguousError:gn,CheckoutConflictError:mn,CherryPickMergeCommitError:wn,CherryPickRootCommitError:yn,CommitNotFetchedError:bn,EmptyServerResponseError:vn,FastForwardError:xn,GitPushError:_n,HttpError:Zr,InternalError:_,InvalidFilepathError:yr,InvalidOidError:Xe,InvalidRefNameError:ir,MaxDepthError:Sn,MergeNotSupportedError:Kr,MergeConflictError:Pr,MissingNameError:Ot,MissingParameterError:Ht,MultipleGitError:kn,NoRefspecError:Ye,NotFoundError:Fe,ObjectTypeError:Me,ParseError:Mr,PushRejectedError:Xr,RemoteCapabilityError:br,SmartHttpError:En,UnknownTransportError:An,UnsafeFilepathError:R,UrlParseError:In,UserCanceledError:Yr,UnmergedPathsError:x,IndexResetError:Cn,NoCommitError:Tn});function Wi({name:a,email:t,timestamp:i,timezoneOffset:o}){return o=yh(o),`${a} <${t}> ${i} ${o}`}function yh(a){const t=bh(vh(a));a=Math.abs(a);const i=Math.floor(a/60);a-=i*60;let o=String(i),l=String(a);return o.length<2&&(o="0"+o),l.length<2&&(l="0"+l),(t===-1?"-":"+")+o+l}function bh(a){return Math.sign(a)||(Object.is(a,-0)?-1:1)}function vh(a){return a===0?a:-a}function pr(a){return a=a.replace(/\r/g,""),a=a.replace(/^\n+/,""),a=a.replace(/\n+$/,"")+`
`,a}function ai(a){const[,t,i,o,l]=a.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:i,timestamp:Number(o),timezoneOffset:xh(l)}}function xh(a){let[,t,i,o]=a.match(/(\+|-)(\d\d)(\d\d)/);return o=(t==="+"?1:-1)*(Number(i)*60+Number(o)),_h(o)}function _h(a){return a===0?a:-a}class zt{constructor(t){if(typeof t=="string")this._tag=t;else if(Buffer.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=zt.render(t);else throw new _("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new zt(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${Wi(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),i=[];for(const l of t)l[0]===" "?i[i.length-1]+=`
`+l.slice(1):i.push(l);const o={};for(const l of i){const f=l.slice(0,l.indexOf(" ")),w=l.slice(l.indexOf(" ")+1);Array.isArray(o[f])?o[f].push(w):o[f]=w}return o.tagger&&(o.tagger=ai(o.tagger)),o.committer&&(o.committer=ai(o.committer)),o}withoutSignature(){const t=pr(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return pr(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Buffer.from(this._tag,"utf8")}static async sign(t,i,o){const l=t.payload();let{signature:f}=await i({payload:l,secretKey:o});f=pr(f);const w=l+f;return zt.from(w)}}function Vi(a){return a.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function Sh(a){return a.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class gt{constructor(t){if(typeof t=="string")this._commit=t;else if(Buffer.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=gt.render(t);else throw new _("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:i}){const o=gt.justHeaders(t),l=gt.justMessage(t),f=pr(o+`
gpgsig`+Vi(i)+`
`+l);return new gt(f)}static from(t){return new gt(t)}toObject(){return Buffer.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return gt.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return pr(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=gt.justHeaders(this._commit).split(`
`),i=[];for(const l of t)l[0]===" "?i[i.length-1]+=`
`+l.slice(1):i.push(l);const o={parent:[]};for(const l of i){const f=l.slice(0,l.indexOf(" ")),w=l.slice(l.indexOf(" ")+1);Array.isArray(o[f])?o[f].push(w):o[f]=w}return o.author&&(o.author=ai(o.author)),o.committer&&(o.committer=ai(o.committer)),o}static renderHeaders(t){let i="";if(t.tree?i+=`tree ${t.tree}
`:i+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new _("commit 'parent' property should be an array");for(const f of t.parent)i+=`parent ${f}
`}const o=t.author;i+=`author ${Wi(o)}
`;const l=t.committer||t.author;return i+=`committer ${Wi(l)}
`,t.gpgsig&&(i+="gpgsig"+Vi(t.gpgsig)),i}static render(t){return gt.renderHeaders(t)+`
`+pr(t.message)}render(){return this._commit}withoutSignature(){const t=pr(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const i=t.slice(0,t.indexOf(`
gpgsig`)),o=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return pr(i+`
`+o)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return Sh(t)}static async sign(t,i,o){const l=t.withoutSignature(),f=gt.justMessage(t._commit);let{signature:w}=await i({payload:l,secretKey:o});w=pr(w);const A=gt.justHeaders(t._commit)+`
gpgsig`+Vi(w)+`
`+f;return gt.from(A)}}async function Jr({fs:a,cache:t,gitdir:i,oid:o}){if(o==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Pe.from([]),oid:o};const{type:l,object:f}=await dt({fs:a,cache:t,gitdir:i,oid:o});if(l==="tag")return o=zt.from(f).parse().object,Jr({fs:a,cache:t,gitdir:i,oid:o});if(l==="commit")return o=gt.from(f).parse().tree,Jr({fs:a,cache:t,gitdir:i,oid:o});if(l!=="tree")throw new Me(o,l,"tree");return{tree:Pe.from(f),oid:o}}class kh{constructor({fs:t,gitdir:i,ref:o,cache:l}){this.fs=t,this.cache=l,this.gitdir=i,this.mapPromise=(async()=>{const w=new Map;let v;try{v=await H.resolve({fs:t,gitdir:i,ref:o})}catch(T){T instanceof Fe&&(v="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const A=await Jr({fs:t,cache:this.cache,gitdir:i,oid:v});return A.type="tree",A.mode="40000",w.set(".",A),w})();const f=this;this.ConstructEntry=class{constructor(v){this._fullpath=v,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return f.type(this)}async mode(){return f.mode(this)}async stat(){return f.stat(this)}async content(){return f.content(this)}async oid(){return f.oid(this)}}}async readdir(t){const i=t._fullpath,{fs:o,cache:l,gitdir:f}=this,w=await this.mapPromise,v=w.get(i);if(!v)throw new Error(`No obj for ${i}`);const A=v.oid;if(!A)throw new Error(`No oid for obj ${JSON.stringify(v)}`);if(v.type!=="tree")return null;const{type:T,object:k}=await dt({fs:o,cache:l,gitdir:f,oid:A});if(T!==v.type)throw new Me(A,T,v.type);const M=Pe.from(k);for(const D of M)w.set(g(i,D.path),D);return M.entries().map(D=>g(i,D.path))}async type(t){if(t._type===!1){const i=await this.mapPromise,{type:o}=i.get(t._fullpath);t._type=o}return t._type}async mode(t){if(t._mode===!1){const i=await this.mapPromise,{mode:o}=i.get(t._fullpath);t._mode=L(parseInt(o,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const i=await this.mapPromise,{fs:o,cache:l,gitdir:f}=this,v=i.get(t._fullpath).oid,{type:A,object:T}=await dt({fs:o,cache:l,gitdir:f,oid:v});A!=="blob"?t._content=void 0:t._content=new Uint8Array(T)}return t._content}async oid(t){if(t._oid===!1){const o=(await this.mapPromise).get(t._fullpath);t._oid=o.oid}return t._oid}}function Wt({ref:a="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,Ie,{value:function({fs:i,gitdir:o,cache:l}){return new kh({fs:i,gitdir:o,ref:a,cache:l})}}),Object.freeze(t),t}class Eh{constructor({fs:t,dir:i,gitdir:o,cache:l}){this.fs=t,this.cache=l,this.dir=i,this.gitdir=o,this.config=null;const f=this;this.ConstructEntry=class{constructor(v){this._fullpath=v,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return f.type(this)}async mode(){return f.mode(this)}async stat(){return f.stat(this)}async content(){return f.content(this)}async oid(){return f.oid(this)}}}async readdir(t){const i=t._fullpath,{fs:o,dir:l}=this,f=await o.readdir(g(l,i));return f===null?null:f.map(w=>g(i,w))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:i,dir:o}=this;let l=await i.lstat(`${o}/${t._fullpath}`);if(!l)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let f=l.isDirectory()?"tree":"blob";f==="blob"&&!l.isFile()&&!l.isSymbolicLink()&&(f="special"),t._type=f,l=G(l),t._mode=l.mode,l.size===-1&&t._actualSize&&(l.size=t._actualSize),t._stat=l}return t._stat}async content(t){if(t._content===!1){const{fs:i,dir:o,gitdir:l}=this;if(await t.type()==="tree")t._content=void 0;else{let f;if(await t.mode()>>12===10)f=await i.readlink(`${o}/${t._fullpath}`);else{const v=await(await this._getGitConfig(i,l)).get("core.autocrlf");f=await i.read(`${o}/${t._fullpath}`,{autocrlf:v})}t._actualSize=f.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(f)}}return t._content}async oid(t){if(t._oid===!1){const i=this,{fs:o,gitdir:l,cache:f}=this;let w;await he.acquire({fs:o,gitdir:l,cache:f},async function(v){const A=v.entriesMap.get(t._fullpath),T=await t.stat(),M=await(await i._getGitConfig(o,l)).get("core.filemode"),D=typeof process<"u"?process.platform!=="win32":!0;if(!A||de(T,A,M,D)){const V=await t.content();V===void 0?w=void 0:(w=await Z(rt.wrap({type:"blob",object:V})),A&&w===A.oid&&(!M||T.mode===A.mode)&&de(T,A,M,D)&&v.insert({filepath:t._fullpath,stats:T,oid:w}))}else w=A.oid}),t._oid=w}return t._oid}async _getGitConfig(t,i){return this.config?this.config:(this.config=await ue.get({fs:t,gitdir:i}),this.config)}}function Qr(){const a=Object.create(null);return Object.defineProperty(a,Ie,{value:function({fs:t,dir:i,gitdir:o,cache:l}){return new Eh({fs:t,dir:i,gitdir:o,cache:l})}}),Object.freeze(a),a}function Ah(a,t){const i=t-a;return Array.from({length:i},(o,l)=>a+l)}const Ps=typeof Array.prototype.flat>"u"?a=>a.reduce((t,i)=>t.concat(i),[]):a=>a.flat();class Ih{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*Ch(a){const t=new Ih;let i;const o=[],l=a.length;for(let f=0;f<l;f++)o[f]=a[f].next().value,o[f]!==void 0&&t.consider(o[f]);if(t.value!==null)for(;;){const f=[];i=t.value,t.reset();for(let w=0;w<l;w++)o[w]!==void 0&&o[w]===i?(f[w]=o[w],o[w]=a[w].next().value):f[w]=null,o[w]!==void 0&&t.consider(o[w]);if(yield f,t.value===null)return}}async function vr({fs:a,cache:t,dir:i,gitdir:o,trees:l,map:f=async(A,T)=>T,reduce:w=async(A,T)=>{const k=Ps(T);return A!==void 0&&k.unshift(A),k},iterate:v=(A,T)=>Promise.all([...T].map(A))}){const A=l.map(V=>V[Ie]({fs:a,dir:i,gitdir:o,cache:t})),T=new Array(A.length).fill("."),k=Ah(0,A.length),M=async V=>{k.forEach(fe=>{const we=V[fe];V[fe]=we&&new A[fe].ConstructEntry(we)});const ge=(await Promise.all(k.map(fe=>{const we=V[fe];return we?A[fe].readdir(we):[]}))).map(fe=>(fe===null?[]:fe)[Symbol.iterator]());return{entries:V,children:Ch(ge)}},D=async V=>{const{entries:ee,children:ge}=await M(V),fe=ee.find(be=>be&&be._fullpath)._fullpath,we=await f(fe,ee);if(we!==null){let be=await v(D,ge);return be=be.filter(Re=>Re!==void 0),w(we,be)}};return D(T)}async function Zi(a,t){const i=await a.readdir(t);i==null?await a.rm(t):i.length?await Promise.all(i.map(o=>{const l=g(t,o);return a.lstat(l).then(f=>{if(f)return f.isDirectory()?Zi(a,l):a.rm(l)})})).then(()=>a.rmdir(t)):await a.rmdir(t)}function Th(a){return Rh(a)&&Ms(a.then)&&Ms(a.catch)}function Rh(a){return a&&typeof a=="object"}function Ms(a){return typeof a=="function"}function Bs(a){return Th((i=>{try{return i.readFile().catch(o=>o)}catch(o){return o}})(a))}const js=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function Fs(a,t){if(Bs(t))for(const i of js)a[`_${i}`]=t[i].bind(t);else for(const i of js)a[`_${i}`]=u(t[i].bind(t));Bs(t)?(t.cp&&(a._cp=t.cp.bind(t)),t.rm?a._rm=t.rm.bind(t):t.rmdir.length>1?a._rm=t.rmdir.bind(t):a._rm=Zi.bind(null,a)):(t.cp&&(a._cp=u(t.cp.bind(t))),t.rm?a._rm=u(t.rm.bind(t)):t.rmdir.length>2?a._rm=u(t.rmdir.bind(t)):a._rm=Zi.bind(null,a))}class qe{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const i=Object.getOwnPropertyDescriptor(t,"promises");i&&i.enumerable?Fs(this,t.promises):Fs(this,t),this._original_unwrapped_fs=t}async exists(t,i={}){try{return await this._stat(t),!0}catch(o){if(o.code==="ENOENT"||o.code==="ENOTDIR"||(o.code||"").includes("ENS"))return!1;throw o}}async read(t,i={}){try{let o=await this._readFile(t,i);if(i.autocrlf==="true")try{o=new TextDecoder("utf8",{fatal:!0}).decode(o),o=o.replace(/\r\n/g,`
`),o=new TextEncoder().encode(o)}catch{}return typeof o!="string"&&(o=Buffer.from(o)),o}catch{return null}}async write(t,i,o={}){try{await this._writeFile(t,i,o)}catch{await this.mkdir(_e(t)),await this._writeFile(t,i,o)}}async mkdir(t,i=!1){try{await this._mkdir(t)}catch(o){if(o===null||o.code==="EEXIST")return;if(i)throw o;if(o.code==="ENOENT"){const l=_e(t);if(l==="."||l==="/"||l===t)throw o;await this.mkdir(l),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(i){if(i.code!=="ENOENT")throw i}}async rmdir(t,i){try{i&&i.recursive?await this._rm(t,i):await this._rmdir(t)}catch(o){if(o.code!=="ENOENT")throw o}}async readdir(t){try{const i=await this._readdir(t);return i.sort(j),i}catch(i){return i.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const i=await this._readdir(t);return(await Promise.all(i.map(async l=>{const f=t+"/"+l;return(await this._stat(f)).isDirectory()?this.readdirDeep(f):f}))).reduce((l,f)=>l.concat(f),[])}async lstat(t){try{return await this._lstat(t)}catch(i){if(i.code==="ENOENT"||(i.code||"").includes("ENS"))return null;throw i}}async readlink(t,i={encoding:"buffer"}){try{const o=await this._readlink(t,i);return Buffer.isBuffer(o)?o:Buffer.from(o)}catch(o){if(o.code==="ENOENT"||(o.code||"").includes("ENS"))return null;throw o}}async writelink(t,i){return this._symlink(i.toString("utf8"),t)}}function J(a,t){if(t===void 0)throw new Ht(a)}async function We({fsp:a,dotgit:t}){J("fsp",a),J("dotgit",t);const i=await a._stat(t).catch(()=>({isFile:()=>!1,isDirectory:()=>!1}));return i.isDirectory()?t:i.isFile()?a._readFile(t,"utf8").then(o=>o.trimRight().substr(8)).then(o=>g(_e(t),o)):t}async function oi(a,t){return!a&&!t?!1:a&&!t||!a&&t?!0:!(await a.type()==="tree"&&await t.type()==="tree"||await a.type()===await t.type()&&await a.mode()===await t.mode()&&await a.oid()===await t.oid())}async function Ds({fs:a,dir:t,gitdir:i=g(t,".git"),commit:o="HEAD",cache:l={}}){try{J("fs",a),J("dir",t),J("gitdir",i);const f=new qe(a),w=[Wt({ref:o}),Qr(),Oe()];let v=[];const A=await We({fsp:f,dotgit:i});await he.acquire({fs:f,gitdir:A,cache:l},async function(k){v=k.unmergedPaths});const T=await vr({fs:f,cache:l,dir:t,gitdir:A,trees:w,map:async function(k,[M,D,V]){const ee=!await oi(D,V),ge=v.includes(k),fe=!await oi(V,M);if(ee||ge)return M?{path:k,mode:await M.mode(),oid:await M.oid(),type:await M.type(),content:await M.content()}:void 0;if(fe)return!1;throw new Cn(k)}});await he.acquire({fs:f,gitdir:A,cache:l},async function(k){for(const M of T)if(M!==!1){if(!M){await f.rmdir(`${t}/${M.path}`,{recursive:!0}),k.delete({filepath:M.path});continue}if(M.type==="blob"){const D=new TextDecoder().decode(M.content);await f.write(`${t}/${M.path}`,D,{mode:M.mode}),k.insert({filepath:M.path,oid:M.oid,stage:0})}}})}catch(f){throw f.caller="git.abortMerge",f}}class en{static async isIgnored({fs:t,dir:i,gitdir:o=g(i,".git"),filepath:l}){if(Ne(l)===".git")return!0;if(l===".")return!1;let f="";const w=g(o,"info","exclude");await t.exists(w)&&(f=await t.read(w,"utf8"));const v=[{gitignore:g(i,".gitignore"),filepath:l}],A=l.split("/").filter(Boolean);for(let k=1;k<A.length;k++){const M=A.slice(0,k).join("/"),D=A.slice(k).join("/");v.push({gitignore:g(i,M,".gitignore"),filepath:D})}let T=!1;for(const k of v){let M;try{M=await t.read(k.gitignore,"utf8")}catch(ee){if(ee.code==="NOENT")continue}const D=p().add(f);D.add(M);const V=_e(k.filepath);if(V!=="."&&D.ignores(V))return!0;T?T=!D.test(k.filepath).unignored:T=D.test(k.filepath).ignored}return T}}async function Oh({fs:a,gitdir:t,object:i,format:o,oid:l}){const f=`objects/${l.slice(0,2)}/${l.slice(2)}`,w=`${t}/${f}`;await a.exists(w)||await a.write(w,i)}let Ki=null;async function Ls(a){return Ki===null&&(Ki=Mh()),Ki?Ph(a):c.deflate(a)}async function Ph(a){const t=new CompressionStream("deflate"),i=new Blob([a]).stream().pipeThrough(t);return new Uint8Array(await new Response(i).arrayBuffer())}function Mh(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function qt({fs:a,gitdir:t,type:i,object:o,format:l="content",oid:f=void 0,dryRun:w=!1}){return l!=="deflated"&&(l!=="wrapped"&&(o=rt.wrap({type:i,object:o})),f=await Z(o),o=Buffer.from(await Ls(o))),w||await Oh({fs:a,gitdir:t,object:o,format:"deflated",oid:f}),f}function $s(a){let t;for(;~(t=a.indexOf(92));)a[t]=47;return a}async function Ns({fs:a,dir:t,gitdir:i=g(t,".git"),filepath:o,cache:l={},force:f=!1,parallel:w=!0}){try{J("fs",a),J("dir",t),J("gitdir",i),J("filepath",o);const v=new qe(a),A=await We({fsp:v,dotgit:i});await he.acquire({fs:v,gitdir:A,cache:l},async T=>{const M=await(await ue.get({fs:v,gitdir:A})).get("core.autocrlf");return Xi({dir:t,gitdir:A,fs:v,filepath:o,index:T,force:f,parallel:w,autocrlf:M})})}catch(v){throw v.caller="git.add",v}}async function Xi({dir:a,gitdir:t,fs:i,filepath:o,index:l,force:f,parallel:w,autocrlf:v}){o=Array.isArray(o)?o:[o];const A=o.map(async D=>{if(!f&&await en.isIgnored({fs:i,dir:a,gitdir:t,filepath:D}))return;const V=await i.lstat(g(a,D));if(!V)throw new Fe(D);if(V.isDirectory()){const ee=await i.readdir(g(a,D));if(w){const ge=ee.map(fe=>Xi({dir:a,gitdir:t,fs:i,filepath:[g(D,fe)],index:l,force:f,parallel:w,autocrlf:v}));await Promise.all(ge)}else for(const ge of ee)await Xi({dir:a,gitdir:t,fs:i,filepath:[g(D,ge)],index:l,force:f,parallel:w,autocrlf:v})}else{const ee=V.isSymbolicLink()?await i.readlink(g(a,D)).then($s):await i.read(g(a,D),{autocrlf:v});if(ee===null)throw new Fe(D);const ge=await qt({fs:i,gitdir:t,type:"blob",object:ee});l.insert({filepath:D,stats:V,oid:ge})}}),T=await Promise.allSettled(A),k=T.filter(D=>D.status==="rejected").map(D=>D.reason);if(k.length>1)throw new kn(k);if(k.length===1)throw k[0];return T.filter(D=>D.status==="fulfilled"&&D.value).map(D=>D.value)}async function Rn({fs:a,gitdir:t,path:i}){return(await ue.get({fs:a,gitdir:t})).get(i)}function Us(a,...t){for(const i of t)if(i)for(const o of Object.keys(i)){const l=i[o];l!==void 0&&(a[o]=l)}return a}async function xr({fs:a,gitdir:t,author:i,commit:o}){const l=Math.floor(Date.now()/1e3),f={name:await Rn({fs:a,gitdir:t,path:"user.name"}),email:await Rn({fs:a,gitdir:t,path:"user.email"})||"",timestamp:l,timezoneOffset:new Date(l*1e3).getTimezoneOffset()},w=Us({},f,o?o.author:void 0,i);if(w.name!==void 0)return w}async function Br({fs:a,gitdir:t,author:i,committer:o,commit:l}){const f=Math.floor(Date.now()/1e3),w={name:await Rn({fs:a,gitdir:t,path:"user.name"}),email:await Rn({fs:a,gitdir:t,path:"user.email"})||"",timestamp:f,timezoneOffset:new Date(f*1e3).getTimezoneOffset()},v=Us({},w,l?l.committer:void 0,i,o);if(v.name!==void 0)return v}async function zs({fs:a,cache:t,gitdir:i,oid:o}){const{type:l,object:f}=await dt({fs:a,cache:t,gitdir:i,oid:o});if(l==="tag")return o=zt.from(f).parse().object,zs({fs:a,cache:t,gitdir:i,oid:o});if(l!=="commit")throw new Me(o,l,"commit");return{commit:gt.from(f),oid:o}}async function lr({fs:a,cache:t,gitdir:i,oid:o}){const{commit:l,oid:f}=await zs({fs:a,cache:t,gitdir:i,oid:o});return{oid:f,commit:l.parse(),payload:l.withoutSignature()}}async function On({fs:a,cache:t,onSign:i,gitdir:o,message:l,author:f,committer:w,signingKey:v,amend:A=!1,dryRun:T=!1,noUpdateBranch:k=!1,ref:M,parent:D,tree:V}){let ee=!1,ge=!1;M||(ge=!(await a.read(`${o}/HEAD`,{encoding:"utf8"})).startsWith("ref:"),M=await H.resolve({fs:a,gitdir:o,ref:"HEAD",depth:2}));let fe,we;try{fe=await H.resolve({fs:a,gitdir:o,ref:M}),we=await lr({fs:a,gitdir:o,oid:fe,cache:{}})}catch{ee=!0}if(A&&ee)throw new Tn(M);const be=A?await xr({fs:a,gitdir:o,author:f,commit:we.commit}):await xr({fs:a,gitdir:o,author:f});if(!be)throw new Ot("author");const Re=A?await Br({fs:a,gitdir:o,author:be,committer:w,commit:we.commit}):await Br({fs:a,gitdir:o,author:be,committer:w});if(!Re)throw new Ot("committer");return he.acquire({fs:a,gitdir:o,cache:t,allowUnmerged:!1},async function(Ue){const He=Be(Ue.entries).get(".");if(V||(V=await Gs({fs:a,gitdir:o,inode:He,dryRun:T})),D?D=await Promise.all(D.map(je=>H.resolve({fs:a,gitdir:o,ref:je}))):A?D=we.commit.parent:D=fe?[fe]:[],!l)if(A)l=we.commit.message;else throw new Ht("message");let Ce=gt.from({tree:V,parent:D,author:be,committer:Re,message:l});v&&(Ce=await gt.sign(Ce,i,v));const Te=await qt({fs:a,gitdir:o,type:"commit",object:Ce.toObject(),dryRun:T});return!k&&!T&&await H.writeRef({fs:a,gitdir:o,ref:ge?"HEAD":M,value:Te}),Te})}async function Gs({fs:a,gitdir:t,inode:i,dryRun:o}){const l=i.children;for(const A of l)A.type==="tree"&&(A.metadata.mode="040000",A.metadata.oid=await Gs({fs:a,gitdir:t,inode:A,dryRun:o}));const f=l.map(A=>({mode:A.metadata.mode,path:A.basename,oid:A.metadata.oid,type:A.type})),w=Pe.from(f);return await qt({fs:a,gitdir:t,type:"tree",object:w.toObject(),dryRun:o})}async function Pn({fs:a,cache:t,gitdir:i,oid:o,filepath:l}){if(l.startsWith("/"))throw new yr("leading-slash");if(l.endsWith("/"))throw new yr("trailing-slash");const f=o,w=await Jr({fs:a,cache:t,gitdir:i,oid:o}),v=w.tree;if(l==="")o=w.oid;else{const A=l.split("/");o=await Hs({fs:a,cache:t,gitdir:i,tree:v,pathArray:A,oid:f,filepath:l})}return o}async function Hs({fs:a,cache:t,gitdir:i,tree:o,pathArray:l,oid:f,filepath:w}){const v=l.shift();for(const A of o)if(A.path===v){if(l.length===0)return A.oid;{const{type:T,object:k}=await dt({fs:a,cache:t,gitdir:i,oid:A.oid});if(T!=="tree")throw new Me(f,T,"tree",w);return o=Pe.from(k),Hs({fs:a,cache:t,gitdir:i,tree:o,pathArray:l,oid:f,filepath:w})}}throw new Fe(`file or directory found at "${f}:${w}"`)}async function tn({fs:a,cache:t,gitdir:i,oid:o,filepath:l=void 0}){l!==void 0&&(o=await Pn({fs:a,cache:t,gitdir:i,oid:o,filepath:l}));const{tree:f,oid:w}=await Jr({fs:a,cache:t,gitdir:i,oid:o});return{oid:w,tree:f.entries()}}async function Mn({fs:a,gitdir:t,tree:i}){const o=Pe.from(i).toObject();return await qt({fs:a,gitdir:t,type:"tree",object:o,format:"content"})}async function Bh({fs:a,cache:t,onSign:i,gitdir:o,ref:l,oid:f,note:w,force:v,author:A,committer:T,signingKey:k}){let M;try{M=await H.resolve({gitdir:o,fs:a,ref:l})}catch(we){if(!(we instanceof Fe))throw we}let V=(await tn({fs:a,cache:t,gitdir:o,oid:M||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(v)V=V.filter(we=>we.path!==f);else for(const we of V)if(we.path===f)throw new nr("note",f);typeof w=="string"&&(w=Buffer.from(w,"utf8"));const ee=await qt({fs:a,gitdir:o,type:"blob",object:w,format:"content"});V.push({mode:"100644",path:f,oid:ee,type:"blob"});const ge=await Mn({fs:a,gitdir:o,tree:V});return await On({fs:a,cache:t,onSign:i,gitdir:o,ref:l,tree:ge,parent:M&&[M],message:`Note added by 'isomorphic-git addNote'
`,author:A,committer:T,signingKey:k})}async function qs({fs:a,onSign:t,dir:i,gitdir:o=g(i,".git"),ref:l="refs/notes/commits",oid:f,note:w,force:v,author:A,committer:T,signingKey:k,cache:M={}}){try{J("fs",a),J("gitdir",o),J("oid",f),J("note",w),k&&J("onSign",t);const D=new qe(a),V=await xr({fs:D,gitdir:o,author:A});if(!V)throw new Ot("author");const ee=await Br({fs:D,gitdir:o,author:V,committer:T});if(!ee)throw new Ot("committer");const ge=await We({fsp:D,dotgit:o});return await Bh({fs:D,cache:M,onSign:t,gitdir:ge,ref:l,oid:f,note:w,force:v,author:V,committer:ee,signingKey:k})}catch(D){throw D.caller="git.addNote",D}}const jh=/(^|[/.])([/.]|$)|^@$|@{|[\x00-\x20\x7f~^:?*[\\]|\.lock(\/|$)/;function Bn(a,t){if(typeof a!="string")throw new TypeError("Reference name must be a string");return!jh.test(a)&&!0}async function Ws({fs:a,gitdir:t,remote:i,url:o,force:l}){if(!Bn(i))throw new ir(i,d.clean(i));const f=await ue.get({fs:a,gitdir:t});if(!l&&(await f.getSubsections("remote")).includes(i)&&o!==await f.get(`remote.${i}.url`))throw new nr("remote",i);await f.set(`remote.${i}.url`,o),await f.set(`remote.${i}.fetch`,`+refs/heads/*:refs/remotes/${i}/*`),await ue.save({fs:a,gitdir:t,config:f})}async function Vs({fs:a,dir:t,gitdir:i=g(t,".git"),remote:o,url:l,force:f=!1}){try{J("fs",a),J("gitdir",i),J("remote",o),J("url",l);const w=new qe(a),v=await We({fsp:w,dotgit:i});return await Ws({fs:w,gitdir:v,remote:o,url:l,force:f})}catch(w){throw w.caller="git.addRemote",w}}async function Fh({fs:a,cache:t,onSign:i,gitdir:o,ref:l,tagger:f,message:w=l,gpgsig:v,object:A,signingKey:T,force:k=!1}){if(l=l.startsWith("refs/tags/")?l:`refs/tags/${l}`,!k&&await H.exists({fs:a,gitdir:o,ref:l}))throw new nr("tag",l);const M=await H.resolve({fs:a,gitdir:o,ref:A||"HEAD"}),{type:D}=await dt({fs:a,cache:t,gitdir:o,oid:M});let V=zt.from({object:M,type:D,tag:l.replace("refs/tags/",""),tagger:f,message:w,gpgsig:v});T&&(V=await zt.sign(V,i,T));const ee=await qt({fs:a,gitdir:o,type:"tag",object:V.toObject()});await H.writeRef({fs:a,gitdir:o,ref:l,value:ee})}async function Zs({fs:a,onSign:t,dir:i,gitdir:o=g(i,".git"),ref:l,tagger:f,message:w=l,gpgsig:v,object:A,signingKey:T,force:k=!1,cache:M={}}){try{J("fs",a),J("gitdir",o),J("ref",l),T&&J("onSign",t);const D=new qe(a),V=await We({fsp:D,dotgit:o}),ee=await xr({fs:D,gitdir:V,author:f});if(!ee)throw new Ot("tagger");return await Fh({fs:D,cache:M,onSign:t,gitdir:V,ref:l,tagger:ee,message:w,gpgsig:v,object:A,signingKey:T,force:k})}catch(D){throw D.caller="git.annotatedTag",D}}async function Dh({fs:a,gitdir:t,ref:i,object:o,checkout:l=!1,force:f=!1}){if(!Bn(i))throw new ir(i,d.clean(i));const w=`refs/heads/${i}`;if(!f&&await H.exists({fs:a,gitdir:t,ref:w}))throw new nr("branch",i,!1);let v;try{v=await H.resolve({fs:a,gitdir:t,ref:o||"HEAD"})}catch{}v&&await H.writeRef({fs:a,gitdir:t,ref:w,value:v}),l&&await H.writeSymbolicRef({fs:a,gitdir:t,ref:"HEAD",value:w})}async function Ks({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o,object:l,checkout:f=!1,force:w=!1}){try{J("fs",a),J("gitdir",i),J("ref",o);const v=new qe(a),A=await We({fsp:v,dotgit:i});return await Dh({fs:v,gitdir:A,ref:o,object:l,checkout:f,force:w})}catch(v){throw v.caller="git.branch",v}}const Xs=(a,t)=>a==="."||t==null||t.length===0||t==="."?!0:t.length>=a.length?t.startsWith(a):a.startsWith(t);async function Yi({fs:a,cache:t,onProgress:i,onPostCheckout:o,dir:l,gitdir:f,remote:w,ref:v,filepaths:A,noCheckout:T,noUpdateHead:k,dryRun:M,force:D,track:V=!0,nonBlocking:ee=!1,batchSize:ge=100}){let fe;if(o)try{fe=await H.resolve({fs:a,gitdir:f,ref:"HEAD"})}catch{fe="0000000000000000000000000000000000000000"}let we;try{we=await H.resolve({fs:a,gitdir:f,ref:v})}catch(be){if(v==="HEAD")throw be;const Re=`${w}/${v}`;if(we=await H.resolve({fs:a,gitdir:f,ref:Re}),V){const Ue=await ue.get({fs:a,gitdir:f});await Ue.set(`branch.${v}.remote`,w),await Ue.set(`branch.${v}.merge`,`refs/heads/${v}`),await ue.save({fs:a,gitdir:f,config:Ue})}await H.writeRef({fs:a,gitdir:f,ref:`refs/heads/${v}`,value:we})}if(!T){let be;try{be=await Lh({fs:a,cache:t,onProgress:i,dir:l,gitdir:f,ref:v,force:D,filepaths:A})}catch(Ce){throw Ce instanceof Fe&&Ce.data.what===we?new bn(v,we):Ce}const Re=be.filter(([Ce])=>Ce==="conflict").map(([Ce,Te])=>Te);if(Re.length>0)throw new mn(Re);const Ue=be.filter(([Ce])=>Ce==="error").map(([Ce,Te])=>Te);if(Ue.length>0)throw new _(Ue.join(", "));if(M){o&&await o({previousHead:fe,newHead:we,type:A!=null&&A.length>0?"file":"branch"});return}let Ge=0;const He=be.length;if(await he.acquire({fs:a,gitdir:f,cache:t},async function(Ce){await Promise.all(be.filter(([Te])=>Te==="delete"||Te==="delete-index").map(async function([Te,je]){const et=`${l}/${je}`;Te==="delete"&&await a.rm(et),Ce.delete({filepath:je}),i&&await i({phase:"Updating workdir",loaded:++Ge,total:He})}))}),await he.acquire({fs:a,gitdir:f,cache:t},async function(Ce){for(const[Te,je]of be)if(Te==="rmdir"||Te==="rmdir-index"){const et=`${l}/${je}`;try{Te==="rmdir"&&await a.rmdir(et),Ce.delete({filepath:je}),i&&await i({phase:"Updating workdir",loaded:++Ge,total:He})}catch(ct){if(ct.code!=="ENOTEMPTY")throw ct}}}),await Promise.all(be.filter(([Ce])=>Ce==="mkdir"||Ce==="mkdir-index").map(async function([Ce,Te]){const je=`${l}/${Te}`;await a.mkdir(je),i&&await i({phase:"Updating workdir",loaded:++Ge,total:He})})),ee){const Ce=be.filter(([je])=>je==="create"||je==="create-index"||je==="update"||je==="mkdir-index"),Te=await Ys("Update Working Dir",Ce.map(([je,et,ct,It,lt])=>()=>Nh({fs:a,cache:t,gitdir:f,dir:l},[je,et,ct,It,lt])),i,ge);await he.acquire({fs:a,gitdir:f,cache:t,allowUnmerged:!0},async function(je){await Ys("Update Index",Te.map(([et,ct,It])=>()=>$h({index:je,fullpath:et,oid:ct,stats:It})),i,ge)})}else await he.acquire({fs:a,gitdir:f,cache:t,allowUnmerged:!0},async function(Ce){await Promise.all(be.filter(([Te])=>Te==="create"||Te==="create-index"||Te==="update"||Te==="mkdir-index").map(async function([Te,je,et,ct,It]){const lt=`${l}/${je}`;try{if(Te!=="create-index"&&Te!=="mkdir-index"){const{object:Pt}=await dt({fs:a,cache:t,gitdir:f,oid:et});if(It&&await a.rm(lt),ct===33188)await a.write(lt,Pt);else if(ct===33261)await a.write(lt,Pt,{mode:511});else if(ct===40960)await a.writelink(lt,Pt);else throw new _(`Invalid mode 0o${ct.toString(8)} detected in blob ${et}`)}const Tt=await a.lstat(lt);ct===33261&&(Tt.mode=493),Te==="mkdir-index"&&(Tt.mode=57344),Ce.insert({filepath:je,stats:Tt,oid:et}),i&&await i({phase:"Updating workdir",loaded:++Ge,total:He})}catch{}}))});o&&await o({previousHead:fe,newHead:we,type:A!=null&&A.length>0?"file":"branch"})}if(!k){const be=await H.expand({fs:a,gitdir:f,ref:v});be.startsWith("refs/heads")?await H.writeSymbolicRef({fs:a,gitdir:f,ref:"HEAD",value:be}):await H.writeRef({fs:a,gitdir:f,ref:"HEAD",value:we})}}async function Lh({fs:a,cache:t,onProgress:i,dir:o,gitdir:l,ref:f,force:w,filepaths:v}){let A=0;return vr({fs:a,cache:t,dir:o,gitdir:l,trees:[Wt({ref:f}),Qr(),Oe()],map:async function(T,[k,M,D]){if(T===".")return;if(v&&!v.some(ee=>Xs(T,ee)))return null;switch(i&&await i({phase:"Analyzing workdir",loaded:++A}),[!!D,!!k,!!M].map(Number).join("")){case"000":return;case"001":return w&&v&&v.includes(T)?["delete",T]:void 0;case"010":switch(await k.type()){case"tree":return["mkdir",T];case"blob":return["create",T,await k.oid(),await k.mode()];case"commit":return["mkdir-index",T,await k.oid(),await k.mode()];default:return["error",`new entry Unhandled type ${await k.type()}`]}case"011":switch(`${await k.type()}-${await M.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",T];case"blob-blob":return await k.oid()!==await M.oid()?w?["update",T,await k.oid(),await k.mode(),await k.mode()!==await M.mode()]:["conflict",T]:await k.mode()!==await M.mode()?w?["update",T,await k.oid(),await k.mode(),!0]:["conflict",T]:["create-index",T,await k.oid(),await k.mode()];case"commit-tree":return;case"commit-blob":return["conflict",T];default:return["error",`new entry Unhandled type ${k.type}`]}case"100":return["delete-index",T];case"101":switch(await D.type()){case"tree":return["rmdir-index",T];case"blob":return await D.oid()!==await M.oid()?w?["delete",T]:["conflict",T]:["delete",T];case"commit":return["rmdir-index",T];default:return["error",`delete entry Unhandled type ${await D.type()}`]}case"110":case"111":switch(`${await D.type()}-${await k.type()}`){case"tree-tree":return;case"blob-blob":{if(await D.oid()===await k.oid()&&await D.mode()===await k.mode()&&!w)return;if(M){if(await M.oid()!==await D.oid()&&await M.oid()!==await k.oid())return w?["update",T,await k.oid(),await k.mode(),await k.mode()!==await M.mode()]:["conflict",T]}else if(w)return["update",T,await k.oid(),await k.mode(),await k.mode()!==await D.mode()];return await k.mode()!==await D.mode()?["update",T,await k.oid(),await k.mode(),!0]:await k.oid()!==await D.oid()?["update",T,await k.oid(),await k.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",T,await k.oid()];case"blob-tree":return["update-blob-to-tree",T];case"commit-commit":return["mkdir-index",T,await k.oid(),await k.mode()];default:return["error",`update entry Unhandled type ${await D.type()}-${await k.type()}`]}}},reduce:async function(T,k){return k=Ps(k),T?T&&T[0]==="rmdir"?(k.push(T),k):(k.unshift(T),k):k}})}async function $h({index:a,fullpath:t,stats:i,oid:o}){try{a.insert({filepath:t,stats:i,oid:o})}catch{}}async function Nh({fs:a,cache:t,gitdir:i,dir:o},[l,f,w,v,A]){const T=`${o}/${f}`;if(l!=="create-index"&&l!=="mkdir-index"){const{object:M}=await dt({fs:a,cache:t,gitdir:i,oid:w});if(A&&await a.rm(T),v===33188)await a.write(T,M);else if(v===33261)await a.write(T,M,{mode:511});else if(v===40960)await a.writelink(T,M);else throw new _(`Invalid mode 0o${v.toString(8)} detected in blob ${w}`)}const k=await a.lstat(T);return v===33261&&(k.mode=493),l==="mkdir-index"&&(k.mode=57344),[f,w,k]}async function Ys(a,t,i,o){const l=[];try{for(let f=0;f<t.length;f+=o){const w=t.slice(f,f+o).map(A=>A());(await Promise.allSettled(w)).forEach(A=>{A.status==="fulfilled"&&l.push(A.value)}),i&&await i({phase:"Updating workdir",loaded:f+w.length,total:t.length})}return l}catch{}return l}async function Ji({fs:a,onProgress:t,onPostCheckout:i,dir:o,gitdir:l=g(o,".git"),remote:f="origin",ref:w,filepaths:v,noCheckout:A=!1,noUpdateHead:T=w===void 0,dryRun:k=!1,force:M=!1,track:D=!0,cache:V={},nonBlocking:ee=!1,batchSize:ge=100}){try{J("fs",a),J("dir",o),J("gitdir",l);const fe=w||"HEAD",we=new qe(a),be=await We({fsp:we,dotgit:l});return await Yi({fs:we,cache:V,onProgress:t,onPostCheckout:i,dir:o,gitdir:be,remote:f,ref:fe,filepaths:v,noCheckout:A,noUpdateHead:T,dryRun:k,force:M,track:D,nonBlocking:ee,batchSize:ge})}catch(fe){throw fe.caller="git.checkout",fe}}const Qi=/^.*(\r?\n|$)/gm;function Uh({branches:a,contents:t}){const i=a[1],o=a[2],l=t[0],f=t[1],w=t[2],v=f.match(Qi),A=l.match(Qi),T=w.match(Qi),k=h(v,A,T),M=7;let D="",V=!0;for(const ee of k)ee.ok&&(D+=ee.ok.join("")),ee.conflict&&(V=!1,D+=`${"<".repeat(M)} ${i}
`,D+=ee.conflict.a.join(""),D+=`${"=".repeat(M)}
`,D+=ee.conflict.b.join(""),D+=`${">".repeat(M)} ${o}
`);return{cleanMerge:V,mergedText:D}}async function Js({fs:a,cache:t,dir:i,gitdir:o=g(i,".git"),index:l,ourOid:f,baseOid:w,theirOid:v,ourName:A="ours",baseName:T="base",theirName:k="theirs",dryRun:M=!1,abortOnConflict:D=!0,mergeDriver:V}){const ee=Wt({ref:f}),ge=Wt({ref:w}),fe=Wt({ref:v}),we=[],be=[],Re=[],Ue=[],Ge=await vr({fs:a,cache:t,dir:i,gitdir:o,trees:[ee,ge,fe],map:async function(He,[Ce,Te,je]){const et=Ne(He),ct=await oi(Ce,Te),It=await oi(je,Te);switch(`${ct}-${It}`){case"false-false":return{mode:await Te.mode(),path:et,oid:await Te.oid(),type:await Te.type()};case"false-true":return!je&&await Ce.type()==="tree"?{mode:await Ce.mode(),path:et,oid:await Ce.oid(),type:await Ce.type()}:je?{mode:await je.mode(),path:et,oid:await je.oid(),type:await je.type()}:void 0;case"true-false":return!Ce&&await je.type()==="tree"?{mode:await je.mode(),path:et,oid:await je.oid(),type:await je.type()}:Ce?{mode:await Ce.mode(),path:et,oid:await Ce.oid(),type:await Ce.type()}:void 0;case"true-true":{if(Ce&&je&&await Ce.type()==="tree"&&await je.type()==="tree")return{mode:await Ce.mode(),path:et,oid:await Ce.oid(),type:"tree"};if(Ce&&je&&await Ce.type()==="blob"&&await je.type()==="blob")return zh({fs:a,gitdir:o,path:et,ours:Ce,base:Te,theirs:je,ourName:A,baseName:T,theirName:k,mergeDriver:V}).then(async lt=>{if(lt.cleanMerge)D||l.insert({filepath:He,oid:lt.mergeResult.oid,stage:0});else if(we.push(He),be.push(He),!D){let Tt="";Te&&await Te.type()==="blob"&&(Tt=await Te.oid());const Pt=await Ce.oid(),Dr=await je.oid();l.delete({filepath:He}),Tt&&l.insert({filepath:He,oid:Tt,stage:1}),l.insert({filepath:He,oid:Pt,stage:2}),l.insert({filepath:He,oid:Dr,stage:3})}return lt.mergeResult});if(Te&&!Ce&&je&&await Te.type()==="blob"&&await je.type()==="blob"){if(we.push(He),Re.push(He),!D){const lt=await Te.oid(),Tt=await je.oid();l.delete({filepath:He}),l.insert({filepath:He,oid:lt,stage:1}),l.insert({filepath:He,oid:Tt,stage:3})}return{mode:await je.mode(),oid:await je.oid(),type:"blob",path:et}}if(Te&&Ce&&!je&&await Te.type()==="blob"&&await Ce.type()==="blob"){if(we.push(He),Ue.push(He),!D){const lt=await Te.oid(),Tt=await Ce.oid();l.delete({filepath:He}),l.insert({filepath:He,oid:lt,stage:1}),l.insert({filepath:He,oid:Tt,stage:2})}return{mode:await Ce.mode(),oid:await Ce.oid(),type:"blob",path:et}}if(Te&&!Ce&&!je&&(await Te.type()==="blob"||await Te.type()==="tree"))return;throw new Kr}}},reduce:we.length!==0&&(!i||D)?void 0:async(He,Ce)=>{const Te=Ce.filter(Boolean);if(He&&!(He&&He.type==="tree"&&Te.length===0&&He.path!==".")){if(Te.length>0||He.path==="."&&Te.length===0){const et=new Pe(Te).toObject(),ct=await qt({fs:a,gitdir:o,type:"tree",object:et,dryRun:M});He.oid=ct}return He}}});return we.length!==0?(i&&!D&&await vr({fs:a,cache:t,dir:i,gitdir:o,trees:[Wt({ref:Ge.oid})],map:async function(He,[Ce]){const Te=`${i}/${He}`;if(await Ce.type()==="blob"){const je=await Ce.mode(),et=new TextDecoder().decode(await Ce.content());await a.write(Te,et,{mode:je})}return!0}}),new Pr(we,be,Re,Ue)):Ge.oid}async function zh({fs:a,gitdir:t,path:i,ours:o,base:l,theirs:f,ourName:w,theirName:v,baseName:A,dryRun:T,mergeDriver:k=Uh}){const M="blob";let D="100755",V="",ee="";l&&await l.type()==="blob"&&(D=await l.mode(),V=await l.oid(),ee=Buffer.from(await l.content()).toString("utf8"));const ge=D===await o.mode()?await f.mode():await o.mode();if(await o.oid()===await f.oid())return{cleanMerge:!0,mergeResult:{mode:ge,path:i,oid:await o.oid(),type:M}};if(await o.oid()===V)return{cleanMerge:!0,mergeResult:{mode:ge,path:i,oid:await f.oid(),type:M}};if(await f.oid()===V)return{cleanMerge:!0,mergeResult:{mode:ge,path:i,oid:await o.oid(),type:M}};const fe=Buffer.from(await o.content()).toString("utf8"),we=Buffer.from(await f.content()).toString("utf8"),{mergedText:be,cleanMerge:Re}=await k({branches:[A,w,v],contents:[ee,fe,we],path:i}),Ue=await qt({fs:a,gitdir:t,type:"blob",object:Buffer.from(be,"utf8"),dryRun:T});return{cleanMerge:Re,mergeResult:{mode:ge,path:i,oid:Ue,type:M}}}const Gh={stage:Oe,workdir:Qr};let ea;async function rn(a,t){return ea===void 0&&(ea=new r),ea.acquire(a,t)}async function Hh(a,t,i,o,l=null){const f=g(i,o),w=await a.lstat(f);if(!w)throw new Fe(f);if(w.isDirectory())throw new _(`${f}: file expected, but found directory`);const v=l?await Yt({fs:a,gitdir:t,oid:l}):void 0;let A=v?l:void 0;return v||await rn({fs:a,gitdir:t,currentFilepath:f},async()=>{const T=w.isSymbolicLink()?await a.readlink(f).then($s):await a.read(f);if(T===null)throw new Fe(f);A=await qt({fs:a,gitdir:t,type:"blob",object:T})}),A}async function qh({fs:a,dir:t,gitdir:i,entries:o}){async function l(f){if(f.type==="tree"){if(!f.oid){const w=await Promise.all(f.children.map(l));f.oid=await Mn({fs:a,gitdir:i,tree:w}),f.mode=16384}}else f.type==="blob"&&(f.oid=await Hh(a,i,t,f.path,f.oid),f.mode=33188);return f.path=f.path.split("/").pop(),f}return Promise.all(o.map(l))}async function Qs({fs:a,dir:t,gitdir:i,treePair:o}){const l=o[1]==="stage",f=o.map(V=>typeof V=="string"?Gh[V]():V),w=[],k=await vr({fs:a,cache:{},dir:t,gitdir:i,trees:f,map:async(V,[ee,ge])=>{if(!(V==="."||await en.isIgnored({fs:a,dir:t,gitdir:i,filepath:V}))&&ge)return(!ee||await ee.oid()!==await ge.oid()&&await ge.oid()!==void 0)&&w.push([ee,ge]),{mode:await ge.mode(),path:V,oid:await ge.oid(),type:await ge.type()}},reduce:async(V,ee)=>(ee=ee.filter(Boolean),V?(V.children=ee,V):ee.length>0?ee:void 0),iterate:async(V,ee)=>{const ge=[];for(const fe of ee){const[we,be]=fe;l?be&&(await a.exists(`${t}/${be.toString()}`)?ge.push(fe):w.push([null,be])):we&&(be?ge.push(fe):w.push([we,null]))}return ge.length?Promise.all(ge.map(V)):[]}});if(w.length===0||k.length===0)return null;const D=(await qh({fs:a,dir:t,gitdir:i,entries:k})).filter(Boolean).map(V=>({mode:V.mode,path:V.path,oid:V.oid,type:V.type}));return Mn({fs:a,gitdir:i,tree:D})}async function ec({fs:a,dir:t,gitdir:i,stashCommit:o,parentCommit:l,wasStaged:f}){const w=[],v=[],A=await vr({fs:a,cache:{},dir:t,gitdir:i,trees:[Wt({ref:l}),Wt({ref:o})],map:async(T,[k,M])=>{if(T==="."||await en.isIgnored({fs:a,dir:t,gitdir:i,filepath:T}))return;const D=M?await M.type():await k.type();if(D!=="tree"&&D!=="blob")return;if(!M&&k){const ee=D==="tree"?"rmdir":"rm";return D==="tree"&&w.push(T),D==="blob"&&f&&v.push({filepath:T,oid:await k.oid()}),{method:ee,filepath:T}}const V=await M.oid();if(!k||await k.oid()!==V)return D==="tree"?{method:"mkdir",filepath:T}:(f&&v.push({filepath:T,oid:V,stats:await a.lstat(g(t,T))}),{method:"write",filepath:T,oid:V})}});await rn({fs:a,gitdir:i,dirRemoved:w,ops:A},async()=>{for(const T of A){const k=g(t,T.filepath);switch(T.method){case"rmdir":await a.rmdir(k);break;case"mkdir":await a.mkdir(k);break;case"rm":await a.rm(k);break;case"write":if(!w.some(M=>k.startsWith(M))){const{object:M}=await dt({fs:a,cache:{},gitdir:i,oid:T.oid});await a.exists(k)&&await a.rm(k),await a.write(k,M)}break}}}),await he.acquire({fs:a,gitdir:i,cache:{}},async T=>{v.forEach(({filepath:k,stats:M,oid:D})=>{T.insert({filepath:k,stats:M,oid:D})})})}async function tc({fs:a,cache:t,dir:i,gitdir:o,oid:l,dryRun:f=!1,noUpdateBranch:w=!1,abortOnConflict:v=!0,committer:A,mergeDriver:T}){const{commit:k,oid:M}=await lr({fs:a,cache:t,gitdir:o,oid:l});if(k.parent.length>1)throw new wn(M,k.parent.length);if(k.parent.length===0)throw new yn(M);const D=await H.resolve({fs:a,gitdir:o,ref:"HEAD"}),{commit:V}=await lr({fs:a,cache:t,gitdir:o,oid:D}),ee=k.parent[0],{commit:ge}=await lr({fs:a,cache:t,gitdir:o,oid:ee}),fe=await he.acquire({fs:a,gitdir:o,cache:t,allowUnmerged:!1},async be=>Js({fs:a,cache:t,dir:i,gitdir:o,index:be,ourOid:V.tree,baseOid:ge.tree,theirOid:k.tree,ourName:"HEAD",baseName:`parent of ${M.slice(0,7)}`,theirName:M.slice(0,7),dryRun:f,abortOnConflict:v,mergeDriver:T}));if(fe instanceof Pr)throw fe;const we=await On({fs:a,cache:t,gitdir:o,message:k.message,tree:fe,parent:[D],author:k.author,committer:A,dryRun:f,noUpdateBranch:w});return i&&!f&&!w&&await ec({fs:a,dir:i,gitdir:o,stashCommit:we,parentCommit:D,wasStaged:!0}),we}async function rc({fs:a,dir:t,gitdir:i=g(t,".git"),oid:o,cache:l={},committer:f,dryRun:w=!1,noUpdateBranch:v=!1,abortOnConflict:A=!0,mergeDriver:T}){try{J("fs",a),J("gitdir",i),J("oid",o);const k=new qe(a),M=await We({fsp:k,dotgit:i}),{commit:D}=await lr({fs:k,cache:l,gitdir:M,oid:o});if(D.parent&&D.parent.length>1)return await tc({fs:k,cache:l,dir:t,gitdir:M,oid:o,dryRun:w,noUpdateBranch:v,abortOnConflict:A,committer:void 0,mergeDriver:T});const V=await Br({fs:k,gitdir:M,committer:f});if(!V)throw new Ot("committer");return await tc({fs:k,cache:l,dir:t,gitdir:M,oid:o,dryRun:w,noUpdateBranch:v,abortOnConflict:A,committer:V,mergeDriver:T})}catch(k){throw k.caller="git.cherryPick",k}}const Wh=/^refs\/(heads\/|tags\/|remotes\/)?(.*)/;function jr(a){const t=Wh.exec(a);return t?t[1]==="remotes/"&&a.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:a}async function _r({fs:a,gitdir:t,fullname:i=!1,test:o=!1}){const l=await H.resolve({fs:a,gitdir:t,ref:"HEAD",depth:2});if(o)try{await H.resolve({fs:a,gitdir:t,ref:l})}catch{return}if(l.startsWith("refs/"))return i?l:jr(l)}function Vh(a){return a=a.replace(/^git@([^:]+):/,"https://$1/"),a=a.replace(/^ssh:\/\//,"https://"),a}function nc({username:a="",password:t=""}){return`Basic ${Buffer.from(`${a}:${t}`).toString("base64")}`}async function jn(a,t){const i=Rr(a);for(;;){const{value:o,done:l}=await i.next();if(o&&await t(o),l)break}i.return&&i.return()}async function si(a){let t=0;const i=[];await jn(a,f=>{i.push(f),t+=f.byteLength});const o=new Uint8Array(t);let l=0;for(const f of i)o.set(f,l),l+=f.byteLength;return o}function ic(a){let t=a.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:a,auth:{}};t=t[1];const[i,o]=t.split(":");return a=a.replace(`${t}@`,""),{url:a,auth:{username:i,password:o}}}function ta(a,t){const i=t.toString(16);return"0".repeat(a-i.length)+i}class _t{static flush(){return Buffer.from("0000","utf8")}static delim(){return Buffer.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Buffer.from(t));const i=t.length+4,o=ta(4,i);return Buffer.concat([Buffer.from(o,"utf8"),t])}static streamReader(t){const i=new Or(t);return async function(){try{let l=await i.read(4);if(l==null)return!0;if(l=parseInt(l.toString("utf8"),16),l===0||l===1)return null;const f=await i.read(l-4);return f??!0}catch(l){return t.error=l,!0}}}}async function ac(a){const t={};let i;for(;i=await a(),i!==!0;){if(i===null)continue;i=i.toString("utf8").replace(/\n$/,"");const o=i.indexOf("=");if(o>-1){const l=i.slice(0,o),f=i.slice(o+1);t[l]=f}else t[i]=!0}return{protocolVersion:2,capabilities2:t}}async function oc(a,{service:t}){const i=new Set,o=new Map,l=new Map,f=_t.streamReader(a);let w=await f();for(;w===null;)w=await f();if(w===!0)throw new vn;if(w.includes("version 2"))return ac(f);if(w.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new Mr(`# service=${t}\\n`,w.toString("utf8"));let v=await f();for(;v===null;)v=await f();if(v===!0)return{capabilities:i,refs:o,symrefs:l};if(v=v.toString("utf8"),v.includes("version 2"))return ac(f);const[A,T]=ra(v,"\0","\\x00");if(T.split(" ").map(k=>i.add(k)),A!=="0000000000000000000000000000000000000000 capabilities^{}"){const[k,M]=ra(A," "," ");for(o.set(M,k);;){const D=await f();if(D===!0)break;if(D!==null){const[V,ee]=ra(D.toString("utf8")," "," ");o.set(ee,V)}}}for(const k of i)if(k.startsWith("symref=")){const M=k.match(/symref=([^:]+):(.*)/);M.length===3&&l.set(M[1],M[2])}return{protocolVersion:1,capabilities:i,refs:o,symrefs:l}}function ra(a,t,i){const o=a.trim().split(t);if(o.length!==2)throw new Mr(`Two strings separated by '${i}'`,a.toString("utf8"));return o}const sc=(a,t)=>a.endsWith("?")?`${a}${t}`:`${a}/${t.replace(/^https?:\/\//,"")}`,cc=(a,t)=>{(t.username||t.password)&&(a.Authorization=nc(t)),t.headers&&Object.assign(a,t.headers)},na=async a=>{try{const t=Buffer.from(await si(a.body)),i=t.toString("utf8");return{preview:i.length<256?i:i.slice(0,256)+"...",response:i,data:t}}catch{return{}}};class ci{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:i,onAuth:o,onAuthSuccess:l,onAuthFailure:f,corsProxy:w,service:v,url:A,headers:T,protocolVersion:k}){let{url:M,auth:D}=ic(A);const V=w?sc(w,M):M;(D.username||D.password)&&(T.Authorization=nc(D)),k===2&&(T["Git-Protocol"]="version=2");let ee,ge,fe=!1;do if(ee=await t.request({onProgress:i,method:"GET",url:`${V}/info/refs?service=${v}`,headers:T}),ge=!1,ee.statusCode===401||ee.statusCode===203){const we=fe?f:o;if(we){if(D=await we(M,{...D,headers:{...T}}),D&&D.cancel)throw new Yr;D&&(cc(T,D),fe=!0,ge=!0)}}else ee.statusCode===200&&fe&&l&&await l(M,D);while(ge);if(ee.statusCode!==200){const{response:we}=await na(ee);throw new Zr(ee.statusCode,ee.statusMessage,we)}if(ee.headers["content-type"]===`application/x-${v}-advertisement`){const we=await oc(ee.body,{service:v});return we.auth=D,we}else{const{preview:we,response:be,data:Re}=await na(ee);try{const Ue=await oc([Re],{service:v});return Ue.auth=D,Ue}catch{throw new En(we,be)}}}static async connect({http:t,onProgress:i,corsProxy:o,service:l,url:f,auth:w,body:v,headers:A}){const T=ic(f);T&&(f=T.url),o&&(f=sc(o,f)),A["content-type"]=`application/x-${l}-request`,A.accept=`application/x-${l}-result`,cc(A,w);const k=await t.request({onProgress:i,method:"POST",url:`${f}/${l}`,body:v,headers:A});if(k.statusCode!==200){const{response:M}=na(k);throw new Zr(k.statusCode,k.statusMessage,M)}return k}}class li{static getRemoteHelperFor({url:t}){const i=new Map;i.set("http",ci),i.set("https",ci);const o=Zh({url:t});if(!o)throw new In(t);if(i.has(o.transport))return i.get(o.transport);throw new An(t,o.transport,o.transport==="ssh"?Vh(t):void 0)}}function Zh({url:a}){if(a.startsWith("git@"))return{transport:"ssh",address:a};const t=a.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}let Fr=null;class Fn{static async read({fs:t,gitdir:i}){Fr===null&&(Fr=new r);const o=g(i,"shallow"),l=new Set;return await Fr.acquire(o,async function(){const f=await t.read(o,{encoding:"utf8"});if(f===null||f.trim()==="")return l;f.trim().split(`
`).map(w=>l.add(w))}),l}static async write({fs:t,gitdir:i,oids:o}){Fr===null&&(Fr=new r);const l=g(i,"shallow");if(o.size>0){const f=[...o].join(`
`)+`
`;await Fr.acquire(l,async function(){await t.write(l,f,{encoding:"utf8"})})}else await Fr.acquire(l,async function(){await t.rm(l)})}}async function Kh({fs:a,gitdir:t,oid:i}){const o=`objects/${i.slice(0,2)}/${i.slice(2)}`;return a.exists(`${t}/${o}`)}async function Xh({fs:a,cache:t,gitdir:i,oid:o,getExternalRefDelta:l}){let f=await a.readdir(g(i,"objects/pack"));f=f.filter(w=>w.endsWith(".idx"));for(const w of f){const v=`${i}/objects/pack/${w}`,A=await qi({fs:a,cache:t,filename:v,getExternalRefDelta:l});if(A.error)throw new _(A.error);if(A.offsets.has(o))return!0}return!1}async function lc({fs:a,cache:t,gitdir:i,oid:o,format:l="content"}){const f=v=>dt({fs:a,cache:t,gitdir:i,oid:v});let w=await Kh({fs:a,gitdir:i,oid:o});return w||(w=await Xh({fs:a,cache:t,gitdir:i,oid:o,getExternalRefDelta:f})),w}function Yh(a){const l="5041434b"+"00000002"+"00000000";return a.slice(0,12).toString("hex")===l}function uc(a,t){const i=a.map(o=>o.split("=",1)[0]);return t.filter(o=>{const l=o.split("=",1)[0];return i.includes(l)})}const ui={name:"isomorphic-git",version:"1.37.1",agent:"git/isomorphic-git@1.37.1"};class fi{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const i=this._waiting;this._waiting=null,i({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Jh(a){const t=a.indexOf("\r"),i=a.indexOf(`
`);return t===-1&&i===-1?-1:t===-1?i+1:i===-1?t+1:i===t+1?i+1:Math.min(t,i)+1}function fc(a){const t=new fi;let i="";return(async()=>(await jn(a,o=>{for(o=o.toString("utf8"),i+=o;;){const l=Jh(i);if(l===-1)break;t.write(i.slice(0,l)),i=i.slice(l)}}),i.length>0&&t.write(i),t.end()))(),t}class dc{static demux(t){const i=_t.streamReader(t),o=new fi,l=new fi,f=new fi,w=async function(){const v=await i();if(v===null)return w();if(v===!0){o.end(),f.end(),t.error?l.destroy(t.error):l.end();return}switch(v[0]){case 1:{l.write(v.slice(1));break}case 2:{f.write(v.slice(1));break}case 3:{const A=v.slice(1);f.write(A),o.end(),f.end(),l.destroy(new Error(A.toString("utf8")));return}default:o.write(v)}w()};return w(),{packetlines:o,packfile:l,progress:f}}}async function Qh(a){const{packetlines:t,packfile:i,progress:o}=dc.demux(a),l=[],f=[],w=[];let v=!1,A=!1;return new Promise((T,k)=>{jn(t,M=>{const D=M.toString("utf8").trim();if(D.startsWith("shallow")){const V=D.slice(-41).trim();V.length!==40&&k(new Xe(V)),l.push(V)}else if(D.startsWith("unshallow")){const V=D.slice(-41).trim();V.length!==40&&k(new Xe(V)),f.push(V)}else if(D.startsWith("ACK")){const[,V,ee]=D.split(" ");w.push({oid:V,status:ee}),ee||(A=!0)}else D.startsWith("NAK")?(v=!0,A=!0):(A=!0,v=!0);A&&(a.error?k(a.error):T({shallows:l,unshallows:f,acks:w,nak:v,packfile:i,progress:o}))}).finally(()=>{A||(a.error?k(a.error):T({shallows:l,unshallows:f,acks:w,nak:v,packfile:i,progress:o}))})})}function ep({capabilities:a=[],wants:t=[],haves:i=[],shallows:o=[],depth:l=null,since:f=null,exclude:w=[]}){const v=[];t=[...new Set(t)];let A=` ${a.join(" ")}`;for(const T of t)v.push(_t.encode(`want ${T}${A}
`)),A="";for(const T of o)v.push(_t.encode(`shallow ${T}
`));l!==null&&v.push(_t.encode(`deepen ${l}
`)),f!==null&&v.push(_t.encode(`deepen-since ${Math.floor(f.valueOf()/1e3)}
`));for(const T of w)v.push(_t.encode(`deepen-not ${T}
`));v.push(_t.flush());for(const T of i)v.push(_t.encode(`have ${T}
`));return v.push(_t.encode(`done
`)),v}async function ia({fs:a,cache:t,http:i,onProgress:o,onMessage:l,onAuth:f,onAuthSuccess:w,onAuthFailure:v,gitdir:A,ref:T,remoteRef:k,remote:M,url:D,corsProxy:V,depth:ee=null,since:ge=null,exclude:fe=[],relative:we=!1,tags:be=!1,singleBranch:Re=!1,headers:Ue={},prune:Ge=!1,pruneTags:He=!1}){const Ce=T||await _r({fs:a,gitdir:A,test:!0}),Te=await ue.get({fs:a,gitdir:A}),je=M||Ce&&await Te.get(`branch.${Ce}.remote`)||"origin",et=D||await Te.get(`remote.${je}.url`);if(typeof et>"u")throw new Ht("remote OR url");const ct=k||Ce&&await Te.get(`branch.${Ce}.merge`)||T||"HEAD";V===void 0&&(V=await Te.get("http.corsProxy"));const It=li.getRemoteHelperFor({url:et}),lt=await It.discover({http:i,onAuth:f,onAuthSuccess:w,onAuthFailure:v,corsProxy:V,service:"git-upload-pack",url:et,headers:Ue,protocolVersion:1}),Tt=lt.auth,Pt=lt.refs;if(Pt.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(ee!==null&&!lt.capabilities.has("shallow"))throw new br("shallow","depth");if(ge!==null&&!lt.capabilities.has("deepen-since"))throw new br("deepen-since","since");if(fe.length>0&&!lt.capabilities.has("deepen-not"))throw new br("deepen-not","exclude");if(we===!0&&!lt.capabilities.has("deepen-relative"))throw new br("deepen-relative","relative");const{oid:Dr,fullref:Lr}=H.resolveAgainstMap({ref:ct,map:Pt});for(const ut of Pt.keys())ut===Lr||ut==="HEAD"||ut.startsWith("refs/heads/")||be&&ut.startsWith("refs/tags/")||Pt.delete(ut);const nn=uc([...lt.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${ui.agent}`]);we&&nn.push("deepen-relative");const ca=Re?[Dr]:Pt.values(),la=Re?[Ce]:await H.listRefs({fs:a,gitdir:A,filepath:"refs"});let Vt=[];for(let ut of la)try{ut=await H.expand({fs:a,gitdir:A,ref:ut});const Mt=await H.resolve({fs:a,gitdir:A,ref:ut});await lc({fs:a,cache:t,gitdir:A,oid:Mt})&&Vt.push(Mt)}catch{}Vt=[...new Set(Vt)];const yt=await Fn.read({fs:a,gitdir:A}),ur=lt.capabilities.has("shallow")?[...yt]:[],$t=ep({capabilities:nn,wants:ca,haves:Vt,shallows:ur,depth:ee,since:ge,exclude:fe}),Dn=Buffer.from(await si($t)),$r=await It.connect({http:i,onProgress:o,corsProxy:V,service:"git-upload-pack",url:et,auth:Tt,body:[Dn],headers:Ue}),Ct=await Qh($r.body);$r.headers&&(Ct.headers=$r.headers);for(const ut of Ct.shallows)if(!yt.has(ut))try{const{object:Mt}=await dt({fs:a,cache:t,gitdir:A,oid:ut}),er=new gt(Mt),fr=await Promise.all(er.headers().parent.map($n=>lc({fs:a,cache:t,gitdir:A,oid:$n})));fr.length===0||fr.every($n=>$n)||yt.add(ut)}catch{yt.add(ut)}for(const ut of Ct.unshallows)yt.delete(ut);if(await Fn.write({fs:a,gitdir:A,oids:yt}),Re){const ut=new Map([[Lr,Dr]]),Mt=new Map;let er=10,fr=Lr;for(;er--;){const fa=lt.symrefs.get(fr);if(fa===void 0)break;Mt.set(fr,fa),fr=fa}const ua=Pt.get(fr);ua&&ut.set(fr,ua);const{pruned:$n}=await H.updateRemoteRefs({fs:a,gitdir:A,remote:je,refs:ut,symrefs:Mt,tags:be,prune:Ge});Ge&&(Ct.pruned=$n)}else{const{pruned:ut}=await H.updateRemoteRefs({fs:a,gitdir:A,remote:je,refs:Pt,symrefs:lt.symrefs,tags:be,prune:Ge,pruneTags:He});Ge&&(Ct.pruned=ut)}if(Ct.HEAD=lt.symrefs.get("HEAD"),Ct.HEAD===void 0){const{oid:ut}=H.resolveAgainstMap({ref:"HEAD",map:Pt});for(const[Mt,er]of Pt.entries())if(Mt!=="HEAD"&&er===ut){Ct.HEAD=Mt;break}}const Dp=Lr.startsWith("refs/tags")?"tag":"branch";if(Ct.FETCH_HEAD={oid:Dr,description:`${Dp} '${jr(Lr)}' of ${et}`},o||l){const ut=fc(Ct.progress);jn(ut,async Mt=>{if(l&&await l(Mt),o){const er=Mt.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);er&&await o({phase:er[1].trim(),loaded:parseInt(er[2],10),total:parseInt(er[3],10)})}})}const hi=Buffer.from(await si(Ct.packfile));if($r.body.error)throw $r.body.error;const jl=hi.slice(-20).toString("hex"),Ln={defaultBranch:Ct.HEAD,fetchHead:Ct.FETCH_HEAD.oid,fetchHeadDescription:Ct.FETCH_HEAD.description};if(Ct.headers&&(Ln.headers=Ct.headers),Ge&&(Ln.pruned=Ct.pruned),jl!==""&&!Yh(hi)){Ln.packfile=`objects/pack/pack-${jl}.pack`;const ut=g(A,Ln.packfile);await a.write(ut,hi);const Mt=fr=>dt({fs:a,cache:t,gitdir:A,oid:fr}),er=await Vr.fromPack({pack:hi,getExternalRefDelta:Mt,onProgress:o});await a.write(ut.replace(/\.pack$/,".idx"),await er.toBuffer())}return Ln}async function hc({fs:a,bare:t=!1,dir:i,gitdir:o=t?i:g(i,".git"),defaultBranch:l="master"}){if(await a.exists(o+"/config"))return;let f=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];f=f.map(w=>o+"/"+w);for(const w of f)await a.mkdir(w);await a.write(o+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await a.write(o+"/HEAD",`ref: refs/heads/${l}
`)}async function tp({fs:a,cache:t,http:i,onProgress:o,onMessage:l,onAuth:f,onAuthSuccess:w,onAuthFailure:v,onPostCheckout:A,dir:T,gitdir:k,url:M,corsProxy:D,ref:V,remote:ee,depth:ge,since:fe,exclude:we,relative:be,singleBranch:Re,noCheckout:Ue,noTags:Ge,headers:He,nonBlocking:Ce,batchSize:Te=100}){try{if(await hc({fs:a,gitdir:k}),await Ws({fs:a,gitdir:k,remote:ee,url:M,force:!1}),D){const ct=await ue.get({fs:a,gitdir:k});await ct.set("http.corsProxy",D),await ue.save({fs:a,gitdir:k,config:ct})}const{defaultBranch:je,fetchHead:et}=await ia({fs:a,cache:t,http:i,onProgress:o,onMessage:l,onAuth:f,onAuthSuccess:w,onAuthFailure:v,gitdir:k,ref:V,remote:ee,corsProxy:D,depth:ge,since:fe,exclude:we,relative:be,singleBranch:Re,headers:He,tags:!Ge});if(et===null)return;V=V||je,V=V.replace("refs/heads/",""),await Yi({fs:a,cache:t,onProgress:o,onPostCheckout:A,dir:T,gitdir:k,ref:V,remote:ee,noCheckout:Ue,nonBlocking:Ce,batchSize:Te})}catch(je){throw await a.rmdir(k,{recursive:!0,maxRetries:10}).catch(()=>{}),je}}async function pc({fs:a,http:t,onProgress:i,onMessage:o,onAuth:l,onAuthSuccess:f,onAuthFailure:w,onPostCheckout:v,dir:A,gitdir:T=g(A,".git"),url:k,corsProxy:M=void 0,ref:D=void 0,remote:V="origin",depth:ee=void 0,since:ge=void 0,exclude:fe=[],relative:we=!1,singleBranch:be=!1,noCheckout:Re=!1,noTags:Ue=!1,headers:Ge={},cache:He={},nonBlocking:Ce=!1,batchSize:Te=100}){try{J("fs",a),J("http",t),J("gitdir",T),Re||J("dir",A),J("url",k);const je=new qe(a),et=await We({fsp:je,dotgit:T});return await tp({fs:je,cache:He,http:t,onProgress:i,onMessage:o,onAuth:l,onAuthSuccess:f,onAuthFailure:w,onPostCheckout:v,dir:A,gitdir:et,url:k,corsProxy:M,ref:D,remote:V,depth:ee,since:ge,exclude:fe,relative:we,singleBranch:be,noCheckout:Re,noTags:Ue,headers:Ge,nonBlocking:Ce,batchSize:Te})}catch(je){throw je.caller="git.clone",je}}async function gc({fs:a,onSign:t,dir:i,gitdir:o=g(i,".git"),message:l,author:f,committer:w,signingKey:v,amend:A=!1,dryRun:T=!1,noUpdateBranch:k=!1,ref:M,parent:D,tree:V,cache:ee={}}){try{J("fs",a),A||J("message",l),v&&J("onSign",t);const ge=new qe(a),fe=await We({fsp:ge,dotgit:o});return await On({fs:ge,cache:ee,onSign:t,gitdir:fe,message:l,author:f,committer:w,signingKey:v,amend:A,dryRun:T,noUpdateBranch:k,ref:M,parent:D,tree:V})}catch(ge){throw ge.caller="git.commit",ge}}async function mc({fs:a,dir:t,gitdir:i=g(t,".git"),fullname:o=!1,test:l=!1}){try{J("fs",a),J("gitdir",i);const f=new qe(a),w=await We({fsp:f,dotgit:i});return await _r({fs:f,gitdir:w,fullname:o,test:l})}catch(f){throw f.caller="git.currentBranch",f}}async function rp({fs:a,gitdir:t,ref:i}){if(i=i.startsWith("refs/heads/")?i:`refs/heads/${i}`,!await H.exists({fs:a,gitdir:t,ref:i}))throw new Fe(i);const l=await H.expand({fs:a,gitdir:t,ref:i}),f=await _r({fs:a,gitdir:t,fullname:!0});if(l===f){const A=await H.resolve({fs:a,gitdir:t,ref:l});await H.writeRef({fs:a,gitdir:t,ref:"HEAD",value:A})}await H.deleteRef({fs:a,gitdir:t,ref:l});const w=jr(i),v=await ue.get({fs:a,gitdir:t});await v.deleteSection("branch",w),await ue.save({fs:a,gitdir:t,config:v})}async function wc({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o}){try{J("fs",a),J("ref",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return await rp({fs:l,gitdir:f,ref:o})}catch(l){throw l.caller="git.deleteBranch",l}}async function yc({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o}){try{J("fs",a),J("ref",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});await H.deleteRef({fs:l,gitdir:f,ref:o})}catch(l){throw l.caller="git.deleteRef",l}}async function np({fs:a,gitdir:t,remote:i}){const o=await ue.get({fs:a,gitdir:t});await o.deleteSection("remote",i),await ue.save({fs:a,gitdir:t,config:o})}async function bc({fs:a,dir:t,gitdir:i=g(t,".git"),remote:o}){try{J("fs",a),J("remote",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return await np({fs:l,gitdir:f,remote:o})}catch(l){throw l.caller="git.deleteRemote",l}}async function ip({fs:a,gitdir:t,ref:i}){i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,await H.deleteRef({fs:a,gitdir:t,ref:i})}async function vc({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o}){try{J("fs",a),J("ref",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return await ip({fs:l,gitdir:f,ref:o})}catch(l){throw l.caller="git.deleteTag",l}}async function ap({fs:a,gitdir:t,oid:i}){const o=i.slice(0,2);return(await a.readdir(`${t}/objects/${o}`)).map(f=>`${o}${f}`).filter(f=>f.startsWith(i))}async function op({fs:a,cache:t,gitdir:i,oid:o,getExternalRefDelta:l}){const f=[];let w=await a.readdir(g(i,"objects/pack"));w=w.filter(v=>v.endsWith(".idx"));for(const v of w){const A=`${i}/objects/pack/${v}`,T=await qi({fs:a,cache:t,filename:A,getExternalRefDelta:l});if(T.error)throw new _(T.error);for(const k of T.offsets.keys())k.startsWith(o)&&f.push(k)}return f}async function sp({fs:a,cache:t,gitdir:i,oid:o}){const l=v=>dt({fs:a,cache:t,gitdir:i,oid:v}),f=await ap({fs:a,gitdir:i,oid:o}),w=await op({fs:a,cache:t,gitdir:i,oid:o,getExternalRefDelta:l});for(const v of w)f.indexOf(v)===-1&&f.push(v);if(f.length===1)return f[0];throw f.length>1?new gn("oids",o,f):new Fe(`an object matching "${o}"`)}async function xc({fs:a,dir:t,gitdir:i=g(t,".git"),oid:o,cache:l={}}){try{J("fs",a),J("gitdir",i),J("oid",o);const f=new qe(a),w=await We({fsp:f,dotgit:i});return await sp({fs:f,cache:l,gitdir:w,oid:o})}catch(f){throw f.caller="git.expandOid",f}}async function _c({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o}){try{J("fs",a),J("gitdir",i),J("ref",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return await H.expand({fs:l,gitdir:f,ref:o})}catch(l){throw l.caller="git.expandRef",l}}async function aa({fs:a,cache:t,gitdir:i,oids:o}){const l={},f=o.length;let w=o.map((v,A)=>({index:A,oid:v}));for(;w.length;){const v=new Set;for(const{oid:T,index:k}of w)l[T]||(l[T]=new Set),l[T].add(k),l[T].size===f&&v.add(T);if(v.size>0)return[...v];const A=new Map;for(const{oid:T,index:k}of w)try{const{object:M}=await dt({fs:a,cache:t,gitdir:i,oid:T}),D=gt.from(M),{parent:V}=D.parseHeaders();for(const ee of V)(!l[ee]||!l[ee].has(k))&&A.set(ee+":"+k,{oid:ee,index:k})}catch{}w=Array.from(A.values())}return[]}async function Sc({fs:a,cache:t,dir:i,gitdir:o,ours:l,theirs:f,fastForward:w=!0,fastForwardOnly:v=!1,dryRun:A=!1,noUpdateBranch:T=!1,abortOnConflict:k=!0,message:M,author:D,committer:V,signingKey:ee,onSign:ge,mergeDriver:fe,allowUnrelatedHistories:we=!1}){l===void 0&&(l=await _r({fs:a,gitdir:o,fullname:!0})),l=await H.expand({fs:a,gitdir:o,ref:l}),f=await H.expand({fs:a,gitdir:o,ref:f});const be=await H.resolve({fs:a,gitdir:o,ref:l}),Re=await H.resolve({fs:a,gitdir:o,ref:f}),Ue=await aa({fs:a,cache:t,gitdir:o,oids:[be,Re]});if(Ue.length!==1)if(Ue.length===0&&we)Ue.push("4b825dc642cb6eb9a060e54bf8d69288fbee4904");else throw new Kr;const Ge=Ue[0];if(Ge===Re)return{oid:be,alreadyMerged:!0};if(w&&Ge===be)return!A&&!T&&await H.writeRef({fs:a,gitdir:o,ref:l,value:Re}),{oid:Re,fastForward:!0};{if(v)throw new xn;const He=await he.acquire({fs:a,gitdir:o,cache:t,allowUnmerged:!1},async Te=>Js({fs:a,cache:t,dir:i,gitdir:o,index:Te,ourOid:be,theirOid:Re,baseOid:Ge,ourName:jr(l),baseName:"base",theirName:jr(f),dryRun:A,abortOnConflict:k,mergeDriver:fe}));if(He instanceof Pr)throw He;return M||(M=`Merge branch '${jr(f)}' into ${jr(l)}`),{oid:await On({fs:a,cache:t,gitdir:o,message:M,ref:l,tree:He,parent:[be,Re],author:D,committer:V,signingKey:ee,onSign:ge,dryRun:A,noUpdateBranch:T}),tree:He,mergeCommit:!0}}}async function kc({fs:a,cache:t,http:i,onProgress:o,onMessage:l,onAuth:f,onAuthSuccess:w,onAuthFailure:v,dir:A,gitdir:T,ref:k,url:M,remote:D,remoteRef:V,prune:ee,pruneTags:ge,fastForward:fe,fastForwardOnly:we,corsProxy:be,singleBranch:Re,headers:Ue,author:Ge,committer:He,signingKey:Ce}){try{if(!k){const et=await _r({fs:a,gitdir:T});if(!et)throw new Ht("ref");k=et}const{fetchHead:Te,fetchHeadDescription:je}=await ia({fs:a,cache:t,http:i,onProgress:o,onMessage:l,onAuth:f,onAuthSuccess:w,onAuthFailure:v,gitdir:T,corsProxy:be,ref:k,url:M,remote:D,remoteRef:V,singleBranch:Re,headers:Ue,prune:ee,pruneTags:ge});await Sc({fs:a,cache:t,gitdir:T,ours:k,theirs:Te,fastForward:fe,fastForwardOnly:we,message:`Merge ${je}`,author:Ge,committer:He,signingKey:Ce,dryRun:!1,noUpdateBranch:!1}),await Yi({fs:a,cache:t,onProgress:o,dir:A,gitdir:T,ref:k,remote:D,noCheckout:!1})}catch(Te){throw Te.caller="git.pull",Te}}async function Ec({fs:a,http:t,onProgress:i,onMessage:o,onAuth:l,onAuthSuccess:f,onAuthFailure:w,dir:v,gitdir:A=g(v,".git"),ref:T,url:k,remote:M,remoteRef:D,corsProxy:V,singleBranch:ee,headers:ge={},cache:fe={}}){try{J("fs",a),J("http",t),J("gitdir",A);const we={name:"",email:"",timestamp:Date.now(),timezoneOffset:0},be=new qe(a),Re=await We({fsp:be,dotgit:A});return await kc({fs:be,cache:fe,http:t,onProgress:i,onMessage:o,onAuth:l,onAuthSuccess:f,onAuthFailure:w,dir:v,gitdir:Re,ref:T,url:k,remote:M,remoteRef:D,fastForwardOnly:!0,corsProxy:V,singleBranch:ee,headers:ge,author:we,committer:we})}catch(we){throw we.caller="git.fastForward",we}}async function Ac({fs:a,http:t,onProgress:i,onMessage:o,onAuth:l,onAuthSuccess:f,onAuthFailure:w,dir:v,gitdir:A=g(v,".git"),ref:T,remote:k,remoteRef:M,url:D,corsProxy:V,depth:ee=null,since:ge=null,exclude:fe=[],relative:we=!1,tags:be=!1,singleBranch:Re=!1,headers:Ue={},prune:Ge=!1,pruneTags:He=!1,cache:Ce={}}){try{J("fs",a),J("http",t),J("gitdir",A);const Te=new qe(a),je=await We({fsp:Te,dotgit:A});return await ia({fs:Te,cache:Ce,http:t,onProgress:i,onMessage:o,onAuth:l,onAuthSuccess:f,onAuthFailure:w,gitdir:je,ref:T,remote:k,remoteRef:M,url:D,corsProxy:V,depth:ee,since:ge,exclude:fe,relative:we,tags:be,singleBranch:Re,headers:Ue,prune:Ge,pruneTags:He})}catch(Te){throw Te.caller="git.fetch",Te}}async function Ic({fs:a,dir:t,gitdir:i=g(t,".git"),oids:o,cache:l={}}){try{J("fs",a),J("gitdir",i),J("oids",o);const f=new qe(a),w=await We({fsp:f,dotgit:i});return await aa({fs:f,cache:l,gitdir:w,oids:o})}catch(f){throw f.caller="git.findMergeBase",f}}async function Cc({fs:a,filepath:t}){if(await a.exists(g(t,".git")))return t;{const i=_e(t);if(i===t)throw new Fe(`git root for ${t}`);return Cc({fs:a,filepath:i})}}async function Tc({fs:a,filepath:t}){try{return J("fs",a),J("filepath",t),await Cc({fs:new qe(a),filepath:t})}catch(i){throw i.caller="git.findRoot",i}}async function Rc({fs:a,dir:t,gitdir:i=g(t,".git"),path:o}){try{J("fs",a),J("gitdir",i),J("path",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return await Rn({fs:l,gitdir:f,path:o})}catch(l){throw l.caller="git.getConfig",l}}async function cp({fs:a,gitdir:t,path:i}){return(await ue.get({fs:a,gitdir:t})).getall(i)}async function Oc({fs:a,dir:t,gitdir:i=g(t,".git"),path:o}){try{J("fs",a),J("gitdir",i),J("path",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return await cp({fs:l,gitdir:f,path:o})}catch(l){throw l.caller="git.getConfigAll",l}}async function Pc({http:a,onAuth:t,onAuthSuccess:i,onAuthFailure:o,corsProxy:l,url:f,headers:w={},forPush:v=!1}){try{J("http",a),J("url",f);const T=await li.getRemoteHelperFor({url:f}).discover({http:a,onAuth:t,onAuthSuccess:i,onAuthFailure:o,corsProxy:l,service:v?"git-receive-pack":"git-upload-pack",url:f,headers:w,protocolVersion:1}),k={capabilities:[...T.capabilities]};for(const[M,D]of T.refs){const V=M.split("/"),ee=V.pop();let ge=k;for(const fe of V)ge[fe]=ge[fe]||{},ge=ge[fe];ge[ee]=D}for(const[M,D]of T.symrefs){const V=M.split("/"),ee=V.pop();let ge=k;for(const fe of V)ge[fe]=ge[fe]||{},ge=ge[fe];ge[ee]=D}return k}catch(A){throw A.caller="git.getRemoteInfo",A}}function Mc(a,t,i,o){const l=[];for(const[f,w]of a.refs){if(t&&!f.startsWith(t))continue;if(f.endsWith("^{}")){if(o){const A=f.replace("^{}",""),T=l[l.length-1],k=T.ref===A?T:l.find(M=>M.ref===A);if(k===void 0)throw new Error("I did not expect this to happen");k.peeled=w}continue}const v={ref:f,oid:w};i&&a.symrefs.has(f)&&(v.target=a.symrefs.get(f)),l.push(v)}return l}async function Bc({http:a,onAuth:t,onAuthSuccess:i,onAuthFailure:o,corsProxy:l,url:f,headers:w={},forPush:v=!1,protocolVersion:A=2}){try{J("http",a),J("url",f);const k=await li.getRemoteHelperFor({url:f}).discover({http:a,onAuth:t,onAuthSuccess:i,onAuthFailure:o,corsProxy:l,service:v?"git-receive-pack":"git-upload-pack",url:f,headers:w,protocolVersion:A});if(k.protocolVersion===2)return{protocolVersion:k.protocolVersion,capabilities:k.capabilities2};const M={};for(const D of k.capabilities){const[V,ee]=D.split("=");ee?M[V]=ee:M[V]=!0}return{protocolVersion:1,capabilities:M,refs:Mc(k,void 0,!0,!0)}}catch(T){throw T.caller="git.getRemoteInfo2",T}}async function lp({type:a,object:t,format:i="content",oid:o=void 0}){return i!=="deflated"&&(i!=="wrapped"&&(t=rt.wrap({type:a,object:t})),o=await Z(t)),{oid:o,object:t}}async function jc({object:a}){try{J("object",a),typeof a=="string"?a=Buffer.from(a,"utf8"):a instanceof Uint8Array||(a=new Uint8Array(a));const t="blob",{oid:i,object:o}=await lp({type:t,format:"content",object:a});return{oid:i,type:t,object:o,format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function up({fs:a,cache:t,onProgress:i,dir:o,gitdir:l,filepath:f}){try{f=g(o,f);const w=await a.read(f),v=T=>dt({fs:a,cache:t,gitdir:l,oid:T}),A=await Vr.fromPack({pack:w,getExternalRefDelta:v,onProgress:i});return await a.write(f.replace(/\.pack$/,".idx"),await A.toBuffer()),{oids:[...A.hashes]}}catch(w){throw w.caller="git.indexPack",w}}async function Fc({fs:a,onProgress:t,dir:i,gitdir:o=g(i,".git"),filepath:l,cache:f={}}){try{J("fs",a),J("dir",i),J("gitdir",i),J("filepath",l);const w=new qe(a),v=await We({fsp:w,dotgit:o});return await up({fs:w,cache:f,onProgress:t,dir:i,gitdir:v,filepath:l})}catch(w){throw w.caller="git.indexPack",w}}async function Dc({fs:a,bare:t=!1,dir:i,gitdir:o=t?i:g(i,".git"),defaultBranch:l="master"}){try{J("fs",a),J("gitdir",o),t||J("dir",i);const f=new qe(a),w=await We({fsp:f,dotgit:o});return await hc({fs:f,bare:t,dir:i,gitdir:w,defaultBranch:l})}catch(f){throw f.caller="git.init",f}}async function Lc({fs:a,cache:t,gitdir:i,oid:o,ancestor:l,depth:f}){const w=await Fn.read({fs:a,gitdir:i});if(!o)throw new Ht("oid");if(!l)throw new Ht("ancestor");if(o===l)return!1;const v=[o],A=new Set;let T=0;for(;v.length;){if(T++===f)throw new Sn(f);const k=v.shift(),{type:M,object:D}=await dt({fs:a,cache:t,gitdir:i,oid:k});if(M!=="commit")throw new Me(k,M,"commit");const V=gt.from(D).parse();for(const ee of V.parent)if(ee===l)return!0;if(!w.has(k))for(const ee of V.parent)A.has(ee)||(v.push(ee),A.add(ee))}return!1}async function $c({fs:a,dir:t,gitdir:i=g(t,".git"),oid:o,ancestor:l,depth:f=-1,cache:w={}}){try{J("fs",a),J("gitdir",i),J("oid",o),J("ancestor",l);const v=new qe(a),A=await We({fsp:v,dotgit:i});return await Lc({fs:v,cache:w,gitdir:A,oid:o,ancestor:l,depth:f})}catch(v){throw v.caller="git.isDescendent",v}}async function Nc({fs:a,dir:t,gitdir:i=g(t,".git"),filepath:o}){try{J("fs",a),J("dir",t),J("gitdir",i),J("filepath",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return en.isIgnored({fs:l,dir:t,gitdir:f,filepath:o})}catch(l){throw l.caller="git.isIgnored",l}}async function Uc({fs:a,dir:t,gitdir:i=g(t,".git"),remote:o}){try{J("fs",a),J("gitdir",i);const l=new qe(a),f=await We({fsp:l,dotgit:i});return H.listBranches({fs:l,gitdir:f,remote:o})}catch(l){throw l.caller="git.listBranches",l}}async function fp({fs:a,gitdir:t,ref:i,cache:o}){if(i){const l=await H.resolve({gitdir:t,fs:a,ref:i}),f=[];return await zc({fs:a,cache:o,gitdir:t,oid:l,filenames:f,prefix:""}),f}else return he.acquire({fs:a,gitdir:t,cache:o},async function(l){return l.entries.map(f=>f.path)})}async function zc({fs:a,cache:t,gitdir:i,oid:o,filenames:l,prefix:f}){const{tree:w}=await tn({fs:a,cache:t,gitdir:i,oid:o});for(const v of w)v.type==="tree"?await zc({fs:a,cache:t,gitdir:i,oid:v.oid,filenames:l,prefix:g(f,v.path)}):l.push(g(f,v.path))}async function Gc({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o,cache:l={}}){try{J("fs",a),J("gitdir",i);const f=new qe(a),w=await We({fsp:f,dotgit:i});return await fp({fs:f,cache:l,gitdir:w,ref:o})}catch(f){throw f.caller="git.listFiles",f}}async function dp({fs:a,cache:t,gitdir:i,ref:o}){let l;try{l=await H.resolve({gitdir:i,fs:a,ref:o})}catch(v){if(v instanceof Fe)return[]}return(await tn({fs:a,cache:t,gitdir:i,oid:l})).tree.map(v=>({target:v.path,note:v.oid}))}async function Hc({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o="refs/notes/commits",cache:l={}}){try{J("fs",a),J("gitdir",i),J("ref",o);const f=new qe(a),w=await We({fsp:f,dotgit:i});return await dp({fs:f,cache:l,gitdir:w,ref:o})}catch(f){throw f.caller="git.listNotes",f}}async function qc({fs:a,dir:t,gitdir:i=g(t,".git"),filepath:o}){try{J("fs",a),J("gitdir",i);const l=new qe(a),f=await We({fsp:l,dotgit:i});return H.listRefs({fs:l,gitdir:f,filepath:o})}catch(l){throw l.caller="git.listRefs",l}}async function hp({fs:a,gitdir:t}){const i=await ue.get({fs:a,gitdir:t}),o=await i.getSubsections("remote");return Promise.all(o.map(async f=>{const w=await i.get(`remote.${f}.url`);return{remote:f,url:w}}))}async function Wc({fs:a,dir:t,gitdir:i=g(t,".git")}){try{J("fs",a),J("gitdir",i);const o=new qe(a),l=await We({fsp:o,dotgit:i});return await hp({fs:o,gitdir:l})}catch(o){throw o.caller="git.listRemotes",o}}async function pp(a){const t=_t.streamReader(a),i=[];let o;for(;o=await t(),o!==!0;){if(o===null)continue;o=o.toString("utf8").replace(/\n$/,"");const[l,f,...w]=o.split(" "),v={ref:f,oid:l};for(const A of w){const[T,k]=A.split(":");T==="symref-target"?v.target=k:T==="peeled"&&(v.peeled=k)}i.push(v)}return i}async function gp({prefix:a,symrefs:t,peelTags:i}){const o=[];return o.push(_t.encode(`command=ls-refs
`)),o.push(_t.encode(`agent=${ui.agent}
`)),(i||t||a)&&o.push(_t.delim()),i&&o.push(_t.encode("peel")),t&&o.push(_t.encode("symrefs")),a&&o.push(_t.encode(`ref-prefix ${a}`)),o.push(_t.flush()),o}async function Vc({http:a,onAuth:t,onAuthSuccess:i,onAuthFailure:o,corsProxy:l,url:f,headers:w={},forPush:v=!1,protocolVersion:A=2,prefix:T,symrefs:k,peelTags:M}){try{J("http",a),J("url",f);const D=await ci.discover({http:a,onAuth:t,onAuthSuccess:i,onAuthFailure:o,corsProxy:l,service:v?"git-receive-pack":"git-upload-pack",url:f,headers:w,protocolVersion:A});if(D.protocolVersion===1)return Mc(D,T,k,M);const V=await gp({prefix:T,symrefs:k,peelTags:M}),ee=await ci.connect({http:a,auth:D.auth,headers:w,corsProxy:l,service:v?"git-receive-pack":"git-upload-pack",url:f,body:V});return pp(ee.body)}catch(D){throw D.caller="git.listServerRefs",D}}async function Zc({fs:a,dir:t,gitdir:i=g(t,".git")}){try{J("fs",a),J("gitdir",i);const o=new qe(a),l=await We({fsp:o,dotgit:i});return H.listTags({fs:o,gitdir:l})}catch(o){throw o.caller="git.listTags",o}}function mp(a,t){return a.committer.timestamp-t.committer.timestamp}const wp="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function Kc({fs:a,cache:t,gitdir:i,oid:o,fileId:l}){if(l===wp)return;const f=o;let w;const v=await Jr({fs:a,cache:t,gitdir:i,oid:o}),A=v.tree;return l===v.oid?w=v.path:(w=await Xc({fs:a,cache:t,gitdir:i,tree:A,fileId:l,oid:f}),Array.isArray(w)&&(w.length===0?w=void 0:w.length===1&&(w=w[0]))),w}async function Xc({fs:a,cache:t,gitdir:i,tree:o,fileId:l,oid:f,filepaths:w=[],parentPath:v=""}){const A=o.entries().map(function(T){let k;return T.oid===l?(k=g(v,T.path),w.push(k)):T.type==="tree"&&(k=dt({fs:a,cache:t,gitdir:i,oid:T.oid}).then(function({object:M}){return Xc({fs:a,cache:t,gitdir:i,tree:Pe.from(M),fileId:l,oid:f,filepaths:w,parentPath:g(v,T.path)})})),k});return await Promise.all(A),w}async function yp({fs:a,cache:t,gitdir:i,filepath:o,ref:l,depth:f,since:w,force:v,follow:A}){const T=typeof w>"u"?void 0:Math.floor(w.valueOf()/1e3),k=[],M=await Fn.read({fs:a,gitdir:i}),D=await H.resolve({fs:a,gitdir:i,ref:l}),V=[await lr({fs:a,cache:t,gitdir:i,oid:D})];let ee,ge,fe;function we(be){fe&&o&&k.push(be)}for(;V.length>0;){const be=V.pop();if(T!==void 0&&be.commit.committer.timestamp<=T)break;if(o){let Re;try{Re=await Pn({fs:a,cache:t,gitdir:i,oid:be.commit.tree,filepath:o}),ge&&ee!==Re&&k.push(ge),ee=Re,ge=be,fe=!0}catch(Ue){if(Ue instanceof Fe){let Ge=A&&ee;if(Ge&&(Ge=await Kc({fs:a,cache:t,gitdir:i,oid:be.commit.tree,fileId:ee}),Ge))if(Array.isArray(Ge)){if(ge){const He=await Kc({fs:a,cache:t,gitdir:i,oid:ge.commit.tree,fileId:ee});if(Array.isArray(He))if(Ge=Ge.filter(Ce=>He.indexOf(Ce)===-1),Ge.length===1)Ge=Ge[0],o=Ge,ge&&k.push(ge);else{Ge=!1,ge&&k.push(ge);break}}}else o=Ge,ge&&k.push(ge);if(!Ge){if(fe&&ee&&(k.push(ge),!v))break;if(!v&&!A)throw Ue}ge=be,fe=!1}else throw Ue}}else k.push(be);if(f!==void 0&&k.length===f){we(be);break}if(!M.has(be.oid))for(const Re of be.commit.parent){const Ue=await lr({fs:a,cache:t,gitdir:i,oid:Re});V.map(Ge=>Ge.oid).includes(Ue.oid)||V.push(Ue)}V.length===0&&we(be),V.sort((Re,Ue)=>mp(Re.commit,Ue.commit))}return k}async function Yc({fs:a,dir:t,gitdir:i=g(t,".git"),filepath:o,ref:l="HEAD",depth:f,since:w,force:v,follow:A,cache:T={}}){try{J("fs",a),J("gitdir",i),J("ref",l);const k=new qe(a),M=await We({fsp:k,dotgit:i});return await yp({fs:k,cache:T,gitdir:M,filepath:o,ref:l,depth:f,since:w,force:v,follow:A})}catch(k){throw k.caller="git.log",k}}async function Jc({fs:a,onSign:t,dir:i,gitdir:o=g(i,".git"),ours:l,theirs:f,fastForward:w=!0,fastForwardOnly:v=!1,dryRun:A=!1,noUpdateBranch:T=!1,abortOnConflict:k=!0,message:M,author:D,committer:V,signingKey:ee,cache:ge={},mergeDriver:fe,allowUnrelatedHistories:we=!1}){try{J("fs",a),ee&&J("onSign",t);const be=new qe(a),Re=await We({fsp:be,dotgit:o}),Ue=await xr({fs:be,gitdir:Re,author:D});if(!Ue&&(!v||!w))throw new Ot("author");const Ge=await Br({fs:be,gitdir:Re,author:Ue,committer:V});if(!Ge&&(!v||!w))throw new Ot("committer");return await Sc({fs:be,cache:ge,dir:i,gitdir:Re,ours:l,theirs:f,fastForward:w,fastForwardOnly:v,dryRun:A,noUpdateBranch:T,abortOnConflict:k,message:M,author:Ue,committer:Ge,signingKey:ee,onSign:t,mergeDriver:fe,allowUnrelatedHistories:we})}catch(be){throw be.caller="git.merge",be}}const bp={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function Qc({fs:a,cache:t,dir:i,gitdir:o=g(i,".git"),oids:l}){const f=new n,w=[];function v(k,M){const D=Buffer.from(k,M);w.push(D),f.update(D)}async function A({stype:k,object:M}){const D=bp[k];let V=M.length,ee=V>15?128:0;const ge=V&15;V=V>>>4;let fe=(ee|D|ge).toString(16);for(v(fe,"hex");ee;)ee=V>127?128:0,fe=ee|V&127,v(ta(2,fe),"hex"),V=V>>>7;v(Buffer.from(await Ls(M)))}v("PACK"),v("00000002","hex"),v(ta(8,l.length),"hex");for(const k of l){const{type:M,object:D}=await dt({fs:a,cache:t,gitdir:o,oid:k});await A({object:D,stype:M})}const T=f.digest();return w.push(T),w}async function vp({fs:a,cache:t,gitdir:i,oids:o,write:l}){const f=await Qc({fs:a,cache:t,gitdir:i,oids:o}),w=Buffer.from(await si(f)),A=`pack-${w.slice(-20).toString("hex")}.pack`;return l?(await a.write(g(i,`objects/pack/${A}`),w),{filename:A}):{filename:A,packfile:new Uint8Array(w)}}async function el({fs:a,dir:t,gitdir:i=g(t,".git"),oids:o,write:l=!1,cache:f={}}){try{J("fs",a),J("gitdir",i),J("oids",o);const w=new qe(a),v=await We({fsp:w,dotgit:i});return await vp({fs:w,cache:f,gitdir:v,oids:o,write:l})}catch(w){throw w.caller="git.packObjects",w}}async function tl({fs:a,http:t,onProgress:i,onMessage:o,onAuth:l,onAuthSuccess:f,onAuthFailure:w,dir:v,gitdir:A=g(v,".git"),ref:T,url:k,remote:M,remoteRef:D,prune:V=!1,pruneTags:ee=!1,fastForward:ge=!0,fastForwardOnly:fe=!1,corsProxy:we,singleBranch:be,headers:Re={},author:Ue,committer:Ge,signingKey:He,cache:Ce={}}){try{J("fs",a),J("gitdir",A);const Te=new qe(a),je=await We({fsp:Te,dotgit:A}),et=await xr({fs:Te,gitdir:je,author:Ue});if(!et)throw new Ot("author");const ct=await Br({fs:Te,gitdir:je,author:et,committer:Ge});if(!ct)throw new Ot("committer");return await kc({fs:Te,cache:Ce,http:t,onProgress:i,onMessage:o,onAuth:l,onAuthSuccess:f,onAuthFailure:w,dir:v,gitdir:je,ref:T,url:k,remote:M,remoteRef:D,fastForward:ge,fastForwardOnly:fe,corsProxy:we,singleBranch:be,headers:Re,author:et,committer:ct,signingKey:He,prune:V,pruneTags:ee})}catch(Te){throw Te.caller="git.pull",Te}}async function xp({fs:a,cache:t,dir:i,gitdir:o=g(i,".git"),start:l,finish:f}){const w=await Fn.read({fs:a,gitdir:o}),v=new Set,A=new Set;for(const M of l)v.add(await H.resolve({fs:a,gitdir:o,ref:M}));for(const M of f)try{const D=await H.resolve({fs:a,gitdir:o,ref:M});A.add(D)}catch{}const T=new Set;async function k(M){T.add(M);const{type:D,object:V}=await dt({fs:a,cache:t,gitdir:o,oid:M});if(D==="tag"){const ge=zt.from(V).headers().object;return k(ge)}if(D!=="commit")throw new Me(M,D,"commit");if(!w.has(M)){const ge=gt.from(V).headers().parent;for(M of ge)!A.has(M)&&!T.has(M)&&await k(M)}}for(const M of v)await k(M);return T}async function oa({fs:a,cache:t,dir:i,gitdir:o=g(i,".git"),oids:l}){const f=new Set;async function w(v){if(f.has(v))return;f.add(v);const{type:A,object:T}=await dt({fs:a,cache:t,gitdir:o,oid:v});if(A==="tag"){const M=zt.from(T).headers().object;await w(M)}else if(A==="commit"){const M=gt.from(T).headers().tree;await w(M)}else if(A==="tree"){const k=Pe.from(T);for(const M of k)M.type==="blob"&&f.add(M.oid),M.type==="tree"&&await w(M.oid)}}for(const v of l)await w(v);return f}async function _p(a){const t={};let i="";const o=_t.streamReader(a);let l=await o();for(;l!==!0;)l!==null&&(i+=l.toString("utf8")+`
`),l=await o();const f=i.toString("utf8").split(`
`);if(l=f.shift(),!l.startsWith("unpack "))throw new Mr('unpack ok" or "unpack [error message]',l);t.ok=l==="unpack ok",t.ok||(t.error=l.slice(7)),t.refs={};for(const w of f){if(w.trim()==="")continue;const v=w.slice(0,2),A=w.slice(3);let T=A.indexOf(" ");T===-1&&(T=A.length);const k=A.slice(0,T),M=A.slice(T+1);t.refs[k]={ok:v==="ok",error:M}}return t}async function Sp({capabilities:a=[],triplets:t=[]}){const i=[];let o=`\0 ${a.join(" ")}`;for(const l of t)i.push(_t.encode(`${l.oldoid} ${l.oid} ${l.fullRef}${o}
`)),o="";return i.push(_t.flush()),i}async function kp({fs:a,cache:t,http:i,onProgress:o,onMessage:l,onAuth:f,onAuthSuccess:w,onAuthFailure:v,onPrePush:A,gitdir:T,ref:k,remoteRef:M,remote:D,url:V,force:ee=!1,delete:ge=!1,corsProxy:fe,headers:we={}}){const be=k||await _r({fs:a,gitdir:T});if(typeof be>"u")throw new Ht("ref");const Re=await ue.get({fs:a,gitdir:T});D=D||await Re.get(`branch.${be}.pushRemote`)||await Re.get("remote.pushDefault")||await Re.get(`branch.${be}.remote`)||"origin";const Ue=V||await Re.get(`remote.${D}.pushurl`)||await Re.get(`remote.${D}.url`);if(typeof Ue>"u")throw new Ht("remote OR url");const Ge=M||await Re.get(`branch.${be}.merge`);if(typeof Ue>"u")throw new Ht("remoteRef");fe===void 0&&(fe=await Re.get("http.corsProxy"));const He=await H.expand({fs:a,gitdir:T,ref:be}),Ce=ge?"0000000000000000000000000000000000000000":await H.resolve({fs:a,gitdir:T,ref:He}),Te=li.getRemoteHelperFor({url:Ue}),je=await Te.discover({http:i,onAuth:f,onAuthSuccess:w,onAuthFailure:v,corsProxy:fe,service:"git-receive-pack",url:Ue,headers:we,protocolVersion:1}),et=je.auth;let ct;if(!Ge)ct=He;else try{ct=await H.expandAgainstMap({ref:Ge,map:je.refs})}catch(yt){if(yt instanceof Fe)ct=Ge.startsWith("refs/")?Ge:`refs/heads/${Ge}`;else throw yt}const It=je.refs.get(ct)||"0000000000000000000000000000000000000000";if(A&&!await A({remote:D,url:Ue,localRef:{ref:ge?"(delete)":He,oid:Ce},remoteRef:{ref:ct,oid:It}}))throw new Yr;const lt=!je.capabilities.has("no-thin");let Tt=new Set;if(!ge){const yt=[...je.refs.values()];let ur=new Set;if(It!=="0000000000000000000000000000000000000000"){const $t=await aa({fs:a,cache:t,gitdir:T,oids:[Ce,It]});for(const Dn of $t)yt.push(Dn);lt&&(ur=await oa({fs:a,cache:t,gitdir:T,oids:$t}))}if(!yt.includes(Ce)){const $t=await xp({fs:a,cache:t,gitdir:T,start:[Ce],finish:yt});Tt=await oa({fs:a,cache:t,gitdir:T,oids:$t})}if(lt){try{const $t=await H.resolve({fs:a,gitdir:T,ref:`refs/remotes/${D}/HEAD`,depth:2}),{oid:Dn}=await H.resolveAgainstMap({ref:$t.replace(`refs/remotes/${D}/`,""),fullref:$t,map:je.refs}),$r=[Dn];for(const Ct of await oa({fs:a,cache:t,gitdir:T,oids:$r}))ur.add(Ct)}catch{}for(const $t of ur)Tt.delete($t)}if(Ce===It&&(ee=!0),!ee){if(He.startsWith("refs/tags")&&It!=="0000000000000000000000000000000000000000")throw new Xr("tag-exists");if(Ce!=="0000000000000000000000000000000000000000"&&It!=="0000000000000000000000000000000000000000"&&!await Lc({fs:a,cache:t,gitdir:T,oid:Ce,ancestor:It,depth:-1}))throw new Xr("not-fast-forward")}}const Pt=uc([...je.capabilities],["report-status","side-band-64k",`agent=${ui.agent}`]),Dr=await Sp({capabilities:Pt,triplets:[{oldoid:It,oid:Ce,fullRef:ct}]}),Lr=ge?[]:await Qc({fs:a,cache:t,gitdir:T,oids:[...Tt]}),nn=await Te.connect({http:i,onProgress:o,corsProxy:fe,service:"git-receive-pack",url:Ue,auth:et,headers:we,body:[...Dr,...Lr]}),{packfile:ca,progress:la}=await dc.demux(nn.body);if(l){const yt=fc(la);jn(yt,async ur=>{await l(ur)})}const Vt=await _p(ca);if(nn.headers&&(Vt.headers=nn.headers),D&&Vt.ok&&Vt.refs[ct].ok&&!He.startsWith("refs/tags")){const yt=`refs/remotes/${D}/${ct.replace("refs/heads","")}`;ge?await H.deleteRef({fs:a,gitdir:T,ref:yt}):await H.writeRef({fs:a,gitdir:T,ref:yt,value:Ce})}if(Vt.ok&&Object.values(Vt.refs).every(yt=>yt.ok))return Vt;{const yt=Object.entries(Vt.refs).filter(([ur,$t])=>!$t.ok).map(([ur,$t])=>`
  - ${ur}: ${$t.error}`).join("");throw new _n(yt,Vt)}}async function rl({fs:a,http:t,onProgress:i,onMessage:o,onAuth:l,onAuthSuccess:f,onAuthFailure:w,onPrePush:v,dir:A,gitdir:T=g(A,".git"),ref:k,remoteRef:M,remote:D="origin",url:V,force:ee=!1,delete:ge=!1,corsProxy:fe,headers:we={},cache:be={}}){try{J("fs",a),J("http",t),J("gitdir",T);const Re=new qe(a),Ue=await We({fsp:Re,dotgit:T});return await kp({fs:Re,cache:be,http:t,onProgress:i,onMessage:o,onAuth:l,onAuthSuccess:f,onAuthFailure:w,onPrePush:v,gitdir:Ue,ref:k,remoteRef:M,remote:D,url:V,force:ee,delete:ge,corsProxy:fe,headers:we})}catch(Re){throw Re.caller="git.push",Re}}async function nl({fs:a,cache:t,gitdir:i,oid:o}){const{type:l,object:f}=await dt({fs:a,cache:t,gitdir:i,oid:o});if(l==="tag")return o=zt.from(f).parse().object,nl({fs:a,cache:t,gitdir:i,oid:o});if(l!=="blob")throw new Me(o,l,"blob");return{oid:o,blob:new Uint8Array(f)}}async function il({fs:a,cache:t,gitdir:i,oid:o,filepath:l=void 0}){return l!==void 0&&(o=await Pn({fs:a,cache:t,gitdir:i,oid:o,filepath:l})),await nl({fs:a,cache:t,gitdir:i,oid:o})}async function al({fs:a,dir:t,gitdir:i=g(t,".git"),oid:o,filepath:l,cache:f={}}){try{J("fs",a),J("gitdir",i),J("oid",o);const w=new qe(a),v=await We({fsp:w,dotgit:i});return await il({fs:w,cache:f,gitdir:v,oid:o,filepath:l})}catch(w){throw w.caller="git.readBlob",w}}async function sa({fs:a,dir:t,gitdir:i=g(t,".git"),oid:o,cache:l={}}){try{J("fs",a),J("gitdir",i),J("oid",o);const f=new qe(a),w=await We({fsp:f,dotgit:i});return await lr({fs:f,cache:l,gitdir:w,oid:o})}catch(f){throw f.caller="git.readCommit",f}}async function Ep({fs:a,cache:t,gitdir:i,ref:o="refs/notes/commits",oid:l}){const f=await H.resolve({gitdir:i,fs:a,ref:o}),{blob:w}=await il({fs:a,cache:t,gitdir:i,oid:f,filepath:l});return w}async function ol({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o="refs/notes/commits",oid:l,cache:f={}}){try{J("fs",a),J("gitdir",i),J("ref",o),J("oid",l);const w=new qe(a),v=await We({fsp:w,dotgit:i});return await Ep({fs:w,cache:f,gitdir:v,ref:o,oid:l})}catch(w){throw w.caller="git.readNote",w}}async function sl({fs:a,dir:t,gitdir:i=g(t,".git"),oid:o,format:l="parsed",filepath:f=void 0,encoding:w=void 0,cache:v={}}){try{J("fs",a),J("gitdir",i),J("oid",o);const A=new qe(a),T=await We({fsp:A,dotgit:i});f!==void 0&&(o=await Pn({fs:A,cache:v,gitdir:T,oid:o,filepath:f}));const M=await dt({fs:A,cache:v,gitdir:T,oid:o,format:l==="parsed"?"content":l});if(M.oid=o,l==="parsed")switch(M.format="parsed",M.type){case"commit":M.object=gt.from(M.object).parse();break;case"tree":M.object=Pe.from(M.object).entries();break;case"blob":w?M.object=M.object.toString(w):(M.object=new Uint8Array(M.object),M.format="content");break;case"tag":M.object=zt.from(M.object).parse();break;default:throw new Me(M.oid,M.type,"blob|commit|tag|tree")}else(M.format==="deflated"||M.format==="wrapped")&&(M.type=M.format);return M}catch(A){throw A.caller="git.readObject",A}}async function Ap({fs:a,cache:t,gitdir:i,oid:o}){const{type:l,object:f}=await dt({fs:a,cache:t,gitdir:i,oid:o,format:"content"});if(l!=="tag")throw new Me(o,l,"tag");const w=zt.from(f);return{oid:o,tag:w.parse(),payload:w.payload()}}async function cl({fs:a,dir:t,gitdir:i=g(t,".git"),oid:o,cache:l={}}){try{J("fs",a),J("gitdir",i),J("oid",o);const f=new qe(a),w=await We({fsp:f,dotgit:i});return await Ap({fs:f,cache:l,gitdir:w,oid:o})}catch(f){throw f.caller="git.readTag",f}}async function ll({fs:a,dir:t,gitdir:i=g(t,".git"),oid:o,filepath:l=void 0,cache:f={}}){try{J("fs",a),J("gitdir",i),J("oid",o);const w=new qe(a),v=await We({fsp:w,dotgit:i});return await tn({fs:w,cache:f,gitdir:v,oid:o,filepath:l})}catch(w){throw w.caller="git.readTree",w}}async function ul({fs:a,dir:t,gitdir:i=g(t,".git"),filepath:o,cache:l={}}){try{J("fs",a),J("gitdir",i),J("filepath",o);const f=new qe(a),w=await We({fsp:f,dotgit:i});await he.acquire({fs:f,gitdir:w,cache:l},async function(v){v.delete({filepath:o})})}catch(f){throw f.caller="git.remove",f}}async function Ip({fs:a,cache:t,onSign:i,gitdir:o,ref:l="refs/notes/commits",oid:f,author:w,committer:v,signingKey:A}){let T;try{T=await H.resolve({gitdir:o,fs:a,ref:l})}catch(ee){if(!(ee instanceof Fe))throw ee}let M=(await tn({fs:a,cache:t,gitdir:o,oid:T||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;M=M.filter(ee=>ee.path!==f);const D=await Mn({fs:a,gitdir:o,tree:M});return await On({fs:a,cache:t,onSign:i,gitdir:o,ref:l,tree:D,parent:T&&[T],message:`Note removed by 'isomorphic-git removeNote'
`,author:w,committer:v,signingKey:A})}async function fl({fs:a,onSign:t,dir:i,gitdir:o=g(i,".git"),ref:l="refs/notes/commits",oid:f,author:w,committer:v,signingKey:A,cache:T={}}){try{J("fs",a),J("gitdir",o),J("oid",f);const k=new qe(a),M=await We({fsp:k,dotgit:o}),D=await xr({fs:k,gitdir:M,author:w});if(!D)throw new Ot("author");const V=await Br({fs:k,gitdir:M,author:D,committer:v});if(!V)throw new Ot("committer");return await Ip({fs:k,cache:T,onSign:t,gitdir:M,ref:l,oid:f,author:D,committer:V,signingKey:A})}catch(k){throw k.caller="git.removeNote",k}}async function Cp({fs:a,gitdir:t,oldref:i,ref:o,checkout:l=!1}){if(!Bn(o))throw new ir(o,d.clean(o));if(!Bn(i))throw new ir(i,d.clean(i));const f=`refs/heads/${i}`,w=`refs/heads/${o}`;if(await H.exists({fs:a,gitdir:t,ref:w}))throw new nr("branch",o,!1);const A=await H.resolve({fs:a,gitdir:t,ref:f,depth:1});await H.writeRef({fs:a,gitdir:t,ref:w,value:A}),await H.deleteRef({fs:a,gitdir:t,ref:f});const k=await _r({fs:a,gitdir:t,fullname:!0})===f;(l||k)&&await H.writeSymbolicRef({fs:a,gitdir:t,ref:"HEAD",value:w})}async function dl({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o,oldref:l,checkout:f=!1}){try{J("fs",a),J("gitdir",i),J("ref",o),J("oldref",l);const w=new qe(a),v=await We({fsp:w,dotgit:i});return await Cp({fs:w,gitdir:v,ref:o,oldref:l,checkout:f})}catch(w){throw w.caller="git.renameBranch",w}}async function hl({gitdir:a,type:t,object:i}){return Z(rt.wrap({type:t,object:i}))}async function pl({fs:a,dir:t,gitdir:i=g(t,".git"),filepath:o,ref:l,cache:f={}}){try{J("fs",a),J("gitdir",i),J("filepath",o);const w=new qe(a),v=await We({fsp:w,dotgit:i});let A,T;try{A=await H.resolve({fs:w,gitdir:v,ref:l||"HEAD"})}catch(D){if(l)throw D}if(A)try{A=await Pn({fs:w,cache:f,gitdir:v,oid:A,filepath:o})}catch{A=null}let k={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const M=t&&await w.read(g(t,o));M&&(T=await hl({gitdir:v,type:"blob",object:M}),A===T&&(k=await w.lstat(g(t,o)))),await he.acquire({fs:w,gitdir:v,cache:f},async function(D){D.delete({filepath:o}),A&&D.insert({filepath:o,stats:k,oid:A})})}catch(w){throw w.caller="git.reset",w}}async function gl({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o,depth:l}){try{J("fs",a),J("gitdir",i),J("ref",o);const f=new qe(a),w=await We({fsp:f,dotgit:i});return await H.resolve({fs:f,gitdir:w,ref:o,depth:l})}catch(f){throw f.caller="git.resolveRef",f}}async function ml({fs:a,dir:t,gitdir:i=g(t,".git"),path:o,value:l,append:f=!1}){try{J("fs",a),J("gitdir",i),J("path",o);const w=new qe(a),v=await We({fsp:w,dotgit:i}),A=await ue.get({fs:w,gitdir:v});f?await A.append(o,l):await A.set(o,l),await ue.save({fs:w,gitdir:v,config:A})}catch(w){throw w.caller="git.setConfig",w}}async function wl({fs:a,gitdir:t,commit:i}){const o=gt.from(i).toObject();return await qt({fs:a,gitdir:t,type:"commit",object:o,format:"content"})}class di{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),i=Math.abs(Math.floor(t/60)),o=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${i.toString().padStart(2,"0")}${o}`}static createStashReflogEntry(t,i,o){const l=t.name.replace(/\s/g,""),f="0000000000000000000000000000000000000000",w=Math.floor(Date.now()/1e3),v=di.timezoneOffsetForRefLogEntry;return`${f} ${i} ${l} ${t.email} ${w} ${v}	${o}
`}static getStashReflogEntry(t,i=!1){return t.split(`
`).filter(f=>f).reverse().map((f,w)=>i?`stash@{${w}}: ${f.split("	")[1]}`:f)}}class gr{constructor({fs:t,dir:i,gitdir:o=g(i,".git")}){Object.assign(this,{fs:t,dir:i,gitdir:o,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return g(this.gitdir,gr.refStash)}get refLogsStashPath(){return g(this.gitdir,gr.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await xr({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Ot("author");return this._author}async getStashSHA(t,i){return await this.fs.exists(this.refStashPath)?(i||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:i,parent:o}){return wl({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:i,parent:o,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const i=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>i.length-1))throw new ir(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const o=await this.getStashSHA(t,i);return o?lr({fs:this.fs,cache:{},gitdir:this.gitdir,oid:o}):{}}async writeStashRef(t){return H.writeRef({fs:this.fs,gitdir:this.gitdir,ref:gr.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:i}){const o=await this.getAuthor(),l=di.createStashReflogEntry(o,t,i),f=this.refLogsStashPath;await rn({filepath:f,entry:l},async()=>{const w=await this.fs.exists(f)?await this.fs.read(f,"utf8"):"";await this.fs.write(f,w+l,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const i=await this.fs.read(this.refLogsStashPath,"utf8");return di.getStashReflogEntry(i,t)}}async function yl({fs:a,dir:t,gitdir:i,message:o=""}){const l=new gr({fs:a,dir:t,gitdir:i});await l.getAuthor();const f=await _r({fs:a,gitdir:i,fullname:!1}),w=await H.resolve({fs:a,gitdir:i,ref:"HEAD"}),A=(await sa({fs:a,dir:t,gitdir:i,oid:w})).commit.message,T=[w];let k=null,M=Wt({ref:"HEAD"});const D=await Qs({fs:a,dir:t,gitdir:i,treePair:[Wt({ref:"HEAD"}),"stage"]});if(D){const fe=await l.writeStashCommit({message:`stash-Index: WIP on ${f} - ${new Date().toISOString()}`,tree:D,parent:T});T.push(fe),k=D,M=Oe()}const V=await Qs({fs:a,dir:t,gitdir:i,treePair:[M,"workdir"]});if(V){const fe=await l.writeStashCommit({message:`stash-WorkDir: WIP on ${f} - ${new Date().toISOString()}`,tree:V,parent:[T[T.length-1]]});T.push(fe),k=V}if(!k||!D&&!V)throw new Fe("changes, nothing to stash");const ee=(o.trim()||`WIP on ${f}`)+`: ${w.substring(0,7)} ${A}`;return{stashCommit:await l.writeStashCommit({message:ee,tree:k,parent:T}),stashMsg:ee,branch:f,stashMgr:l}}async function Tp({fs:a,dir:t,gitdir:i,message:o=""}){const{stashCommit:l,stashMsg:f,branch:w,stashMgr:v}=await yl({fs:a,dir:t,gitdir:i,message:o});return await v.writeStashRef(l),await v.writeStashReflogEntry({stashCommit:l,message:f}),await Ji({fs:a,dir:t,gitdir:i,ref:w,track:!1,force:!0}),l}async function Rp({fs:a,dir:t,gitdir:i,message:o=""}){const{stashCommit:l}=await yl({fs:a,dir:t,gitdir:i,message:o});return l}async function bl({fs:a,dir:t,gitdir:i,refIdx:o=0}){const f=await new gr({fs:a,dir:t,gitdir:i}).readStashCommit(o),{parent:w=null}=f.commit?f.commit:{};if(!(!w||!Array.isArray(w)))for(let v=0;v<w.length-1;v++){const T=(await lr({fs:a,cache:{},gitdir:i,oid:w[v+1]})).commit.message.startsWith("stash-Index");await ec({fs:a,dir:t,gitdir:i,stashCommit:w[v+1],parentCommit:w[v],wasStaged:T})}}async function vl({fs:a,dir:t,gitdir:i,refIdx:o=0}){const l=new gr({fs:a,dir:t,gitdir:i});if(!(await l.readStashCommit(o)).commit)return;const w=l.refStashPath;await rn(w,async()=>{await a.exists(w)&&await a.rm(w)});const v=await l.readStashReflogs({parsed:!1});if(!v.length)return;v.splice(o,1);const A=l.refLogsStashPath;await rn({reflogEntries:v,stashReflogPath:A,stashMgr:l},async()=>{if(v.length){await a.write(A,v.reverse().join(`
`)+`
`,"utf8");const T=v[v.length-1].split(" ")[1];await l.writeStashRef(T)}else await a.rm(A)})}async function Op({fs:a,dir:t,gitdir:i}){return new gr({fs:a,dir:t,gitdir:i}).readStashReflogs({parsed:!0})}async function Pp({fs:a,dir:t,gitdir:i}){const o=new gr({fs:a,dir:t,gitdir:i}),l=[o.refStashPath,o.refLogsStashPath];await rn(l,async()=>{await Promise.all(l.map(async f=>{if(await a.exists(f))return a.rm(f)}))})}async function Mp({fs:a,dir:t,gitdir:i,refIdx:o=0}){await bl({fs:a,dir:t,gitdir:i,refIdx:o}),await vl({fs:a,dir:t,gitdir:i,refIdx:o})}async function xl({fs:a,dir:t,gitdir:i=g(t,".git"),op:o="push",message:l="",refIdx:f=0}){J("fs",a),J("dir",t),J("gitdir",i),J("op",o);const w={push:Tp,apply:bl,drop:vl,list:Op,clear:Pp,pop:Mp,create:Rp},v=["apply","drop","pop"];try{const A=new qe(a),T=await We({fsp:A,dotgit:i});["refs","logs","logs/refs"].map(D=>g(T,D)).forEach(async D=>{await A.exists(D)||await A.mkdir(D)});const M=w[o];if(M){if(v.includes(o)&&f<0)throw new ir(`stash@${f}`,"number that is in range of [0, num of stash pushed]");return await M({fs:A,dir:t,gitdir:T,message:l,refIdx:f})}throw new Error(`To be implemented: ${o}`)}catch(A){throw A.caller="git.stash",A}}async function _l({fs:a,dir:t,gitdir:i=g(t,".git"),filepath:o,cache:l={}}){try{J("fs",a),J("gitdir",i),J("filepath",o);const f=new qe(a),w=await We({fsp:f,dotgit:i});if(await en.isIgnored({fs:f,gitdir:w,dir:t,filepath:o}))return"ignored";const A=await Bp({fs:f,cache:l,gitdir:w}),T=await Sl({fs:f,cache:l,gitdir:w,tree:A,path:o}),k=await he.acquire({fs:f,gitdir:w,cache:l},async function(fe){for(const we of fe)if(we.path===o)return we;return null}),M=await f.lstat(g(t,o)),D=T!==null,V=k!==null,ee=M!==null,ge=async()=>{if(V&&!de(k,M))return k.oid;{const fe=await f.read(g(t,o)),we=await hl({gitdir:w,type:"blob",object:fe});return V&&k.oid===we&&M.size!==-1&&he.acquire({fs:f,gitdir:w,cache:l},async function(be){be.insert({filepath:o,stats:M,oid:we})}),we}};if(!D&&!ee&&!V)return"absent";if(!D&&!ee&&V)return"*absent";if(!D&&ee&&!V)return"*added";if(!D&&ee&&V)return await ge()===k.oid?"added":"*added";if(D&&!ee&&!V)return"deleted";if(D&&!ee&&V)return T===k.oid,"*deleted";if(D&&ee&&!V)return await ge()===T?"*undeleted":"*undeletemodified";if(D&&ee&&V){const fe=await ge();return fe===T?fe===k.oid?"unmodified":"*unmodified":fe===k.oid?"modified":"*modified"}}catch(f){throw f.caller="git.status",f}}async function Sl({fs:a,cache:t,gitdir:i,tree:o,path:l}){typeof l=="string"&&(l=l.split("/"));const f=l.shift();for(const w of o)if(w.path===f){if(l.length===0)return w.oid;const{type:v,object:A}=await dt({fs:a,cache:t,gitdir:i,oid:w.oid});if(v==="tree"){const T=Pe.from(A);return Sl({fs:a,cache:t,gitdir:i,tree:T,path:l})}if(v==="blob")throw new Me(w.oid,v,"blob",l.join("/"))}return null}async function Bp({fs:a,cache:t,gitdir:i}){let o;try{o=await H.resolve({fs:a,gitdir:i,ref:"HEAD"})}catch(f){if(f instanceof Fe)return[]}const{tree:l}=await tn({fs:a,cache:t,gitdir:i,oid:o});return l}async function kl({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o="HEAD",filepaths:l=["."],filter:f,cache:w={},ignored:v=!1}){try{J("fs",a),J("gitdir",i),J("ref",o);const A=new qe(a),T=await We({fsp:A,dotgit:i});return await vr({fs:A,cache:w,dir:t,gitdir:T,trees:[Wt({ref:o}),Qr(),Oe()],map:async function(k,[M,D,V]){if(!M&&!V&&D&&!v&&await en.isIgnored({fs:A,dir:t,filepath:k})||!l.some(Ce=>Xs(k,Ce)))return null;if(f&&!f(k))return;const[ee,ge,fe]=await Promise.all([M&&M.type(),D&&D.type(),V&&V.type()]),we=[ee,ge,fe].includes("blob");if((ee==="tree"||ee==="special")&&!we)return;if(ee==="commit")return null;if((ge==="tree"||ge==="special")&&!we)return;if(fe==="commit")return null;if((fe==="tree"||fe==="special")&&!we)return;const be=ee==="blob"?await M.oid():void 0,Re=fe==="blob"?await V.oid():void 0;let Ue;ee!=="blob"&&ge==="blob"&&fe!=="blob"?Ue="42":ge==="blob"&&(Ue=await D.oid());const Ge=[void 0,be,Ue,Re],He=Ge.map(Ce=>Ge.indexOf(Ce));return He.shift(),[k,...He]}})}catch(A){throw A.caller="git.statusMatrix",A}}async function El({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o,object:l,force:f=!1}){try{J("fs",a),J("gitdir",i),J("ref",o);const w=new qe(a);if(o===void 0)throw new Ht("ref");o=o.startsWith("refs/tags/")?o:`refs/tags/${o}`;const v=await We({fsp:w,dotgit:i}),A=await H.resolve({fs:w,gitdir:v,ref:l||"HEAD"});if(!f&&await H.exists({fs:w,gitdir:v,ref:o}))throw new nr("tag",o);await H.writeRef({fs:w,gitdir:v,ref:o,value:A})}catch(w){throw w.caller="git.tag",w}}async function Al({fs:a,dir:t,gitdir:i=g(t,".git"),cache:o={},filepath:l,oid:f,mode:w,add:v,remove:A,force:T}){try{J("fs",a),J("gitdir",i),J("filepath",l);const k=new qe(a),M=await We({fsp:k,dotgit:i});if(A)return await he.acquire({fs:k,gitdir:M,cache:o},async function(V){if(!T){const ee=await k.lstat(g(t,l));if(ee){if(ee.isDirectory())throw new yr("directory");return}}V.has({filepath:l})&&V.delete({filepath:l})});let D;if(!f){if(D=await k.lstat(g(t,l)),!D)throw new Fe(`file at "${l}" on disk and "remove" not set`);if(D.isDirectory())throw new yr("directory")}return await he.acquire({fs:k,gitdir:M,cache:o},async function(V){if(!v&&!V.has({filepath:l}))throw new Fe(`file at "${l}" in index and "add" not set`);let ee;if(f)ee={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:w,uid:0,gid:0,size:0};else{ee=D;const ge=ee.isSymbolicLink()?await k.readlink(g(t,l)):await k.read(g(t,l));f=await qt({fs:k,gitdir:M,type:"blob",format:"content",object:ge})}return V.insert({filepath:l,oid:f,stats:ee}),f})}catch(k){throw k.caller="git.updateIndex",k}}function Il(){try{return ui.version}catch(a){throw a.caller="git.version",a}}async function Cl({fs:a,dir:t,gitdir:i=g(t,".git"),trees:o,map:l,reduce:f,iterate:w,cache:v={}}){try{J("fs",a),J("gitdir",i),J("trees",o);const A=new qe(a),T=await We({fsp:A,dotgit:i});return await vr({fs:A,cache:v,dir:t,gitdir:T,trees:o,map:l,reduce:f,iterate:w})}catch(A){throw A.caller="git.walk",A}}async function Tl({fs:a,dir:t,gitdir:i=g(t,".git"),blob:o}){try{J("fs",a),J("gitdir",i),J("blob",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return await qt({fs:l,gitdir:f,type:"blob",object:o,format:"content"})}catch(l){throw l.caller="git.writeBlob",l}}async function Rl({fs:a,dir:t,gitdir:i=g(t,".git"),commit:o}){try{J("fs",a),J("gitdir",i),J("commit",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return await wl({fs:l,gitdir:f,commit:o})}catch(l){throw l.caller="git.writeCommit",l}}async function Ol({fs:a,dir:t,gitdir:i=g(t,".git"),type:o,object:l,format:f="parsed",oid:w,encoding:v=void 0}){try{const A=new qe(a),T=await We({fsp:A,dotgit:i});if(f==="parsed"){switch(o){case"commit":l=gt.from(l).toObject();break;case"tree":l=Pe.from(l).toObject();break;case"blob":l=Buffer.from(l,v);break;case"tag":l=zt.from(l).toObject();break;default:throw new Me(w||"",o,"blob|commit|tag|tree")}f="content"}return w=await qt({fs:A,gitdir:T,type:o,object:l,oid:w,format:f}),w}catch(A){throw A.caller="git.writeObject",A}}async function Pl({fs:a,dir:t,gitdir:i=g(t,".git"),ref:o,value:l,force:f=!1,symbolic:w=!1}){try{J("fs",a),J("gitdir",i),J("ref",o),J("value",l);const v=new qe(a);if(!Bn(o,!0))throw new ir(o,d.clean(o));const A=await We({fsp:v,dotgit:i});if(!f&&await H.exists({fs:v,gitdir:A,ref:o}))throw new nr("ref",o);w?await H.writeSymbolicRef({fs:v,gitdir:A,ref:o,value:l}):(l=await H.resolve({fs:v,gitdir:A,ref:l}),await H.writeRef({fs:v,gitdir:A,ref:o,value:l}))}catch(v){throw v.caller="git.writeRef",v}}async function jp({fs:a,gitdir:t,tag:i}){const o=zt.from(i).toObject();return await qt({fs:a,gitdir:t,type:"tag",object:o,format:"content"})}async function Ml({fs:a,dir:t,gitdir:i=g(t,".git"),tag:o}){try{J("fs",a),J("gitdir",i),J("tag",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return await jp({fs:l,gitdir:f,tag:o})}catch(l){throw l.caller="git.writeTag",l}}async function Bl({fs:a,dir:t,gitdir:i=g(t,".git"),tree:o}){try{J("fs",a),J("gitdir",i),J("tree",o);const l=new qe(a),f=await We({fsp:l,dotgit:i});return await Mn({fs:l,gitdir:f,tree:o})}catch(l){throw l.caller="git.writeTree",l}}var Fp={Errors:Os,STAGE:Oe,TREE:Wt,WORKDIR:Qr,add:Ns,abortMerge:Ds,addNote:qs,addRemote:Vs,annotatedTag:Zs,branch:Ks,cherryPick:rc,checkout:Ji,clone:pc,commit:gc,getConfig:Rc,getConfigAll:Oc,setConfig:ml,currentBranch:mc,deleteBranch:wc,deleteRef:yc,deleteRemote:bc,deleteTag:vc,expandOid:xc,expandRef:_c,fastForward:Ec,fetch:Ac,findMergeBase:Ic,findRoot:Tc,getRemoteInfo:Pc,getRemoteInfo2:Bc,hashBlob:jc,indexPack:Fc,init:Dc,isDescendent:$c,isIgnored:Nc,listBranches:Uc,listFiles:Gc,listNotes:Hc,listRefs:qc,listRemotes:Wc,listServerRefs:Vc,listTags:Zc,log:Yc,merge:Jc,packObjects:el,pull:tl,push:rl,readBlob:al,readCommit:sa,readNote:ol,readObject:sl,readTag:cl,readTree:ll,remove:ul,removeNote:fl,renameBranch:dl,resetIndex:pl,updateIndex:Al,resolveRef:gl,status:_l,statusMatrix:kl,tag:El,version:Il,walk:Cl,writeBlob:Tl,writeCommit:Rl,writeObject:Ol,writeRef:Pl,writeTag:Ml,writeTree:Bl,stash:xl};return De.Errors=Os,De.STAGE=Oe,De.TREE=Wt,De.WORKDIR=Qr,De.abortMerge=Ds,De.add=Ns,De.addNote=qs,De.addRemote=Vs,De.annotatedTag=Zs,De.branch=Ks,De.checkout=Ji,De.cherryPick=rc,De.clone=pc,De.commit=gc,De.currentBranch=mc,De.default=Fp,De.deleteBranch=wc,De.deleteRef=yc,De.deleteRemote=bc,De.deleteTag=vc,De.expandOid=xc,De.expandRef=_c,De.fastForward=Ec,De.fetch=Ac,De.findMergeBase=Ic,De.findRoot=Tc,De.getConfig=Rc,De.getConfigAll=Oc,De.getRemoteInfo=Pc,De.getRemoteInfo2=Bc,De.hashBlob=jc,De.indexPack=Fc,De.init=Dc,De.isDescendent=$c,De.isIgnored=Nc,De.listBranches=Uc,De.listFiles=Gc,De.listNotes=Hc,De.listRefs=qc,De.listRemotes=Wc,De.listServerRefs=Vc,De.listTags=Zc,De.log=Yc,De.merge=Jc,De.packObjects=el,De.pull=tl,De.push=rl,De.readBlob=al,De.readCommit=sa,De.readNote=ol,De.readObject=sl,De.readTag=cl,De.readTree=ll,De.remove=ul,De.removeNote=fl,De.renameBranch=dl,De.resetIndex=pl,De.resolveRef=gl,De.setConfig=ml,De.stash=xl,De.status=_l,De.statusMatrix=kl,De.tag=El,De.updateIndex=Al,De.version=Il,De.walk=Cl,De.writeBlob=Tl,De.writeCommit=Rl,De.writeObject=Ol,De.writeRef=Pl,De.writeTag=Ml,De.writeTree=Bl,De}var Uw=Nw();const St=Yn(Uw);function zw(e){let r=[e];return{next(){return Promise.resolve({done:r.length===0,value:r.pop()})},return(){return r=[],{}},[Symbol.asyncIterator](){return this}}}function Gw(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:zw(e)}async function Hw(e,r){const n=Gw(e);for(;;){const{value:s,done:c}=await n.next();if(s&&await r(s),c)break}n.return&&n.return()}async function qw(e){let r=0;const n=[];await Hw(e,u=>{n.push(u),r+=u.byteLength});const s=new Uint8Array(r);let c=0;for(const u of n)s.set(u,c),c+=u.byteLength;return s}function Ww(e){if(e[Symbol.asyncIterator])return e;const r=e.getReader();return{next(){return r.read()},return(){return r.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Vw({onProgress:e,url:r,method:n="GET",headers:s={},body:c}){c&&(c=await qw(c));const u=await fetch(r,{method:n,headers:s,body:c}),p=u.body&&u.body.getReader?Ww(u.body):[new Uint8Array(await u.arrayBuffer())];s={};for(const[d,h]of u.headers.entries())s[d]=h;return{url:u.url,method:u.method,statusCode:u.status,statusMessage:u.statusText,body:p,headers:s}}var Ni={request:Vw};const un=new Map;function Zw(e,r){un.has(e)||un.set(e,new Set),un.get(e).add(r)}function Kw(e,r){const n=un.get(e);n&&(n.delete(r),n.size===0&&un.delete(e))}function cr(e,r){const n=un.get(e);n&&n.forEach(s=>s(r))}const Kt={FIND:"notemac-find",REPLACE:"notemac-replace",MARK:"notemac-mark",GOTO_LINE:"notemac-goto-line",COLUMN_EDIT:"notemac-column-edit",CLEAR_MARKS:"notemac-clear-marks",EDITOR_ACTION:"notemac-editor-action",INSERT_SNIPPET:"notemac-insert-snippet",EXECUTE_COMMAND:"notemac-execute-command",GIT_STATUS_CHANGED:"notemac-git-status-changed",GIT_BRANCH_CHANGED:"notemac-git-branch-changed",GIT_OPERATION_COMPLETE:"notemac-git-operation-complete",AI_RESPONSE_COMPLETE:"notemac-ai-response-complete",AI_STREAM_CHUNK:"notemac-ai-stream-chunk",AI_INLINE_SUGGESTION:"notemac-ai-inline-suggestion",AI_ERROR:"notemac-ai-error",AI_ACTION:"notemac-ai-action"};var Go,Ff;function Xw(){if(Ff)return Go;Ff=1,Go=e;function e(r){var n,s;if(typeof r!="function")throw new Error("expected a function but got "+r);return function(){return n||(n=!0,s=r.apply(this,arguments)),s}}return Go}var Ho={},Df;function Yw(){return Df||(Df=1,(function(e){function r(F,N){var G;return F instanceof Buffer?G=F:G=Buffer.from(F.buffer,F.byteOffset,F.byteLength),G.toString(N)}var n=function(F){return Buffer.from(F)};function s(F){for(var N=0,G=Math.min(256*256,F.length+1),W=new Uint16Array(G),ne=[],Z=0;;){var z=N<F.length;if(!z||Z>=G-1){var B=W.subarray(0,Z),Y=B;if(ne.push(String.fromCharCode.apply(null,Y)),!z)return ne.join("");F=F.subarray(N),N=0,Z=0}var U=F[N++];if((U&128)===0)W[Z++]=U;else if((U&224)===192){var ce=F[N++]&63;W[Z++]=(U&31)<<6|ce}else if((U&240)===224){var ce=F[N++]&63,oe=F[N++]&63;W[Z++]=(U&31)<<12|ce<<6|oe}else if((U&248)===240){var ce=F[N++]&63,oe=F[N++]&63,de=F[N++]&63,re=(U&7)<<18|ce<<12|oe<<6|de;re>65535&&(re-=65536,W[Z++]=re>>>10&1023|55296,re=56320|re&1023),W[Z++]=re}}}function c(F){for(var N=0,G=F.length,W=0,ne=Math.max(32,G+(G>>>1)+7),Z=new Uint8Array(ne>>>3<<3);N<G;){var z=F.charCodeAt(N++);if(z>=55296&&z<=56319){if(N<G){var B=F.charCodeAt(N);(B&64512)===56320&&(++N,z=((z&1023)<<10)+(B&1023)+65536)}if(z>=55296&&z<=56319)continue}if(W+4>Z.length){ne+=8,ne*=1+N/F.length*2,ne=ne>>>3<<3;var Y=new Uint8Array(ne);Y.set(Z),Z=Y}if((z&4294967168)===0){Z[W++]=z;continue}else if((z&4294965248)===0)Z[W++]=z>>>6&31|192;else if((z&4294901760)===0)Z[W++]=z>>>12&15|224,Z[W++]=z>>>6&63|128;else if((z&4292870144)===0)Z[W++]=z>>>18&7|240,Z[W++]=z>>>12&63|128,Z[W++]=z>>>6&63|128;else continue;Z[W++]=z&63|128}return Z.slice?Z.slice(0,W):Z.subarray(0,W)}var u="Failed to ",p=function(F,N,G){if(F)throw new Error("".concat(u).concat(N,": the '").concat(G,"' option is unsupported."))},d=typeof Buffer=="function"&&Buffer.from,h=d?n:c;function S(){this.encoding="utf-8"}S.prototype.encode=function(F,N){return p(N&&N.stream,"encode","stream"),h(F)};function x(F){var N;try{var G=new Blob([F],{type:"text/plain;charset=UTF-8"});N=URL.createObjectURL(G);var W=new XMLHttpRequest;return W.open("GET",N,!1),W.send(),W.responseText}finally{N&&URL.revokeObjectURL(N)}}var _=!d&&typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function",R=["utf-8","utf8","unicode-1-1-utf-8"],y=s;d?y=r:_&&(y=function(F){try{return x(F)}catch{return s(F)}});var j="construct 'TextDecoder'",X="".concat(u," ").concat(j,": the ");function L(F,N){p(N&&N.fatal,j,"fatal"),F=F||"utf-8";var G;if(d?G=Buffer.isEncoding(F):G=R.indexOf(F.toLowerCase())!==-1,!G)throw new RangeError("".concat(X," encoding label provided ('").concat(F,"') is invalid."));this.encoding=F,this.fatal=!1,this.ignoreBOM=!1}L.prototype.decode=function(F,N){p(N&&N.stream,"decode","stream");var G;return F instanceof Uint8Array?G=F:F.buffer instanceof ArrayBuffer?G=new Uint8Array(F.buffer):G=new Uint8Array(F),y(G,this.encoding)},e.TextEncoder=e.TextEncoder||S,e.TextDecoder=e.TextDecoder||L})(typeof window<"u"?window:typeof Ai<"u"?Ai:Ho)),Ho}var qo,Lf;function Jw(){return Lf||(Lf=1,Yw(),qo={encode:e=>new TextEncoder().encode(e),decode:e=>new TextDecoder().decode(e)}),qo}var Wo,$f;function Qw(){if($f)return Wo;$f=1,Wo=e;function e(r,n,s){var c;return function(){if(!n)return r.apply(this,arguments);var u=this,p=arguments,d=s&&!c;if(clearTimeout(c),c=setTimeout(function(){if(c=null,!d)return r.apply(u,p)},n),d)return r.apply(this,arguments)}}return Wo}var Vo,Nf;function Cs(){if(Nf)return Vo;Nf=1;function e(d){if(d.length===0)return".";let h=s(d);return h=h.reduce(p,[]),n(...h)}function r(...d){let h="";for(let S of d)S.startsWith("/")?h=S:h=e(n(h,S));return h}function n(...d){if(d.length===0)return"";let h=d.join("/");return h=h.replace(/\/{2,}/g,"/"),h}function s(d){if(d.length===0)return[];if(d==="/")return["/"];let h=d.split("/");return h[h.length-1]===""&&h.pop(),d[0]==="/"?h[0]="/":h[0]!=="."&&h.unshift("."),h}function c(d){const h=d.lastIndexOf("/");if(h===-1)throw new Error(`Cannot get dirname of "${d}"`);return h===0?"/":d.slice(0,h)}function u(d){if(d==="/")throw new Error(`Cannot get basename of "${d}"`);const h=d.lastIndexOf("/");return h===-1?d:d.slice(h+1)}function p(d,h){if(d.length===0)return d.push(h),d;if(h===".")return d;if(h===".."){if(d.length===1){if(d[0]==="/")throw new Error("Unable to normalize path - traverses above root directory");if(d[0]===".")return d.push(h),d}return d[d.length-1]===".."?(d.push(".."),d):(d.pop(),d)}return d.push(h),d}return Vo={join:n,normalize:e,split:s,basename:u,dirname:c,resolve:r},Vo}var Zo,Uf;function qd(){if(Uf)return Zo;Uf=1;function e(d){return class extends Error{constructor(...h){super(...h),this.code=d,this.message?this.message=d+": "+this.message:this.message=d}}}const r=e("EEXIST"),n=e("ENOENT"),s=e("ENOTDIR"),c=e("ENOTEMPTY"),u=e("ETIMEDOUT"),p=e("EISDIR");return Zo={EEXIST:r,ENOENT:n,ENOTDIR:s,ENOTEMPTY:c,ETIMEDOUT:u,EISDIR:p},Zo}var Ko,zf;function ey(){if(zf)return Ko;zf=1;const e=Cs(),{EEXIST:r,ENOENT:n,ENOTDIR:s,ENOTEMPTY:c,EISDIR:u}=qd(),p=0;return Ko=class{constructor(){}_makeRoot(h=new Map){return h.set(p,{mode:511,type:"dir",size:0,ino:0,mtimeMs:Date.now()}),h}activate(h=null){h===null?this._root=new Map([["/",this._makeRoot()]]):typeof h=="string"?this._root=new Map([["/",this._makeRoot(this.parse(h))]]):this._root=h}get activated(){return!!this._root}deactivate(){this._root=void 0}size(){return this._countInodes(this._root.get("/"))-1}_countInodes(h){let S=1;for(let[x,_]of h)x!==p&&(S+=this._countInodes(_));return S}autoinc(){return this._maxInode(this._root.get("/"))+1}_maxInode(h){let S=h.get(p).ino;for(let[x,_]of h)x!==p&&(S=Math.max(S,this._maxInode(_)));return S}print(h=this._root.get("/")){let S="";const x=(_,R)=>{for(let[y,j]of _){if(y===0)continue;let X=j.get(p),L=X.mode.toString(8);S+=`${"	".repeat(R)}${y}	${L}`,X.type==="file"?S+=`	${X.size}	${X.mtimeMs}
`:(S+=`
`,x(j,R+1))}};return x(h,0),S}parse(h){let S=0;function x(j){const X=++S,L=j.length===1?"dir":"file";let[F,N,G]=j;return F=parseInt(F,8),N=N?parseInt(N):0,G=G?parseInt(G):Date.now(),new Map([[p,{mode:F,type:L,size:N,mtimeMs:G,ino:X}]])}let _=h.trim().split(`
`),R=this._makeRoot(),y=[{indent:-1,node:R},{indent:0,node:null}];for(let j of _){let L=j.match(/^\t*/)[0].length;j=j.slice(L);let[F,...N]=j.split("	"),G=x(N);if(L<=y[y.length-1].indent)for(;L<=y[y.length-1].indent;)y.pop();y.push({indent:L,node:G}),y[y.length-2].node.set(F,G)}return R}_lookup(h,S=!0){let x=this._root,_="/",R=e.split(h);for(let y=0;y<R.length;++y){let j=R[y];if(x=x.get(j),!x)throw new n(h);if(S||y<R.length-1){const X=x.get(p);if(X.type==="symlink"){let L=e.resolve(_,X.target);x=this._lookup(L)}_?_=e.join(_,j):_=j}}return x}mkdir(h,{mode:S}){if(h==="/")throw new r;let x=this._lookup(e.dirname(h)),_=e.basename(h);if(x.has(_))throw new r;let R=new Map,y={mode:S,type:"dir",size:0,mtimeMs:Date.now(),ino:this.autoinc()};R.set(p,y),x.set(_,R)}rmdir(h){let S=this._lookup(h);if(S.get(p).type!=="dir")throw new s;if(S.size>1)throw new c;let x=this._lookup(e.dirname(h)),_=e.basename(h);x.delete(_)}readdir(h){let S=this._lookup(h);if(S.get(p).type!=="dir")throw new s;return[...S.keys()].filter(x=>typeof x=="string")}writeStat(h,S,{mode:x}){let _,R;try{R=this.stat(h)}catch{}if(R!==void 0){if(R.type==="dir")throw new u;x==null&&(x=R.mode),_=R.ino}x==null&&(x=438),_==null&&(_=this.autoinc());let y=this._lookup(e.dirname(h)),j=e.basename(h),X={mode:x,type:"file",size:S,mtimeMs:Date.now(),ino:_},L=new Map;return L.set(p,X),y.set(j,L),X}unlink(h){let S=this._lookup(e.dirname(h)),x=e.basename(h);S.delete(x)}rename(h,S){let x=e.basename(S),_=this._lookup(h);this._lookup(e.dirname(S)).set(x,_),this.unlink(h)}stat(h){return this._lookup(h).get(p)}lstat(h){return this._lookup(h,!1).get(p)}readlink(h){return this._lookup(h,!1).get(p).target}symlink(h,S){let x,_;try{let L=this.stat(S);_===null&&(_=L.mode),x=L.ino}catch{}_==null&&(_=40960),x==null&&(x=this.autoinc());let R=this._lookup(e.dirname(S)),y=e.basename(S),j={mode:_,type:"symlink",target:h,size:0,mtimeMs:Date.now(),ino:x},X=new Map;return X.set(p,j),R.set(y,X),j}_du(h){let S=0;for(const[x,_]of h.entries())x===p?S+=_.size:S+=this._du(_);return S}du(h){let S=this._lookup(h);return this._du(S)}},Ko}class Wd{constructor(r="keyval-store",n="keyval"){this.storeName=n,this._dbName=r,this._storeName=n,this._init()}_init(){this._dbp||(this._dbp=new Promise((r,n)=>{const s=indexedDB.open(this._dbName);s.onerror=()=>n(s.error),s.onsuccess=()=>r(s.result),s.onupgradeneeded=()=>{s.result.createObjectStore(this._storeName)}}))}_withIDBStore(r,n){return this._init(),this._dbp.then(s=>new Promise((c,u)=>{const p=s.transaction(this.storeName,r);p.oncomplete=()=>c(),p.onabort=p.onerror=()=>u(p.error),n(p.objectStore(this.storeName))}))}_close(){return this._init(),this._dbp.then(r=>{r.close(),this._dbp=void 0})}}let Xo;function qr(){return Xo||(Xo=new Wd),Xo}function ty(e,r=qr()){let n;return r._withIDBStore("readwrite",s=>{n=s.get(e)}).then(()=>n.result)}function ry(e,r,n=qr()){return n._withIDBStore("readwrite",s=>{s.put(r,e)})}function ny(e,r,n=qr()){return n._withIDBStore("readwrite",s=>{const c=s.get(e);c.onsuccess=()=>{s.put(r(c.result),e)}})}function iy(e,r=qr()){return r._withIDBStore("readwrite",n=>{n.delete(e)})}function ay(e=qr()){return e._withIDBStore("readwrite",r=>{r.clear()})}function oy(e=qr()){const r=[];return e._withIDBStore("readwrite",n=>{(n.openKeyCursor||n.openCursor).call(n).onsuccess=function(){this.result&&(r.push(this.result.key),this.result.continue())}}).then(()=>r)}function sy(e=qr()){return e._close()}const cy=Object.freeze(Object.defineProperty({__proto__:null,Store:Wd,clear:ay,close:sy,del:iy,get:ty,keys:oy,set:ry,update:ny},Symbol.toStringTag,{value:"Module"})),Vd=$p(cy);var Yo,Gf;function ly(){if(Gf)return Yo;Gf=1;const e=Vd;return Yo=class{constructor(n,s){this._database=n,this._storename=s,this._store=new e.Store(this._database,this._storename)}saveSuperblock(n){return e.set("!root",n,this._store)}loadSuperblock(){return e.get("!root",this._store)}readFile(n){return e.get(n,this._store)}writeFile(n,s){return e.set(n,s,this._store)}unlink(n){return e.del(n,this._store)}wipe(){return e.clear(this._store)}close(){return e.close(this._store)}},Yo}var Jo,Hf;function uy(){return Hf||(Hf=1,Jo=class{constructor(r){this._url=r}loadSuperblock(){return fetch(this._url+"/.superblock.txt").then(r=>r.ok?r.text():null)}async readFile(r){const n=await fetch(this._url+r);if(n.status===200)return n.arrayBuffer();throw new Error("ENOENT")}async sizeFile(r){const n=await fetch(this._url+r,{method:"HEAD"});if(n.status===200)return n.headers.get("content-length");throw new Error("ENOENT")}}),Jo}var Qo,qf;function fy(){if(qf)return Qo;qf=1;const e=Vd,r=n=>new Promise(s=>setTimeout(s,n));return Qo=class{constructor(s,c){this._id=Math.random(),this._database=s,this._storename=c,this._store=new e.Store(this._database,this._storename),this._lock=null}async has({margin:s=2e3}={}){if(this._lock&&this._lock.holder===this._id){const c=Date.now();return this._lock.expires>c+s?!0:await this.renew()}else return!1}async renew({ttl:s=5e3}={}){let c;return await e.update("lock",u=>{const d=Date.now()+s;return c=u&&u.holder===this._id,this._lock=c?{holder:this._id,expires:d}:u,this._lock},this._store),c}async acquire({ttl:s=5e3}={}){let c,u,p;if(await e.update("lock",d=>{const h=Date.now(),S=h+s;return u=d&&d.expires<h,c=d===void 0||u,p=d&&d.holder===this._id,this._lock=c?{holder:this._id,expires:S}:d,this._lock},this._store),p)throw new Error("Mutex double-locked");return c}async wait({interval:s=100,limit:c=6e3,ttl:u}={}){for(;c--;){if(await this.acquire({ttl:u}))return!0;await r(s)}throw new Error("Mutex timeout")}async release({force:s=!1}={}){let c,u,p;if(await e.update("lock",d=>(c=s||d&&d.holder===this._id,u=d===void 0,p=d&&d.holder!==this._id,this._lock=c?void 0:d,this._lock),this._store),await e.close(this._store),!c&&!s){if(u)throw new Error("Mutex double-freed");if(p)throw new Error("Mutex lost ownership")}return c}},Qo}var es,Wf;function dy(){return Wf||(Wf=1,es=class{constructor(r){this._id=Math.random(),this._database=r,this._has=!1,this._release=null}async has(){return this._has}async acquire(){return new Promise(r=>{navigator.locks.request(this._database+"_lock",{ifAvailable:!0},n=>(this._has=!!n,r(!!n),new Promise(s=>{this._release=s})))})}async wait({timeout:r=6e5}={}){return new Promise((n,s)=>{const c=new AbortController;setTimeout(()=>{c.abort(),s(new Error("Mutex timeout"))},r),navigator.locks.request(this._database+"_lock",{signal:c.signal},u=>(this._has=!!u,n(!!u),new Promise(p=>{this._release=p})))})}async release({force:r=!1}={}){this._has=!1,this._release?this._release():r&&navigator.locks.request(this._database+"_lock",{steal:!0},n=>!0)}}),es}var ts,Vf;function hy(){if(Vf)return ts;Vf=1;const{encode:e,decode:r}=Jw(),n=Qw(),s=ey(),{ENOENT:c,ENOTEMPTY:u,ETIMEDOUT:p}=qd(),d=ly(),h=uy(),S=fy(),x=dy(),_=Cs();return ts=class{constructor(){this.saveSuperblock=n(()=>{this.flush()},500)}async init(y,{wipe:j,url:X,urlauto:L,fileDbName:F=y,db:N=null,fileStoreName:G=y+"_files",lockDbName:W=y+"_lock",lockStoreName:ne=y+"_lock"}={}){this._name=y,this._idb=N||new d(F,G),this._mutex=navigator.locks?new x(y):new S(W,ne),this._cache=new s(y),this._opts={wipe:j,url:X},this._needsWipe=!!j,X&&(this._http=new h(X),this._urlauto=!!L)}async activate(){if(this._cache.activated)return;this._needsWipe&&(this._needsWipe=!1,await this._idb.wipe(),await this._mutex.release({force:!0})),await this._mutex.has()||await this._mutex.wait();const y=await this._idb.loadSuperblock();if(y)this._cache.activate(y);else if(this._http){const j=await this._http.loadSuperblock();this._cache.activate(j),await this._saveSuperblock()}else this._cache.activate();if(!await this._mutex.has())throw new p}async deactivate(){await this._mutex.has()&&await this._saveSuperblock(),this._cache.deactivate();try{await this._mutex.release()}catch{}await this._idb.close()}async _saveSuperblock(){this._cache.activated&&(this._lastSavedAt=Date.now(),await this._idb.saveSuperblock(this._cache._root))}_writeStat(y,j,X){let L=_.split(_.dirname(y)),F=L.shift();for(let N of L){F=_.join(F,N);try{this._cache.mkdir(F,{mode:511})}catch{}}return this._cache.writeStat(y,j,X)}async readFile(y,j){const X=typeof j=="string"?j:j&&j.encoding;if(X&&X!=="utf8")throw new Error('Only "utf8" encoding is supported in readFile');let L=null,F=null;try{F=this._cache.stat(y),L=await this._idb.readFile(F.ino)}catch(N){if(!this._urlauto)throw N}if(!L&&this._http){let N=this._cache.lstat(y);for(;N.type==="symlink";)y=_.resolve(_.dirname(y),N.target),N=this._cache.lstat(y);L=await this._http.readFile(y)}if(L&&((!F||F.size!=L.byteLength)&&(F=await this._writeStat(y,L.byteLength,{mode:F?F.mode:438}),this.saveSuperblock()),X==="utf8"?L=r(L):L.toString=()=>r(L)),!F)throw new c(y);return L}async writeFile(y,j,X){const{mode:L,encoding:F="utf8"}=X;if(typeof j=="string"){if(F!=="utf8")throw new Error('Only "utf8" encoding is supported in writeFile');j=e(j)}const N=await this._cache.writeStat(y,j.byteLength,{mode:L});await this._idb.writeFile(N.ino,j)}async unlink(y,j){const X=this._cache.lstat(y);this._cache.unlink(y),X.type!=="symlink"&&await this._idb.unlink(X.ino)}readdir(y,j){return this._cache.readdir(y)}mkdir(y,j){const{mode:X=511}=j;this._cache.mkdir(y,{mode:X})}rmdir(y,j){if(y==="/")throw new u;this._cache.rmdir(y)}rename(y,j){this._cache.rename(y,j)}stat(y,j){return this._cache.stat(y)}lstat(y,j){return this._cache.lstat(y)}readlink(y,j){return this._cache.readlink(y)}symlink(y,j){this._cache.symlink(y,j)}async backFile(y,j){let X=await this._http.sizeFile(y);await this._writeStat(y,X,j)}du(y){return this._cache.du(y)}flush(){return this._saveSuperblock()}},ts}var rs,Zf;function py(){return Zf||(Zf=1,rs=class{constructor(r){this.type=r.type,this.mode=r.mode,this.size=r.size,this.ino=r.ino,this.mtimeMs=r.mtimeMs,this.ctimeMs=r.ctimeMs||r.mtimeMs,this.uid=1,this.gid=1,this.dev=1}isFile(){return this.type==="file"}isDirectory(){return this.type==="dir"}isSymbolicLink(){return this.type==="symlink"}}),rs}var ns,Kf;function gy(){if(Kf)return ns;Kf=1;const e=hy(),r=py(),n=Cs();function s(p,d,...h){return p=n.normalize(p),(typeof d>"u"||typeof d=="function")&&(d={}),typeof d=="string"&&(d={encoding:d}),[p,d,...h]}function c(p,d,h,...S){return p=n.normalize(p),(typeof h>"u"||typeof h=="function")&&(h={}),typeof h=="string"&&(h={encoding:h}),[p,d,h,...S]}function u(p,d,...h){return[n.normalize(p),n.normalize(d),...h]}return ns=class{constructor(d,h={}){this.init=this.init.bind(this),this.readFile=this._wrap(this.readFile,s,!1),this.writeFile=this._wrap(this.writeFile,c,!0),this.unlink=this._wrap(this.unlink,s,!0),this.readdir=this._wrap(this.readdir,s,!1),this.mkdir=this._wrap(this.mkdir,s,!0),this.rmdir=this._wrap(this.rmdir,s,!0),this.rename=this._wrap(this.rename,u,!0),this.stat=this._wrap(this.stat,s,!1),this.lstat=this._wrap(this.lstat,s,!1),this.readlink=this._wrap(this.readlink,s,!1),this.symlink=this._wrap(this.symlink,u,!0),this.backFile=this._wrap(this.backFile,s,!0),this.du=this._wrap(this.du,s,!1),this._deactivationPromise=null,this._deactivationTimeout=null,this._activationPromise=null,this._operations=new Set,d&&this.init(d,h)}async init(...d){return this._initPromiseResolve&&await this._initPromise,this._initPromise=this._init(...d),this._initPromise}async _init(d,h={}){await this._gracefulShutdown(),this._activationPromise&&await this._deactivate(),this._backend&&this._backend.destroy&&await this._backend.destroy(),this._backend=h.backend||new e,this._backend.init&&await this._backend.init(d,h),this._initPromiseResolve&&(this._initPromiseResolve(),this._initPromiseResolve=null),h.defer||this.stat("/")}async _gracefulShutdown(){this._operations.size>0&&(this._isShuttingDown=!0,await new Promise(d=>this._gracefulShutdownResolve=d),this._isShuttingDown=!1,this._gracefulShutdownResolve=null)}_wrap(d,h,S){return async(...x)=>{x=h(...x);let _={name:d.name,args:x};this._operations.add(_);try{return await this._activate(),await d.apply(this,x)}finally{this._operations.delete(_),S&&this._backend.saveSuperblock(),this._operations.size===0&&(this._deactivationTimeout||clearTimeout(this._deactivationTimeout),this._deactivationTimeout=setTimeout(this._deactivate.bind(this),500))}}}async _activate(){this._initPromise,await this._initPromise,this._deactivationTimeout&&(clearTimeout(this._deactivationTimeout),this._deactivationTimeout=null),this._deactivationPromise&&await this._deactivationPromise,this._deactivationPromise=null,this._activationPromise||(this._activationPromise=this._backend.activate?this._backend.activate():Promise.resolve()),await this._activationPromise}async _deactivate(){return this._activationPromise&&await this._activationPromise,this._deactivationPromise||(this._deactivationPromise=this._backend.deactivate?this._backend.deactivate():Promise.resolve()),this._activationPromise=null,this._gracefulShutdownResolve&&this._gracefulShutdownResolve(),this._deactivationPromise}async readFile(d,h){return this._backend.readFile(d,h)}async writeFile(d,h,S){return await this._backend.writeFile(d,h,S),null}async unlink(d,h){return await this._backend.unlink(d,h),null}async readdir(d,h){return this._backend.readdir(d,h)}async mkdir(d,h){return await this._backend.mkdir(d,h),null}async rmdir(d,h){return await this._backend.rmdir(d,h),null}async rename(d,h){return await this._backend.rename(d,h),null}async stat(d,h){const S=await this._backend.stat(d,h);return new r(S)}async lstat(d,h){const S=await this._backend.lstat(d,h);return new r(S)}async readlink(d,h){return this._backend.readlink(d,h)}async symlink(d,h){return await this._backend.symlink(d,h),null}async backFile(d,h){return await this._backend.backFile(d,h),null}async du(d){return this._backend.du(d)}async flush(){return this._backend.flush()}},ns}var is,Xf;function my(){if(Xf)return is;Xf=1;const e=Xw(),r=gy();function n(s,c){return typeof s=="function"&&(c=s),c=e(c),[(...p)=>c(null,...p),c]}return is=class{constructor(...c){this.promises=new r(...c),this.init=this.init.bind(this),this.readFile=this.readFile.bind(this),this.writeFile=this.writeFile.bind(this),this.unlink=this.unlink.bind(this),this.readdir=this.readdir.bind(this),this.mkdir=this.mkdir.bind(this),this.rmdir=this.rmdir.bind(this),this.rename=this.rename.bind(this),this.stat=this.stat.bind(this),this.lstat=this.lstat.bind(this),this.readlink=this.readlink.bind(this),this.symlink=this.symlink.bind(this),this.backFile=this.backFile.bind(this),this.du=this.du.bind(this),this.flush=this.flush.bind(this)}init(c,u){return this.promises.init(c,u)}readFile(c,u,p){const[d,h]=n(u,p);this.promises.readFile(c,u).then(d).catch(h)}writeFile(c,u,p,d){const[h,S]=n(p,d);this.promises.writeFile(c,u,p).then(h).catch(S)}unlink(c,u,p){const[d,h]=n(u,p);this.promises.unlink(c,u).then(d).catch(h)}readdir(c,u,p){const[d,h]=n(u,p);this.promises.readdir(c,u).then(d).catch(h)}mkdir(c,u,p){const[d,h]=n(u,p);this.promises.mkdir(c,u).then(d).catch(h)}rmdir(c,u,p){const[d,h]=n(u,p);this.promises.rmdir(c,u).then(d).catch(h)}rename(c,u,p){const[d,h]=n(p);this.promises.rename(c,u).then(d).catch(h)}stat(c,u,p){const[d,h]=n(u,p);this.promises.stat(c).then(d).catch(h)}lstat(c,u,p){const[d,h]=n(u,p);this.promises.lstat(c).then(d).catch(h)}readlink(c,u,p){const[d,h]=n(u,p);this.promises.readlink(c).then(d).catch(h)}symlink(c,u,p){const[d,h]=n(p);this.promises.symlink(c,u).then(d).catch(h)}backFile(c,u,p){const[d,h]=n(u,p);this.promises.backFile(c,u).then(d).catch(h)}du(c,u){const[p,d]=n(u);this.promises.du(c).then(p).catch(d)}flush(c){const[u,p]=n(c);this.promises.flush().then(u).catch(p)}},is}var wy=my();const yy=Yn(wy);function Wr(){return typeof window!==null&&window.electronAPI?"electron":"showDirectoryPicker"in window?"webfs":"lightningfs"}function by(){return Wr()==="electron"}function vy(){return Wr()==="webfs"}function xy(){return Wr()==="lightningfs"}const Ei=new Map;function Zd(e){return Ei.has(e)||Ei.set(e,new yy(e)),Ei.get(e)}function _y(e){Ei.delete(e),"indexedDB"in window&&window.indexedDB.deleteDatabase(e)}function Ts(e){return Zd(e).promises}const Kd=new Map;function Xd(e,r){Kd.set(e,r)}function Yd(e){return Kd.get(e)}function Jd(e){async function r(c){const u=c.split("/").filter(h=>0<h.length);if(u.length===0)return{dir:e,name:""};const p=u.pop();let d=e;for(const h of u)d=await d.getDirectoryHandle(h,{create:!1});return{dir:d,name:p}}async function n(c){const u=c.split("/").filter(d=>0<d.length);let p=e;for(const d of u)p=await p.getDirectoryHandle(d,{create:!1});return p}const s={readFile:async(c,u)=>{const{dir:p,name:d}=await r(c),S=await(await p.getFileHandle(d)).getFile();return u&&u.encoding==="utf8"?await S.text():new Uint8Array(await S.arrayBuffer())},writeFile:async(c,u,p)=>{const d=c.split("/").filter(R=>0<R.length),h=d.pop();let S=e;for(const R of d)S=await S.getDirectoryHandle(R,{create:!0});const _=await(await S.getFileHandle(h,{create:!0})).createWritable();await _.write(u),await _.close()},unlink:async c=>{const{dir:u,name:p}=await r(c);await u.removeEntry(p)},readdir:async c=>{const u=c.length===0||c==="/"||c==="."?e:await n(c),p=[];for await(const d of u.values())p.push(d.name);return p},mkdir:async c=>{const u=c.split("/").filter(d=>0<d.length);let p=e;for(const d of u)p=await p.getDirectoryHandle(d,{create:!0})},rmdir:async c=>{const{dir:u,name:p}=await r(c);await u.removeEntry(p,{recursive:!0})},stat:async c=>{if(c.length===0||c==="/"||c===".")return{isFile:()=>!1,isDirectory:()=>!0,isSymbolicLink:()=>!1,size:0,mode:16877,mtimeMs:Date.now()};try{const u=await n(c);return{isFile:()=>!1,isDirectory:()=>!0,isSymbolicLink:()=>!1,size:0,mode:16877,mtimeMs:Date.now()}}catch{const{dir:u,name:p}=await r(c),h=await(await u.getFileHandle(p)).getFile();return{isFile:()=>!0,isDirectory:()=>!1,isSymbolicLink:()=>!1,size:h.size,mode:33188,mtimeMs:h.lastModified}}},lstat:async c=>s.stat(c)};return s}function Qd(e,r){const n=Wr();return n==="electron"?null:n==="webfs"&&r?Jd(r):Ts(e)}const pv=Object.freeze(Object.defineProperty({__proto__:null,CreateLightningFsAdapter:Ts,CreateWebFsAdapter:Jd,DeleteLightningFs:_y,DetectFsBackend:Wr,GetDirHandle:Yd,GetFsForGit:Qd,GetLightningFs:Zd,IsBrowserWorkspaceEnvironment:xy,IsElectronEnvironment:by,IsWebFsEnvironment:vy,RegisterDirHandle:Xd},Symbol.toStringTag,{value:"Module"}));function xt(){return $e.getState()}let kr,cn=null,Pi=null;function eh(){kr=void 0,cn=null,Pi=null}function Ft(){const r=xt().workspacePath||"";if(kr!==void 0&&r===Pi)return kr;Pi=r;const n=Wr();if(n==="electron")return kr=null,null;if(n==="webfs"){const s=Yd(r);if(s)return kr=Qd(r,s),kr}return kr=Ts(r||"notemac-default"),kr}function Ui(){return xt().gitSettings.corsProxy||kd}function zi(e){const r=e||xt().gitCredentials;if(r!=null)return()=>({username:r.username||r.token||"",password:r.token||""})}function Ut(){const e=xt().workspacePath||"";return cn!==null&&e===Pi?cn:Wr()==="webfs"?(cn="/","/"):(cn=e||"/",cn)}function Sy(e){const r=[],n=[],s=[],c=e.length;for(let u=0;u<c;u++){const[p,d,h,S]=e[u];if(d===0&&h===2&&S===0){s.push({path:p,status:"untracked",isStaged:!1});continue}if(d===0&&h===2&&S===2){r.push({path:p,status:"added",isStaged:!0});continue}if(d===0&&h===0&&S===2){r.push({path:p,status:"added",isStaged:!0});continue}if(d===1&&h===2&&S===2){r.push({path:p,status:"modified",isStaged:!0});continue}if(d===1&&h===2&&S===3){r.push({path:p,status:"modified",isStaged:!0}),n.push({path:p,status:"modified",isStaged:!1});continue}if(d===1&&h===2&&S===1){n.push({path:p,status:"modified",isStaged:!1});continue}if(d===1&&h===0&&S===0){r.push({path:p,status:"deleted",isStaged:!0});continue}if(d===1&&h===0&&S===1){n.push({path:p,status:"deleted",isStaged:!1});continue}}return{branch:xt().currentBranch,isRepoDirty:0<r.length+n.length+s.length,stagedFiles:r,unstagedFiles:n,untrackedFiles:s,aheadBy:0,behindBy:0,mergeInProgress:!1}}async function ky(){const e=Ft();if(e===null)return!1;try{const r=Ut();return await St.findRoot({fs:e,filepath:r}),!0}catch{return!1}}async function th(){const e=xt();if(Ft()!==null)try{const n=await ky();e.SetRepoInitialized(n),n&&(await hr(),await Rs(),await Gi())}catch{e.SetRepoInitialized(!1)}}async function gv(){const e=xt(),r=Ft();if(r!==null)try{e.SetGitOperationInProgress(!0),e.SetGitOperationError(null),await St.init({fs:r,dir:Ut(),defaultBranch:"main"}),e.SetRepoInitialized(!0),e.SetCurrentBranch("main"),await hr(),cr(Kt.GIT_STATUS_CHANGED)}catch(n){e.SetGitOperationError(n.message)}finally{e.SetGitOperationInProgress(!1)}}async function mv(e,r,n,s){const c=xt();try{c.SetGitOperationInProgress(!0),c.SetCurrentGitOperation("clone"),c.SetGitOperationProgress(0),c.SetGitOperationError(null),await St.clone({fs:r,http:Ni,dir:n,url:e,corsProxy:Ui(),singleBranch:!0,depth:1,onAuth:zi(s),onProgress:u=>{u.total&&c.SetGitOperationProgress(Math.round(u.loaded/u.total*100))}}),c.SetRepoInitialized(!0),cr(Kt.GIT_OPERATION_COMPLETE,{operation:"clone"})}catch(u){throw c.SetGitOperationError(u.message),u}finally{c.SetGitOperationInProgress(!1),c.SetCurrentGitOperation(null),c.SetGitOperationProgress(0)}}async function hr(){const e=xt(),r=Ft();if(!(r===null||!e.isRepoInitialized))try{const n=Ut();try{const u=await St.currentBranch({fs:r,dir:n,fullname:!1})||"HEAD";e.SetCurrentBranch(u)}catch{}const s=await St.statusMatrix({fs:r,dir:n}),c=Sy(s);c.branch=e.currentBranch,e.SetGitStatus(c),cr(Kt.GIT_STATUS_CHANGED)}catch{e.SetGitStatus(null)}}async function wv(e){const r=Ft();if(r!==null)try{await St.add({fs:r,dir:Ut(),filepath:e}),await hr()}catch(n){xt().SetGitOperationError(n.message)}}async function yv(){const r=xt().gitStatus;if(r===null)return;const n=Ft();if(n===null)return;const s=Ut(),c=[...r.unstagedFiles.map(u=>u.path),...r.untrackedFiles.map(u=>u.path)];await Promise.allSettled(c.map(u=>St.add({fs:n,dir:s,filepath:u}))),await hr()}async function bv(e){const r=Ft();if(r!==null)try{await St.resetIndex({fs:r,dir:Ut(),filepath:e}),await hr()}catch(n){xt().SetGitOperationError(n.message)}}async function vv(e){const r=Ft();if(r!==null)try{await St.checkout({fs:r,dir:Ut(),filepaths:[e],force:!0}),await hr()}catch(n){xt().SetGitOperationError(n.message)}}async function xv(e){const r=xt(),n=Ft();if(n===null)throw new Error("No filesystem available");try{r.SetGitOperationInProgress(!0),r.SetCurrentGitOperation("commit"),r.SetGitOperationError(null);const s=r.gitAuthor,c=await St.commit({fs:n,dir:Ut(),message:e,author:{name:s.name,email:s.email}});return await hr(),await Gi(),cr(Kt.GIT_OPERATION_COMPLETE,{operation:"commit",oid:c}),c}catch(s){throw r.SetGitOperationError(s.message),s}finally{r.SetGitOperationInProgress(!1),r.SetCurrentGitOperation(null)}}async function _v(e="origin"){const r=xt(),n=Ft();if(n!==null)try{r.SetGitOperationInProgress(!0),r.SetCurrentGitOperation("push"),r.SetGitOperationError(null),await St.push({fs:n,http:Ni,dir:Ut(),remote:e,ref:r.currentBranch,corsProxy:Ui(),onAuth:zi(),onProgress:s=>{s.total&&r.SetGitOperationProgress(Math.round(s.loaded/s.total*100))}}),await hr(),cr(Kt.GIT_OPERATION_COMPLETE,{operation:"push"})}catch(s){throw r.SetGitOperationError(s.message),s}finally{r.SetGitOperationInProgress(!1),r.SetCurrentGitOperation(null),r.SetGitOperationProgress(0)}}async function Sv(e="origin"){const r=xt(),n=Ft();if(n!==null)try{r.SetGitOperationInProgress(!0),r.SetCurrentGitOperation("pull"),r.SetGitOperationError(null),await St.pull({fs:n,http:Ni,dir:Ut(),ref:r.currentBranch,singleBranch:!0,corsProxy:Ui(),onAuth:zi(),author:{name:r.gitAuthor.name,email:r.gitAuthor.email}}),await hr(),await Gi(),cr(Kt.GIT_OPERATION_COMPLETE,{operation:"pull"})}catch(s){throw r.SetGitOperationError(s.message),s}finally{r.SetGitOperationInProgress(!1),r.SetCurrentGitOperation(null),r.SetGitOperationProgress(0)}}async function kv(e="origin"){const r=xt(),n=Ft();if(n!==null)try{r.SetGitOperationInProgress(!0),r.SetCurrentGitOperation("fetch"),r.SetGitOperationError(null),await St.fetch({fs:n,http:Ni,dir:Ut(),remote:e,corsProxy:Ui(),onAuth:zi()}),await Rs(),cr(Kt.GIT_OPERATION_COMPLETE,{operation:"fetch"})}catch(s){r.SetGitOperationError(s.message)}finally{r.SetGitOperationInProgress(!1),r.SetCurrentGitOperation(null)}}async function Ey(e){const r=xt(),n=Ft();if(n!==null)try{r.SetGitOperationError(null),await St.checkout({fs:n,dir:Ut(),ref:e}),r.SetCurrentBranch(e),await hr(),await Gi(),cr(Kt.GIT_BRANCH_CHANGED,{branch:e})}catch(s){r.SetGitOperationError(s.message)}}async function Ev(e,r=!0){const n=xt(),s=Ft();if(s!==null)try{n.SetGitOperationError(null),await St.branch({fs:s,dir:Ut(),ref:e}),r?await Ey(e):await Rs()}catch(c){n.SetGitOperationError(c.message)}}async function Rs(){const e=xt(),r=Ft();if(r!==null)try{const n=Ut(),s=await St.listBranches({fs:r,dir:n}),c=e.currentBranch,u=s.map(p=>({name:p,isRemote:!1,isCurrentBranch:p===c,lastCommitOid:""}));try{const p=await St.listBranches({fs:r,dir:n,remote:"origin"});for(const d of p)u.push({name:`origin/${d}`,isRemote:!0,isCurrentBranch:!1,lastCommitOid:""})}catch{}e.SetBranches(u);try{const d=(await St.listRemotes({fs:r,dir:n})).map(h=>({name:h.remote,url:h.url}));e.SetRemotes(d)}catch{e.SetRemotes([])}}catch{}}async function Gi(e=Pg){const r=xt(),n=Ft();if(n!==null)try{const s=Ut(),u=(await St.log({fs:n,dir:s,depth:e})).map(p=>({oid:p.oid,message:p.commit.message,author:{name:p.commit.author.name,email:p.commit.author.email},timestamp:p.commit.author.timestamp}));r.SetCommitLog(u)}catch{r.SetCommitLog([])}}async function Ay(e){const r=Ft();if(r===null)return null;try{const n=Ut(),s=await St.resolveRef({fs:r,dir:n,ref:"HEAD"}),{blob:c}=await St.readBlob({fs:r,dir:n,oid:s,filepath:e});return new TextDecoder().decode(c)}catch{return null}}async function Av(){var c;const e=xt(),r=e.gitStatus;if(r===null||r.stagedFiles.length===0)return"";const n=[],s=r.stagedFiles.length;for(let u=0;u<s;u++){const p=r.stagedFiles[u];if(n.push(`${p.status}: ${p.path}`),p.status==="modified"){const d=await Ay(p.path);if(d!==null){const h=d.split(`
`),x=(((c=e.tabs.find(_=>{var R;return(R=_.path)==null?void 0:R.endsWith(p.path)}))==null?void 0:c.content)||"").split(`
`).length-h.length;x!==0&&n.push(`  (${0<x?"+":""}${x} lines)`)}}}return n.join(`
`)}function Yf(e){e.preventDefault(),e.stopPropagation()}async function Jf(e){var r;if(e.preventDefault(),e.stopPropagation(),(r=e.dataTransfer)!=null&&r.files){const n=Array.from(e.dataTransfer.files),s=$e.getState();for(const c of n){const u=await c.text();s.addTab({name:c.name,content:u,language:dr(c.name),lineEnding:Ar(u)})}}}function Iy(){var e,r;window.electronAPI&&(window.electronAPI.onFileOpened(n=>{const s=$e.getState(),c=s.tabs.find(u=>u.path===n.path);c?s.setActiveTab(c.id):(s.addTab({name:n.name,path:n.path,content:n.content,language:dr(n.name),lineEnding:Ar(n.content)}),s.addRecentFile(n.path,n.name))}),window.electronAPI.onFolderOpened(n=>{const s=$e.getState();s.setFileTree(n.tree),s.setWorkspacePath(n.path),s.setSidebarPanel("explorer"),eh(),th()}),window.electronAPI.onMenuAction((n,s)=>{const c=$e.getState();Rd(n,c.activeTabId,c.tabs,c.zoomLevel,s)}),(r=(e=window.electronAPI).onFileSaved)==null||r.call(e,n=>{const s=$e.getState();s.activeTabId!==null&&s.updateTab(s.activeTabId,{name:n.name,path:n.path,isModified:!1,language:dr(n.name)})}))}const Cy=[{group:"Unicode",items:[{value:"utf-8",label:"UTF-8"},{value:"utf-8-bom",label:"UTF-8 BOM"},{value:"utf-16le",label:"UTF-16 LE"},{value:"utf-16be",label:"UTF-16 BE"}]},{group:"Western European",items:[{value:"windows-1252",label:"Windows-1252 (ANSI)"},{value:"iso-8859-1",label:"ISO 8859-1 (Latin I)"},{value:"iso-8859-15",label:"ISO 8859-15 (Latin 9)"},{value:"cp850",label:"OEM 850 (DOS Latin)"}]},{group:"Central European",items:[{value:"windows-1250",label:"Windows-1250"},{value:"iso-8859-2",label:"ISO 8859-2 (Latin II)"}]},{group:"Cyrillic",items:[{value:"windows-1251",label:"Windows-1251"},{value:"iso-8859-5",label:"ISO 8859-5"},{value:"koi8-r",label:"KOI8-R"},{value:"koi8-u",label:"KOI8-U"},{value:"cp866",label:"OEM 866 (DOS Cyrillic)"}]},{group:"Greek",items:[{value:"windows-1253",label:"Windows-1253"},{value:"iso-8859-7",label:"ISO 8859-7"}]},{group:"Turkish",items:[{value:"windows-1254",label:"Windows-1254"},{value:"iso-8859-9",label:"ISO 8859-9"}]},{group:"Hebrew",items:[{value:"windows-1255",label:"Windows-1255"},{value:"iso-8859-8",label:"ISO 8859-8"}]},{group:"Arabic",items:[{value:"windows-1256",label:"Windows-1256"},{value:"iso-8859-6",label:"ISO 8859-6"}]},{group:"Baltic",items:[{value:"windows-1257",label:"Windows-1257"},{value:"iso-8859-13",label:"ISO 8859-13"}]},{group:"Vietnamese",items:[{value:"windows-1258",label:"Windows-1258"}]},{group:"East Asian",items:[{value:"big5",label:"Big5 (Traditional Chinese)"},{value:"gb2312",label:"GB2312 (Simplified Chinese)"},{value:"shift_jis",label:"Shift JIS (Japanese)"},{value:"euc-kr",label:"EUC-KR (Korean)"},{value:"iso-2022-jp",label:"ISO-2022-JP"}]},{group:"Thai",items:[{value:"tis-620",label:"TIS-620 (Thai)"}]},{group:"DOS",items:[{value:"cp437",label:"OEM 437 (US)"},{value:"cp737",label:"OEM 737 (Greek)"},{value:"cp775",label:"OEM 775 (Baltic)"},{value:"cp852",label:"OEM 852 (Latin II)"},{value:"cp855",label:"OEM 855 (Cyrillic)"},{value:"cp857",label:"OEM 857 (Turkish)"},{value:"cp858",label:"OEM 858 (Latin I + Euro)"},{value:"cp860",label:"OEM 860 (Portuguese)"},{value:"cp861",label:"OEM 861 (Icelandic)"},{value:"cp862",label:"OEM 862 (Hebrew)"},{value:"cp863",label:"OEM 863 (French Canadian)"},{value:"cp865",label:"OEM 865 (Nordic)"},{value:"cp869",label:"OEM 869 (Greek)"}]}];function Qf(){return Cy}const Ty=[{value:"plaintext",label:"Normal Text"},{value:"actionscript",label:"ActionScript"},{value:"ada",label:"Ada"},{value:"asp",label:"ASP"},{value:"asm",label:"Assembly"},{value:"autoit",label:"AutoIt"},{value:"bat",label:"Batch"},{value:"c",label:"C"},{value:"cpp",label:"C++"},{value:"csharp",label:"C#"},{value:"caml",label:"OCaml"},{value:"cmake",label:"CMake"},{value:"cobol",label:"COBOL"},{value:"coffeescript",label:"CoffeeScript"},{value:"css",label:"CSS"},{value:"d",label:"D"},{value:"dart",label:"Dart"},{value:"diff",label:"Diff"},{value:"dockerfile",label:"Dockerfile"},{value:"elixir",label:"Elixir"},{value:"erlang",label:"Erlang"},{value:"fortran",label:"Fortran"},{value:"fsharp",label:"F#"},{value:"gdscript",label:"GDScript"},{value:"go",label:"Go"},{value:"graphql",label:"GraphQL"},{value:"haskell",label:"Haskell"},{value:"html",label:"HTML"},{value:"ini",label:"INI"},{value:"java",label:"Java"},{value:"javascript",label:"JavaScript"},{value:"json",label:"JSON"},{value:"json5",label:"JSON5"},{value:"julia",label:"Julia"},{value:"kotlin",label:"Kotlin"},{value:"latex",label:"LaTeX"},{value:"less",label:"LESS"},{value:"lisp",label:"Lisp"},{value:"lua",label:"Lua"},{value:"makefile",label:"Makefile"},{value:"markdown",label:"Markdown"},{value:"matlab",label:"MATLAB"},{value:"nim",label:"Nim"},{value:"nsis",label:"NSIS"},{value:"objective-c",label:"Objective-C"},{value:"pascal",label:"Pascal"},{value:"perl",label:"Perl"},{value:"php",label:"PHP"},{value:"powershell",label:"PowerShell"},{value:"properties",label:"Properties"},{value:"python",label:"Python"},{value:"r",label:"R"},{value:"raku",label:"Raku"},{value:"restructuredtext",label:"reStructuredText"},{value:"ruby",label:"Ruby"},{value:"rust",label:"Rust"},{value:"sas",label:"SAS"},{value:"scala",label:"Scala"},{value:"scheme",label:"Scheme"},{value:"scss",label:"SCSS"},{value:"shell",label:"Shell/Bash"},{value:"smalltalk",label:"Smalltalk"},{value:"sql",label:"SQL"},{value:"swift",label:"Swift"},{value:"tcl",label:"Tcl"},{value:"toml",label:"TOML"},{value:"typescript",label:"TypeScript"},{value:"vb",label:"Visual Basic"},{value:"verilog",label:"Verilog"},{value:"vhdl",label:"VHDL"},{value:"xml",label:"XML"},{value:"yaml",label:"YAML"}];function Ry(){return Ty}function Oy({theme:e,onAction:r,isElectron:n}){const[s,c]=ve.useState(null),[u,p]=ve.useState(null),[d,h]=ve.useState(null),S=ve.useRef(null),{settings:x,isRecordingMacro:_}=$e(),R=navigator.platform.includes("Mac"),y=R?"":"Ctrl+",j=R?"":"Shift+",X=R?"":"Alt+";ve.useEffect(()=>{const W=ne=>{S.current&&!S.current.contains(ne.target)&&(c(null),h(null))};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const L=[];Qf().forEach(W=>{L.push({type:"separator",label:`--- ${W.group} ---`}),W.items.forEach(ne=>{L.push({label:ne.label,action:"encoding",value:ne.value})})});const F=Ry().map(W=>({label:W.label,action:"language",value:W.value})),N={File:[{label:"New",shortcut:`${y}N`,action:"new"},{type:"separator",label:""},{label:"Open...",shortcut:`${y}O`,action:"open"},{label:"Open Folder as Workspace",action:"open-folder"},{label:"Reload from Disk",action:"reload-from-disk"},{type:"separator",label:""},{label:"Save",shortcut:`${y}S`,action:"save"},{label:"Save As...",shortcut:`${j}${y}S`,action:"save-as"},{label:"Save Copy As...",action:"save-copy-as"},{label:"Save All",action:"save-all"},{type:"separator",label:""},{label:"Rename...",action:"rename-file"},{label:"Delete from Disk",action:"delete-file"},{type:"separator",label:""},{label:"Restore Last Closed Tab",shortcut:`${j}${y}T`,action:"restore-last-closed"},{type:"separator",label:""},{label:"Close Tab",shortcut:`${y}W`,action:"close-tab"},{label:"Close All",action:"close-all"},{label:"Close Others",action:"close-others"},{label:"Close Tabs to Left",action:"close-tabs-to-left"},{label:"Close Tabs to Right",action:"close-tabs-to-right"},{label:"Close Unchanged",action:"close-unchanged"},{label:"Close All but Pinned",action:"close-all-but-pinned"},{type:"separator",label:""},{label:"Pin Tab",action:"pin-tab"},{type:"separator",label:""},{label:"Load Session...",action:"load-session"},{label:"Save Session...",action:"save-session"},{type:"separator",label:""},{label:"Print...",shortcut:`${y}P`,action:"print"}],Edit:[{label:"Undo",shortcut:`${y}Z`,action:"undo"},{label:"Redo",shortcut:`${j}${y}Z`,action:"redo"},{type:"separator",label:""},{label:"Cut",shortcut:`${y}X`,action:"cut"},{label:"Copy",shortcut:`${y}C`,action:"copy"},{label:"Paste",shortcut:`${y}V`,action:"paste"},{label:"Select All",shortcut:`${y}A`,action:"select-all"},{type:"separator",label:""},{label:"Duplicate Line",shortcut:`${y}D`,action:"duplicate-line"},{label:"Delete Line",shortcut:`${j}${y}K`,action:"delete-line"},{label:"Transpose Line",shortcut:`${X}T`,action:"transpose-line"},{label:"Move Line Up",shortcut:`${X}`,action:"move-line-up"},{label:"Move Line Down",shortcut:`${X}`,action:"move-line-down"},{label:"Split Lines",action:"split-lines"},{label:"Join Lines",action:"join-lines"},{type:"separator",label:""},{label:"Toggle Comment",shortcut:`${y}/`,action:"toggle-comment"},{label:"Block Comment",shortcut:`${j}${X}A`,action:"block-comment"},{type:"separator",label:""},{label:"UPPERCASE",shortcut:`${j}${y}U`,action:"uppercase"},{label:"lowercase",shortcut:`${y}U`,action:"lowercase"},{label:"Proper Case",action:"proper-case"},{label:"Sentence Case",action:"sentence-case"},{label:"Invert Case",action:"invert-case"},{label:"Random Case",action:"random-case"},{type:"separator",label:""},{label:"Insert Date/Time",action:"insert-datetime"},{type:"separator",label:""},{label:"Column Editor...",shortcut:`${X}C`,action:"column-editor"},{label:"Clipboard History",shortcut:`${y}${j}V`,action:"clipboard-history"},{label:"Character Panel",action:"char-panel"},{type:"separator",label:""},{label:"Copy File Path",action:"copy-file-path"},{label:"Copy File Name",action:"copy-file-name"},{label:"Copy File Dir",action:"copy-file-dir"},{type:"separator",label:""},{label:"Compare Files...",action:"compare-files"},{label:"Snippet Manager...",action:"snippet-manager"},{type:"separator",label:""},{label:"Set Read-Only",action:"toggle-readonly"}],Search:[{label:"Find...",shortcut:`${y}F`,action:"find"},{label:"Replace...",shortcut:`${y}H`,action:"replace"},{label:"Find in Files...",shortcut:`${j}${y}F`,action:"find-in-files"},{label:"Incremental Search",shortcut:`${y}${X}I`,action:"incremental-search"},{type:"separator",label:""},{label:"Mark...",action:"mark"},{label:"Mark Style 1",action:"mark-style",value:1},{label:"Mark Style 2",action:"mark-style",value:2},{label:"Mark Style 3",action:"mark-style",value:3},{label:"Mark Style 4",action:"mark-style",value:4},{label:"Mark Style 5",action:"mark-style",value:5},{label:"Clear All Marks",action:"clear-marks"},{type:"separator",label:""},{label:"Cut Marked Lines",action:"cut-marked-lines"},{label:"Copy Marked Lines",action:"copy-marked-lines"},{label:"Paste to (Replace) Marked Lines",action:"paste-marked-lines"},{label:"Delete Marked Lines",action:"delete-marked-lines"},{label:"Delete Unmarked Lines",action:"delete-unmarked-lines"},{label:"Inverse Marks",action:"inverse-marks"},{type:"separator",label:""},{label:"Go to Line...",shortcut:`${y}G`,action:"goto-line"},{label:"Go to Matching Bracket",shortcut:`${j}${y}\\`,action:"goto-bracket"},{label:"Select to Matching Bracket",action:"select-to-bracket"},{type:"separator",label:""},{label:"Toggle Bookmark",shortcut:`${y}F2`,action:"toggle-bookmark"},{label:"Next Bookmark",shortcut:"F2",action:"next-bookmark"},{label:"Previous Bookmark",shortcut:`${j}F2`,action:"prev-bookmark"},{label:"Clear All Bookmarks",action:"clear-bookmarks"},{type:"separator",label:""},{label:"Find Characters in Range...",action:"find-char-in-range"}],View:[{label:"Word Wrap",type:"checkbox",checked:x.wordWrap,action:"word-wrap"},{type:"separator",label:""},{label:"Show Whitespace",type:"checkbox",checked:x.showWhitespace,action:"show-whitespace"},{label:"Show EOL",type:"checkbox",checked:x.showEOL,action:"show-eol"},{label:"Show Non-Printable Characters",type:"checkbox",checked:x.showNonPrintable,action:"show-non-printable"},{label:"Show Wrap Symbol",type:"checkbox",checked:x.showWrapSymbol,action:"show-wrap-symbol"},{label:"Show Indent Guides",type:"checkbox",checked:x.showIndentGuides,action:"indent-guide"},{label:"Show Line Numbers",type:"checkbox",checked:x.showLineNumbers,action:"show-line-numbers"},{label:"Show Minimap",type:"checkbox",checked:x.showMinimap,action:"toggle-minimap"},{type:"separator",label:""},{label:"Fold All",action:"fold-all"},{label:"Unfold All",action:"unfold-all"},{label:"Fold Level 1",action:"fold-level",value:1},{label:"Fold Level 2",action:"fold-level",value:2},{label:"Fold Level 3",action:"fold-level",value:3},{label:"Fold Level 4",action:"fold-level",value:4},{label:"Fold Level 5",action:"fold-level",value:5},{label:"Fold Level 6",action:"fold-level",value:6},{label:"Fold Level 7",action:"fold-level",value:7},{label:"Fold Level 8",action:"fold-level",value:8},{type:"separator",label:""},{label:"Zoom In",shortcut:`${y}+`,action:"zoom-in"},{label:"Zoom Out",shortcut:`${y}-`,action:"zoom-out"},{label:"Reset Zoom",shortcut:`${y}0`,action:"zoom-reset"},{type:"separator",label:""},{label:"Toggle Sidebar",shortcut:`${y}B`,action:"toggle-sidebar"},{label:"Document List",action:"show-doc-list"},{label:"Function List",action:"show-function-list"},{label:"Project Panel",action:"show-project-panel"},{type:"separator",label:""},{label:"Distraction-Free Mode",type:"checkbox",checked:x.distractionFreeMode,action:"distraction-free"},{label:"Always on Top",type:"checkbox",checked:x.alwaysOnTop,action:"always-on-top"},{type:"separator",label:""},{label:"Synchronize Vertical Scrolling",type:"checkbox",checked:x.syncScrollVertical,action:"sync-scroll-v"},{label:"Synchronize Horizontal Scrolling",type:"checkbox",checked:x.syncScrollHorizontal,action:"sync-scroll-h"},{type:"separator",label:""},{label:"Split Right",action:"split-right"},{label:"Split Down",action:"split-down"},{label:"Close Split",action:"close-split"},{type:"separator",label:""},{label:"Summary...",action:"show-summary"},{label:"Monitoring (tail -f)",action:"toggle-monitoring"},{type:"separator",label:""},{label:"Command Palette...",shortcut:`${j}${y}P`,action:"command-palette"},{label:"Quick Open...",shortcut:`${y}P`,action:"quick-open"},{label:"Toggle Terminal",shortcut:"Ctrl+`",action:"toggle-terminal"}],Encoding:[...Qf().flatMap(W=>[{type:"separator",label:` ${W.group} `},...W.items.map(ne=>({label:ne.label,action:"encoding",value:ne.value}))]),{type:"separator",label:""},{label:"Line Ending: LF (Unix/Mac)",action:"line-ending",value:"LF"},{label:"Line Ending: CRLF (Windows)",action:"line-ending",value:"CRLF"},{label:"Line Ending: CR (Old Mac)",action:"line-ending",value:"CR"}],Language:F,"Line Ops":[{label:"Sort Lines Ascending",action:"sort-asc"},{label:"Sort Lines Descending",action:"sort-desc"},{label:"Sort Lines Case Insensitive (Asc)",action:"sort-asc-ci"},{label:"Sort Lines Case Insensitive (Desc)",action:"sort-desc-ci"},{label:"Sort Lines by Length (Asc)",action:"sort-len-asc"},{label:"Sort Lines by Length (Desc)",action:"sort-len-desc"},{type:"separator",label:""},{label:"Remove Duplicate Lines",action:"remove-duplicates"},{label:"Remove Consecutive Duplicate Lines",action:"remove-consecutive-duplicates"},{label:"Remove Empty Lines",action:"remove-empty-lines"},{label:"Remove Empty Lines (Containing Blank)",action:"remove-blank-lines"},{type:"separator",label:""},{label:"Trim Trailing Spaces",action:"trim-trailing"},{label:"Trim Leading Spaces",action:"trim-leading"},{label:"Trim Leading and Trailing Spaces",action:"trim-both"},{label:"EOL to Space",action:"eol-to-space"},{type:"separator",label:""},{label:"TAB to Space",action:"tab-to-space"},{label:"Space to TAB (Leading)",action:"space-to-tab-leading"},{label:"Space to TAB (All)",action:"space-to-tab-all"},{type:"separator",label:""},{label:"Insert Blank Line Above",action:"insert-blank-above"},{label:"Insert Blank Line Below",action:"insert-blank-below"},{label:"Reverse Line Order",action:"reverse-lines"}],Macro:[{label:_?"Stop Recording":"Start Recording",shortcut:`${j}${y}R`,action:_?"macro-stop":"macro-start"},{label:"Playback",shortcut:`${j}${y}P`,action:"macro-playback"},{type:"separator",label:""},{label:"Run Macro Multiple Times...",action:"macro-run-multiple"},{label:"Save Recorded Macro...",action:"macro-save"}],Git:[{label:"Source Control Panel",action:"show-git-panel"},{type:"separator",label:""},{label:"Clone Repository...",action:"clone-repository"},{type:"separator",label:""},{label:"Compare with HEAD",action:"compare-files"},{type:"separator",label:""},{label:"Git Settings...",action:"git-settings"}],Run:[{label:"Run Command...",action:"run-command"},{type:"separator",label:""},{label:"Search on Google",action:"search-google"},{label:"Search on Wikipedia",action:"search-wikipedia"},{label:"Open in Browser",action:"open-in-browser"}],Tools:[{label:"MD5 - Generate",action:"hash-md5"},{label:"MD5 - Copy to Clipboard",action:"hash-md5-clipboard"},{label:"SHA-1 - Generate",action:"hash-sha1"},{label:"SHA-1 - Copy to Clipboard",action:"hash-sha1-clipboard"},{label:"SHA-256 - Generate",action:"hash-sha256"},{label:"SHA-256 - Copy to Clipboard",action:"hash-sha256-clipboard"},{label:"SHA-512 - Generate",action:"hash-sha512"},{label:"SHA-512 - Copy to Clipboard",action:"hash-sha512-clipboard"},{type:"separator",label:""},{label:"MD5 - Generate from File",action:"hash-md5-file"},{label:"SHA-256 - Generate from File",action:"hash-sha256-file"},{type:"separator",label:""},{label:"Base64 Encode",action:"base64-encode"},{label:"Base64 Decode",action:"base64-decode"},{type:"separator",label:""},{label:"URL Encode",action:"url-encode"},{label:"URL Decode",action:"url-decode"},{type:"separator",label:""},{label:"JSON Format",action:"json-format"},{label:"JSON Minify",action:"json-minify"}],AI:[{label:"AI Chat Panel",shortcut:"Ctrl+Shift+A",action:"ai-chat"},{type:"separator",label:""},{label:"Explain Code",shortcut:"Ctrl+Shift+E",action:"ai-explain"},{label:"Refactor Code",shortcut:"Ctrl+Shift+R",action:"ai-refactor"},{label:"Generate Tests",action:"ai-generate-tests"},{label:"Generate Documentation",action:"ai-generate-docs"},{label:"Fix Error",action:"ai-fix-error"},{label:"Simplify Code",action:"ai-simplify"},{type:"separator",label:""},{label:"Toggle Inline Completions",action:"ai-toggle-inline"},{type:"separator",label:""},{label:"AI Settings...",action:"ai-settings"}],Settings:[{label:"Preferences...",shortcut:`${y},`,action:"preferences"},{label:"Shortcut Mapper...",action:"shortcut-mapper"},{type:"separator",label:""},{label:"About Notemac++",action:"about"}]},G=W=>{W.type!=="separator"&&(W.label.startsWith("")||(W.type==="checkbox"?r(W.action,!W.checked):W.action&&r(W.action,W.value),c(null),h(null)))};return C.jsxs("div",{ref:S,style:{display:"flex",alignItems:"center",height:30,backgroundColor:e.menuBg,borderBottom:`1px solid ${e.border}`,paddingLeft:8,flexShrink:0},children:[C.jsx("span",{style:{fontWeight:600,fontSize:13,marginRight:16,color:e.accent},children:"N++"}),Object.entries(N).map(([W,ne])=>C.jsxs("div",{style:{position:"relative"},children:[C.jsx("div",{style:{padding:"4px 10px",cursor:"pointer",borderRadius:4,fontSize:13,backgroundColor:s===W?e.bgHover:"transparent",color:s===W?e.text:e.menuText},onClick:()=>c(s===W?null:W),onMouseEnter:()=>s&&c(W),children:W}),s===W&&C.jsx("div",{style:{position:"absolute",top:"100%",left:0,minWidth:280,maxHeight:"calc(100vh - 80px)",overflowY:"auto",backgroundColor:e.menuBg,border:`1px solid ${e.border}`,borderRadius:6,padding:"4px 0",zIndex:1e4,boxShadow:"0 4px 16px rgba(0,0,0,0.3)"},children:ne.map((Z,z)=>{if(Z.type==="separator")return Z.label&&Z.label.startsWith("")?C.jsx("div",{style:{padding:"4px 16px",fontSize:11,fontWeight:700,color:e.textMuted,textTransform:"uppercase",letterSpacing:.5,cursor:"default"},children:Z.label.replace(/\u2500 /g,"").replace(/ \u2500/g,"")},z):C.jsx("div",{style:{height:1,backgroundColor:e.border,margin:"4px 0"}},z);const B=`${W}-${Z.label}-${z}`;return C.jsxs("div",{style:{padding:"5px 16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,fontSize:13,backgroundColor:u===B?e.bgHover:"transparent",color:e.menuText},onClick:()=>G(Z),onMouseEnter:()=>p(B),onMouseLeave:()=>p(null),children:[C.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[Z.type==="checkbox"&&C.jsx("span",{style:{width:16,textAlign:"center"},children:Z.checked?"":""}),Z.label]}),Z.shortcut&&C.jsx("span",{style:{opacity:.5,fontSize:11},children:Z.shortcut})]},z)})})]},W)),_&&C.jsxs("div",{className:"recording-indicator",style:{display:"flex",alignItems:"center",gap:6,marginLeft:"auto",marginRight:12,color:"#ff4444",fontSize:12,fontWeight:600},children:[C.jsx("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:"#ff4444",display:"inline-block"}}),"REC"]})]})}const Bt={newFile:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"M9 1H4a1 1 0 00-1 1v12a1 1 0 001 1h8a1 1 0 001-1V5L9 1z"}),C.jsx("path",{d:"M9 1v4h4"}),C.jsx("path",{d:"M8 8v4M6 10h4"})]}),open:e=>C.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:C.jsx("path",{d:"M2 13V4a1 1 0 011-1h3.5l1.5 1.5H13a1 1 0 011 1V13a1 1 0 01-1 1H3a1 1 0 01-1-1z"})}),save:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"M13 14H3a1 1 0 01-1-1V3a1 1 0 011-1h7l3 3v8a1 1 0 01-1 1z"}),C.jsx("path",{d:"M11 14V9H5v5"}),C.jsx("path",{d:"M5 2v3h5"})]}),saveAll:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"M12 14H4a1 1 0 01-1-1V4a1 1 0 011-1h5.5l2.5 2.5V13a1 1 0 01-1 1z"}),C.jsx("path",{d:"M10 14V10H6v4"}),C.jsx("path",{d:"M6 3v2h3.5"}),C.jsx("path",{d:"M14 5v7.5",opacity:"0.5"}),C.jsx("path",{d:"M5 2H14.5",opacity:"0.5"})]}),undo:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"M3 7h6a3.5 3.5 0 010 7H7"}),C.jsx("path",{d:"M6 4L3 7l3 3"})]}),redo:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"M13 7H7a3.5 3.5 0 000 7h2"}),C.jsx("path",{d:"M10 4l3 3-3 3"})]}),find:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("circle",{cx:"7",cy:"7",r:"4"}),C.jsx("path",{d:"M14 14l-3.5-3.5"})]}),replace:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("circle",{cx:"5.5",cy:"5.5",r:"3"}),C.jsx("path",{d:"M14 14l-2.8-2.8"}),C.jsx("path",{d:"M10 7l2-2 2 2"}),C.jsx("path",{d:"M12 5v5.5a1.5 1.5 0 01-3 0"})]}),zoomIn:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("circle",{cx:"7",cy:"7",r:"4"}),C.jsx("path",{d:"M14 14l-3.5-3.5"}),C.jsx("path",{d:"M7 5v4M5 7h4"})]}),zoomOut:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("circle",{cx:"7",cy:"7",r:"4"}),C.jsx("path",{d:"M14 14l-3.5-3.5"}),C.jsx("path",{d:"M5 7h4"})]}),record:e=>C.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:C.jsx("circle",{cx:"8",cy:"8",r:"5",fill:e})}),stop:e=>C.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:C.jsx("rect",{x:"4",y:"4",width:"8",height:"8",rx:"1",fill:e})}),play:e=>C.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:e,children:C.jsx("polygon",{points:"5,3 13,8 5,13"})}),sidebar:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("rect",{x:"2",y:"2",width:"12",height:"12",rx:"1"}),C.jsx("path",{d:"M6 2v12"})]}),wordWrap:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"M3 4h10M3 8h8a2 2 0 010 4H8"}),C.jsx("path",{d:"M10 10l-2 2 2 2"})]}),whitespace:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("path",{d:"M3 12h10"}),C.jsx("circle",{cx:"5",cy:"7",r:"0.8",fill:e}),C.jsx("circle",{cx:"8",cy:"7",r:"0.8",fill:e}),C.jsx("circle",{cx:"11",cy:"7",r:"0.8",fill:e})]}),settings:e=>C.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("circle",{cx:"8",cy:"8",r:"2"}),C.jsx("path",{d:"M8 1.5v2M8 12.5v2M1.5 8h2M12.5 8h2M3.4 3.4l1.4 1.4M11.2 11.2l1.4 1.4M3.4 12.6l1.4-1.4M11.2 4.8l1.4-1.4"})]})};function Nt({icon:e,title:r,onClick:n,theme:s,active:c,danger:u}){const[p,d]=kt.useState(!1);return C.jsx("button",{title:r,onClick:n,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{background:p?s.bgHover:c?s.bgActive:"transparent",border:"none",color:u?s.danger:c?s.accent:s.textSecondary,cursor:"pointer",padding:"4px 6px",borderRadius:4,fontSize:16,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",minWidth:28,height:28},children:e})}function Gn({theme:e}){return C.jsx("div",{style:{width:1,height:20,backgroundColor:e.border,margin:"0 4px"}})}function Py({theme:e,onAction:r}){const{isRecordingMacro:n,settings:s}=$e(),c=e.textSecondary,u=e.danger||"#e53e3e";return C.jsxs("div",{style:{display:"flex",alignItems:"center",height:36,backgroundColor:e.bgSecondary,borderBottom:`1px solid ${e.border}`,padding:"0 8px",gap:2,flexShrink:0},children:[C.jsx(Nt,{icon:Bt.newFile(c),title:"New (Cmd+N)",onClick:()=>r("new"),theme:e}),C.jsx(Nt,{icon:Bt.open(c),title:"Open (Cmd+O)",onClick:()=>r("open"),theme:e}),C.jsx(Nt,{icon:Bt.save(c),title:"Save (Cmd+S)",onClick:()=>r("save"),theme:e}),C.jsx(Nt,{icon:Bt.saveAll(c),title:"Save All",onClick:()=>r("save-all"),theme:e}),C.jsx(Gn,{theme:e}),C.jsx(Nt,{icon:Bt.undo(c),title:"Undo (Cmd+Z)",onClick:()=>r("undo"),theme:e}),C.jsx(Nt,{icon:Bt.redo(c),title:"Redo (Cmd+Shift+Z)",onClick:()=>r("redo"),theme:e}),C.jsx(Gn,{theme:e}),C.jsx(Nt,{icon:Bt.find(c),title:"Find (Cmd+F)",onClick:()=>r("find"),theme:e}),C.jsx(Nt,{icon:Bt.replace(c),title:"Replace (Cmd+H)",onClick:()=>r("replace"),theme:e}),C.jsx(Gn,{theme:e}),C.jsx(Nt,{icon:Bt.zoomIn(c),title:"Zoom In (Cmd++)",onClick:()=>r("zoom-in"),theme:e}),C.jsx(Nt,{icon:Bt.zoomOut(c),title:"Zoom Out (Cmd+-)",onClick:()=>r("zoom-out"),theme:e}),C.jsx(Gn,{theme:e}),C.jsx(Nt,{icon:n?Bt.stop(u):Bt.record(c),title:n?"Stop Recording":"Start Recording",onClick:()=>r(n?"macro-stop":"macro-start"),theme:e,danger:n}),C.jsx(Nt,{icon:Bt.play(c),title:"Playback Macro",onClick:()=>r("macro-playback"),theme:e}),C.jsx(Gn,{theme:e}),C.jsx(Nt,{icon:Bt.sidebar(c),title:"Toggle Sidebar (Cmd+B)",onClick:()=>r("toggle-sidebar"),theme:e}),C.jsx(Nt,{icon:Bt.wordWrap(c),title:"Word Wrap",onClick:()=>r("word-wrap",!s.wordWrap),theme:e}),C.jsx(Nt,{icon:Bt.whitespace(c),title:"Show Whitespace",onClick:()=>r("show-whitespace",!s.showWhitespace),theme:e}),C.jsx("div",{style:{flex:1}}),C.jsx(Nt,{icon:Bt.settings(c),title:"Settings (Cmd+,)",onClick:()=>r("preferences"),theme:e})]})}function My({theme:e}){const{tabs:r,activeTabId:n,setActiveTab:s,closeTab:c,addTab:u,closeOtherTabs:p,closeAllTabs:d,moveTab:h,setSplitView:S,closeTabsToLeft:x,closeTabsToRight:_,closeUnchangedTabs:R,closeAllButPinned:y,togglePinTab:j,setTabColor:X}=$e(),[L,F]=ve.useState(null),[N,G]=ve.useState(null),[W,ne]=ve.useState(null),[Z,z]=ve.useState(!1),B=re=>{F(re)},Y=(re,me)=>{re.preventDefault(),G(me)},U=re=>{L!==null&&L!==re&&h(L,re),F(null),G(null)},ce=(re,me)=>{re.preventDefault(),ne({x:re.clientX,y:re.clientY,tabId:me}),z(!1)},oe=(re,me)=>{re.button===1&&(re.preventDefault(),c(me))};kt.useEffect(()=>{const re=()=>{ne(null),z(!1)};if(W)return document.addEventListener("click",re),()=>document.removeEventListener("click",re)},[W]);const de=W?r.find(re=>re.id===W.tabId):null;return C.jsxs(C.Fragment,{children:[C.jsxs("div",{style:{display:"flex",alignItems:"flex-end",backgroundColor:e.tabBg,borderBottom:`1px solid ${e.border}`,overflowX:"auto",overflowY:"hidden",scrollbarWidth:"thin",flexShrink:0,height:_a},children:[r.map((re,me)=>{const ae=re.id===n,ie=Yl[re.tabColor];return C.jsxs("div",{draggable:!0,onDragStart:()=>B(me),onDragOver:se=>Y(se,me),onDrop:()=>U(me),onDragEnd:()=>{F(null),G(null)},onClick:()=>s(re.id),onMouseDown:se=>oe(se,re.id),onContextMenu:se=>ce(se,re.id),style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",cursor:"pointer",backgroundColor:ae?e.tabActiveBg:e.tabBg,color:ae?e.tabActiveText:e.textSecondary,borderRight:`1px solid ${e.tabBorder}`,borderTop:re.tabColor!=="none"?`3px solid ${ie}`:ae?`2px solid ${e.accent}`:"2px solid transparent",borderBottom:ae?"none":`1px solid ${e.border}`,minWidth:Ug,maxWidth:zg,height:_a,position:"relative",opacity:L===me?.5:1,borderLeft:N===me?`2px solid ${e.accent}`:"none",fontSize:13,whiteSpace:"nowrap",flexShrink:0},children:[C.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",flex:1,display:"flex",alignItems:"center",gap:4},children:[re.isPinned&&C.jsx("span",{style:{fontSize:10,opacity:.7},title:"Pinned",children:""}),re.isModified&&C.jsx("span",{style:{color:e.warning},children:""}),re.isReadOnly&&C.jsx("span",{style:{fontSize:10,opacity:.7},title:"Read Only",children:""}),re.name]}),!re.isPinned&&C.jsx("span",{onClick:se=>{se.stopPropagation(),c(re.id)},style:{width:tu,height:tu,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,fontSize:14,opacity:.5,flexShrink:0},onMouseEnter:se=>{se.target.style.opacity="1",se.target.style.backgroundColor=e.bgHover},onMouseLeave:se=>{se.target.style.opacity="0.5",se.target.style.backgroundColor="transparent"},children:""})]},re.id)}),C.jsx("div",{onClick:()=>u(),style:{display:"flex",alignItems:"center",justifyContent:"center",width:Gg,height:_a,cursor:"pointer",color:e.textMuted,fontSize:18,flexShrink:0},onMouseEnter:re=>{re.target.style.color=e.text},onMouseLeave:re=>{re.target.style.color=e.textMuted},children:"+"})]}),W&&C.jsxs("div",{className:"context-menu",style:{left:W.x,top:W.y,backgroundColor:e.menuBg,border:`1px solid ${e.border}`,position:"fixed",zIndex:2e4,borderRadius:6,padding:"4px 0",minWidth:200,boxShadow:"0 4px 16px rgba(0,0,0,0.3)"},children:[[{label:"Close",action:()=>c(W.tabId)},{label:"Close Others",action:()=>p(W.tabId)},{label:"Close Tabs to the Left",action:()=>x(W.tabId)},{label:"Close Tabs to the Right",action:()=>_(W.tabId)},{label:"Close All",action:()=>d()},{label:"Close Unchanged",action:()=>R()},{label:"Close All but Pinned",action:()=>y()},{label:"separator"},{label:de!=null&&de.isPinned?"Unpin Tab":"Pin Tab",action:()=>j(W.tabId)},{label:"separator"},{label:"Tab Color",action:()=>z(!Z)},{label:"separator"},{label:"Clone to Split View",action:()=>S("vertical",W.tabId)}].map((re,me)=>re.label==="separator"?C.jsx("div",{style:{height:1,backgroundColor:e.border,margin:"4px 0"}},me):C.jsx("div",{style:{padding:"5px 16px",cursor:"pointer",fontSize:13,color:e.menuText},onClick:ae=>{ae.stopPropagation(),re.action(),re.label!=="Tab Color"&&ne(null)},onMouseEnter:ae=>{ae.target.style.backgroundColor=e.bgHover},onMouseLeave:ae=>{ae.target.style.backgroundColor="transparent"},children:re.label},me)),Z&&C.jsx("div",{style:{display:"flex",gap:4,padding:"4px 16px 8px"},children:["none","color1","color2","color3","color4","color5"].map(re=>C.jsx("div",{onClick:me=>{me.stopPropagation(),X(W.tabId,re),ne(null)},style:{width:20,height:20,borderRadius:4,backgroundColor:re==="none"?e.bgTertiary:Yl[re],border:(de==null?void 0:de.tabColor)===re?"2px solid white":`1px solid ${e.border}`,cursor:"pointer"},title:re==="none"?"No color":re},re))})]})]})}function ed(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=Array(r);n<r;n++)s[n]=e[n];return s}function By(e){if(Array.isArray(e))return e}function jy(e,r,n){return(r=zy(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Fy(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,c,u,p,d=[],h=!0,S=!1;try{if(u=(n=n.call(e)).next,r!==0)for(;!(h=(s=u.call(n)).done)&&(d.push(s.value),d.length!==r);h=!0);}catch(x){S=!0,c=x}finally{try{if(!h&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(S)throw c}}return d}}function Dy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function td(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,s)}return n}function rd(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?td(Object(n),!0).forEach(function(s){jy(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ly(e,r){if(e==null)return{};var n,s,c=$y(e,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function $y(e,r){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Ny(e,r){return By(e)||Fy(e,r)||Gy(e,r)||Dy()}function Uy(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function zy(e){var r=Uy(e,"string");return typeof r=="symbol"?r:r+""}function Gy(e,r){if(e){if(typeof e=="string")return ed(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ed(e,r):void 0}}function Hy(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function nd(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,s)}return n}function id(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?nd(Object(n),!0).forEach(function(s){Hy(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function qy(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(s){return r.reduceRight(function(c,u){return u(c)},s)}}function Hn(e){return function r(){for(var n=this,s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return c.length>=e.length?e.apply(this,c):function(){for(var p=arguments.length,d=new Array(p),h=0;h<p;h++)d[h]=arguments[h];return r.apply(n,[].concat(c,d))}}}function Mi(e){return{}.toString.call(e).includes("Object")}function Wy(e){return!Object.keys(e).length}function Xn(e){return typeof e=="function"}function Vy(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function Zy(e,r){return Mi(r)||Er("changeType"),Object.keys(r).some(function(n){return!Vy(e,n)})&&Er("changeField"),r}function Ky(e){Xn(e)||Er("selectorType")}function Xy(e){Xn(e)||Mi(e)||Er("handlerType"),Mi(e)&&Object.values(e).some(function(r){return!Xn(r)})&&Er("handlersType")}function Yy(e){e||Er("initialIsRequired"),Mi(e)||Er("initialType"),Wy(e)&&Er("initialContent")}function Jy(e,r){throw new Error(e[r]||e.default)}var Qy={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Er=Hn(Jy)(Qy),Si={changes:Zy,selector:Ky,handler:Xy,initial:Yy};function e0(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Si.initial(e),Si.handler(r);var n={current:e},s=Hn(n0)(n,r),c=Hn(r0)(n),u=Hn(Si.changes)(e),p=Hn(t0)(n);function d(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(x){return x};return Si.selector(S),S(n.current)}function h(S){qy(s,c,u,p)(S)}return[d,h]}function t0(e,r){return Xn(r)?r(e.current):r}function r0(e,r){return e.current=id(id({},e.current),r),r}function n0(e,r,n){return Xn(r)?r(e.current):Object.keys(n).forEach(function(s){var c;return(c=r[s])===null||c===void 0?void 0:c.call(r,e.current[s])}),n}var i0={create:e0},a0={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function o0(e){return function r(){for(var n=this,s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return c.length>=e.length?e.apply(this,c):function(){for(var p=arguments.length,d=new Array(p),h=0;h<p;h++)d[h]=arguments[h];return r.apply(n,[].concat(c,d))}}}function s0(e){return{}.toString.call(e).includes("Object")}function c0(e){return e||ad("configIsRequired"),s0(e)||ad("configType"),e.urls?{paths:{vs:e.urls.monacoBase}}:e}function l0(e,r){throw new Error(e[r]||e.default)}var u0={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},ad=o0(l0)(u0),f0={config:c0},d0=function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return function(c){return n.reduceRight(function(u,p){return p(u)},c)}};function rh(e,r){return Object.keys(r).forEach(function(n){r[n]instanceof Object&&e[n]&&Object.assign(r[n],rh(e[n],r[n]))}),rd(rd({},e),r)}var h0={type:"cancelation",msg:"operation is manually canceled"};function as(e){var r=!1,n=new Promise(function(s,c){e.then(function(u){return r?c(h0):s(u)}),e.catch(c)});return n.cancel=function(){return r=!0},n}var p0=["monaco"],g0=i0.create({config:a0,isInitialized:!1,resolve:null,reject:null,monaco:null}),nh=Ny(g0,2),ri=nh[0],Hi=nh[1];function m0(e){var r=f0.config(e),n=r.monaco,s=Ly(r,p0);Hi(function(c){return{config:rh(c.config,s),monaco:n}})}function w0(){var e=ri(function(r){var n=r.monaco,s=r.isInitialized,c=r.resolve;return{monaco:n,isInitialized:s,resolve:c}});if(!e.isInitialized){if(Hi({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),as(os);if(window.monaco&&window.monaco.editor)return ih(window.monaco),e.resolve(window.monaco),as(os);d0(y0,v0)(x0)}return as(os)}function y0(e){return document.body.appendChild(e)}function b0(e){var r=document.createElement("script");return e&&(r.src=e),r}function v0(e){var r=ri(function(s){var c=s.config,u=s.reject;return{config:c,reject:u}}),n=b0("".concat(r.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=r.reject,n}function x0(){var e=ri(function(n){var s=n.config,c=n.resolve,u=n.reject;return{config:s,resolve:c,reject:u}}),r=window.require;r.config(e.config),r(["vs/editor/editor.main"],function(n){var s=n.m||n;ih(s),e.resolve(s)},function(n){e.reject(n)})}function ih(e){ri().monaco||Hi({monaco:e})}function _0(){return ri(function(e){var r=e.monaco;return r})}var os=new Promise(function(e,r){return Hi({resolve:e,reject:r})}),ah={config:m0,init:w0,__getMonacoInstance:_0},S0={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ss=S0,k0={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},E0=k0;function A0({children:e}){return kt.createElement("div",{style:E0.container},e)}var I0=A0,C0=I0;function T0({width:e,height:r,isEditorReady:n,loading:s,_ref:c,className:u,wrapperProps:p}){return kt.createElement("section",{style:{...ss.wrapper,width:e,height:r},...p},!n&&kt.createElement(C0,null,s),kt.createElement("div",{ref:c,style:{...ss.fullWidth,...!n&&ss.hide},className:u}))}var R0=T0,oh=ve.memo(R0);function O0(e){ve.useEffect(e,[])}var sh=O0;function P0(e,r,n=!0){let s=ve.useRef(!0);ve.useEffect(s.current||!n?()=>{s.current=!1}:e,r)}var Zt=P0;function Wn(){}function ln(e,r,n,s){return M0(e,s)||B0(e,r,n,s)}function M0(e,r){return e.editor.getModel(ch(e,r))}function B0(e,r,n,s){return e.editor.createModel(r,n,s?ch(e,s):void 0)}function ch(e,r){return e.Uri.parse(r)}function j0({original:e,modified:r,language:n,originalLanguage:s,modifiedLanguage:c,originalModelPath:u,modifiedModelPath:p,keepCurrentOriginalModel:d=!1,keepCurrentModifiedModel:h=!1,theme:S="light",loading:x="Loading...",options:_={},height:R="100%",width:y="100%",className:j,wrapperProps:X={},beforeMount:L=Wn,onMount:F=Wn}){let[N,G]=ve.useState(!1),[W,ne]=ve.useState(!0),Z=ve.useRef(null),z=ve.useRef(null),B=ve.useRef(null),Y=ve.useRef(F),U=ve.useRef(L),ce=ve.useRef(!1);sh(()=>{let me=ah.init();return me.then(ae=>(z.current=ae)&&ne(!1)).catch(ae=>(ae==null?void 0:ae.type)!=="cancelation"&&void 0),()=>Z.current?re():me.cancel()}),Zt(()=>{if(Z.current&&z.current){let me=Z.current.getOriginalEditor(),ae=ln(z.current,e||"",s||n||"text",u||"");ae!==me.getModel()&&me.setModel(ae)}},[u],N),Zt(()=>{if(Z.current&&z.current){let me=Z.current.getModifiedEditor(),ae=ln(z.current,r||"",c||n||"text",p||"");ae!==me.getModel()&&me.setModel(ae)}},[p],N),Zt(()=>{let me=Z.current.getModifiedEditor();me.getOption(z.current.editor.EditorOption.readOnly)?me.setValue(r||""):r!==me.getValue()&&(me.executeEdits("",[{range:me.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),me.pushUndoStop())},[r],N),Zt(()=>{var me,ae;(ae=(me=Z.current)==null?void 0:me.getModel())==null||ae.original.setValue(e||"")},[e],N),Zt(()=>{let{original:me,modified:ae}=Z.current.getModel();z.current.editor.setModelLanguage(me,s||n||"text"),z.current.editor.setModelLanguage(ae,c||n||"text")},[n,s,c],N),Zt(()=>{var me;(me=z.current)==null||me.editor.setTheme(S)},[S],N),Zt(()=>{var me;(me=Z.current)==null||me.updateOptions(_)},[_],N);let oe=ve.useCallback(()=>{var ie;if(!z.current)return;U.current(z.current);let me=ln(z.current,e||"",s||n||"text",u||""),ae=ln(z.current,r||"",c||n||"text",p||"");(ie=Z.current)==null||ie.setModel({original:me,modified:ae})},[n,r,c,e,s,u,p]),de=ve.useCallback(()=>{var me;!ce.current&&B.current&&(Z.current=z.current.editor.createDiffEditor(B.current,{automaticLayout:!0,..._}),oe(),(me=z.current)==null||me.editor.setTheme(S),G(!0),ce.current=!0)},[_,S,oe]);ve.useEffect(()=>{N&&Y.current(Z.current,z.current)},[N]),ve.useEffect(()=>{!W&&!N&&de()},[W,N,de]);function re(){var ae,ie,se,he;let me=(ae=Z.current)==null?void 0:ae.getModel();d||((ie=me==null?void 0:me.original)==null||ie.dispose()),h||((se=me==null?void 0:me.modified)==null||se.dispose()),(he=Z.current)==null||he.dispose()}return kt.createElement(oh,{width:y,height:R,isEditorReady:N,loading:x,_ref:B,className:j,wrapperProps:X})}var F0=j0,Iv=ve.memo(F0);function D0(e){let r=ve.useRef();return ve.useEffect(()=>{r.current=e},[e]),r.current}var L0=D0,ki=new Map;function $0({defaultValue:e,defaultLanguage:r,defaultPath:n,value:s,language:c,path:u,theme:p="light",line:d,loading:h="Loading...",options:S={},overrideServices:x={},saveViewState:_=!0,keepCurrentModel:R=!1,width:y="100%",height:j="100%",className:X,wrapperProps:L={},beforeMount:F=Wn,onMount:N=Wn,onChange:G,onValidate:W=Wn}){let[ne,Z]=ve.useState(!1),[z,B]=ve.useState(!0),Y=ve.useRef(null),U=ve.useRef(null),ce=ve.useRef(null),oe=ve.useRef(N),de=ve.useRef(F),re=ve.useRef(),me=ve.useRef(s),ae=L0(u),ie=ve.useRef(!1),se=ve.useRef(!1);sh(()=>{let _e=ah.init();return _e.then(Be=>(Y.current=Be)&&B(!1)).catch(Be=>(Be==null?void 0:Be.type)!=="cancelation"&&void 0),()=>U.current?Ne():_e.cancel()}),Zt(()=>{var Be,q,ke,Ie;let _e=ln(Y.current,e||s||"",r||c||"",u||n||"");_e!==((Be=U.current)==null?void 0:Be.getModel())&&(_&&ki.set(ae,(q=U.current)==null?void 0:q.saveViewState()),(ke=U.current)==null||ke.setModel(_e),_&&((Ie=U.current)==null||Ie.restoreViewState(ki.get(u))))},[u],ne),Zt(()=>{var _e;(_e=U.current)==null||_e.updateOptions(S)},[S],ne),Zt(()=>{!U.current||s===void 0||(U.current.getOption(Y.current.editor.EditorOption.readOnly)?U.current.setValue(s):s!==U.current.getValue()&&(se.current=!0,U.current.executeEdits("",[{range:U.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),U.current.pushUndoStop(),se.current=!1))},[s],ne),Zt(()=>{var Be,q;let _e=(Be=U.current)==null?void 0:Be.getModel();_e&&c&&((q=Y.current)==null||q.editor.setModelLanguage(_e,c))},[c],ne),Zt(()=>{var _e;d!==void 0&&((_e=U.current)==null||_e.revealLine(d))},[d],ne),Zt(()=>{var _e;(_e=Y.current)==null||_e.editor.setTheme(p)},[p],ne);let he=ve.useCallback(()=>{var _e;if(!(!ce.current||!Y.current)&&!ie.current){de.current(Y.current);let Be=u||n,q=ln(Y.current,s||e||"",r||c||"",Be||"");U.current=(_e=Y.current)==null?void 0:_e.editor.create(ce.current,{model:q,automaticLayout:!0,...S},x),_&&U.current.restoreViewState(ki.get(Be)),Y.current.editor.setTheme(p),d!==void 0&&U.current.revealLine(d),Z(!0),ie.current=!0}},[e,r,n,s,c,u,S,x,_,p,d]);ve.useEffect(()=>{ne&&oe.current(U.current,Y.current)},[ne]),ve.useEffect(()=>{!z&&!ne&&he()},[z,ne,he]),me.current=s,ve.useEffect(()=>{var _e,Be;ne&&G&&((_e=re.current)==null||_e.dispose(),re.current=(Be=U.current)==null?void 0:Be.onDidChangeModelContent(q=>{se.current||G(U.current.getValue(),q)}))},[ne,G]),ve.useEffect(()=>{if(ne){let _e=Y.current.editor.onDidChangeMarkers(Be=>{var ke;let q=(ke=U.current.getModel())==null?void 0:ke.uri;if(q&&Be.find(Ie=>Ie.path===q.path)){let Ie=Y.current.editor.getModelMarkers({resource:q});W==null||W(Ie)}});return()=>{_e==null||_e.dispose()}}return()=>{}},[ne,W]);function Ne(){var _e,Be;(_e=re.current)==null||_e.dispose(),R?_&&ki.set(u,U.current.saveViewState()):(Be=U.current.getModel())==null||Be.dispose(),U.current.dispose()}return kt.createElement(oh,{width:y,height:j,isEditorReady:ne,loading:h,_ref:ce,className:X,wrapperProps:L})}var N0=$0,U0=ve.memo(N0),z0=U0;function G0(e){const{savedSnippets:r}=$e.getState();return r.filter(n=>n.language==="*"||n.language===e)}function H0(e,r){if(!e)return;const n=e.getContribution("snippetController2");if(n)n.insert(r);else{const s=r.replace(/\$\{?\d+(?::([^}]*))?\}?/g,"$1").replace(/\$0/g,""),c=e.getSelection();c&&e.executeEdits("snippet",[{range:c,text:s,forceMoveMarkers:!0}])}}function q0(e){return e.languages.registerCompletionItemProvider("*",{provideCompletionItems:(r,n)=>{const s=r.getLanguageId(),c=G0(s);if(c.length===0)return{suggestions:[]};const u=r.getWordUntilPosition(n),p={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:u.startColumn,endColumn:u.endColumn};return{suggestions:c.map(h=>({label:h.prefix,kind:e.languages.CompletionItemKind.Snippet,documentation:h.description||h.name,insertText:h.body,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:`Snippet: ${h.name}`,range:p}))}}})}function lh(){return $e.getState()}let fn=null;function uh(e,r,n){return{model:r,messages:e,temperature:n.temperature??.7,max_tokens:n.maxTokens??4096,stream:n.stream??!0}}function fh(e,r,n){const s=[],c=[];for(let u=0,p=e.length;u<p;u++)e[u].role==="system"?s.push(e[u].content):c.push(e[u]);return{model:r,system:0<s.length?s.join(`
`):void 0,messages:c.map(u=>({role:u.role,content:u.content})),max_tokens:n.maxTokens??4096,temperature:n.temperature??.7,stream:n.stream??!0}}function dh(e,r){const n=e.filter(c=>c.role!=="system").map(c=>({role:c.role==="assistant"?"model":"user",parts:[{text:c.content}]})),s=e.find(c=>c.role==="system");return{contents:n,systemInstruction:s?{parts:[{text:s.content}]}:void 0,generationConfig:{temperature:r.temperature??.7,maxOutputTokens:r.maxTokens??4096}}}function hh(e,r,n){if(e.type==="anthropic")return`${e.baseUrl}/v1/messages`;if(e.type==="google"){const s=n?"?alt=sse":"";return`${e.baseUrl}/v1beta/models/${r}:${n?"streamGenerateContent":"generateContent"}${s}`}return`${e.baseUrl}/v1/chat/completions`}function ph(e,r){const n={"Content-Type":"application/json"};return e.type==="anthropic"?(n["x-api-key"]=r.apiKey,n["anthropic-version"]="2023-06-01",n["anthropic-dangerous-direct-browser-access"]="true"):e.type==="google"?n["x-goog-api-key"]=r.apiKey:n.Authorization=`Bearer ${r.apiKey}`,n}function W0(e){var n,s,c;if(!e.startsWith("data: "))return null;const r=e.slice(6).trim();if(r==="[DONE]")return null;try{return((c=(s=(n=JSON.parse(r).choices)==null?void 0:n[0])==null?void 0:s.delta)==null?void 0:c.content)||null}catch{return null}}function V0(e){var n;if(!e.startsWith("data: "))return null;const r=e.slice(6).trim();try{const s=JSON.parse(r);return s.type==="content_block_delta"&&((n=s.delta)==null?void 0:n.text)||null}catch{return null}}function Z0(e){var n,s,c,u,p;if(!e.startsWith("data: "))return null;const r=e.slice(6).trim();try{return((p=(u=(c=(s=(n=JSON.parse(r).candidates)==null?void 0:n[0])==null?void 0:s.content)==null?void 0:c.parts)==null?void 0:u[0])==null?void 0:p.text)||null}catch{return null}}function od(e,r){return e==="anthropic"?V0(r):e==="google"?Z0(r):W0(r)}async function Tr(e,r={},n,s,c){var X,L,F,N,G,W,ne,Z,z,B,Y;const u=lh(),p=u.GetActiveProvider();if(p===null){const U="No active AI provider configured";throw c==null||c(U),new Error(U)}const d=u.GetCredentialForProvider(p.id);if(d===null){const U=`No API key configured for ${p.name}`;throw c==null||c(U),new Error(U)}const h=u.activeModelId,S=r.stream!==!1,x=[...e];r.systemPrompt&&!x.some(U=>U.role==="system")&&x.unshift({role:"system",content:r.systemPrompt});const _=u.aiSettings.systemPrompt;_&&!x.some(U=>U.role==="system")&&x.unshift({role:"system",content:_});let R;p.type==="anthropic"?R=fh(x,h,{...r,stream:S}):p.type==="google"?R=dh(x,{...r}):R=uh(x,h,{...r,stream:S});const y=hh(p,h,S),j=ph(p,d);Y0(),fn=new AbortController;try{const U=await fetch(y,{method:"POST",headers:j,body:JSON.stringify(R),signal:fn.signal});if(!U.ok){const ce=await U.text();let oe=`API error ${U.status}`;try{const de=JSON.parse(ce);oe=((X=de.error)==null?void 0:X.message)||de.message||oe}catch{}throw c==null||c(oe),new Error(oe)}if(S&&U.body)return await K0(U.body,p.type,n,s);{const ce=await U.json();let oe="";return p.type==="anthropic"?oe=((F=(L=ce.content)==null?void 0:L[0])==null?void 0:F.text)||"":p.type==="google"?oe=((Z=(ne=(W=(G=(N=ce.candidates)==null?void 0:N[0])==null?void 0:G.content)==null?void 0:W.parts)==null?void 0:ne[0])==null?void 0:Z.text)||"":oe=((Y=(B=(z=ce.choices)==null?void 0:z[0])==null?void 0:B.message)==null?void 0:Y.content)||"",s==null||s(oe),oe}}catch(U){if(U.name==="AbortError")return s==null||s(""),"";throw c==null||c(U.message),U}finally{fn=null}}async function K0(e,r,n,s){const c=e.getReader(),u=new TextDecoder;let p="",d="";try{for(;;){const{done:h,value:S}=await c.read();if(h)break;d+=u.decode(S,{stream:!0});const x=d.split(`
`);d=x.pop()||"";const _=x.length;for(let R=0;R<_;R++){const y=x[R].trim();if(y.length===0)continue;const j=od(r,y);j!==null&&0<j.length&&(p+=j,n==null||n(j))}}if(0<d.trim().length){const h=od(r,d.trim());h!==null&&0<h.length&&(p+=h,n==null||n(h))}}finally{c.releaseLock()}return s==null||s(p),p}async function X0(e,r,n,s,c){const p=lh().aiSettings,d=`You are an intelligent code completion assistant. Complete the code at the cursor position. Only output the completion text, no explanations, no markdown, no code fences. The code is in ${n}.`,h=`Complete the code at [CURSOR]:

${e}[CURSOR]${r}

Output ONLY the completion text that goes at [CURSOR]. No explanations.`;return Tr([{role:"system",content:d},{role:"user",content:h}],{temperature:p.codeTemperature,maxTokens:p.inlineMaxTokens,stream:!1},void 0,s,c)}function Y0(){fn!==null&&(fn.abort(),fn=null)}async function Cv(e,r){var n;try{const s=0<e.models.length?e.models[0].id:"",c=hh(e,s,!1),u=ph(e,r);let p;const d=[{role:"user",content:'Say "ok".'}];e.type==="anthropic"?p=fh(d,s,{maxTokens:10,stream:!1}):e.type==="google"?p=dh(d,{maxTokens:10}):p=uh(d,s,{maxTokens:10,stream:!1});const h=await fetch(c,{method:"POST",headers:u,body:JSON.stringify(p)});if(h.ok)return{success:!0};const S=await h.text();let x=`HTTP ${h.status}`;try{const _=JSON.parse(S);x=((n=_.error)==null?void 0:n.message)||_.message||x}catch{}return{success:!1,error:x}}catch(s){return{success:!1,error:s.message}}}function J0(e){if(e.length===0)return"";const r=[],n=e.length;for(let s=0;s<n;s++){const c=e[s];c.type==="file"?r.push(`--- File: ${c.label} (${c.language||"unknown"}) ---
${c.content}`):c.type==="selection"?r.push(`--- Selected code (${c.language||"unknown"}) ---
${c.content}`):c.type==="error"?r.push(`--- Error ---
${c.content}`):c.type==="diff"&&r.push(`--- Diff ---
${c.content}`)}return r.join(`

`)}function pn(e){const r=[],n=/```(\w*)\n([\s\S]*?)```/g;let s;for(;(s=n.exec(e))!==null;)r.push({language:s[1]||"text",code:s[2].trim()});return r}let Sr=null,cs=0;function Q0(e,r){const n=[];return n.push(e.languages.registerCompletionItemProvider("*",{provideCompletionItems:(s,c)=>{const{tabs:u}=$e.getState(),p=s.getValue(),d=s.getWordUntilPosition(c),h={startLineNumber:c.lineNumber,endLineNumber:c.lineNumber,startColumn:d.startColumn,endColumn:d.endColumn},S=new Set,x=/\b[a-zA-Z_$][a-zA-Z0-9_$]{2,}\b/g,_=u.length;for(let y=0;y<_;y++){const j=u[y].content;if(j===p)continue;let X;for(x.lastIndex=0;(X=x.exec(j))!==null;)S.add(X[0])}return d.word&&S.delete(d.word),{suggestions:Array.from(S).map(y=>({label:y,kind:e.languages.CompletionItemKind.Text,detail:"from other tabs",insertText:y,range:h,sortText:"~"+y}))}}})),n.push(q0(e)),n.push(e.languages.registerCompletionItemProvider("*",{triggerCharacters:["/"],provideCompletionItems:(s,c)=>{if(!s.getLineContent(c.lineNumber).substring(0,c.column-1).match(/['".]\/[^'"]*$/))return{suggestions:[]};const{tabs:d,fileTree:h}=$e.getState(),S=s.getWordUntilPosition(c),x={startLineNumber:c.lineNumber,endLineNumber:c.lineNumber,startColumn:S.startColumn,endColumn:S.endColumn},_=d.map(R=>({label:R.name,kind:e.languages.CompletionItemKind.File,detail:R.path||"open tab",insertText:R.name,range:x}));if(h){const R=(y,j)=>{for(const X of y)_.push({label:j+X.name,kind:X.isDirectory?e.languages.CompletionItemKind.Folder:e.languages.CompletionItemKind.File,detail:X.path,insertText:X.name,range:x}),X.children&&R(X.children,j+X.name+"/")};R(h,"")}return{suggestions:_}}})),n.push(eb(e)),n}function eb(e,r){return e.languages.registerInlineCompletionsProvider("*",{provideInlineCompletions:async(s,c,u,p)=>{const d=$e.getState();if(!d.aiEnabled||!d.inlineSuggestionEnabled)return{items:[]};if(!d.aiSettings.inlineCompletionEnabled)return{items:[]};const h=d.GetActiveProvider();if(h===null)return{items:[]};const S=d.GetCredentialForProvider(h.id);if(S===null||S.apiKey.length===0)return{items:[]};Sr!==null&&(clearTimeout(Sr),Sr=null);const x=++cs,_=d.aiSettings.inlineDebounceMs||Ed;if(!await new Promise(Z=>{Sr=setTimeout(()=>{Sr=null,Z(x===cs)},_),p.onCancellationRequested(()=>{Sr!==null&&(clearTimeout(Sr),Sr=null),Z(!1)})}))return{items:[]};const y=2e3,j=s.getOffsetAt(c),X=s.getValue(),L=X.substring(0,j),F=X.substring(j),N=L.length>y?L.substring(L.length-y):L,G=F.length>y?F.substring(0,y):F;if(N.trimEnd().length<5)return{items:[]};const ne=s.getLanguageId()||"plaintext";try{const Z=await X0(N,G,ne);if(x!==cs)return{items:[]};if(Z.length===0)return{items:[]};let z=Z.trim();if(z.startsWith("```")){const B=z.split(`
`);B.shift(),0<B.length&&B[B.length-1].startsWith("```")&&B.pop(),z=B.join(`
`)}return z.length===0?{items:[]}:{items:[{insertText:z,range:new e.Range(c.lineNumber,c.column,c.lineNumber,c.column)}]}}catch{return{items:[]}}},freeInlineCompletions:()=>{}})}function wr(){return $e.getState()}function tb(e){return{id:Ir(),role:"user",content:e,timestamp:Date.now(),codeBlocks:[]}}function sd(e=""){const r=pn(e);return{id:Ir(),role:"assistant",content:e,timestamp:Date.now(),codeBlocks:r.map(n=>({language:n.language,code:n.code,action:"replace"}))}}function rb(e){const r=wr();return{id:Ir(),title:e,messages:[],modelId:r.activeModelId,providerId:r.activeProviderId,createdAt:Date.now()}}async function nb(e){const r=wr();let n=r.activeConversationId;if(n===null){const x=e.length>50?e.substring(0,50)+"...":e,_=rb(x);r.AddConversation(_),n=_.id}const s=tb(e);r.AddMessageToConversation(n,s);const c=r.conversations.find(x=>x.id===n);if(!c)return;const u=J0(r.aiContextItems),p=[];0<u.length&&p.push({role:"system",content:`Here is relevant context:

${u}`});const d=c.messages.length;for(let x=0;x<d;x++)p.push({role:c.messages[x].role,content:c.messages[x].content});const h=sd();r.AddMessageToConversation(n,h),r.SetIsAiStreaming(!0),r.SetAiStreamContent(""),r.SetAiOperationError(null);let S="";try{await Tr(p,{temperature:r.aiSettings.chatTemperature},x=>{S+=x,r.SetAiStreamContent(S),r.UpdateLastMessage(n,S),cr(Kt.AI_STREAM_CHUNK,{text:x})},x=>{const _=sd(x);r.UpdateLastMessage(n,x),cr(Kt.AI_RESPONSE_COMPLETE,{conversationId:n,text:x})},x=>{r.SetAiOperationError(x),cr(Kt.AI_ERROR,{error:x})})}catch(x){r.SetAiOperationError(x.message)}finally{r.SetIsAiStreaming(!1),r.SetAiStreamContent(""),r.SaveAIState()}}async function cd(e,r){wr().setSidebarPanel("ai");const s=`Explain the following ${r} code in detail. What does it do, and why?

\`\`\`${r}
${e}
\`\`\``;await nb(s)}async function ld(e,r,n){const s=wr();s.SetIsAiStreaming(!0),s.SetAiOperationError(null);const c="You are a code refactoring assistant. Refactor the given code to improve readability, performance, and maintainability. Return ONLY the refactored code in a single code block. No explanations before or after.";try{const u=await Tr([{role:"system",content:c},{role:"user",content:`Refactor this ${r} code:

\`\`\`${r}
${e}
\`\`\``}],{temperature:s.aiSettings.codeTemperature,stream:!1}),p=pn(u),d=0<p.length?p[0].code:u;n(d)}catch(u){s.SetAiOperationError(u.message)}finally{s.SetIsAiStreaming(!1)}}async function ud(e,r,n){const s=wr();s.SetIsAiStreaming(!0),s.SetAiOperationError(null);const c="You are a test generation assistant. Generate comprehensive unit tests for the given code. Return ONLY the test code in a single code block. Use appropriate testing framework for the language. No explanations.";try{const u=await Tr([{role:"system",content:c},{role:"user",content:`Generate unit tests for this ${r} code:

\`\`\`${r}
${e}
\`\`\``}],{temperature:s.aiSettings.codeTemperature,stream:!1}),p=pn(u),d=0<p.length?p[0].code:u;n(d)}catch(u){s.SetAiOperationError(u.message)}finally{s.SetIsAiStreaming(!1)}}async function fd(e,r,n){const s=wr();s.SetIsAiStreaming(!0),s.SetAiOperationError(null);const c="You are a documentation assistant. Add comprehensive documentation (JSDoc, docstrings, or appropriate format) to the given code. Return ONLY the fully documented code in a single code block. No explanations.";try{const u=await Tr([{role:"system",content:c},{role:"user",content:`Add documentation to this ${r} code:

\`\`\`${r}
${e}
\`\`\``}],{temperature:s.aiSettings.codeTemperature,stream:!1}),p=pn(u),d=0<p.length?p[0].code:u;n(d)}catch(u){s.SetAiOperationError(u.message)}finally{s.SetIsAiStreaming(!1)}}async function ib(e,r,n,s){const c=wr();c.SetIsAiStreaming(!0),c.SetAiOperationError(null);const u="You are a debugging assistant. Fix the error in the given code. Return ONLY the fixed code in a single code block. No explanations before or after.";try{const p=await Tr([{role:"system",content:u},{role:"user",content:`Fix this ${r} code.

Error: ${n}

Code:
\`\`\`${r}
${e}
\`\`\``}],{temperature:c.aiSettings.codeTemperature,stream:!1}),d=pn(p),h=0<d.length?d[0].code:p;s(h)}catch(p){c.SetAiOperationError(p.message)}finally{c.SetIsAiStreaming(!1)}}async function dd(e,r,n){const s=wr();s.SetIsAiStreaming(!0),s.SetAiOperationError(null);const c="You are a code simplification assistant. Simplify the given code while maintaining the same functionality. Return ONLY the simplified code in a single code block. No explanations.";try{const u=await Tr([{role:"system",content:c},{role:"user",content:`Simplify this ${r} code:

\`\`\`${r}
${e}
\`\`\``}],{temperature:s.aiSettings.codeTemperature,stream:!1}),p=pn(u),d=0<p.length?p[0].code:u;n(d)}catch(u){s.SetAiOperationError(u.message)}finally{s.SetIsAiStreaming(!1)}}async function Tv(e,r,n){const s=wr();s.SetIsAiStreaming(!0),s.SetAiOperationError(null);const c="You are a git commit message assistant. Write a clear, concise commit message following conventional commits style. First line should be a short summary (under 72 chars). Optionally add a blank line and a longer description if the changes are complex. Output ONLY the commit message text, nothing else.";let u="";try{return u=await Tr([{role:"system",content:c},{role:"user",content:`Generate a commit message for these changes:

${e}`}],{temperature:.3,maxTokens:256},p=>{u+=p,s.SetCommitMessageDraft(u),r==null||r(p)},p=>{s.SetCommitMessageDraft(p),n==null||n(p)}),u}catch(p){return s.SetAiOperationError(p.message),""}finally{s.SetIsAiStreaming(!1)}}function hd({tab:e,theme:r,settings:n,zoomLevel:s}){const c=ve.useRef(null),u=ve.useRef(null),{updateTabContent:p,updateTab:d,showFindReplace:h}=$e(),[S,x]=ve.useState(!1),_=ve.useCallback((y,j)=>{c.current=y,u.current=j,Am(j),j.editor.setTheme(r.editorMonacoTheme),x(!0),y.onDidChangeCursorPosition(L=>{d(e.id,{cursorLine:L.position.lineNumber,cursorColumn:L.position.column})}),y.onDidScrollChange(L=>{d(e.id,{scrollTop:L.scrollTop})}),y.addCommand(j.KeyMod.CtrlCmd|j.KeyCode.KeyD,()=>{var L;(L=y.getAction("editor.action.copyLinesDownAction"))==null||L.run()}),y.addCommand(j.KeyMod.CtrlCmd|j.KeyMod.Shift|j.KeyCode.KeyK,()=>{var L;(L=y.getAction("editor.action.deleteLines"))==null||L.run()}),y.addCommand(j.KeyMod.Alt|j.KeyCode.UpArrow,()=>{var L;(L=y.getAction("editor.action.moveLinesUpAction"))==null||L.run()}),y.addCommand(j.KeyMod.Alt|j.KeyCode.DownArrow,()=>{var L;(L=y.getAction("editor.action.moveLinesDownAction"))==null||L.run()}),y.addCommand(j.KeyMod.CtrlCmd|j.KeyCode.Slash,()=>{var L;(L=y.getAction("editor.action.commentLine"))==null||L.run()}),e.scrollTop&&y.setScrollTop(e.scrollTop),y.addAction({id:"ai-explain",label:"AI: Explain Code",contextMenuGroupId:"9_ai",contextMenuOrder:1,run:L=>{const F=L.getSelection(),N=L.getModel();if(F&&!F.isEmpty()&&N){const G=N.getValueInRange(F);cd(G,N.getLanguageId()||"plaintext")}}}),y.addAction({id:"ai-refactor",label:"AI: Refactor Code",contextMenuGroupId:"9_ai",contextMenuOrder:2,run:L=>{const F=L.getSelection(),N=L.getModel();if(F&&!F.isEmpty()&&N){const G=N.getValueInRange(F);ld(G,N.getLanguageId()||"plaintext",W=>{L.executeEdits("ai-refactor",[{range:F,text:W}])})}}}),y.addAction({id:"ai-generate-tests",label:"AI: Generate Tests",contextMenuGroupId:"9_ai",contextMenuOrder:3,run:L=>{const F=L.getSelection(),N=L.getModel();if(F&&!F.isEmpty()&&N){const G=N.getValueInRange(F);ud(G,N.getLanguageId()||"plaintext",W=>{const ne=N.getLineCount(),Z=N.getLineMaxColumn(ne);L.executeEdits("ai-tests",[{range:new j.Range(ne,Z,ne,Z),text:`

`+W}])})}}}),y.addAction({id:"ai-generate-docs",label:"AI: Generate Documentation",contextMenuGroupId:"9_ai",contextMenuOrder:4,run:L=>{const F=L.getSelection(),N=L.getModel();if(F&&!F.isEmpty()&&N){const G=N.getValueInRange(F);fd(G,N.getLanguageId()||"plaintext",W=>{L.executeEdits("ai-docs",[{range:F,text:W}])})}}}),y.addAction({id:"ai-fix-error",label:"AI: Fix Error",contextMenuGroupId:"9_ai",contextMenuOrder:5,run:L=>{const F=L.getSelection(),N=L.getModel();if(F&&!F.isEmpty()&&N){const G=N.getValueInRange(F),W=prompt("Describe the error (or paste error message):")||"Fix any issues";ib(G,N.getLanguageId()||"plaintext",W,ne=>{L.executeEdits("ai-fix",[{range:F,text:ne}])})}}}),y.addAction({id:"ai-simplify",label:"AI: Simplify Code",contextMenuGroupId:"9_ai",contextMenuOrder:6,run:L=>{const F=L.getSelection(),N=L.getModel();if(F&&!F.isEmpty()&&N){const G=N.getValueInRange(F);dd(G,N.getLanguageId()||"plaintext",W=>{L.executeEdits("ai-simplify",[{range:F,text:W}])})}}}),Cm(y);const X=Q0(j);y.__completionDisposables=X,y.focus()},[e.id,r.editorMonacoTheme]),R=ve.useCallback(y=>{y!==void 0&&p(e.id,y)},[e.id]);return ve.useEffect(()=>{u.current&&u.current.editor.setTheme(r.editorMonacoTheme)},[r.editorMonacoTheme]),ve.useEffect(()=>{const y=j=>{c.current&&(j!=null&&j.body)&&(H0(c.current,j.body),c.current.focus())};return Zw(Kt.INSERT_SNIPPET,y),()=>Kw(Kt.INSERT_SNIPPET,y)},[]),ve.useEffect(()=>()=>{var j;const y=c.current;if(y&&y.__completionDisposables)for(const X of y.__completionDisposables)(j=X==null?void 0:X.dispose)==null||j.call(X)},[]),ve.useEffect(()=>{const y=c.current,j=u.current;if(!y||!j)return;Rm((Z,z)=>{var Y,U,ce,oe,de,re,me,ae,ie,se,he,Ne,_e,Be;const B=y.getModel();if(B)switch(Z){case"cut":y.trigger("keyboard","editor.action.clipboardCutAction",null);break;case"copy":y.trigger("keyboard","editor.action.clipboardCopyAction",null);break;case"paste":{navigator.clipboard.readText().then(q=>{y.trigger("keyboard","paste",{text:q})}).catch(()=>{y.focus(),document.execCommand("paste")});break}case"undo":y.trigger("keyboard","undo",null);break;case"redo":y.trigger("keyboard","redo",null);break;case"select-all":y.setSelection(B.getFullModelRange());break;case"duplicate-line":(Y=y.getAction("editor.action.copyLinesDownAction"))==null||Y.run();break;case"delete-line":(U=y.getAction("editor.action.deleteLines"))==null||U.run();break;case"move-line-up":(ce=y.getAction("editor.action.moveLinesUpAction"))==null||ce.run();break;case"move-line-down":(oe=y.getAction("editor.action.moveLinesDownAction"))==null||oe.run();break;case"toggle-comment":(de=y.getAction("editor.action.commentLine"))==null||de.run();break;case"block-comment":(re=y.getAction("editor.action.blockComment"))==null||re.run();break;case"transpose-line":{const q=y.getPosition();if(!q||q.lineNumber<=1)break;const ke=B.getLineContent(q.lineNumber),Ie=B.getLineContent(q.lineNumber-1);y.executeEdits("transpose",[{range:new j.Range(q.lineNumber-1,1,q.lineNumber,B.getLineMaxColumn(q.lineNumber)),text:ke+`
`+Ie}]);break}case"split-lines":{const q=y.getSelection();if(q&&!q.isEmpty()){const ke=B.getValueInRange(q);y.executeEdits("split",[{range:q,text:ke.split("").join(`
`)}])}break}case"join-lines":{const q=y.getSelection();q&&!q.isEmpty()&&y.executeEdits("join",[{range:q,text:B.getValueInRange(q).replace(/\n/g," ")}]);break}case"uppercase":{const q=y.getSelection();q&&!q.isEmpty()&&y.executeEdits("uppercase",[{range:q,text:B.getValueInRange(q).toUpperCase()}]);break}case"lowercase":{const q=y.getSelection();q&&!q.isEmpty()&&y.executeEdits("lowercase",[{range:q,text:B.getValueInRange(q).toLowerCase()}]);break}case"proper-case":{const q=y.getSelection();q&&!q.isEmpty()&&y.executeEdits("proper",[{range:q,text:B.getValueInRange(q).replace(/\w\S*/g,ke=>ke.charAt(0).toUpperCase()+ke.substr(1).toLowerCase())}]);break}case"sentence-case":{const q=y.getSelection();q&&!q.isEmpty()&&y.executeEdits("sentence",[{range:q,text:B.getValueInRange(q).toLowerCase().replace(/(^\s*\w|[.!?]\s+\w)/g,ke=>ke.toUpperCase())}]);break}case"invert-case":{const q=y.getSelection();q&&!q.isEmpty()&&y.executeEdits("invert",[{range:q,text:B.getValueInRange(q).split("").map(ke=>ke===ke.toUpperCase()?ke.toLowerCase():ke.toUpperCase()).join("")}]);break}case"random-case":{const q=y.getSelection();q&&!q.isEmpty()&&y.executeEdits("random",[{range:q,text:B.getValueInRange(q).split("").map(ke=>Math.random()>.5?ke.toUpperCase():ke.toLowerCase()).join("")}]);break}case"insert-datetime":{const q=y.getPosition();if(q){const Ie=new Date().toISOString().replace("T"," ").replace(/\.\d+Z/,"");y.executeEdits("datetime",[{range:new j.Range(q.lineNumber,q.column,q.lineNumber,q.column),text:Ie}])}break}case"sort-asc":case"sort-desc":case"sort-asc-ci":case"sort-desc-ci":case"sort-len-asc":case"sort-len-desc":{const q=B.getFullModelRange(),ke=B.getValue().split(`
`);Z==="sort-asc"?ke.sort((Ie,Oe)=>Ie.localeCompare(Oe)):Z==="sort-desc"?ke.sort((Ie,Oe)=>Oe.localeCompare(Ie)):Z==="sort-asc-ci"?ke.sort((Ie,Oe)=>Ie.toLowerCase().localeCompare(Oe.toLowerCase())):Z==="sort-desc-ci"?ke.sort((Ie,Oe)=>Oe.toLowerCase().localeCompare(Ie.toLowerCase())):Z==="sort-len-asc"?ke.sort((Ie,Oe)=>Ie.length-Oe.length):Z==="sort-len-desc"&&ke.sort((Ie,Oe)=>Oe.length-Ie.length),y.executeEdits("sort",[{range:q,text:ke.join(`
`)}]);break}case"remove-duplicates":{const q=B.getFullModelRange();y.executeEdits("remove-dup",[{range:q,text:[...new Set(B.getValue().split(`
`))].join(`
`)}]);break}case"remove-consecutive-duplicates":{const q=B.getFullModelRange(),ke=B.getValue().split(`
`);y.executeEdits("remove-consec-dup",[{range:q,text:ke.filter((Ie,Oe)=>Oe===0||Ie!==ke[Oe-1]).join(`
`)}]);break}case"remove-empty-lines":{y.executeEdits("remove-empty",[{range:B.getFullModelRange(),text:B.getValue().split(`
`).filter(q=>q.trim()!=="").join(`
`)}]);break}case"remove-blank-lines":{y.executeEdits("remove-blank",[{range:B.getFullModelRange(),text:B.getValue().split(`
`).filter(q=>q!=="").join(`
`)}]);break}case"trim-trailing":{y.executeEdits("trim",[{range:B.getFullModelRange(),text:B.getValue().split(`
`).map(q=>q.trimEnd()).join(`
`)}]);break}case"trim-leading":{y.executeEdits("trim-lead",[{range:B.getFullModelRange(),text:B.getValue().split(`
`).map(q=>q.trimStart()).join(`
`)}]);break}case"trim-both":{y.executeEdits("trim-both",[{range:B.getFullModelRange(),text:B.getValue().split(`
`).map(q=>q.trim()).join(`
`)}]);break}case"eol-to-space":{y.executeEdits("eol-space",[{range:B.getFullModelRange(),text:B.getValue().replace(/\n/g," ")}]);break}case"tab-to-space":{const q=" ".repeat($e.getState().settings.tabSize);y.executeEdits("tab-space",[{range:B.getFullModelRange(),text:B.getValue().replace(/\t/g,q)}]);break}case"space-to-tab-leading":{const q=$e.getState().settings.tabSize,ke=new RegExp(`^( {${q}})+`,"gm");y.executeEdits("space-tab",[{range:B.getFullModelRange(),text:B.getValue().replace(ke,Ie=>"	".repeat(Ie.length/q))}]);break}case"space-to-tab-all":{const q=$e.getState().settings.tabSize;y.executeEdits("space-tab-all",[{range:B.getFullModelRange(),text:B.getValue().split(" ".repeat(q)).join("	")}]);break}case"insert-blank-above":{const q=y.getPosition();q&&y.executeEdits("blank-above",[{range:new j.Range(q.lineNumber,1,q.lineNumber,1),text:`
`}]);break}case"insert-blank-below":{const q=y.getPosition();q&&y.executeEdits("blank-below",[{range:new j.Range(q.lineNumber,B.getLineMaxColumn(q.lineNumber),q.lineNumber,B.getLineMaxColumn(q.lineNumber)),text:`
`}]);break}case"reverse-lines":{y.executeEdits("reverse",[{range:B.getFullModelRange(),text:B.getValue().split(`
`).reverse().join(`
`)}]);break}case"fold-all":(me=y.getAction("editor.foldAll"))==null||me.run();break;case"unfold-all":(ae=y.getAction("editor.unfoldAll"))==null||ae.run();break;case"fold-level":{const q=z;(ie=y.getAction(`editor.foldLevel${q}`))==null||ie.run();break}case"select-to-bracket":(se=y.getAction("editor.action.selectToBracket"))==null||se.run();break;case"goto-bracket":(he=y.getAction("editor.action.jumpToBracket"))==null||he.run();break;case"toggle-bookmark":{const q=(Ne=y.getPosition())==null?void 0:Ne.lineNumber;if(q){const ke=[...e.bookmarks],Ie=ke.indexOf(q);Ie>=0?ke.splice(Ie,1):ke.push(q),ke.sort((Oe,Fe)=>Oe-Fe),d(e.id,{bookmarks:ke})}break}case"next-bookmark":{const q=((_e=y.getPosition())==null?void 0:_e.lineNumber)||1,Ie=e.bookmarks.find(Oe=>Oe>q)||e.bookmarks[0];Ie&&y.setPosition({lineNumber:Ie,column:1}),y.revealLineInCenter(Ie||q);break}case"prev-bookmark":{const q=((Be=y.getPosition())==null?void 0:Be.lineNumber)||1,Ie=[...e.bookmarks].reverse().find(Oe=>Oe<q)||e.bookmarks[e.bookmarks.length-1];Ie&&y.setPosition({lineNumber:Ie,column:1}),y.revealLineInCenter(Ie||q);break}case"clear-bookmarks":{d(e.id,{bookmarks:[]});break}case"mark-style":{const q=y.getSelection();if(q&&!q.isEmpty()){const ke=[...e.marks||[]];ke.push({line:q.startLineNumber,column:q.startColumn,length:B.getValueInRange(q).length,style:z||1}),d(e.id,{marks:ke})}break}case"clear-marks":{d(e.id,{marks:[]});break}case"cut-marked-lines":case"copy-marked-lines":case"delete-marked-lines":case"delete-unmarked-lines":case"paste-marked-lines":case"inverse-marks":{const q=e.marks||[];if(q.length===0)break;const ke=new Set(q.map(Fe=>Fe.line)),Ie=B.getValue().split(`
`),Oe=(Fe,Me)=>ke.has(Me+1);if(Z==="cut-marked-lines"){const Fe=Ie.filter((Xe,Ye)=>Oe(Xe,Ye));navigator.clipboard.writeText(Fe.join(`
`));const Me=Ie.filter((Xe,Ye)=>!Oe(Xe,Ye));y.executeEdits("cut-marked",[{range:B.getFullModelRange(),text:Me.join(`
`)}])}else if(Z==="copy-marked-lines")navigator.clipboard.writeText(Ie.filter((Fe,Me)=>Oe(Fe,Me)).join(`
`));else if(Z==="delete-marked-lines")y.executeEdits("del-marked",[{range:B.getFullModelRange(),text:Ie.filter((Fe,Me)=>!Oe(Fe,Me)).join(`
`)}]);else if(Z==="delete-unmarked-lines")y.executeEdits("del-unmarked",[{range:B.getFullModelRange(),text:Ie.filter((Fe,Me)=>Oe(Fe,Me)).join(`
`)}]);else if(Z==="paste-marked-lines")navigator.clipboard.readText().then(Fe=>{const Me=Ie.map((Xe,Ye)=>Oe(Xe,Ye)?Fe:Xe);y.executeEdits("paste-marked",[{range:B.getFullModelRange(),text:Me.join(`
`)}])});else if(Z==="inverse-marks"){const Fe=Ie.map((Me,Xe)=>Xe+1).filter(Me=>!ke.has(Me)).map(Me=>({line:Me,column:1,length:Ie[Me-1].length,style:1}));d(e.id,{marks:Fe})}break}case"macro-playback":{const ke=$e.getState().currentMacroActions;if(ke.length===0)break;for(const Ie of ke)Ie.type==="type"?y.trigger("keyboard","type",{text:Ie.data}):Ie.type==="command"&&y.trigger("keyboard",Ie.data,null);break}case"macro-run-multiple":{const q=prompt("Run macro how many times?","10");if(!q)break;const ke=parseInt(q,10);if(isNaN(ke)||ke<1)break;const Oe=$e.getState().currentMacroActions;if(Oe.length===0)break;for(let Fe=0;Fe<ke;Fe++)for(const Me of Oe)Me.type==="type"?y.trigger("keyboard","type",{text:Me.data}):Me.type==="command"&&y.trigger("keyboard",Me.data,null);break}case"macro-save":{const q=$e.getState();if(q.currentMacroActions.length===0)break;const ke=prompt("Save macro as:","My Macro");ke&&q.saveMacro(ke);break}case"hash-md5-file":case"hash-sha256-file":{const q=document.createElement("input");q.type="file",q.onchange=async()=>{var Xe;const ke=(Xe=q.files)==null?void 0:Xe[0];if(!ke)return;const Ie=await ke.text(),Oe=Z==="hash-md5-file"?"md5":"sha256",Fe=await ls(Oe,Ie),Me=y.getPosition();Me&&y.executeEdits("hash-file",[{range:new j.Range(Me.lineNumber,Me.column,Me.lineNumber,Me.column),text:`
// ${Oe.toUpperCase()} (${ke.name}): ${Fe}
`}])},q.click();break}case"json-format":{try{y.executeEdits("json-fmt",[{range:B.getFullModelRange(),text:JSON.stringify(JSON.parse(B.getValue()),null,2)}])}catch{}break}case"json-minify":{try{y.executeEdits("json-min",[{range:B.getFullModelRange(),text:JSON.stringify(JSON.parse(B.getValue()))}])}catch{}break}case"hash-md5":case"hash-sha1":case"hash-sha256":case"hash-sha512":{const q=y.getSelection();let ke=q&&!q.isEmpty()?B.getValueInRange(q):B.getValue();ls(Z.replace("hash-",""),ke).then(Ie=>{const Oe=y.getPosition();Oe&&y.executeEdits("hash",[{range:new j.Range(Oe.lineNumber,Oe.column,Oe.lineNumber,Oe.column),text:`
// ${Z.replace("hash-","").toUpperCase()}: ${Ie}
`}])});break}case"hash-md5-clipboard":case"hash-sha1-clipboard":case"hash-sha256-clipboard":case"hash-sha512-clipboard":{const q=y.getSelection();let ke=q&&!q.isEmpty()?B.getValueInRange(q):B.getValue();ls(Z.replace("hash-","").replace("-clipboard",""),ke).then(Ie=>navigator.clipboard.writeText(Ie));break}case"base64-encode":{const q=y.getSelection();q&&!q.isEmpty()&&y.executeEdits("b64enc",[{range:q,text:btoa(B.getValueInRange(q))}]);break}case"base64-decode":{const q=y.getSelection();if(q&&!q.isEmpty())try{y.executeEdits("b64dec",[{range:q,text:atob(B.getValueInRange(q))}])}catch{}break}case"url-encode":{const q=y.getSelection();q&&!q.isEmpty()&&y.executeEdits("urlenc",[{range:q,text:encodeURIComponent(B.getValueInRange(q))}]);break}case"url-decode":{const q=y.getSelection();if(q&&!q.isEmpty())try{y.executeEdits("urldec",[{range:q,text:decodeURIComponent(B.getValueInRange(q))}])}catch{}break}case"copy-file-path":{e.path&&navigator.clipboard.writeText(e.path);break}case"copy-file-name":{navigator.clipboard.writeText(e.name);break}case"copy-file-dir":{e.path&&navigator.clipboard.writeText(e.path.substring(0,e.path.lastIndexOf("/")));break}case"toggle-readonly":{d(e.id,{isReadOnly:!e.isReadOnly});break}case"ai-explain":{const q=y.getSelection();q&&!q.isEmpty()&&cd(B.getValueInRange(q),B.getLanguageId()||"plaintext");break}case"ai-refactor":{const q=y.getSelection();q&&!q.isEmpty()&&ld(B.getValueInRange(q),B.getLanguageId()||"plaintext",ke=>{y.executeEdits("ai-refactor",[{range:q,text:ke}])});break}case"ai-generate-tests":{const q=y.getSelection();q&&!q.isEmpty()&&ud(B.getValueInRange(q),B.getLanguageId()||"plaintext",ke=>{const Ie=B.getLineCount(),Oe=B.getLineMaxColumn(Ie);y.executeEdits("ai-tests",[{range:new j.Range(Ie,Oe,Ie,Oe),text:`

`+ke}])});break}case"ai-generate-docs":{const q=y.getSelection();q&&!q.isEmpty()&&fd(B.getValueInRange(q),B.getLanguageId()||"plaintext",ke=>{y.executeEdits("ai-docs",[{range:q,text:ke}])});break}case"ai-simplify":{const q=y.getSelection();q&&!q.isEmpty()&&dd(B.getValueInRange(q),B.getLanguageId()||"plaintext",ke=>{y.executeEdits("ai-simplify",[{range:q,text:ke}])});break}}});const L=Z=>{const{query:z,direction:B,isCaseSensitive:Y,isWholeWord:U,isRegex:ce}=Z.detail;if(!z)return;const oe=y.getModel();if(!oe)return;const de=oe.getValue(),re=y.getPosition(),me=re?oe.getOffsetAt(re):0;let ae="g";Y||(ae+="i");let ie;ce?ie=z:ie=z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),U&&(ie=`\\b${ie}\\b`);let se;try{se=new RegExp(ie,ae)}catch{return}const he=[];let Ne;for(;(Ne=se.exec(de))!==null;)he.push({start:Ne.index,end:Ne.index+Ne[0].length}),Ne[0].length===0&&se.lastIndex++;if(he.length===0)return;let _e;B==="next"?_e=he.find(ke=>ke.start>=me)||he[0]:_e=[...he].reverse().find(ke=>ke.end<=me)||he[he.length-1];const Be=oe.getPositionAt(_e.start),q=oe.getPositionAt(_e.end);y.setSelection(new j.Range(Be.lineNumber,Be.column,q.lineNumber,q.column)),y.revealLineInCenter(Be.lineNumber)},F=Z=>{const{find:z,replace:B,all:Y,isCaseSensitive:U,isWholeWord:ce,isRegex:oe}=Z.detail;if(!z)return;const de=y.getModel();if(!de)return;let re="g";U||(re+="i");let me;oe?me=z:me=z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ce&&(me=`\\b${me}\\b`);let ae;try{ae=new RegExp(me,re)}catch{return}if(Y){const ie=de.getFullModelRange(),se=de.getValue().replace(ae,B);y.executeEdits("replace-all",[{range:ie,text:se}])}else{const ie=y.getSelection();if(ie&&!ie.isEmpty()){const se=de.getValueInRange(ie),he=new RegExp(me,U?"":"i");he.test(se)&&y.executeEdits("replace",[{range:ie,text:se.replace(he,B)}])}L(new CustomEvent("notemac-find",{detail:{query:z,direction:"next",isCaseSensitive:U,isWholeWord:ce,isRegex:oe}}))}},N=Z=>{const{query:z,isCaseSensitive:B,isWholeWord:Y,isRegex:U,style:ce}=Z.detail;if(!z)return;const oe=y.getModel();if(!oe)return;let de="g";B||(de+="i");let re=U?z:z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");Y&&(re=`\\b${re}\\b`);let me;try{me=new RegExp(re,de)}catch{return}const ae=oe.getValue(),ie=[];let se;for(;(se=me.exec(ae))!==null;){const Ne=oe.getPositionAt(se.index);ie.push({line:Ne.lineNumber,column:Ne.column,length:se[0].length,style:ce||1}),se[0].length===0&&me.lastIndex++}const he=e.marks||[];d(e.id,{marks:[...he,...ie]})},G=()=>{d(e.id,{marks:[]})},W=Z=>{const{line:z}=Z.detail;z&&(y.setPosition({lineNumber:z,column:1}),y.revealLineInCenter(z),y.focus())},ne=Z=>{const{text:z,startLine:B,endLine:Y,column:U}=Z.detail,ce=y.getModel();if(!ce)return;const oe=[],de=Math.min(Y||ce.getLineCount(),ce.getLineCount());for(let re=B||1;re<=de;re++){const me=Math.min(U||1,ce.getLineMaxColumn(re));oe.push({range:new j.Range(re,me,re,me),text:z||""})}0<oe.length&&y.executeEdits("column-edit",oe)};return document.addEventListener("notemac-find",L),document.addEventListener("notemac-replace",F),document.addEventListener("notemac-mark",N),document.addEventListener("notemac-clear-marks",G),document.addEventListener("notemac-goto-line",W),document.addEventListener("notemac-column-edit",ne),()=>{Om(),Tm(),document.removeEventListener("notemac-find",L),document.removeEventListener("notemac-replace",F),document.removeEventListener("notemac-mark",N),document.removeEventListener("notemac-clear-marks",G),document.removeEventListener("notemac-goto-line",W),document.removeEventListener("notemac-column-edit",ne)}},[S,e.id,e.bookmarks,e.marks]),ve.useEffect(()=>{const y=c.current,j=u.current;if(!y||!j||!S)return;const X=e.bookmarks.map(F=>({range:new j.Range(F,1,F,1),options:{isWholeLine:!0,linesDecorationsClassName:"bookmark-decoration",glyphMarginClassName:"bookmark-glyph",overviewRuler:{color:"#007acc",position:1}}})),L=y.deltaDecorations([],X);return()=>{y.deltaDecorations(L,[])}},[e.bookmarks,S]),C.jsx("div",{style:{flex:1,overflow:"hidden"},children:C.jsx(z0,{height:"100%",language:e.language,value:e.content,onChange:R,onMount:_,theme:r.editorMonacoTheme,options:{fontSize:n.fontSize+s,fontFamily:n.fontFamily,tabSize:n.tabSize,insertSpaces:n.insertSpaces,wordWrap:n.wordWrap?"on":"off",lineNumbers:n.showLineNumbers?"on":"off",minimap:{enabled:n.showMinimap,scale:1,showSlider:"mouseover"},renderWhitespace:n.renderWhitespace,guides:{indentation:n.showIndentGuides,bracketPairs:!0},cursorBlinking:n.cursorBlinking,cursorStyle:n.cursorStyle,smoothScrolling:n.smoothScrolling,bracketPairColorization:{enabled:!0},matchBrackets:n.matchBrackets?"always":"never",autoClosingBrackets:n.autoCloseBrackets?"always":"never",autoClosingQuotes:n.autoCloseQuotes?"always":"never",renderLineHighlight:n.highlightCurrentLine?"all":"none",folding:!0,foldingStrategy:"indentation",showFoldingControls:"mouseover",glyphMargin:!0,scrollBeyondLastLine:!1,automaticLayout:!0,contextmenu:!0,dragAndDrop:!0,links:!0,multiCursorModifier:"alt",inlineSuggest:{enabled:!0},snippetSuggestions:"top",suggestOnTriggerCharacters:!0,wordBasedSuggestions:"currentDocument",padding:{top:8},readOnly:e.isReadOnly,overviewRulerBorder:!1,hideCursorInOverviewRuler:!1,colorDecorators:!0,columnSelection:!0,copyWithSyntaxHighlighting:!0,emptySelectionClipboard:!0,find:{addExtraSpaceOnTop:!1,autoFindInSelection:"never",seedSearchStringFromSelection:"always"}},loading:C.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:r.textMuted},children:"Loading editor..."})})})}async function ls(e,r){const s=new TextEncoder().encode(r),c={md5:"MD5",sha1:"SHA-1",sha256:"SHA-256",sha512:"SHA-512"}[e];if(!c||e==="md5"){let u=0;for(let p=0;p<r.length;p++){const d=r.charCodeAt(p);u=(u<<5)-u+d,u=u&u}return Math.abs(u).toString(16).padStart(8,"0")}try{const u=await crypto.subtle.digest(c,s);return Array.from(new Uint8Array(u)).map(d=>d.toString(16).padStart(2,"0")).join("")}catch{return"error computing hash"}}function ab(e){return e.trim().split(/\s+/).filter(Boolean).length}function ob(e){return e?e.split(/\r\n|\r|\n/).length:0}function Rv(e){return 1024>e?`${e} B`:1024*1024>e?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function pd(e){return{plaintext:"Plain Text",javascript:"JavaScript",typescript:"TypeScript",python:"Python",ruby:"Ruby",go:"Go",rust:"Rust",c:"C",cpp:"C++",csharp:"C#",java:"Java",swift:"Swift",kotlin:"Kotlin",php:"PHP",html:"HTML",css:"CSS",scss:"SCSS",less:"LESS",json:"JSON",xml:"XML",yaml:"YAML",markdown:"Markdown",sql:"SQL",shell:"Shell",powershell:"PowerShell",r:"R",lua:"Lua",perl:"Perl",dart:"Dart",elixir:"Elixir",erlang:"Erlang",haskell:"Haskell",scala:"Scala",clojure:"Clojure",coffeescript:"CoffeeScript",bat:"Batch",ini:"INI",dockerfile:"Dockerfile",graphql:"GraphQL"}[e]||e}function sb({theme:e}){const{tabs:r,activeTabId:n,settings:s,zoomLevel:c,isRecordingMacro:u,updateTab:p,updateSettings:d,isRepoInitialized:h,currentBranch:S,gitStatus:x,setSidebarPanel:_,aiEnabled:R,isAiStreaming:y,activeModelId:j,inlineSuggestionEnabled:X,SetShowAiSettings:L}=$e(),F=r.find(ae=>ae.id===n),[N,G]=ve.useState(!1),[W,ne]=ve.useState(!1),[Z,z]=ve.useState(!1);if(F===void 0)return null;const B=ob(F.content),Y=F.content.length,U=ab(F.content),ce=["plaintext","javascript","typescript","python","ruby","go","rust","c","cpp","csharp","java","swift","kotlin","php","html","css","scss","json","xml","yaml","markdown","sql","shell","lua","perl","r","dart","scala","haskell"],oe=["utf-8","utf-8-bom","utf-16le","utf-16be","iso-8859-1","windows-1252"],de=[{value:"LF",label:"LF (Unix/Mac)"},{value:"CRLF",label:"CRLF (Windows)"},{value:"CR",label:"CR (Old Mac)"}],re=kt.memo(({children:ae,onClick:ie,title:se})=>{const[he,Ne]=ve.useState(!1);return C.jsx("div",{title:se,onClick:ie,onMouseEnter:()=>Ne(!0),onMouseLeave:()=>Ne(!1),style:{padding:"0 8px",cursor:ie!==null?"pointer":"default",backgroundColor:he&&ie!==null?"rgba(255,255,255,0.1)":"transparent",height:"100%",display:"flex",alignItems:"center",borderRadius:2,position:"relative"},children:ae})});re.displayName="StatusItem";const me=kt.memo(({items:ae,onSelect:ie,onClose:se})=>C.jsxs(C.Fragment,{children:[C.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:Wg},onClick:se}),C.jsx("div",{style:{position:"absolute",bottom:"100%",left:0,minWidth:180,maxHeight:Hg,overflowY:"auto",backgroundColor:e.menuBg,border:`1px solid ${e.border}`,borderRadius:6,padding:"4px 0",zIndex:Vg,boxShadow:"0 -4px 16px rgba(0,0,0,0.3)"},children:ae.map(he=>C.jsx("div",{onClick:()=>{ie(he.value),se()},style:{padding:"6px 16px",cursor:"pointer",fontSize:13,color:e.menuText},onMouseEnter:Ne=>Ne.target.style.backgroundColor=e.bgHover,onMouseLeave:Ne=>Ne.target.style.backgroundColor="transparent",children:he.label},he.value))})]}));return me.displayName="Picker",C.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",height:24,backgroundColor:e.statusBarBg,color:e.statusBarText,fontSize:12,flexShrink:0,padding:"0 4px"},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",height:"100%"},children:[h===!0&&C.jsx(re,{title:`Branch: ${S}${x!==null&&x.aheadBy!==void 0?` ${x.aheadBy}`:""}${x!==null&&x.behindBy!==void 0?` ${x.behindBy}`:""}`,onClick:()=>_("git"),children:C.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[C.jsx("span",{style:{fontSize:11},children:""}),S,x!==null&&0<x.aheadBy&&C.jsxs("span",{style:{fontSize:10},children:["",x.aheadBy]}),x!==null&&0<x.behindBy&&C.jsxs("span",{style:{fontSize:10},children:["",x.behindBy]}),x!==null&&x.isRepoDirty===!0&&C.jsx("span",{style:{fontSize:10,color:"#f9e2af"},children:""})]})}),u===!0&&C.jsx(re,{children:C.jsxs("span",{className:"recording-indicator",style:{color:"#ff4444"},children:[""," Recording"]})}),C.jsxs(re,{title:"Cursor Position",children:["Ln ",F.cursorLine,", Col ",F.cursorColumn]}),C.jsxs(re,{title:"Character Count",children:[Y," chars"]}),C.jsxs(re,{title:"Word Count",children:[U," words"]}),C.jsxs(re,{title:"Line Count",children:[B," lines"]})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",height:"100%"},children:[C.jsxs(re,{title:"Tab Size",onClick:()=>{const ae=s.tabSize===4?2:4;d({tabSize:ae})},children:[s.insertSpaces?"Spaces":"Tabs",": ",s.tabSize]}),C.jsxs(re,{title:"Line Ending",onClick:()=>z(!Z),children:[F.lineEnding,Z&&C.jsx(me,{items:de.map(ae=>({value:ae.value,label:ae.label})),onSelect:ae=>p(F.id,{lineEnding:ae}),onClose:()=>z(!1)})]}),C.jsxs(re,{title:"Encoding",onClick:()=>ne(!W),children:[F.encoding.toUpperCase(),W&&C.jsx(me,{items:oe.map(ae=>({value:ae,label:ae.toUpperCase()})),onSelect:ae=>p(F.id,{encoding:ae}),onClose:()=>ne(!1)})]}),C.jsxs(re,{title:"Language",onClick:()=>G(!N),children:[pd(F.language),N&&C.jsx(me,{items:ce.map(ae=>({value:ae,label:pd(ae)})),onSelect:ae=>p(F.id,{language:ae}),onClose:()=>G(!1)})]}),R===!0&&C.jsx(re,{title:`AI: ${j}${X===!0?" (Inline On)":""}`,onClick:()=>L(!0),children:C.jsx("span",{style:{display:"flex",alignItems:"center",gap:4},children:y===!0?C.jsxs("span",{style:{color:"#a6e3a1",animation:"pulse 1s infinite"},children:[""," Generating..."]}):C.jsxs("span",{style:{color:e.statusBarText,opacity:.8},children:[""," ",j||"No Model"]})})}),c!==0&&C.jsxs(re,{title:"Zoom Level",children:[0<c?"+":"",c]})]})]})}const cb=ve.lazy(()=>Rt(()=>import("./GitPanelViewPresenter-59KPzuKZ.js"),__vite__mapDeps([0,1,2,3])).then(e=>({default:e.GitPanelViewPresenter}))),lb=ve.lazy(()=>Rt(()=>import("./AIChatPanelViewPresenter-BKNEFjbT.js"),__vite__mapDeps([4,1,2,3])).then(e=>({default:e.AIChatPanelViewPresenter})));function ub({theme:e}){const{sidebarPanel:r,sidebarWidth:n,fileTree:s,workspacePath:c,tabs:u,activeTabId:p,setSidebarPanel:d,toggleTreeNode:h,addTab:S,setActiveTab:x,setFileTree:_,setWorkspacePath:R,GetChangedFileCount:y}=$e(),[j,X]=ve.useState(!1),[L,F]=ve.useState(n),N=ve.useRef(null),G=ve.useRef(null),W=ve.useCallback(Y=>{Y.preventDefault(),X(!0);const U=Y.clientX,ce=L,oe=re=>{const me=Math.max($g,Math.min(Ng,ce+re.clientX-U));F(me)},de=()=>{X(!1),N.current!==null&&document.removeEventListener("mousemove",N.current),G.current!==null&&document.removeEventListener("mouseup",G.current),N.current=null,G.current=null};N.current=oe,G.current=de,document.addEventListener("mousemove",oe),document.addEventListener("mouseup",de)},[L]);ve.useEffect(()=>()=>{N.current!==null&&document.removeEventListener("mousemove",N.current),G.current!==null&&document.removeEventListener("mouseup",G.current)},[]);const ne=async()=>{if("showDirectoryPicker"in window)try{const Y=await window.showDirectoryPicker(),U=await gh(Y);_(U),R(Y.name),Xd(Y.name,Y),eh(),await th()}catch{}},Z=async Y=>{if(Y.isDirectory){h(Y.path);return}const U=u.find(ce=>ce.path===Y.path||ce.name===Y.name);if(U){x(U.id);return}if(window.electronAPI){const ce=await window.electronAPI.readFile(Y.path);S({name:Y.name,path:Y.path,content:ce,language:dr(Y.name),lineEnding:Ar(ce)})}else if(Y.handle)try{const oe=await(await Y.handle.getFile()).text();S({name:Y.name,path:Y.path,content:oe,language:dr(Y.name),lineEnding:Ar(oe)})}catch{}},z=kt.memo(({node:Y,depth:U=0})=>{var me,ae;const[ce,oe]=ve.useState(!1),de=Y.isExpanded,re=((me=u.find(ie=>ie.id===p))==null?void 0:me.path)===Y.path;return C.jsxs("div",{children:[C.jsxs("div",{onClick:()=>Z(Y),onMouseEnter:()=>oe(!0),onMouseLeave:()=>oe(!1),style:{display:"flex",alignItems:"center",gap:4,padding:"3px 8px",paddingLeft:8+U*16,cursor:"pointer",backgroundColor:re?e.bgActive:ce?e.bgHover:"transparent",color:re?e.text:e.sidebarText,fontSize:13,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[C.jsx("span",{style:{fontSize:10,width:16,textAlign:"center",flexShrink:0},children:Y.isDirectory?de?"":"":""}),C.jsx("span",{style:{marginRight:4,flexShrink:0},children:Y.isDirectory?de?"":"":gb(Y.name)}),C.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:Y.name})]}),Y.isDirectory&&de&&((ae=Y.children)==null?void 0:ae.map((ie,se)=>C.jsx(z,{node:ie,depth:U+1},ie.path||se)))]})});z.displayName="TreeNode";const B=kt.memo(()=>{const Y=u.find(ce=>ce.id===p);if(Y===void 0)return null;const U=mb(Y.content,Y.language);return C.jsxs("div",{style:{padding:8},children:[C.jsx("div",{style:{fontSize:11,color:e.textMuted,marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Functions"}),U.length===0?C.jsx("div",{style:{color:e.textMuted,fontSize:12,padding:8},children:"No functions found"}):U.map((ce,oe)=>C.jsxs("div",{onClick:()=>{document.dispatchEvent(new CustomEvent("notemac-goto-line",{detail:{line:ce.line}}))},style:{padding:"4px 8px",cursor:"pointer",fontSize:13,color:e.sidebarText,borderRadius:4},onMouseEnter:de=>de.target.style.backgroundColor=e.bgHover,onMouseLeave:de=>de.target.style.backgroundColor="transparent",children:[C.jsx("span",{style:{color:e.accent,marginRight:4},children:"f"}),ce.name,C.jsxs("span",{style:{color:e.textMuted,fontSize:11,marginLeft:8},children:[":",ce.line]})]},oe))]})});return B.displayName="FunctionListPanel",C.jsxs("div",{style:{display:"flex",flexShrink:0},children:[C.jsx("div",{style:{width:40,backgroundColor:e.bgSecondary,borderRight:`1px solid ${e.border}`,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:8,gap:4},children:[{panel:"explorer",icon:"",title:"Explorer"},{panel:"search",icon:"",title:"Search"},{panel:"functions",icon:"",title:"Function List"},{panel:"docList",icon:"",title:"Document List"},{panel:"project",icon:"",title:"Project"},{panel:"clipboardHistory",icon:"",title:"Clipboard History"},{panel:"charPanel",icon:"",title:"Character Panel"},{panel:"git",icon:"",title:"Source Control"},{panel:"ai",icon:"",title:"AI Assistant"}].map(({panel:Y,icon:U,title:ce})=>{const oe=Y==="git"?y():0;return C.jsxs("div",{title:ce,onClick:()=>d(r===Y?null:Y),style:{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:6,fontSize:16,backgroundColor:r===Y?e.bgHover:"transparent",borderLeft:r===Y?`2px solid ${e.accent}`:"2px solid transparent",position:"relative"},children:[U,oe>0&&C.jsx("span",{style:{position:"absolute",top:2,right:2,minWidth:14,height:14,borderRadius:7,backgroundColor:e.accent,color:e.accentText,fontSize:9,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 3px"},children:oe})]},Y)})}),r!==null&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{style:{width:L-40,backgroundColor:e.sidebarBg,borderRight:`1px solid ${e.border}`,overflow:"auto",display:"flex",flexDirection:"column"},children:[C.jsxs("div",{style:{padding:"8px 12px",fontSize:11,fontWeight:600,textTransform:"uppercase",letterSpacing:1,color:e.textSecondary,borderBottom:`1px solid ${e.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r==="explorer"?"Explorer":r==="search"?"Search":r==="functions"?"Functions":r==="docList"?"Document List":r==="project"?"Project":r==="clipboardHistory"?"Clipboard History":r==="charPanel"?"Character Panel":r==="git"?"Source Control":r==="ai"?"AI Assistant":"",C.jsx("div",{title:"Collapse Panel",onClick:()=>d(null),style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:4,fontSize:12,color:e.textMuted},onMouseEnter:Y=>{Y.target.style.backgroundColor=e.bgHover,Y.target.style.color=e.text},onMouseLeave:Y=>{Y.target.style.backgroundColor="transparent",Y.target.style.color=e.textMuted},children:""})]}),C.jsxs("div",{style:{flex:1,overflow:"auto"},children:[r==="explorer"&&C.jsx(C.Fragment,{children:s.length>0?C.jsxs("div",{style:{paddingTop:4},children:[c&&C.jsxs("div",{style:{padding:"6px 12px",fontSize:12,fontWeight:600,color:e.text,display:"flex",alignItems:"center",gap:6},children:[C.jsx("span",{children:""}),typeof c=="string"&&c.split("/").pop()||c]}),s.map((Y,U)=>C.jsx(z,{node:Y},Y.path||U))]}):C.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24,gap:12},children:[C.jsx("div",{style:{color:e.textMuted,fontSize:13,textAlign:"center"},children:"No folder opened"}),C.jsx("button",{onClick:ne,style:{backgroundColor:e.accent,color:e.accentText,border:"none",borderRadius:6,padding:"8px 16px",cursor:"pointer",fontSize:13},children:"Open Folder"})]})}),r==="search"&&C.jsx("div",{style:{padding:12},children:C.jsx(pb,{theme:e})}),r==="functions"&&C.jsx(B,{}),r==="docList"&&C.jsx(fb,{theme:e}),r==="project"&&C.jsx("div",{style:{padding:16,color:e.textMuted,fontSize:13,textAlign:"center"},children:c?C.jsxs("div",{children:[C.jsxs("div",{style:{fontWeight:600,color:e.text,marginBottom:8},children:["Project: ",typeof c=="string"?c.split("/").pop():c]}),C.jsxs("div",{children:[s.length," items"]})]}):"No project opened. Open a folder to use the project panel."}),r==="clipboardHistory"&&C.jsx(db,{theme:e}),r==="charPanel"&&C.jsx(hb,{theme:e}),r==="git"&&C.jsx(ve.Suspense,{fallback:C.jsx("div",{style:{padding:16,color:e.textMuted,fontSize:12},children:"Loading..."}),children:C.jsx(cb,{theme:e})}),r==="ai"&&C.jsx(ve.Suspense,{fallback:C.jsx("div",{style:{padding:16,color:e.textMuted,fontSize:12},children:"Loading..."}),children:C.jsx(lb,{theme:e})})]})]}),C.jsx("div",{className:`resizer ${j?"active":""}`,onMouseDown:W,style:{backgroundColor:j?e.accent:e.border}})]})]})}const fb=kt.memo(function({theme:r}){const{tabs:n,activeTabId:s,setActiveTab:c}=$e();return C.jsx("div",{style:{padding:4},children:n.map(u=>C.jsxs("div",{onClick:()=>c(u.id),style:{display:"flex",alignItems:"center",gap:6,padding:"5px 8px",cursor:"pointer",borderRadius:4,fontSize:13,color:u.id===s?r.text:r.sidebarText,backgroundColor:u.id===s?r.bgActive:"transparent"},children:[C.jsx("span",{style:{fontSize:10,color:u.isModified?r.accent:"transparent"},children:""}),C.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:u.name}),u.isPinned&&C.jsx("span",{style:{fontSize:10},children:""}),u.isReadOnly&&C.jsx("span",{style:{fontSize:10},children:""})]},u.id))})}),db=kt.memo(function({theme:r}){const{clipboardHistory:n}=$e();return C.jsxs("div",{style:{padding:8},children:[C.jsx("div",{style:{fontSize:11,color:r.textMuted,marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Clipboard History"}),n.length===0?C.jsx("div",{style:{color:r.textMuted,fontSize:12,padding:8},children:"No clipboard entries yet"}):n.map((s,c)=>C.jsxs("div",{onClick:()=>navigator.clipboard.writeText(s.text),style:{padding:"6px 8px",cursor:"pointer",fontSize:12,color:r.sidebarText,borderRadius:4,borderBottom:`1px solid ${r.border}`,marginBottom:2},title:"Click to copy",children:[C.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontFamily:"monospace"},children:s.text.slice(0,100)}),C.jsx("div",{style:{fontSize:10,color:r.textMuted,marginTop:2},children:new Date(s.timestamp).toLocaleTimeString()})]},c))]})}),hb=kt.memo(function({theme:r}){const{tabs:n,activeTabId:s}=$e(),c=n.find(S=>S.id===s),[u,p]=ve.useState(65),d=[{label:"Common Symbols",chars:""},{label:"Currency",chars:"$"},{label:"Greek",chars:""},{label:"Math",chars:""},{label:"Box Drawing",chars:""}],h=S=>{const x=Td();x!==null&&x("insert-text",S)};return C.jsxs("div",{style:{padding:8},children:[C.jsx("div",{style:{fontSize:11,color:r.textMuted,marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Character Panel"}),c!==void 0&&C.jsxs("div",{style:{fontSize:12,color:r.textSecondary,marginBottom:8,padding:"4px 0",borderBottom:`1px solid ${r.border}`},children:["Cursor pos: Ln ",c.cursorLine,", Col ",c.cursorColumn]}),C.jsxs("div",{style:{display:"flex",gap:4,marginBottom:8},children:[C.jsx("input",{type:"number",value:u,onChange:S=>p(parseInt(S.target.value)||0),style:{width:60,height:24,fontSize:12,backgroundColor:r.bg,color:r.text,border:`1px solid ${r.border}`,borderRadius:3,padding:"0 4px"}}),C.jsx("div",{style:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:r.bg,border:`1px solid ${r.border}`,borderRadius:3,fontFamily:"monospace",fontSize:14,color:r.accent},children:String.fromCharCode(u)}),C.jsx("button",{onClick:()=>h(String.fromCharCode(u)),style:{height:24,fontSize:11,backgroundColor:r.accent,color:r.accentText,border:"none",borderRadius:3,padding:"0 8px",cursor:"pointer"},children:"Insert"})]}),d.map((S,x)=>C.jsxs("div",{style:{marginBottom:8},children:[C.jsx("div",{style:{fontSize:11,color:r.textMuted,marginBottom:4},children:S.label}),C.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:2},children:S.chars.split("").map((_,R)=>C.jsx("div",{onClick:()=>h(_),title:`U+${_.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")}`,style:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",fontSize:13,fontFamily:"monospace",backgroundColor:r.bg,border:`1px solid ${r.border}`,borderRadius:2,cursor:"pointer",color:r.text},children:_},R))})]},x))]})}),pb=kt.memo(function({theme:r}){const[n,s]=ve.useState(""),[c,u]=ve.useState([]),p=()=>{const d=$e.getState().tabs,h=[];for(const S of d)S.content.split(`
`).forEach((_,R)=>{_.toLowerCase().includes(n.toLowerCase())&&h.push({file:S.name,line:R+1,text:_.trim()})});u(h)};return C.jsxs("div",{children:[C.jsx("div",{style:{display:"flex",gap:6},children:C.jsx("input",{type:"text",placeholder:"Search in files...",value:n,onChange:d=>s(d.target.value),onKeyDown:d=>d.key==="Enter"&&p(),style:{flex:1,height:28,backgroundColor:r.bg,color:r.text,border:`1px solid ${r.border}`,borderRadius:4,padding:"0 8px",fontSize:13}})}),0<c.length&&C.jsxs("div",{style:{marginTop:8},children:[C.jsxs("div",{style:{fontSize:12,color:r.textMuted,marginBottom:4},children:[c.length," results"]}),c.map((d,h)=>C.jsxs("div",{style:{padding:"4px 8px",fontSize:12,color:r.sidebarText,cursor:"pointer",borderRadius:4},onMouseEnter:S=>S.target.style.backgroundColor=r.bgHover,onMouseLeave:S=>S.target.style.backgroundColor="transparent",children:[C.jsxs("div",{style:{color:r.accent,fontSize:11},children:[d.file,":",d.line]}),C.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.text})]},h))]})]})});function gb(e){var s;const r=(s=e.split(".").pop())==null?void 0:s.toLowerCase();return{js:"",jsx:"",ts:"",tsx:"",py:"",rb:"",go:"",rs:"",html:"",css:"",json:"",md:"",txt:"",svg:""}[r||""]||""}function mb(e,r){const n=[],s=e.split(`
`),c={javascript:[/function\s+(\w+)/,/(?:const|let|var)\s+(\w+)\s*=\s*(?:async\s+)?(?:\([^)]*\)|(\w+))\s*=>/,/(\w+)\s*\([^)]*\)\s*\{/],typescript:[/function\s+(\w+)/,/(?:const|let|var)\s+(\w+)\s*=\s*(?:async\s+)?(?:\([^)]*\)|(\w+))\s*=>/,/(\w+)\s*\([^)]*\)\s*(?::\s*\w+)?\s*\{/],python:[/def\s+(\w+)/,/class\s+(\w+)/],ruby:[/def\s+(\w+)/,/class\s+(\w+)/],go:[/func\s+(?:\(\w+\s+\*?\w+\)\s+)?(\w+)/],rust:[/fn\s+(\w+)/,/struct\s+(\w+)/,/impl\s+(\w+)/],java:[/(?:public|private|protected|static|\s)+[\w<>\[\]]+\s+(\w+)\s*\(/],c:[/(?:void|int|char|float|double|long|short|unsigned|\w+)\s+(\w+)\s*\(/],cpp:[/(?:void|int|char|float|double|long|short|unsigned|\w+)\s+(\w+)\s*\(/],csharp:[/(?:public|private|protected|internal|static|\s)+[\w<>\[\]]+\s+(\w+)\s*\(/],swift:[/func\s+(\w+)/,/class\s+(\w+)/,/struct\s+(\w+)/],php:[/function\s+(\w+)/,/class\s+(\w+)/]},u=c[r]||c.javascript||[];return s.forEach((p,d)=>{for(const h of u){const S=p.match(h);if(S&&S[1]){const x=S[1];["if","else","for","while","switch","catch","return","new"].includes(x)||n.push({name:x,line:d+1});break}}}),n}async function gh(e,r=0){if(r>qg)return[];const n=[];for await(const s of e.values()){if(s.name.startsWith(".")||s.name==="node_modules")continue;const c={name:s.name,path:s.name,isDirectory:s.kind==="directory",isExpanded:!1,handle:s};s.kind==="directory"&&(c.children=await gh(s,r+1)),n.push(c)}return n.sort((s,c)=>s.isDirectory&&!c.isDirectory?-1:!s.isDirectory&&c.isDirectory?1:s.name.localeCompare(c.name))}function wb({theme:e}){const{findReplaceMode:r,searchOptions:n,updateSearchOptions:s,setShowFindReplace:c}=$e(),u=ve.useRef(null),[p,d]=ve.useState(0),[h,S]=ve.useState(0),[x,_]=ve.useState(1);ve.useEffect(()=>{var B,Y;(B=u.current)==null||B.focus(),(Y=u.current)==null||Y.select()},[r]);const R=ve.useCallback(B=>{y(n.query,B,n)},[n]),y=(B,Y,U)=>{document.dispatchEvent(new CustomEvent("notemac-find",{detail:{query:B,direction:Y,isCaseSensitive:U.isCaseSensitive,isWholeWord:U.isWholeWord,isRegex:U.isRegex}}))},j=()=>R("next"),X=()=>R("prev"),L=()=>{document.dispatchEvent(new CustomEvent("notemac-replace",{detail:{find:n.query,replace:n.replaceText,all:!1,...n}}))},F=()=>{document.dispatchEvent(new CustomEvent("notemac-replace",{detail:{find:n.query,replace:n.replaceText,all:!0,...n}}))},N=()=>{document.dispatchEvent(new CustomEvent("notemac-mark",{detail:{...n,style:x}}))},G=()=>{document.dispatchEvent(new CustomEvent("notemac-clear-marks",{}))},W=B=>{B.key==="Enter"&&(B.preventDefault(),B.shiftKey?X():j()),B.key==="Escape"&&c(!1)},ne=({active:B,onClick:Y,title:U,children:ce})=>C.jsx("button",{title:U,onClick:Y,style:{background:B?e.accent:"transparent",color:B?e.accentText:e.textSecondary,border:`1px solid ${B?e.accent:e.border}`,borderRadius:4,padding:"2px 6px",cursor:"pointer",fontSize:12,fontWeight:B?600:400,minWidth:28,height:24,display:"flex",alignItems:"center",justifyContent:"center"},children:ce}),Z=({onClick:B,title:Y,children:U,primary:ce})=>C.jsx("button",{title:Y,onClick:B,style:{background:ce?e.accent:"transparent",color:ce?e.accentText:e.textSecondary,border:`1px solid ${ce?e.accent:e.border}`,borderRadius:4,padding:"2px 8px",cursor:"pointer",fontSize:12,height:24,display:"flex",alignItems:"center",justifyContent:"center"},children:U}),z=[{key:"find",label:"Find"},{key:"replace",label:"Replace"},{key:"findInFiles",label:"Find in Files"},{key:"mark",label:"Mark"}];return C.jsxs("div",{style:{backgroundColor:e.findBg,borderBottom:`1px solid ${e.border}`,padding:"8px 12px",display:"flex",flexDirection:"column",gap:6,flexShrink:0},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:4},children:[z.map(B=>C.jsx("span",{onClick:()=>$e.getState().setShowFindReplace(!0,B.key),style:{fontSize:12,fontWeight:r===B.key?600:400,color:r===B.key?e.accent:e.textSecondary,cursor:"pointer",borderBottom:r===B.key?`2px solid ${e.accent}`:"none",paddingBottom:2},children:B.label},B.key)),C.jsx("div",{style:{flex:1}}),C.jsx("span",{onClick:()=>c(!1),style:{cursor:"pointer",color:e.textMuted,fontSize:16,padding:"0 4px"},children:""})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[C.jsx("input",{ref:u,type:"text",placeholder:"Find...",value:n.query,onChange:B=>s({query:B.target.value}),onKeyDown:W,style:{flex:1,height:28,backgroundColor:e.bg,color:e.text,border:`1px solid ${e.border}`,borderRadius:4,padding:"0 8px",fontSize:13}}),C.jsx(ne,{active:n.isCaseSensitive,onClick:()=>s({isCaseSensitive:!n.isCaseSensitive}),title:"Match Case",children:"Aa"}),C.jsx(ne,{active:n.isWholeWord,onClick:()=>s({isWholeWord:!n.isWholeWord}),title:"Whole Word",children:"W"}),C.jsx(ne,{active:n.isRegex,onClick:()=>s({isRegex:!n.isRegex}),title:"Use Regular Expression",children:".*"}),C.jsx(Z,{onClick:X,title:"Previous Match (Shift+Enter)",children:""}),C.jsx(Z,{onClick:j,title:"Next Match (Enter)",children:""})]}),(r==="replace"||r==="findInFiles")&&C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[C.jsx("input",{type:"text",placeholder:"Replace...",value:n.replaceText,onChange:B=>s({replaceText:B.target.value}),onKeyDown:W,style:{flex:1,height:28,backgroundColor:e.bg,color:e.text,border:`1px solid ${e.border}`,borderRadius:4,padding:"0 8px",fontSize:13}}),C.jsx(Z,{onClick:L,title:"Replace",children:"Replace"}),C.jsx(Z,{onClick:F,title:"Replace All",primary:!0,children:"Replace All"})]}),r==="mark"&&C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[C.jsx("span",{style:{fontSize:12,color:e.textSecondary},children:"Style:"}),[1,2,3,4,5].map(B=>C.jsx("div",{onClick:()=>_(B),style:{width:24,height:20,borderRadius:3,backgroundColor:wg[B],border:x===B?"2px solid white":`1px solid ${e.border}`,cursor:"pointer",opacity:x===B?1:.6,display:"flex",alignItems:"center",justifyContent:"center",fontSize:10,color:"#fff",fontWeight:700},children:B},B)),C.jsx("div",{style:{flex:1}}),C.jsx(Z,{onClick:N,title:"Mark All",primary:!0,children:"Mark All"}),C.jsx(Z,{onClick:G,title:"Clear All Marks",children:"Clear Marks"})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,fontSize:12,color:e.textSecondary},children:[C.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,cursor:"pointer"},children:[C.jsx("input",{type:"checkbox",checked:n.wrapAround,onChange:B=>s({wrapAround:B.target.checked}),style:{accentColor:e.accent}}),"Wrap around"]}),C.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,cursor:"pointer"},children:[C.jsx("input",{type:"checkbox",checked:n.searchInSelection,onChange:B=>s({searchInSelection:B.target.checked}),style:{accentColor:e.accent}}),"In selection"]})]})]})}function yb({theme:e}){const{addTab:r,recentFiles:n,setActiveTab:s}=$e(),u=navigator.platform.includes("Mac")?"":"Ctrl";return C.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:e.editorBg,gap:24},children:[C.jsxs("div",{style:{textAlign:"center"},children:[C.jsx("div",{style:{fontSize:64,fontWeight:200,color:e.textMuted,letterSpacing:-2,marginBottom:8},children:"N++"}),C.jsx("h1",{style:{fontSize:28,fontWeight:300,color:e.textSecondary,marginBottom:4},children:"Notemac++"}),C.jsx("p",{style:{color:e.textMuted,fontSize:14},children:"A powerful text editor for Mac & Web"})]}),C.jsxs("div",{style:{display:"flex",gap:12,marginTop:8},children:[C.jsx(us,{theme:e,label:"New File",shortcut:`${u}N`,onClick:()=>r()}),C.jsx(us,{theme:e,label:"Open File",shortcut:`${u}O`,onClick:()=>{window.electronAPI||bb().then(p=>{p&&r({name:p.name,content:p.content,language:dr(p.name),lineEnding:Ar(p.content)})})}}),C.jsx(us,{theme:e,label:"Open Folder",onClick:async()=>{if("showDirectoryPicker"in window)try{const p=await window.showDirectoryPicker();$e.getState().setSidebarPanel("explorer")}catch{}}})]}),C.jsxs("div",{style:{marginTop:24,padding:24,backgroundColor:e.bgSecondary,borderRadius:12,border:`1px solid ${e.border}`,width:400},children:[C.jsx("div",{style:{fontSize:12,fontWeight:600,color:e.textSecondary,textTransform:"uppercase",letterSpacing:1,marginBottom:12},children:"Keyboard Shortcuts"}),C.jsx("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px 16px",fontSize:13},children:[[`${u}N`,"New file"],[`${u}O`,"Open file"],[`${u}S`,"Save"],[`${u}F`,"Find"],[`${u}H`,"Find & Replace"],[`${u}G`,"Go to line"],[`${u}D`,"Duplicate line"],[`${u}B`,"Toggle sidebar"],[`${u},`,"Preferences"]].map(([p,d],h)=>C.jsxs(kt.Fragment,{children:[C.jsx("kbd",{style:{backgroundColor:e.bgTertiary,color:e.textSecondary,padding:"2px 8px",borderRadius:4,fontSize:12,fontFamily:"-apple-system, system-ui, sans-serif",border:`1px solid ${e.border}`,textAlign:"center",minWidth:60},children:p}),C.jsx("span",{style:{color:e.textSecondary},children:d})]},h))})]}),n.length>0&&C.jsxs("div",{style:{marginTop:8},children:[C.jsx("div",{style:{fontSize:12,fontWeight:600,color:e.textSecondary,textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Recent Files"}),n.slice(0,5).map((p,d)=>C.jsxs("div",{onClick:async()=>{if(window.electronAPI){const h=await window.electronAPI.readFile(p.path);r({name:p.name,path:p.path,content:h,language:dr(p.name),lineEnding:Ar(h)})}},style:{padding:"6px 12px",cursor:"pointer",color:e.accent,fontSize:13,borderRadius:4},onMouseEnter:h=>h.target.style.backgroundColor=e.bgHover,onMouseLeave:h=>h.target.style.backgroundColor="transparent",children:[p.name,C.jsx("span",{style:{color:e.textMuted,fontSize:11,marginLeft:8},children:p.path})]},d))]})]})}function us({theme:e,label:r,shortcut:n,onClick:s}){const[c,u]=kt.useState(!1);return C.jsxs("button",{onClick:s,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,padding:"12px 20px",backgroundColor:c?e.bgHover:e.bgSecondary,color:e.text,border:`1px solid ${e.border}`,borderRadius:8,cursor:"pointer",fontSize:13,transition:"background-color 0.15s ease",minWidth:110},children:[C.jsx("span",{children:r}),n&&C.jsx("span",{style:{fontSize:11,color:e.textMuted},children:n})]})}async function bb(){if("showOpenFilePicker"in window)try{const[e]=await window.showOpenFilePicker({multiple:!1}),r=await e.getFile(),n=await r.text();return{name:r.name,content:n}}catch{return null}return new Promise(e=>{const r=document.createElement("input");r.type="file",r.onchange=async n=>{var u;const s=(u=n.target.files)==null?void 0:u[0];if(!s){e(null);return}const c=await s.text();e({name:s.name,content:c})},r.click()})}const vb=1200*1e3,gd="notemac_feedback_shown_version",md="2.0.1";function xb({theme:e}){const[r,n]=ve.useState(!1),[s,c]=ve.useState(null);if(ve.useEffect(()=>{if(localStorage.getItem(gd)===md)return;const _=setTimeout(()=>{n(!0),localStorage.setItem(gd,md)},vb);return()=>clearTimeout(_)},[]),!r)return null;const u="I've been using Notemac++ and it's an awesome text editor for Mac & Web! Check it out:",p="https://sergioadevita.github.io/notemac-plus-plus/",d=encodeURIComponent("Check out Notemac++!"),h=encodeURIComponent(`Hey!

${u}
${p}

Give it a try!`),S=[{id:"github",label:"Open an issue",sublabel:"Report bugs or request features",icon:C.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:e.text,children:C.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),href:"https://github.com/sergioadevita/notemac-plus-plus/issues/new",color:e.bgTertiary,textColor:e.text,borderColor:e.border},{id:"twitter",label:"Share on X",sublabel:"Tell the world about it",icon:C.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"#fff",children:C.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),href:`https://twitter.com/intent/tweet?text=${encodeURIComponent(u)}&url=${encodeURIComponent(p)}`,color:"#000",textColor:"#fff",borderColor:"#333"},{id:"email",label:"Share via email",sublabel:"Send to a friend",icon:C.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:e.accent,children:C.jsx("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),href:`mailto:?subject=${d}&body=${h}`,color:e.bgTertiary,textColor:e.text,borderColor:e.border},{id:"donate",label:"Buy me a coffee",sublabel:"Support development",icon:C.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"#fff",children:C.jsx("path",{d:"M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604 0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407 0 0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"})}),href:"https://ko-fi.com/sergioadevita",color:"#FF5E5B",textColor:"#fff",borderColor:"#FF5E5B"}];return C.jsx("div",{className:"dialog-overlay",onClick:()=>n(!1),style:{zIndex:1e4},children:C.jsxs("div",{onClick:x=>x.stopPropagation(),style:{backgroundColor:e.bgSecondary,border:`1px solid ${e.border}`,borderRadius:16,padding:32,width:440,boxShadow:"0 12px 48px rgba(0,0,0,0.5)",textAlign:"center",animation:"feedbackSlideIn 0.4s ease-out"},children:[C.jsx("style",{children:`
                    @keyframes feedbackSlideIn {
                        from { opacity: 0; transform: translateY(30px) scale(0.95); }
                        to { opacity: 1; transform: translateY(0) scale(1); }
                    }
                `}),C.jsx("div",{style:{fontSize:48,marginBottom:8},children:""}),C.jsx("h2",{style:{color:e.text,fontSize:22,fontWeight:700,marginBottom:8},children:"Hey, you're still here!"}),C.jsxs("p",{style:{color:e.textSecondary,fontSize:14,lineHeight:1.6,marginBottom:8,padding:"0 8px"},children:["You've been coding for 20 minutes straight  that's either dedication or a really nasty bug. Either way, we're glad you're using ",C.jsx("span",{style:{color:e.accent,fontWeight:600},children:"Notemac++"}),"!"]}),C.jsx("p",{style:{color:e.textMuted,fontSize:13,marginBottom:24},children:"If this octopus has been helpful, here are some ways to spread the love:"}),C.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:24},children:S.map(x=>{let _=s===x.id;return C.jsxs("a",{href:x.href,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:12,backgroundColor:x.color,color:x.textColor,border:`1px solid ${x.borderColor}`,borderRadius:10,padding:"10px 16px",textDecoration:"none",transition:"all 0.2s ease",transform:_?"translateX(4px)":"none",opacity:_?.9:1},onMouseEnter:()=>c(x.id),onMouseLeave:()=>c(null),children:[C.jsx("div",{style:{flexShrink:0},children:x.icon}),C.jsxs("div",{style:{textAlign:"left"},children:[C.jsx("div",{style:{fontWeight:600,fontSize:14},children:x.label}),C.jsx("div",{style:{fontSize:11,opacity:.7},children:x.sublabel})]})]},x.id)})}),C.jsx("button",{onClick:()=>n(!1),style:{backgroundColor:"transparent",color:e.textMuted,border:"none",cursor:"pointer",fontSize:13,padding:"6px 16px",transition:"color 0.2s"},onMouseEnter:x=>x.currentTarget.style.color=e.text,onMouseLeave:x=>x.currentTarget.style.color=e.textMuted,children:"Maybe later  I'm in the zone"})]})})}const _b=ve.lazy(()=>Rt(()=>import("./SettingsDialogViewPresenter-C_j0QCRF.js"),__vite__mapDeps([5,1,2,3])).then(e=>({default:e.SettingsDialog}))),Sb=ve.lazy(()=>Rt(()=>import("./GoToLineDialogViewPresenter-CVvkqqdF.js"),__vite__mapDeps([6,1,2,3])).then(e=>({default:e.GoToLineDialog}))),kb=ve.lazy(()=>Rt(()=>import("./AboutDialogViewPresenter-D9Ndo33r.js"),__vite__mapDeps([7,1,2,3])).then(e=>({default:e.AboutDialog}))),Eb=ve.lazy(()=>Rt(()=>import("./RunCommandDialogViewPresenter-B02qNzUA.js"),__vite__mapDeps([8,1,2,3])).then(e=>({default:e.RunCommandDialog}))),Ab=ve.lazy(()=>Rt(()=>import("./ColumnEditorDialogViewPresenter-B3D7d_kq.js"),__vite__mapDeps([9,1,2,3])).then(e=>({default:e.ColumnEditorDialog}))),Ib=ve.lazy(()=>Rt(()=>import("./SummaryDialogViewPresenter-FgpLPeRF.js"),__vite__mapDeps([10,1,2,3])).then(e=>({default:e.SummaryDialog}))),Cb=ve.lazy(()=>Rt(()=>import("./CharInRangeDialogViewPresenter-C_A47Xyl.js"),__vite__mapDeps([11,1,2,3])).then(e=>({default:e.CharInRangeDialog}))),Tb=ve.lazy(()=>Rt(()=>import("./ShortcutMapperDialogViewPresenter-BStmJtPp.js"),__vite__mapDeps([12,13,1,2,3])).then(e=>({default:e.ShortcutMapperDialog}))),Rb=ve.lazy(()=>Rt(()=>import("./CommandPaletteViewPresenter-Dc1j_sei.js"),__vite__mapDeps([14,13,15,1,2,3])).then(e=>({default:e.CommandPaletteViewPresenter}))),Ob=ve.lazy(()=>Rt(()=>import("./QuickOpenViewPresenter-CtxwNbRR.js"),__vite__mapDeps([16,15,1,2,3])).then(e=>({default:e.QuickOpenViewPresenter}))),Pb=ve.lazy(()=>Rt(()=>import("./DiffViewerViewPresenter-BpF1wQme.js"),__vite__mapDeps([17,1,2,3])).then(e=>({default:e.DiffViewerViewPresenter}))),Mb=ve.lazy(()=>Rt(()=>import("./SnippetManagerViewPresenter-CH-qWYwm.js"),__vite__mapDeps([18,1,2,3])).then(e=>({default:e.SnippetManagerViewPresenter}))),Bb=ve.lazy(()=>Rt(()=>import("./TerminalPanelViewPresenter-DeRGdjlz.js"),__vite__mapDeps([19,1,2,3])).then(e=>({default:e.TerminalPanelViewPresenter}))),jb=ve.lazy(()=>Rt(()=>import("./CloneRepositoryViewPresenter-BkaXjiPh.js"),__vite__mapDeps([20,2,3,1])).then(e=>({default:e.CloneRepositoryViewPresenter}))),Fb=ve.lazy(()=>Rt(()=>import("./GitSettingsViewPresenter-C_8u8XhU.js"),__vite__mapDeps([21,1,2,3])).then(e=>({default:e.GitSettingsViewPresenter}))),Db=ve.lazy(()=>Rt(()=>import("./AISettingsViewPresenter-DykWXR0r.js"),__vite__mapDeps([22,1,2,3])).then(e=>({default:e.AISettingsViewPresenter})));function Lb(){const e=$e(ae=>ae.tabs),r=$e(ae=>ae.activeTabId);$e(ae=>ae.sidebarPanel);const n=$e(ae=>ae.showStatusBar),s=$e(ae=>ae.showToolbar),c=$e(ae=>ae.settings),u=$e(ae=>ae.showFindReplace),p=$e(ae=>ae.showSettings),d=$e(ae=>ae.showGoToLine),h=$e(ae=>ae.showAbout),S=$e(ae=>ae.showRunCommand),x=$e(ae=>ae.showColumnEditor),_=$e(ae=>ae.showSummary),R=$e(ae=>ae.showCharInRange),y=$e(ae=>ae.showShortcutMapper),j=$e(ae=>ae.showCommandPalette),X=$e(ae=>ae.showQuickOpen),L=$e(ae=>ae.showDiffViewer),F=$e(ae=>ae.showSnippetManager),N=$e(ae=>ae.showTerminalPanel),G=$e(ae=>ae.showCloneDialog),W=$e(ae=>ae.showGitSettings),ne=$e(ae=>ae.showAiSettings),Z=$e(ae=>ae.splitView),z=$e(ae=>ae.splitTabId),B=$e(ae=>ae.addTab),Y=$e(ae=>ae.zoomLevel),U=ve.useMemo(()=>Em(c.theme),[c.theme]),ce=ve.useCallback(ae=>{Im(ae,r,Y)},[r,Y]);ve.useEffect(()=>(window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)),[ce]),ve.useEffect(()=>(document.addEventListener("dragover",Yf),document.addEventListener("drop",Jf),()=>{document.removeEventListener("dragover",Yf),document.removeEventListener("drop",Jf)}),[]),ve.useEffect(()=>{Iy()},[]);const oe=ve.useCallback((ae,ie)=>{Rd(ae,r,e,Y,ie)},[r,Y,e]);ve.useEffect(()=>{e.length===0&&B({name:"new 1",content:""})},[]),ve.useEffect(()=>{$e.getState().LoadAIState()},[]);const de=e.find(ae=>ae.id===r),re=c.distractionFreeMode,me=!!window.electronAPI;return C.jsxs("div",{className:"notemac-app",style:{backgroundColor:U.bg,color:U.text,fontSize:c.fontSize+Y},children:[me&&!re&&C.jsx("div",{style:{height:38,backgroundColor:U.menuBg,borderBottom:`1px solid ${U.border}`,display:"flex",alignItems:"center",paddingLeft:78,flexShrink:0,WebkitAppRegion:"drag"},children:C.jsxs("span",{style:{fontWeight:600,fontSize:13,color:U.text,opacity:.7,WebkitAppRegion:"no-drag",userSelect:"none"},children:[de?de.name+(de.isModified?" ":"")+"  ":"","Notemac++"]})}),!re&&!me&&C.jsx(Oy,{theme:U,onAction:oe,isElectron:me}),s&&!re&&C.jsx(Py,{theme:U,onAction:oe}),!re&&C.jsx(My,{theme:U}),C.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[!re&&C.jsx(ub,{theme:U}),C.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[u&&C.jsx(wb,{theme:U}),C.jsx("div",{style:{flex:1,display:"flex",flexDirection:Z==="horizontal"?"column":"row",overflow:"hidden"},children:de?C.jsxs(C.Fragment,{children:[C.jsx(hd,{tab:de,theme:U,settings:c,zoomLevel:Y},de.id),Z!=="none"&&z&&C.jsxs(C.Fragment,{children:[C.jsx("div",{style:{width:Z==="vertical"?4:void 0,height:Z==="horizontal"?4:void 0,backgroundColor:U.border,cursor:Z==="vertical"?"col-resize":"row-resize"}}),C.jsx(hd,{tab:e.find(ae=>ae.id===z)||de,theme:U,settings:c,zoomLevel:Y},z+"-split")]})]}):C.jsx(yb,{theme:U})}),N&&C.jsx(ve.Suspense,{fallback:null,children:C.jsx(Bb,{theme:U})})]})]}),n&&!re&&C.jsx(sb,{theme:U}),C.jsxs(ve.Suspense,{fallback:null,children:[p&&C.jsx(_b,{theme:U}),d&&C.jsx(Sb,{theme:U}),h&&C.jsx(kb,{theme:U}),S&&C.jsx(Eb,{theme:U}),x&&C.jsx(Ab,{theme:U}),_&&C.jsx(Ib,{theme:U}),R&&C.jsx(Cb,{theme:U}),y&&C.jsx(Tb,{theme:U}),j&&C.jsx(Rb,{theme:U}),X&&C.jsx(Ob,{theme:U}),L&&C.jsx(Pb,{theme:U}),F&&C.jsx(Mb,{theme:U}),G&&C.jsx(jb,{theme:U}),W&&C.jsx(Fb,{theme:U}),ne&&C.jsx(Db,{theme:U})]}),C.jsx(xb,{theme:U})]})}Hp.createRoot(document.getElementById("root")).render(C.jsx(kt.StrictMode,{children:C.jsx(Lb,{})}));export{Vb as $,Av as A,Tv as B,Ts as C,cr as D,Ev as E,gv as F,Ay as G,Rd as H,th as I,Ey as J,Sv as K,kv as L,bv as M,Kt as N,yv as O,_v as P,wv as Q,kt as R,Un as S,Cv as T,qb as U,vv as V,Kb as W,Xb as X,Yb as Y,Jb as Z,nb as _,Wb as a,Y0 as a0,Td as a1,tv as a2,pv as a3,Hb as b,ab as c,Gb as d,mv as e,Rv as f,Ir as g,Xd as h,Wr as i,C as j,Ub as k,wi as l,kd as m,St as n,Ni as o,Sa as p,rm as q,ve as r,zb as s,Zb as t,$e as u,Qb as v,Iv as w,bi as x,ev as y,xv as z};
