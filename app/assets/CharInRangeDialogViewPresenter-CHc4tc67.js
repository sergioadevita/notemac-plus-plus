import{u as R,r as a,a as k,j as t}from"./index-BkelTrND.js";import"./react-vendor-P8ZuH1e3.js";import"./monaco-editor-BYMRfcD5.js";function A({theme:o}){const{setShowCharInRange:s,tabs:h,activeTabId:b}=R(),[x,j]=a.useState("0"),[p,S]=a.useState("127"),[l,C]=a.useState([]),g=a.useRef(null);k(g,!0,()=>s(!1));const v=()=>{const e=h.find(n=>n.id===b);if(!e)return;const d=parseInt(x),y=parseInt(p);if(isNaN(d)||isNaN(y))return;const f=[],i=e.content.split(`
`);for(let n=0;n<i.length;n++)for(let r=0;r<i[n].length;r++){const c=i[n].charCodeAt(r);c>=d&&c<=y&&f.push({line:n+1,col:r+1,char:i[n][r],code:c})}C(f.slice(0,500))},u={height:28,backgroundColor:o.bg,color:o.text,border:`1px solid ${o.border}`,borderRadius:4,padding:"0 8px",fontSize:13,width:80};return t.jsx("div",{className:"dialog-overlay",onClick:()=>s(!1),children:t.jsxs("div",{ref:g,role:"dialog","aria-modal":"true","aria-labelledby":"char-range-title",onClick:e=>e.stopPropagation(),style:{backgroundColor:o.bgSecondary,border:`1px solid ${o.border}`,borderRadius:8,padding:20,width:450,maxHeight:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[t.jsx("h3",{id:"char-range-title",style:{color:o.text,fontSize:16,marginBottom:12,fontWeight:600},children:"Find Characters in Range"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[t.jsx("span",{style:{fontSize:13,color:o.textSecondary},children:"From:"}),t.jsx("input",{type:"number",value:x,onChange:e=>j(e.target.value),style:u}),t.jsx("span",{style:{fontSize:13,color:o.textSecondary},children:"To:"}),t.jsx("input",{type:"number",value:p,onChange:e=>S(e.target.value),style:u}),t.jsx("button",{onClick:v,style:{backgroundColor:o.accent,color:o.accentText,border:"none",borderRadius:6,padding:"0 16px",height:28,cursor:"pointer",fontSize:13,fontWeight:600},children:"Find"})]}),t.jsx("div",{style:{fontSize:12,color:o.textMuted,marginBottom:8},children:"Common ranges: ASCII (0-127), Non-ASCII (128-65535), Control (0-31)"}),l.length>0&&t.jsx("div",{style:{flex:1,overflowY:"auto",backgroundColor:o.bg,border:`1px solid ${o.border}`,borderRadius:4,maxHeight:300},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{backgroundColor:o.bgTertiary},children:[t.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:o.textSecondary},children:"Line"}),t.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:o.textSecondary},children:"Col"}),t.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:o.textSecondary},children:"Char"}),t.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:o.textSecondary},children:"Code"}),t.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:o.textSecondary},children:"Hex"})]})}),t.jsx("tbody",{children:l.map((e,d)=>t.jsxs("tr",{style:{borderTop:`1px solid ${o.border}`},onClick:()=>{document.dispatchEvent(new CustomEvent("notemac-goto-line",{detail:{line:e.line}}))},children:[t.jsx("td",{style:{padding:"3px 8px",color:o.text,cursor:"pointer"},children:e.line}),t.jsx("td",{style:{padding:"3px 8px",color:o.text},children:e.col}),t.jsx("td",{style:{padding:"3px 8px",color:o.accent,fontFamily:"monospace"},children:e.code<32?"â–¡":e.char}),t.jsx("td",{style:{padding:"3px 8px",color:o.text},children:e.code}),t.jsxs("td",{style:{padding:"3px 8px",color:o.textMuted,fontFamily:"monospace"},children:["0x",e.code.toString(16).toUpperCase()]})]},d))})]})}),t.jsx("div",{style:{fontSize:12,color:o.textMuted,marginTop:8},children:l.length>0?`${l.length} characters found`:"Enter a range and click Find"}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:t.jsx("button",{onClick:()=>s(!1),style:{backgroundColor:"transparent",color:o.textSecondary,border:`1px solid ${o.border}`,borderRadius:6,padding:"6px 16px",cursor:"pointer",fontSize:13},children:"Close"})})]})})}export{A as CharInRangeDialog};
