const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GitPanelViewPresenter-CqCzFp7K.js","assets/GitController-Bczj3ZAf.js","assets/index-DlyQSLxP.js","assets/react-vendor-P8ZuH1e3.js","assets/monaco-editor-C1KnpKkb.js","assets/monaco-editor-DyN27ZSr.css","assets/AIChatPanelViewPresenter-CxtIYBXa.js","assets/SettingsDialogViewPresenter-CBwwIk1t.js","assets/GoToLineDialogViewPresenter-CMWlZt_P.js","assets/AboutDialogViewPresenter-BjtZPLmW.js","assets/RunCommandDialogViewPresenter-BYo1X5gm.js","assets/ColumnEditorDialogViewPresenter-aCObRRw4.js","assets/SummaryDialogViewPresenter-DOHUIpCh.js","assets/CharInRangeDialogViewPresenter-BgRIMveI.js","assets/ShortcutMapperDialogViewPresenter-DD9HIWYo.js","assets/ShortcutConfig-CNB-8NLK.js","assets/CommandPaletteViewPresenter-B0LCj2Lc.js","assets/FuzzySearchHelpers-xz3AmAn2.js","assets/QuickOpenViewPresenter-DJLCeF16.js","assets/DiffViewerViewPresenter-XbQSO7ri.js","assets/SnippetManagerViewPresenter-DL09HFKf.js","assets/TerminalPanelViewPresenter-CvYfhQ5a.js","assets/CloneRepositoryViewPresenter-DY_qCN3s.js","assets/GitSettingsViewPresenter-BOH1tFXR.js","assets/AISettingsViewPresenter-BEcgfLYY.js"])))=>i.map(i=>d[i]);
import{r as Xe,g as jt,a as tr}from"./react-vendor-P8ZuH1e3.js";import{_ as Y}from"./monaco-editor-C1KnpKkb.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var rt={exports:{}},Ce={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt;function nr(){if(Dt)return Ce;Dt=1;var e=Xe(),n=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(d,f,b){var u,m={},T=null,l=null;b!==void 0&&(T=""+b),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(l=f.ref);for(u in f)r.call(f,u)&&!a.hasOwnProperty(u)&&(m[u]=f[u]);if(d&&d.defaultProps)for(u in f=d.defaultProps,f)m[u]===void 0&&(m[u]=f[u]);return{$$typeof:n,type:d,key:T,ref:l,props:m,_owner:o.current}}return Ce.Fragment=t,Ce.jsx=s,Ce.jsxs=s,Ce}var Bt;function rr(){return Bt||(Bt=1,rt.exports=nr()),rt.exports}var i=rr(),y=Xe();const J=jt(y);var Be={},Ft;function or(){if(Ft)return Be;Ft=1;var e=tr();return Be.createRoot=e.createRoot,Be.hydrateRoot=e.hydrateRoot,Be}var ar=or();const ir=jt(ar),sr={},Nt=e=>{let n;const t=new Set,r=(u,m)=>{const T=typeof u=="function"?u(n):u;if(!Object.is(T,n)){const l=n;n=m??(typeof T!="object"||T===null)?T:Object.assign({},n,T),t.forEach(x=>x(n,l))}},o=()=>n,f={setState:r,getState:o,getInitialState:()=>b,subscribe:u=>(t.add(u),()=>t.delete(u)),destroy:()=>{t.clear()}},b=n=e(r,o,f);return f},lr=e=>e?Nt(e):Nt;var ot={exports:{}},at={},it={exports:{}},st={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zt;function cr(){if(zt)return st;zt=1;var e=Xe();function n(m,T){return m===T&&(m!==0||1/m===1/T)||m!==m&&T!==T}var t=typeof Object.is=="function"?Object.is:n,r=e.useState,o=e.useEffect,a=e.useLayoutEffect,s=e.useDebugValue;function d(m,T){var l=T(),x=r({inst:{value:l,getSnapshot:T}}),_=x[0].inst,C=x[1];return a(function(){_.value=l,_.getSnapshot=T,f(_)&&C({inst:_})},[m,l,T]),o(function(){return f(_)&&C({inst:_}),m(function(){f(_)&&C({inst:_})})},[m]),s(l),l}function f(m){var T=m.getSnapshot;m=m.value;try{var l=T();return!t(m,l)}catch{return!0}}function b(m,T){return T()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?b:d;return st.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,st}var $t;function dr(){return $t||($t=1,it.exports=cr()),it.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wt;function ur(){if(Wt)return at;Wt=1;var e=Xe(),n=dr();function t(b,u){return b===u&&(b!==0||1/b===1/u)||b!==b&&u!==u}var r=typeof Object.is=="function"?Object.is:t,o=n.useSyncExternalStore,a=e.useRef,s=e.useEffect,d=e.useMemo,f=e.useDebugValue;return at.useSyncExternalStoreWithSelector=function(b,u,m,T,l){var x=a(null);if(x.current===null){var _={hasValue:!1,value:null};x.current=_}else _=x.current;x=d(function(){function j(w){if(!R){if(R=!0,B=w,w=T(w),l!==void 0&&_.hasValue){var M=_.value;if(l(M,w))return I=M}return I=w}if(M=I,r(B,w))return M;var p=T(w);return l!==void 0&&l(M,p)?(B=w,M):(B=w,I=p)}var R=!1,B,I,L=m===void 0?null:m;return[function(){return j(u())},L===null?void 0:function(){return j(L())}]},[u,m,T,l]);var C=o(b,x[0],x[1]);return s(function(){_.hasValue=!0,_.value=C},[C]),f(C),C},at}var Ht;function pr(){return Ht||(Ht=1,ot.exports=ur()),ot.exports}var fr=pr();const gr=jt(fr),Tn={},{useDebugValue:hr}=J,{useSyncExternalStoreWithSelector:br}=gr;let Gt=!1;const mr=e=>e;function yr(e,n=mr,t){(Tn?"production":void 0)!=="production"&&t&&!Gt&&(Gt=!0);const r=br(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,t);return hr(r),r}const xr=e=>{const n=typeof e=="function"?lr(e):e,t=(r,o)=>yr(n,r,o);return Object.assign(t,n),t},Sr=e=>xr;var jn=Symbol.for("immer-nothing"),Ut=Symbol.for("immer-draftable"),te=Symbol.for("immer-state");function oe(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Re=Object.getPrototypeOf;function Se(e){return!!e&&!!e[te]}function ge(e){var n;return e?An(e)||Array.isArray(e)||!!e[Ut]||!!((n=e.constructor)!=null&&n[Ut])||Oe(e)||Qe(e):!1}var vr=Object.prototype.constructor.toString(),Vt=new WeakMap;function An(e){if(!e||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);if(n===null||n===Object.prototype)return!0;const t=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let r=Vt.get(t);return r===void 0&&(r=Function.toString.call(t),Vt.set(t,r)),r===vr}function Ue(e,n,t=!0){Ze(e)===0?(t?Reflect.ownKeys(e):Object.keys(e)).forEach(o=>{n(o,e[o],e)}):e.forEach((r,o)=>n(o,r,e))}function Ze(e){const n=e[te];return n?n.type_:Array.isArray(e)?1:Oe(e)?2:Qe(e)?3:0}function kt(e,n){return Ze(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function Rn(e,n,t){const r=Ze(e);r===2?e.set(n,t):r===3?e.add(t):e[n]=t}function wr(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function Oe(e){return e instanceof Map}function Qe(e){return e instanceof Set}function fe(e){return e.copy_||e.base_}function Ct(e,n){if(Oe(e))return new Map(e);if(Qe(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const t=An(e);if(n===!0||n==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(e);delete r[te];let o=Reflect.ownKeys(r);for(let a=0;a<o.length;a++){const s=o[a],d=r[s];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(r[s]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[s]})}return Object.create(Re(e),r)}else{const r=Re(e);if(r!==null&&t)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function At(e,n=!1){return et(e)||Se(e)||!ge(e)||(Ze(e)>1&&Object.defineProperties(e,{set:Fe,add:Fe,clear:Fe,delete:Fe}),Object.freeze(e),n&&Object.values(e).forEach(t=>At(t,!0))),e}function kr(){oe(2)}var Fe={value:kr};function et(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Cr={};function he(e){const n=Cr[e];return n||oe(0,e),n}var _e;function _n(){return _e}function Ir(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Kt(e,n){n&&(he("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function It(e){Et(e),e.drafts_.forEach(Er),e.drafts_=null}function Et(e){e===_e&&(_e=e.parent_)}function qt(e){return _e=Ir(_e,e)}function Er(e){const n=e[te];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function Jt(e,n){n.unfinalizedDrafts_=n.drafts_.length;const t=n.drafts_[0];return e!==void 0&&e!==t?(t[te].modified_&&(It(n),oe(4)),ge(e)&&(e=Ve(n,e),n.parent_||Ke(n,e)),n.patches_&&he("Patches").generateReplacementPatches_(t[te].base_,e,n.patches_,n.inversePatches_)):e=Ve(n,t,[]),It(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==jn?e:void 0}function Ve(e,n,t){if(et(n))return n;const r=e.immer_.shouldUseStrictIteration(),o=n[te];if(!o)return Ue(n,(a,s)=>Yt(e,o,n,a,s,t),r),n;if(o.scope_!==e)return n;if(!o.modified_)return Ke(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const a=o.copy_;let s=a,d=!1;o.type_===3&&(s=new Set(a),a.clear(),d=!0),Ue(s,(f,b)=>Yt(e,o,a,f,b,t,d),r),Ke(e,a,!1),t&&e.patches_&&he("Patches").generatePatches_(o,t,e.patches_,e.inversePatches_)}return o.copy_}function Yt(e,n,t,r,o,a,s){if(o==null||typeof o!="object"&&!s)return;const d=et(o);if(!(d&&!s)){if(Se(o)){const f=a&&n&&n.type_!==3&&!kt(n.assigned_,r)?a.concat(r):void 0,b=Ve(e,o,f);if(Rn(t,r,b),Se(b))e.canAutoFreeze_=!1;else return}else s&&t.add(o);if(ge(o)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||n&&n.base_&&n.base_[r]===o&&d)return;Ve(e,o),(!n||!n.scope_.parent_)&&typeof r!="symbol"&&(Oe(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&Ke(e,o)}}}function Ke(e,n,t=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&At(n,t)}function Mr(e,n){const t=Array.isArray(e),r={type_:t?1:0,scope_:n?n.scope_:_n(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,a=Rt;t&&(o=[r],a=Pe);const{revoke:s,proxy:d}=Proxy.revocable(o,a);return r.draft_=d,r.revoke_=s,d}var Rt={get(e,n){if(n===te)return e;const t=fe(e);if(!kt(t,n))return Tr(e,t,n);const r=t[n];return e.finalized_||!ge(r)?r:r===lt(e.base_,n)?(ct(e),e.copy_[n]=Tt(r,e)):r},has(e,n){return n in fe(e)},ownKeys(e){return Reflect.ownKeys(fe(e))},set(e,n,t){const r=Pn(fe(e),n);if(r!=null&&r.set)return r.set.call(e.draft_,t),!0;if(!e.modified_){const o=lt(fe(e),n),a=o==null?void 0:o[te];if(a&&a.base_===t)return e.copy_[n]=t,e.assigned_[n]=!1,!0;if(wr(t,o)&&(t!==void 0||kt(e.base_,n)))return!0;ct(e),Mt(e)}return e.copy_[n]===t&&(t!==void 0||n in e.copy_)||Number.isNaN(t)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=t,e.assigned_[n]=!0),!0},deleteProperty(e,n){return lt(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,ct(e),Mt(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const t=fe(e),r=Reflect.getOwnPropertyDescriptor(t,n);return r&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:r.enumerable,value:t[n]}},defineProperty(){oe(11)},getPrototypeOf(e){return Re(e.base_)},setPrototypeOf(){oe(12)}},Pe={};Ue(Rt,(e,n)=>{Pe[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});Pe.deleteProperty=function(e,n){return Pe.set.call(this,e,n,void 0)};Pe.set=function(e,n,t){return Rt.set.call(this,e[0],n,t,e[0])};function lt(e,n){const t=e[te];return(t?fe(t):e)[n]}function Tr(e,n,t){var o;const r=Pn(n,t);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function Pn(e,n){if(!(n in e))return;let t=Re(e);for(;t;){const r=Object.getOwnPropertyDescriptor(t,n);if(r)return r;t=Re(t)}}function Mt(e){e.modified_||(e.modified_=!0,e.parent_&&Mt(e.parent_))}function ct(e){e.copy_||(e.copy_=Ct(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var jr=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(n,t,r)=>{if(typeof n=="function"&&typeof t!="function"){const a=t;t=n;const s=this;return function(f=a,...b){return s.produce(f,u=>t.call(this,u,...b))}}typeof t!="function"&&oe(6),r!==void 0&&typeof r!="function"&&oe(7);let o;if(ge(n)){const a=qt(this),s=Tt(n,void 0);let d=!0;try{o=t(s),d=!1}finally{d?It(a):Et(a)}return Kt(a,r),Jt(o,a)}else if(!n||typeof n!="object"){if(o=t(n),o===void 0&&(o=n),o===jn&&(o=void 0),this.autoFreeze_&&At(o,!0),r){const a=[],s=[];he("Patches").generateReplacementPatches_(n,o,a,s),r(a,s)}return o}else oe(1,n)},this.produceWithPatches=(n,t)=>{if(typeof n=="function")return(s,...d)=>this.produceWithPatches(s,f=>n(f,...d));let r,o;return[this.produce(n,t,(s,d)=>{r=s,o=d}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ge(e)||oe(8),Se(e)&&(e=Ar(e));const n=qt(this),t=Tt(e,void 0);return t[te].isManual_=!0,Et(n),t}finishDraft(e,n){const t=e&&e[te];(!t||!t.isManual_)&&oe(9);const{scope_:r}=t;return Kt(r,n),Jt(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let t;for(t=n.length-1;t>=0;t--){const o=n[t];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}t>-1&&(n=n.slice(t+1));const r=he("Patches").applyPatches_;return Se(e)?r(e,n):this.produce(e,o=>r(o,n))}};function Tt(e,n){const t=Oe(e)?he("MapSet").proxyMap_(e,n):Qe(e)?he("MapSet").proxySet_(e,n):Mr(e,n);return(n?n.scope_:_n()).drafts_.push(t),t}function Ar(e){return Se(e)||oe(10,e),Ln(e)}function Ln(e){if(!ge(e)||et(e))return e;const n=e[te];let t,r=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,t=Ct(e,n.scope_.immer_.useStrictShallowCopy_),r=n.scope_.immer_.shouldUseStrictIteration()}else t=Ct(e,!0);return Ue(t,(o,a)=>{Rn(t,o,Ln(a))},r),n&&(n.finalized_=!1),t}var Rr=new jr,W=Rr.produce;const _r={".js":"javascript",".jsx":"javascript",".ts":"typescript",".tsx":"typescript",".py":"python",".rb":"ruby",".go":"go",".rs":"rust",".c":"c",".h":"c",".cpp":"cpp",".cc":"cpp",".cxx":"cpp",".hpp":"cpp",".cs":"csharp",".java":"java",".swift":"swift",".kt":"kotlin",".php":"php",".html":"html",".htm":"html",".css":"css",".scss":"scss",".less":"less",".json":"json",".xml":"xml",".yaml":"yaml",".yml":"yaml",".md":"markdown",".sql":"sql",".sh":"shell",".bash":"shell",".zsh":"shell",".ps1":"powershell",".r":"r",".lua":"lua",".pl":"perl",".pm":"perl",".dart":"dart",".ex":"elixir",".exs":"elixir",".erl":"erlang",".hs":"haskell",".scala":"scala",".clj":"clojure",".coffee":"coffeescript",".bat":"bat",".cmd":"bat",".ini":"ini",".toml":"ini",".dockerfile":"dockerfile",".graphql":"graphql",".gql":"graphql",".vue":"html",".svelte":"html",".log":"plaintext",".txt":"plaintext",".env":"plaintext",".gitignore":"plaintext",".makefile":"plaintext"};function ae(e){if(!e)return"plaintext";const n=e.toLowerCase();if(n==="dockerfile")return"dockerfile";if(n==="makefile")return"makefile";if(n==="cmakelists.txt")return"cmake";const t=n.lastIndexOf(".");if(t===-1)return"plaintext";const r=n.substring(t);return _r[r]||"plaintext"}function de(e){const n=(e.match(/\r\n/g)||[]).length,t=(e.match(new RegExp("(?<!\\r)\\n","g"))||[]).length,r=(e.match(/\r(?!\n)/g)||[]).length;return n>=t&&n>=r?"CRLF":r>t?"CR":"LF"}function ue(){return Math.random().toString(36).substring(2,11)+Date.now().toString(36)}const Ne="SavedSnippets",Pr={1:"#ff4444",2:"#44ff44",3:"#4488ff",4:"#ff44ff",5:"#ffaa00"},Xt={none:"transparent",color1:"#ff4444",color2:"#44bb44",color3:"#4488ff",color4:"#ff8800",color5:"#cc44cc"},Lr=14,Or=4,Dr="'SF Mono', 'Menlo', 'Monaco', 'Courier New', monospace",Br=5e3,Fr="https://www.google.com/search?q=",Nr="yyyy-MM-dd HH:mm:ss",zr=20,$r=20,Wr=50,Hr=-5,Gr=10,Ur=200,Vr=100,Kr=600,ze="GitCredentials",dt="GitAuthor",ut="GitSettings",$e="BrowserWorkspaces",bs=50,qr="https://cors.isomorphic-git.org",Jr="Notemac++ User",Yr="user@notemac.app",Zt="AIProviders",re="AICredentials",pt="AISettings",Qt="AIConversations",On=500,Xr=8e3,Zr=.3,Qr=.7,en=50,eo=256,We=24,ms=8,ys="Iv1.CONFIGURE_YOUR_APP",to=150,no=500,ft=36,ro=100,oo=200,tn=18,ao=32,io=300,xs=560,Ss=420,vs=80,so=4,lo=9998,co=9999,ws=1e4,ks=2e3,Cs=5,Is=60,Es=3600,Ms=86400,Ts=604800,uo=(e,n)=>({tabs:[],activeTabId:null,closedTabs:[],recentFiles:[],addTab:t=>{const r=ue(),o={id:r,name:(t==null?void 0:t.name)||`new ${n().tabs.length+1}`,path:(t==null?void 0:t.path)||null,content:(t==null?void 0:t.content)||"",originalContent:(t==null?void 0:t.content)||"",language:(t==null?void 0:t.language)||ae((t==null?void 0:t.name)||""),encoding:(t==null?void 0:t.encoding)||"utf-8",lineEnding:(t==null?void 0:t.lineEnding)||"LF",isModified:!1,isReadOnly:(t==null?void 0:t.isReadOnly)||!1,isPinned:!1,tabColor:"none",cursorLine:1,cursorColumn:1,scrollTop:0,bookmarks:[],marks:[],hiddenLines:[],isMonitoring:!1};return e(W(a=>{a.tabs.push(o),a.activeTabId=r})),r},closeTab:t=>{e(W(r=>{const o=r.tabs.findIndex(a=>a.id===t);if(o!==-1&&(r.closedTabs.push({...r.tabs[o]}),r.closedTabs.length>zr&&r.closedTabs.shift(),r.tabs.splice(o,1),r.activeTabId===t))if(0<r.tabs.length){const a=Math.min(o,r.tabs.length-1);r.activeTabId=r.tabs[a].id}else r.activeTabId=null}))},closeAllTabs:()=>{const t=n().tabs;e(W(r=>{r.closedTabs.push(...t),r.tabs=[],r.activeTabId=null}))},closeOtherTabs:t=>{e(W(r=>{const o=r.tabs.filter(a=>a.id!==t);r.closedTabs.push(...o),r.tabs=r.tabs.filter(a=>a.id===t),r.activeTabId=t}))},closeTabsToLeft:t=>{e(W(r=>{const o=r.tabs.findIndex(s=>s.id===t);if(0>=o)return;const a=r.tabs.splice(0,o);r.closedTabs.push(...a)}))},closeTabsToRight:t=>{e(W(r=>{const o=r.tabs.findIndex(s=>s.id===t);if(o===-1||o>=r.tabs.length-1)return;const a=r.tabs.splice(o+1);r.closedTabs.push(...a)}))},closeUnchangedTabs:()=>{e(W(t=>{const r=t.tabs.filter(o=>!o.isModified);t.closedTabs.push(...r),t.tabs=t.tabs.filter(o=>o.isModified),0<t.tabs.length&&!t.tabs.find(o=>o.id===t.activeTabId)?t.activeTabId=t.tabs[0].id:t.tabs.length===0&&(t.activeTabId=null)}))},closeAllButPinned:()=>{e(W(t=>{const r=t.tabs.filter(o=>!o.isPinned);t.closedTabs.push(...r),t.tabs=t.tabs.filter(o=>o.isPinned),0<t.tabs.length&&!t.tabs.find(o=>o.id===t.activeTabId)?t.activeTabId=t.tabs[0].id:t.tabs.length===0&&(t.activeTabId=null)}))},restoreLastClosedTab:()=>{e(W(t=>{if(t.closedTabs.length===0)return;const r=t.closedTabs.pop();r.id=ue(),t.tabs.push(r),t.activeTabId=r.id}))},setActiveTab:t=>e({activeTabId:t}),updateTab:(t,r)=>{e(W(o=>{const a=o.tabs.find(s=>s.id===t);a&&Object.assign(a,r)}))},updateTabContent:(t,r)=>{e(W(o=>{const a=o.tabs.find(s=>s.id===t);a&&(a.content=r,a.isModified=r!==a.originalContent)}))},togglePinTab:t=>{e(W(r=>{const o=r.tabs.find(a=>a.id===t);o&&(o.isPinned=!o.isPinned)}))},setTabColor:(t,r)=>{e(W(o=>{const a=o.tabs.find(s=>s.id===t);a&&(a.tabColor=r)}))},moveTab:(t,r)=>{e(W(o=>{const[a]=o.tabs.splice(t,1);o.tabs.splice(r,0,a)}))},nextTab:()=>{const{tabs:t,activeTabId:r}=n();if(1>=t.length)return;const a=(t.findIndex(s=>s.id===r)+1)%t.length;e({activeTabId:t[a].id})},prevTab:()=>{const{tabs:t,activeTabId:r}=n();if(1>=t.length)return;const a=(t.findIndex(s=>s.id===r)-1+t.length)%t.length;e({activeTabId:t[a].id})},goToTab:t=>{const{tabs:r}=n();0<=t&&t<r.length&&e({activeTabId:r[t].id})},moveTabForward:()=>{const{tabs:t,activeTabId:r}=n(),o=t.findIndex(a=>a.id===r);o<t.length-1&&e(W(a=>{const[s]=a.tabs.splice(o,1);a.tabs.splice(o+1,0,s)}))},moveTabBackward:()=>{const{tabs:t,activeTabId:r}=n(),o=t.findIndex(a=>a.id===r);0<o&&e(W(a=>{const[s]=a.tabs.splice(o,1);a.tabs.splice(o-1,0,s)}))},addRecentFile:(t,r)=>{e(W(o=>{o.recentFiles=o.recentFiles.filter(a=>a.path!==t),o.recentFiles.unshift({path:t,name:r}),o.recentFiles.length>$r&&o.recentFiles.pop()}))}}),po={query:"",replaceText:"",isRegex:!1,isCaseSensitive:!1,isWholeWord:!1,searchInSelection:!1,wrapAround:!0},fo=(e,n)=>({showFindReplace:!1,findReplaceMode:"find",searchOptions:{...po},searchResults:[],showIncrementalSearch:!1,setShowFindReplace:(t,r)=>e({showFindReplace:t,findReplaceMode:r||n().findReplaceMode}),updateSearchOptions:t=>{e(r=>({searchOptions:{...r.searchOptions,...t}}))},setShowIncrementalSearch:t=>e({showIncrementalSearch:t})}),go=(e,n)=>({isRecordingMacro:!1,currentMacroActions:[],savedMacros:[],startRecordingMacro:()=>e({isRecordingMacro:!0,currentMacroActions:[]}),stopRecordingMacro:()=>e({isRecordingMacro:!1}),addMacroAction:t=>{n().isRecordingMacro&&e(W(r=>{r.currentMacroActions.push(t)}))},saveMacro:t=>{const r=n().currentMacroActions;r.length!==0&&e(W(o=>{o.savedMacros.push({id:ue(),name:t,actions:[...r]})}))}}),ho={theme:"dark",fontSize:Lr,fontFamily:Dr,tabSize:Or,insertSpaces:!0,wordWrap:!1,showWhitespace:!1,showLineNumbers:!0,showMinimap:!0,showIndentGuides:!0,showEOL:!1,showNonPrintable:!1,showWrapSymbol:!1,autoSave:!1,autoSaveDelay:Br,highlightCurrentLine:!0,matchBrackets:!0,autoCloseBrackets:!0,autoCloseQuotes:!0,autoIndent:!0,smoothScrolling:!0,cursorBlinking:"blink",cursorStyle:"line",renderWhitespace:"none",virtualSpace:!1,alwaysOnTop:!1,distractionFreeMode:!1,darkMode:!0,syncScrollVertical:!1,syncScrollHorizontal:!1,rememberLastSession:!0,searchEngine:Fr,dateTimeFormat:Nr};function bo(){return{...ho}}const mo=(e,n)=>({sidebarPanel:null,sidebarWidth:260,showStatusBar:!0,showToolbar:!0,splitView:"none",splitTabId:null,zoomLevel:0,foldAllState:!1,clipboardHistory:[],settings:bo(),showSettings:!1,showGoToLine:!1,showAbout:!1,showRunCommand:!1,showColumnEditor:!1,showSummary:!1,showCharInRange:!1,showShortcutMapper:!1,showCommandPalette:!1,showQuickOpen:!1,showDiffViewer:!1,showSnippetManager:!1,showTerminalPanel:!1,terminalHeight:Ur,showCloneDialog:!1,showGitSettings:!1,setSidebarPanel:t=>e({sidebarPanel:t}),toggleSidebar:()=>{const t=n().sidebarPanel;e({sidebarPanel:t?null:"explorer"})},setZoomLevel:t=>e({zoomLevel:Math.max(Hr,Math.min(Gr,t))}),setSplitView:(t,r)=>e({splitView:t,splitTabId:r||null}),addClipboardEntry:t=>{e(W(r=>{r.clipboardHistory.unshift({text:t,timestamp:Date.now()}),r.clipboardHistory.length>Wr&&r.clipboardHistory.pop()}))},updateSettings:t=>{e(W(r=>{Object.assign(r.settings,t)}))},setShowSettings:t=>e({showSettings:t}),setShowGoToLine:t=>e({showGoToLine:t}),setShowAbout:t=>e({showAbout:t}),setShowRunCommand:t=>e({showRunCommand:t}),setShowColumnEditor:t=>e({showColumnEditor:t}),setShowSummary:t=>e({showSummary:t}),setShowCharInRange:t=>e({showCharInRange:t}),setShowShortcutMapper:t=>e({showShortcutMapper:t}),setShowCommandPalette:t=>e({showCommandPalette:t}),setShowQuickOpen:t=>e({showQuickOpen:t}),setShowDiffViewer:t=>e({showDiffViewer:t}),setShowSnippetManager:t=>e({showSnippetManager:t}),setShowTerminalPanel:t=>e({showTerminalPanel:t}),setShowCloneDialog:t=>e({showCloneDialog:t}),setShowGitSettings:t=>e({showGitSettings:t}),setTerminalHeight:t=>e({terminalHeight:Math.max(Vr,Math.min(Kr,t))}),saveSession:()=>{const t=n();return{tabs:t.tabs.map(r=>({path:r.path,name:r.name,language:r.language,cursorLine:r.cursorLine,cursorColumn:r.cursorColumn,scrollTop:r.scrollTop,content:r.path?void 0:r.content})),activeTabIndex:t.tabs.findIndex(r=>r.id===t.activeTabId),sidebarPanel:t.sidebarPanel}},loadSession:t=>{var o,a;const r=t.tabs.map(s=>({id:ue(),name:s.name,path:s.path,content:s.content||"",originalContent:s.content||"",language:s.language,encoding:"utf-8",lineEnding:"LF",isModified:!1,isReadOnly:!1,isPinned:!1,tabColor:"none",cursorLine:s.cursorLine,cursorColumn:s.cursorColumn,scrollTop:s.scrollTop,bookmarks:[],marks:[],hiddenLines:[],isMonitoring:!1}));e({tabs:r,activeTabId:((o=r[t.activeTabIndex])==null?void 0:o.id)||((a=r[0])==null?void 0:a.id)||null,sidebarPanel:t.sidebarPanel})}}),yo=e=>({fileTree:[],workspacePath:null,setFileTree:n=>e({fileTree:n}),setWorkspacePath:n=>e({workspacePath:n}),toggleTreeNode:n=>{e(W(t=>{const r=o=>{for(const a of o){if(a.path===n)return a.isExpanded=!a.isExpanded,!0;if(a.children&&r(a.children))return!0}return!1};r(t.fileTree)}))}});function ie(e,n){try{const t=localStorage.getItem(e);return t===null?n??null:JSON.parse(t)}catch{return null}}function Z(e,n){try{localStorage.setItem(e,JSON.stringify(n))}catch{}}function xo(e){try{localStorage.removeItem(e)}catch{}}const So=(e,n)=>({savedSnippets:[],addSnippet:t=>{e(W(r=>{const o={...t,id:ue()};r.savedSnippets.push(o)})),Z(Ne,n().savedSnippets)},removeSnippet:t=>{e(W(r=>{const o=r.savedSnippets.findIndex(a=>a.id===t);o!==-1&&r.savedSnippets.splice(o,1)})),Z(Ne,n().savedSnippets)},updateSnippet:(t,r)=>{e(W(o=>{const a=o.savedSnippets.find(s=>s.id===t);a&&Object.assign(a,r)})),Z(Ne,n().savedSnippets)},loadSnippets:()=>{const t=ie(Ne);t&&e({savedSnippets:t})}});function nn(){return{autoFetch:!0,autoFetchInterval:3e5,showUntracked:!0,showIgnored:!1,corsProxy:qr}}function rn(){return{name:Jr,email:Yr}}const vo=(e,n)=>({isRepoInitialized:!1,currentBranch:"main",branches:[],remotes:[],gitStatus:null,commitLog:[],gitCredentials:null,gitAuthor:rn(),gitSettings:nn(),isBrowserWorkspace:!1,browserWorkspaces:[],isGitOperationInProgress:!1,currentGitOperation:null,gitOperationProgress:0,gitOperationError:null,SetRepoInitialized:t=>e({isRepoInitialized:t}),SetCurrentBranch:t=>e({currentBranch:t}),SetBranches:t=>e({branches:t}),SetRemotes:t=>e({remotes:t}),SetGitStatus:t=>e({gitStatus:t}),SetCommitLog:t=>e({commitLog:t}),SetGitCredentials:t=>{e({gitCredentials:t}),t!==null?Z(ze,{type:t.type,username:t.username}):Z(ze,null)},SetGitAuthor:t=>{e({gitAuthor:t}),Z(dt,t)},UpdateGitSettings:t=>{e(W(o=>{Object.assign(o.gitSettings,t)}));const r=n().gitSettings;Z(ut,r)},SetIsBrowserWorkspace:t=>e({isBrowserWorkspace:t}),AddBrowserWorkspace:t=>{e(W(r=>{const o=r.browserWorkspaces.findIndex(a=>a.id===t.id);o!==-1?r.browserWorkspaces[o]=t:r.browserWorkspaces.push(t)})),Z($e,n().browserWorkspaces)},RemoveBrowserWorkspace:t=>{e(W(r=>{const o=r.browserWorkspaces.findIndex(a=>a.id===t);o!==-1&&r.browserWorkspaces.splice(o,1)})),Z($e,n().browserWorkspaces)},SetGitOperationInProgress:t=>e({isGitOperationInProgress:t}),SetCurrentGitOperation:t=>e({currentGitOperation:t}),SetGitOperationProgress:t=>e({gitOperationProgress:t}),SetGitOperationError:t=>e({gitOperationError:t}),LoadGitState:()=>{const t=ie(ze),r=ie(dt),o=ie(ut),a=ie($e);e({gitCredentials:t||null,gitAuthor:r||rn(),gitSettings:o||nn(),browserWorkspaces:a||[]})},SaveGitState:()=>{const t=n();t.gitCredentials!==null&&Z(ze,{type:t.gitCredentials.type,username:t.gitCredentials.username}),Z(dt,t.gitAuthor),Z(ut,t.gitSettings),Z($e,t.browserWorkspaces)},GetStagedFileCount:()=>{var t;return((t=n().gitStatus)==null?void 0:t.stagedFiles.length)||0},GetChangedFileCount:()=>{const t=n().gitStatus;return t===null?0:t.stagedFiles.length+t.unstagedFiles.length+t.untrackedFiles.length}});function on(){return{inlineCompletionEnabled:!0,inlineDebounceMs:On,inlineMaxTokens:eo,chatTemperature:Qr,codeTemperature:Zr,maxContextTokens:Xr,systemPrompt:"",showAiStatusIndicator:!0}}function an(){return[{id:"openai",name:"OpenAI",type:"openai",baseUrl:"https://api.openai.com",isBuiltIn:!0,models:wo()},{id:"anthropic",name:"Anthropic",type:"anthropic",baseUrl:"https://api.anthropic.com",isBuiltIn:!0,models:ko()},{id:"google",name:"Google AI",type:"google",baseUrl:"https://generativelanguage.googleapis.com",isBuiltIn:!0,models:Co()}]}function wo(){return[{id:"gpt-4o",name:"GPT-4o",providerId:"openai",contextWindow:128e3,supportsStreaming:!0,supportsFIM:!1},{id:"gpt-4o-mini",name:"GPT-4o Mini",providerId:"openai",contextWindow:128e3,supportsStreaming:!0,supportsFIM:!1},{id:"gpt-4-turbo",name:"GPT-4 Turbo",providerId:"openai",contextWindow:128e3,supportsStreaming:!0,supportsFIM:!1},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",providerId:"openai",contextWindow:16385,supportsStreaming:!0,supportsFIM:!1},{id:"o1",name:"o1",providerId:"openai",contextWindow:2e5,supportsStreaming:!0,supportsFIM:!1},{id:"o1-mini",name:"o1-mini",providerId:"openai",contextWindow:128e3,supportsStreaming:!0,supportsFIM:!1}]}function ko(){return[{id:"claude-sonnet-4-5-20250514",name:"Claude Sonnet 4.5",providerId:"anthropic",contextWindow:2e5,supportsStreaming:!0,supportsFIM:!1},{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",providerId:"anthropic",contextWindow:2e5,supportsStreaming:!0,supportsFIM:!1},{id:"claude-haiku-4-5-20251001",name:"Claude Haiku 4.5",providerId:"anthropic",contextWindow:2e5,supportsStreaming:!0,supportsFIM:!1},{id:"claude-opus-4-20250514",name:"Claude Opus 4",providerId:"anthropic",contextWindow:2e5,supportsStreaming:!0,supportsFIM:!1}]}function Co(){return[{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",providerId:"google",contextWindow:1048576,supportsStreaming:!0,supportsFIM:!1},{id:"gemini-2.0-flash-lite",name:"Gemini 2.0 Flash Lite",providerId:"google",contextWindow:1048576,supportsStreaming:!0,supportsFIM:!1},{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",providerId:"google",contextWindow:2097152,supportsStreaming:!0,supportsFIM:!1}]}function js(e,n,t,r){return{id:e,name:n,type:"custom",baseUrl:t,isBuiltIn:!1,models:r}}function As(e,n,t,r=8192){return{id:e,name:n,providerId:t,contextWindow:r,supportsStreaming:!0,supportsFIM:!1}}function tt(){const e=window.electronAPI;return e==null||typeof e.safeStorageEncrypt!="function"?null:e}function Io(){return tt()!==null}async function Eo(){const e=tt();if(e===null)return!1;try{return await e.isSafeStorageAvailable()}catch{return!1}}async function Mo(e){const n=tt();if(n===null)throw new Error("Electron safeStorage not available");return await n.safeStorageEncrypt(e)}async function To(e){const n=tt();if(n===null)throw new Error("Electron safeStorage not available");return await n.safeStorageDecrypt(e)}const jo="NotemacKeyStore",ve="keys",Dn="NotemacCryptoKey_v1",_t="AES-GCM",Ao=256,Te=12;let be=null;function Pt(){return typeof crypto<"u"&&crypto.subtle!==null&&typeof crypto.subtle<"u"}function Bn(){return new Promise((e,n)=>{const t=indexedDB.open(jo,1);t.onupgradeneeded=()=>{const r=t.result;r.objectStoreNames.contains(ve)||r.createObjectStore(ve,{keyPath:"id"})},t.onsuccess=()=>e(t.result),t.onerror=()=>n(t.error)})}async function Ro(){try{const e=await Bn();return new Promise(n=>{const o=e.transaction(ve,"readonly").objectStore(ve).get(Dn);o.onsuccess=()=>{const a=o.result;n(a!=null?a.key:null)},o.onerror=()=>n(null)})}catch{return null}}async function _o(e){try{const n=await Bn();return new Promise((t,r)=>{const o=n.transaction(ve,"readwrite");o.objectStore(ve).put({id:Dn,key:e}),o.oncomplete=()=>t(),o.onerror=()=>r(o.error)})}catch{}}async function Fn(){if(be!==null)return be;const e=await Ro();if(e!==null)return be=e,be;const n=await crypto.subtle.generateKey({name:_t,length:Ao},!1,["encrypt","decrypt"]);return await _o(n),be=n,be}async function Po(e){if(!Pt())return e;try{const n=await Fn(),t=crypto.getRandomValues(new Uint8Array(Te)),o=new TextEncoder().encode(e),a=await crypto.subtle.encrypt({name:_t,iv:t},n,o),s=new Uint8Array(Te+a.byteLength);return s.set(t,0),s.set(new Uint8Array(a),Te),btoa(String.fromCharCode(...s))}catch{return e}}async function Lo(e){if(!Pt())return e;try{const n=await Fn(),t=atob(e),r=new Uint8Array(t.length);for(let f=0,b=t.length;f<b;f++)r[f]=t.charCodeAt(f);const o=r.slice(0,Te),a=r.slice(Te),s=await crypto.subtle.decrypt({name:_t,iv:o},n,a);return new TextDecoder().decode(s)}catch{return e}}const Oo="SecureCred_",qe=new Map;function Je(e){return`${Oo}${e}`}async function Do(){return Io()&&await Eo()?"safeStorage":Pt()?"cryptoSubtle":"none"}async function Bo(e,n){return n==="safeStorage"?await Mo(e):n==="cryptoSubtle"?await Po(e):e}async function Fo(e,n){return n==="safeStorage"?await To(e):n==="cryptoSubtle"?await Lo(e):e}function No(e){return e.expiresAt===null?!1:Date.now()>e.expiresAt}async function Ie(e,n,t){if(t===0){qe.set(e,n);return}try{const r=await Do(),a={encrypted:await Bo(n,r),method:r,storedAt:Date.now(),expiresAt:t!=null?Date.now()+t*1e3:null};localStorage.setItem(Je(e),JSON.stringify(a))}catch{qe.set(e,n)}}async function zo(e){const n=qe.get(e);if(n!==void 0)return n;try{const t=localStorage.getItem(Je(e));if(t===null)return null;const r=JSON.parse(t);return No(r)?(localStorage.removeItem(Je(e)),null):await Fo(r.encrypted,r.method)}catch{return null}}function gt(e){qe.delete(e);try{localStorage.removeItem(Je(e))}catch{}}const $o=(e,n)=>({aiEnabled:!1,activeProviderId:"openai",activeModelId:"gpt-4o-mini",providers:an(),credentials:[],aiSettings:on(),conversations:[],activeConversationId:null,isAiStreaming:!1,aiStreamContent:"",inlineSuggestionEnabled:!0,currentInlineSuggestion:null,aiContextItems:[],commitMessageDraft:"",showAiSettings:!1,aiOperationError:null,SetAiEnabled:t=>e({aiEnabled:t}),SetActiveProvider:t=>e({activeProviderId:t}),SetActiveModel:t=>e({activeModelId:t}),SetProviders:t=>e({providers:t}),AddProvider:t=>{e(W(r=>{const o=r.providers.findIndex(a=>a.id===t.id);o!==-1?r.providers[o]=t:r.providers.push(t)})),n().SaveAIState()},RemoveProvider:t=>{e(W(r=>{const o=r.providers.findIndex(a=>a.id===t);o!==-1&&!r.providers[o].isBuiltIn&&r.providers.splice(o,1)})),n().SaveAIState()},SetCredentials:t=>e({credentials:t}),SetCredentialForProvider:(t,r,o)=>{e(W(f=>{const b=f.credentials.findIndex(m=>m.providerId===t),u={providerId:t,apiKey:r,rememberKey:o};b!==-1?f.credentials[b]=u:f.credentials.push(u)}));const a=n().credentials,s=a.filter(f=>f.rememberKey).map(f=>({providerId:f.providerId,apiKey:f.apiKey,rememberKey:!0}));0<s.length?Ie(re,JSON.stringify(s),We*3600):gt(re);const d=a.filter(f=>!f.rememberKey);0<d.length&&Ie(re+"_session",JSON.stringify(d),0)},RemoveCredentialForProvider:t=>{e(W(a=>{const s=a.credentials.findIndex(d=>d.providerId===t);s!==-1&&a.credentials.splice(s,1)}));const o=n().credentials.filter(a=>a.rememberKey);0<o.length?Ie(re,JSON.stringify(o),We*3600):gt(re)},UpdateAISettings:t=>{e(W(r=>{Object.assign(r.aiSettings,t)})),Z(pt,n().aiSettings)},SetConversations:t=>e({conversations:t}),AddConversation:t=>{e(W(r=>{r.conversations.unshift(t),en<r.conversations.length&&(r.conversations.length=en)})),e({activeConversationId:t.id})},RemoveConversation:t=>{e(W(r=>{const o=r.conversations.findIndex(a=>a.id===t);o!==-1&&r.conversations.splice(o,1),t===r.activeConversationId&&(r.activeConversationId=0<r.conversations.length?r.conversations[0].id:null)}))},SetActiveConversation:t=>e({activeConversationId:t}),AddMessageToConversation:(t,r)=>{e(W(o=>{const a=o.conversations.find(s=>s.id===t);a&&a.messages.push(r)}))},UpdateLastMessage:(t,r)=>{e(W(o=>{const a=o.conversations.find(s=>s.id===t);if(a&&0<a.messages.length){const s=a.messages[a.messages.length-1];s.content=r}}))},SetIsAiStreaming:t=>e({isAiStreaming:t}),SetAiStreamContent:t=>e({aiStreamContent:t}),SetInlineSuggestionEnabled:t=>e({inlineSuggestionEnabled:t}),SetCurrentInlineSuggestion:t=>e({currentInlineSuggestion:t}),AddAiContextItem:t=>{e(W(r=>{r.aiContextItems.push(t)}))},RemoveAiContextItem:t=>{e(W(r=>{0<=t&&t<r.aiContextItems.length&&r.aiContextItems.splice(t,1)}))},ClearAiContext:()=>e({aiContextItems:[]}),SetCommitMessageDraft:t=>e({commitMessageDraft:t}),SetShowAiSettings:t=>e({showAiSettings:t}),SetAiOperationError:t=>e({aiOperationError:t}),LoadAIState:()=>{const t=ie(pt),r=ie(Zt),o=ie(Qt),a=an();let s=a;if(r!=null){const d=r.filter(f=>!f.isBuiltIn);s=[...a,...d]}zo(re).then(d=>{let f=[];if(d!==null)try{f=JSON.parse(d)}catch{f=[]}else{const b=ie(re);if(b!==null&&0<b.length){f=b;const u=b.filter(m=>m.rememberKey);0<u.length&&Ie(re,JSON.stringify(u),We*3600),xo(re)}}e({credentials:f,aiEnabled:0<f.length})}),e({aiSettings:t||on(),credentials:[],providers:s,conversations:o||[],aiEnabled:!1})},SaveAIState:()=>{const t=n();Z(pt,t.aiSettings);const r=t.providers.filter(a=>!a.isBuiltIn);0<r.length&&Z(Zt,r);const o=t.credentials.filter(a=>a.rememberKey);0<o.length?Ie(re,JSON.stringify(o),We*3600):gt(re),Z(Qt,t.conversations)},GetActiveProvider:()=>{const t=n();return t.providers.find(r=>r.id===t.activeProviderId)||null},GetActiveModel:()=>{const t=n(),r=t.providers.find(o=>o.id===t.activeProviderId);return r==null?null:r.models.find(o=>o.id===t.activeModelId)||null},GetCredentialForProvider:t=>n().credentials.find(r=>r.providerId===t)||null,GetActiveConversation:()=>{const t=n();return t.activeConversationId===null?null:t.conversations.find(r=>r.id===t.activeConversationId)||null}}),A=Sr()((...e)=>({...uo(...e),...fo(...e),...go(...e),...mo(...e),...yo(...e),...So(...e),...vo(...e),...$o(...e)})),sn={dark:{bg:"#1e1e1e",bgSecondary:"#252526",bgTertiary:"#2d2d30",bgHover:"#3e3e42",bgActive:"#094771",text:"#cccccc",textSecondary:"#969696",textMuted:"#6e6e6e",border:"#3e3e42",accent:"#007acc",accentHover:"#1a8ad4",accentText:"#ffffff",danger:"#f44747",warning:"#cca700",success:"#89d185",tabBg:"#2d2d30",tabActiveBg:"#1e1e1e",tabActiveText:"#ffffff",tabBorder:"#3e3e42",menuBg:"#2d2d30",menuHover:"#094771",menuText:"#cccccc",statusBarBg:"#007acc",statusBarText:"#ffffff",sidebarBg:"#252526",sidebarText:"#cccccc",scrollbarBg:"transparent",scrollbarThumb:"#424242",editorBg:"#1e1e1e",editorMonacoTheme:"vs-dark",findBg:"#252526"},light:{bg:"#ffffff",bgSecondary:"#f3f3f3",bgTertiary:"#ececec",bgHover:"#e0e0e0",bgActive:"#cce5ff",text:"#333333",textSecondary:"#666666",textMuted:"#999999",border:"#d4d4d4",accent:"#0078d4",accentHover:"#106ebe",accentText:"#ffffff",danger:"#d32f2f",warning:"#f9a825",success:"#2e7d32",tabBg:"#ececec",tabActiveBg:"#ffffff",tabActiveText:"#333333",tabBorder:"#d4d4d4",menuBg:"#f3f3f3",menuHover:"#0078d4",menuText:"#333333",statusBarBg:"#0078d4",statusBarText:"#ffffff",sidebarBg:"#f3f3f3",sidebarText:"#333333",scrollbarBg:"transparent",scrollbarThumb:"#c4c4c4",editorBg:"#ffffff",editorMonacoTheme:"vs",findBg:"#f3f3f3"},monokai:{bg:"#272822",bgSecondary:"#1e1f1c",bgTertiary:"#3e3d32",bgHover:"#49483e",bgActive:"#49483e",text:"#f8f8f2",textSecondary:"#a6a69c",textMuted:"#75715e",border:"#3e3d32",accent:"#a6e22e",accentHover:"#b8f340",accentText:"#272822",danger:"#f92672",warning:"#e6db74",success:"#a6e22e",tabBg:"#1e1f1c",tabActiveBg:"#272822",tabActiveText:"#f8f8f2",tabBorder:"#3e3d32",menuBg:"#1e1f1c",menuHover:"#49483e",menuText:"#f8f8f2",statusBarBg:"#49483e",statusBarText:"#f8f8f2",sidebarBg:"#1e1f1c",sidebarText:"#f8f8f2",scrollbarBg:"transparent",scrollbarThumb:"#49483e",editorBg:"#272822",editorMonacoTheme:"monokai",findBg:"#1e1f1c"},dracula:{bg:"#282a36",bgSecondary:"#21222c",bgTertiary:"#343746",bgHover:"#44475a",bgActive:"#44475a",text:"#f8f8f2",textSecondary:"#bd93f9",textMuted:"#6272a4",border:"#44475a",accent:"#bd93f9",accentHover:"#caa9fa",accentText:"#282a36",danger:"#ff5555",warning:"#f1fa8c",success:"#50fa7b",tabBg:"#21222c",tabActiveBg:"#282a36",tabActiveText:"#f8f8f2",tabBorder:"#44475a",menuBg:"#21222c",menuHover:"#44475a",menuText:"#f8f8f2",statusBarBg:"#44475a",statusBarText:"#f8f8f2",sidebarBg:"#21222c",sidebarText:"#f8f8f2",scrollbarBg:"transparent",scrollbarThumb:"#44475a",editorBg:"#282a36",editorMonacoTheme:"dracula",findBg:"#21222c"},"solarized-dark":{bg:"#002b36",bgSecondary:"#073642",bgTertiary:"#073642",bgHover:"#0a4858",bgActive:"#0a4858",text:"#839496",textSecondary:"#657b83",textMuted:"#586e75",border:"#073642",accent:"#268bd2",accentHover:"#2aa7f5",accentText:"#fdf6e3",danger:"#dc322f",warning:"#b58900",success:"#859900",tabBg:"#073642",tabActiveBg:"#002b36",tabActiveText:"#93a1a1",tabBorder:"#073642",menuBg:"#073642",menuHover:"#0a4858",menuText:"#839496",statusBarBg:"#073642",statusBarText:"#839496",sidebarBg:"#073642",sidebarText:"#839496",scrollbarBg:"transparent",scrollbarThumb:"#0a4858",editorBg:"#002b36",editorMonacoTheme:"solarized-dark",findBg:"#073642"},"solarized-light":{bg:"#fdf6e3",bgSecondary:"#eee8d5",bgTertiary:"#eee8d5",bgHover:"#e4ddc8",bgActive:"#e4ddc8",text:"#657b83",textSecondary:"#839496",textMuted:"#93a1a1",border:"#eee8d5",accent:"#268bd2",accentHover:"#2aa7f5",accentText:"#fdf6e3",danger:"#dc322f",warning:"#b58900",success:"#859900",tabBg:"#eee8d5",tabActiveBg:"#fdf6e3",tabActiveText:"#586e75",tabBorder:"#eee8d5",menuBg:"#eee8d5",menuHover:"#e4ddc8",menuText:"#657b83",statusBarBg:"#eee8d5",statusBarText:"#657b83",sidebarBg:"#eee8d5",sidebarText:"#657b83",scrollbarBg:"transparent",scrollbarThumb:"#d3cbb7",editorBg:"#fdf6e3",editorMonacoTheme:"solarized-light",findBg:"#eee8d5"}};function Wo(e){return sn[e]||sn.dark}function Ho(e){e.editor.defineTheme("monokai",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"75715e",fontStyle:"italic"},{token:"keyword",foreground:"f92672"},{token:"string",foreground:"e6db74"},{token:"number",foreground:"ae81ff"},{token:"type",foreground:"66d9ef",fontStyle:"italic"},{token:"function",foreground:"a6e22e"},{token:"variable",foreground:"f8f8f2"}],colors:{"editor.background":"#272822","editor.foreground":"#f8f8f2","editor.lineHighlightBackground":"#3e3d32","editor.selectionBackground":"#49483e","editorCursor.foreground":"#f8f8f0"}}),e.editor.defineTheme("dracula",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"6272a4",fontStyle:"italic"},{token:"keyword",foreground:"ff79c6"},{token:"string",foreground:"f1fa8c"},{token:"number",foreground:"bd93f9"},{token:"type",foreground:"8be9fd",fontStyle:"italic"},{token:"function",foreground:"50fa7b"},{token:"variable",foreground:"f8f8f2"}],colors:{"editor.background":"#282a36","editor.foreground":"#f8f8f2","editor.lineHighlightBackground":"#44475a","editor.selectionBackground":"#44475a","editorCursor.foreground":"#f8f8f2"}}),e.editor.defineTheme("solarized-dark",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"586e75",fontStyle:"italic"},{token:"keyword",foreground:"859900"},{token:"string",foreground:"2aa198"},{token:"number",foreground:"d33682"},{token:"type",foreground:"b58900"},{token:"function",foreground:"268bd2"}],colors:{"editor.background":"#002b36","editor.foreground":"#839496","editor.lineHighlightBackground":"#073642","editor.selectionBackground":"#073642"}}),e.editor.defineTheme("solarized-light",{base:"vs",inherit:!0,rules:[{token:"comment",foreground:"93a1a1",fontStyle:"italic"},{token:"keyword",foreground:"859900"},{token:"string",foreground:"2aa198"},{token:"number",foreground:"d33682"},{token:"type",foreground:"b58900"},{token:"function",foreground:"268bd2"}],colors:{"editor.background":"#fdf6e3","editor.foreground":"#657b83","editor.lineHighlightBackground":"#eee8d5","editor.selectionBackground":"#eee8d5"}})}function Go(e,n,t){const r=e.metaKey||e.ctrlKey,o=A.getState();r&&e.key==="n"?(e.preventDefault(),o.addTab()):r&&e.key==="w"?(e.preventDefault(),n!==null&&o.closeTab(n)):r&&e.shiftKey&&e.key==="T"?(e.preventDefault(),o.restoreLastClosedTab()):r&&e.key==="f"?(e.preventDefault(),o.setShowFindReplace(!0,"find")):r&&e.key==="h"?(e.preventDefault(),o.setShowFindReplace(!0,"replace")):r&&e.key==="g"?(e.preventDefault(),o.setShowGoToLine(!0)):r&&e.key==="b"?(e.preventDefault(),o.toggleSidebar()):r&&e.key===","?(e.preventDefault(),o.setShowSettings(!0)):r&&e.key==="="?(e.preventDefault(),o.setZoomLevel(t+1)):r&&e.key==="-"?(e.preventDefault(),o.setZoomLevel(t-1)):r&&e.key==="0"?(e.preventDefault(),o.setZoomLevel(0)):r&&e.shiftKey&&e.key==="P"?(e.preventDefault(),o.setShowCommandPalette(!0)):r&&e.shiftKey&&e.key==="F"?(e.preventDefault(),o.setShowFindReplace(!0,"findInFiles")):r&&e.key==="p"?(e.preventDefault(),o.setShowQuickOpen(!0)):e.ctrlKey&&e.key==="`"?(e.preventDefault(),o.setShowTerminalPanel(!o.showTerminalPanel)):e.ctrlKey&&e.shiftKey&&e.key==="G"?(e.preventDefault(),o.setSidebarPanel(o.sidebarPanel==="git"?null:"git")):e.key==="Escape"&&(o.setShowFindReplace(!1),o.setShowSettings(!1),o.setShowGoToLine(!1),o.setShowAbout(!1),o.setShowRunCommand(!1),o.setShowColumnEditor(!1),o.setShowSummary(!1),o.setShowCharInRange(!1),o.setShowShortcutMapper(!1),o.setShowCommandPalette(!1),o.setShowQuickOpen(!1),o.setShowDiffViewer(!1),o.setShowSnippetManager(!1),o.setShowCloneDialog(!1),o.setShowGitSettings(!1))}let Lt=null,Ot=null;function Uo(e){Lt=e}function Rs(){return Lt}function Vo(){Lt=null}function Ko(e){Ot=e}function Nn(){return Ot}function qo(){Ot=null}function zn(e,n,t,r,o){var d,f,b,u;const a=A.getState(),s=Nn();switch(e){case"new":a.addTab();break;case"open":Jo();break;case"open-folder":Yo();break;case"save":ht(n,t,!1);break;case"save-as":ht(n,t,!0);break;case"save-copy-as":ht(n,t,!0);break;case"save-all":Xo(t);break;case"reload-from-disk":Zo(n,t);break;case"rename-file":Qo(n,t);break;case"delete-file":n!==null&&a.closeTab(n);break;case"close-tab":n!==null&&a.closeTab(n);break;case"close-all":a.closeAllTabs();break;case"close-others":n!==null&&a.closeOtherTabs(n);break;case"close-tabs-to-left":n!==null&&a.closeTabsToLeft(n);break;case"close-tabs-to-right":n!==null&&a.closeTabsToRight(n);break;case"close-unchanged":a.closeUnchangedTabs();break;case"close-all-but-pinned":a.closeAllButPinned();break;case"restore-last-closed":a.restoreLastClosedTab();break;case"pin-tab":n!==null&&a.togglePinTab(n);break;case"print":window.print();break;case"find":a.setShowFindReplace(!0,"find");break;case"replace":a.setShowFindReplace(!0,"replace");break;case"find-in-files":a.setShowFindReplace(!0,"findInFiles");break;case"mark":a.setShowFindReplace(!0,"mark");break;case"incremental-search":a.setShowIncrementalSearch(!0);break;case"goto-line":a.setShowGoToLine(!0);break;case"find-char-in-range":a.setShowCharInRange(!0);break;case"word-wrap":a.updateSettings({wordWrap:o});break;case"show-whitespace":a.updateSettings({showWhitespace:o,renderWhitespace:o?"all":"none"});break;case"show-eol":a.updateSettings({showEOL:o});break;case"show-non-printable":a.updateSettings({showNonPrintable:o});break;case"show-wrap-symbol":a.updateSettings({showWrapSymbol:o});break;case"indent-guide":a.updateSettings({showIndentGuides:o});break;case"show-line-numbers":a.updateSettings({showLineNumbers:o});break;case"toggle-minimap":a.updateSettings({showMinimap:o});break;case"zoom-in":a.setZoomLevel(r+1);break;case"zoom-out":a.setZoomLevel(r-1);break;case"zoom-reset":a.setZoomLevel(0);break;case"toggle-sidebar":a.toggleSidebar();break;case"show-doc-list":a.setSidebarPanel("docList");break;case"show-function-list":a.setSidebarPanel("functions");break;case"show-project-panel":a.setSidebarPanel("project");break;case"distraction-free":a.updateSettings({distractionFreeMode:o});break;case"always-on-top":{a.updateSettings({alwaysOnTop:o}),window.electronAPI&&((f=(d=window.electronAPI).setAlwaysOnTop)==null||f.call(d,o));break}case"sync-scroll-v":a.updateSettings({syncScrollVertical:o});break;case"sync-scroll-h":a.updateSettings({syncScrollHorizontal:o});break;case"split-right":n!==null&&a.setSplitView("vertical",n);break;case"split-down":n!==null&&a.setSplitView("horizontal",n);break;case"close-split":a.setSplitView("none");break;case"show-summary":a.setShowSummary(!0);break;case"toggle-monitoring":{if(n!==null){const m=t.find(T=>T.id===n);m&&a.updateTab(n,{isMonitoring:!m.isMonitoring})}break}case"language":n!==null&&a.updateTab(n,{language:o});break;case"encoding":n!==null&&a.updateTab(n,{encoding:o});break;case"line-ending":n!==null&&a.updateTab(n,{lineEnding:o});break;case"macro-start":a.startRecordingMacro();break;case"macro-stop":a.stopRecordingMacro();break;case"command-palette":a.setShowCommandPalette(!0);break;case"quick-open":a.setShowQuickOpen(!0);break;case"compare-files":a.setShowDiffViewer(!0);break;case"snippet-manager":a.setShowSnippetManager(!0);break;case"toggle-terminal":a.setShowTerminalPanel(!a.showTerminalPanel);break;case"clone-repository":a.setShowCloneDialog(!0);break;case"git-settings":a.setShowGitSettings(!0);break;case"show-git-panel":a.setSidebarPanel("git");break;case"ai-chat":a.setSidebarPanel("ai");break;case"ai-settings":a.SetShowAiSettings(!0);break;case"ai-explain":case"ai-refactor":case"ai-generate-tests":case"ai-generate-docs":case"ai-fix-error":case"ai-simplify":case"ai-convert-language":s&&s(e);break;case"ai-toggle-inline":a.SetInlineSuggestionEnabled(!a.inlineSuggestionEnabled);break;case"preferences":a.setShowSettings(!0);break;case"about":a.setShowAbout(!0);break;case"run-command":a.setShowRunCommand(!0);break;case"column-editor":a.setShowColumnEditor(!0);break;case"shortcut-mapper":a.setShowShortcutMapper(!0);break;case"clipboard-history":a.setSidebarPanel("clipboardHistory");break;case"char-panel":a.setSidebarPanel("charPanel");break;case"search-google":{const m=(b=window.getSelection())==null?void 0:b.toString();m&&window.open(`https://www.google.com/search?q=${encodeURIComponent(m)}`,"_blank");break}case"search-wikipedia":{const m=(u=window.getSelection())==null?void 0:u.toString();m&&window.open(`https://en.wikipedia.org/wiki/${encodeURIComponent(m)}`,"_blank");break}case"open-in-browser":{const m=t.find(T=>T.id===n);m&&m.path&&window.open(`file://${m.path}`,"_blank");break}case"save-session":{const m=a.saveSession(),T=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),l=URL.createObjectURL(T),x=document.createElement("a");x.href=l,x.download="session.json",x.click(),URL.revokeObjectURL(l);break}case"load-session":{const m=document.createElement("input");m.type="file",m.accept=".json",m.onchange=async T=>{var x;const l=(x=T.target.files)==null?void 0:x[0];if(l){const _=await l.text();try{A.getState().loadSession(JSON.parse(_))}catch{}}},m.click();break}default:s&&s(e,o);break}}function Jo(){var n,t;if(window.electronAPI){(t=(n=window.electronAPI).openFile)==null||t.call(n);return}const e=document.createElement("input");e.type="file",e.multiple=!0,e.onchange=async()=>{if(!e.files)return;const r=A.getState();for(const o of Array.from(e.files)){const a=await o.text();r.addTab({name:o.name,content:a,language:ae(o.name),lineEnding:de(a)})}},e.click()}function Yo(){var n,t;if(window.electronAPI){(t=(n=window.electronAPI).openFolder)==null||t.call(n);return}const e=document.createElement("input");e.type="file",e.webkitdirectory=!0,e.onchange=async()=>{if(!e.files||e.files.length===0)return;const r=A.getState();for(const o of Array.from(e.files)){const a=await o.text();r.addTab({name:o.name,content:a,language:ae(o.name),lineEnding:de(a)})}},e.click()}function ht(e,n,t){var d,f,b,u;if(e===null)return;const r=n.find(m=>m.id===e);if(!r)return;if(window.electronAPI){t||!r.path?(f=(d=window.electronAPI).saveFileAs)==null||f.call(d,r.content,r.name):(u=(b=window.electronAPI).saveFile)==null||u.call(b,r.content,r.path),A.getState().updateTab(e,{isModified:!1});return}const o=new Blob([r.content],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(o),s=document.createElement("a");s.href=a,s.download=r.name,s.click(),URL.revokeObjectURL(a),A.getState().updateTab(e,{isModified:!1})}function Xo(e){var t,r;const n=A.getState();for(const o of e)if(o.isModified)if(window.electronAPI&&o.path)(r=(t=window.electronAPI).saveFile)==null||r.call(t,o.content,o.path),n.updateTab(o.id,{isModified:!1});else{const a=new Blob([o.content],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(a),d=document.createElement("a");d.href=s,d.download=o.name,d.click(),URL.revokeObjectURL(s),n.updateTab(o.id,{isModified:!1})}}function Zo(e,n){var o,a;if(e===null)return;const t=n.find(s=>s.id===e);if(!t)return;if(window.electronAPI&&t.path){(a=(o=window.electronAPI).readFile)==null||a.call(o,t.path).then(s=>{A.getState().updateTabContent(e,s),A.getState().updateTab(e,{isModified:!1})}).catch(s=>{});return}const r=document.createElement("input");r.type="file",r.onchange=async()=>{var d;const s=(d=r.files)==null?void 0:d[0];if(s){const f=await s.text();A.getState().updateTabContent(e,f),A.getState().updateTab(e,{isModified:!1,name:s.name})}},r.click()}function Qo(e,n){var o,a;if(e===null)return;const t=n.find(s=>s.id===e);if(!t)return;const r=prompt("Enter new file name:",t.name);r&&r!==t.name&&(A.getState().updateTab(e,{name:r}),window.electronAPI&&t.path&&((a=(o=window.electronAPI).renameFile)==null||a.call(o,t.path,r)))}function ln(e){e.preventDefault(),e.stopPropagation()}async function cn(e){var n;if(e.preventDefault(),e.stopPropagation(),(n=e.dataTransfer)!=null&&n.files){const t=Array.from(e.dataTransfer.files),r=A.getState();for(const o of t){const a=await o.text();r.addTab({name:o.name,content:a,language:ae(o.name),lineEnding:de(a)})}}}function ea(){var e,n;window.electronAPI&&(window.electronAPI.onFileOpened(t=>{const r=A.getState(),o=r.tabs.find(a=>a.path===t.path);o?r.setActiveTab(o.id):(r.addTab({name:t.name,path:t.path,content:t.content,language:ae(t.name),lineEnding:de(t.content)}),r.addRecentFile(t.path,t.name))}),window.electronAPI.onFolderOpened(t=>{const r=A.getState();r.setFileTree(t.tree),r.setWorkspacePath(t.path),r.setSidebarPanel("explorer")}),window.electronAPI.onMenuAction((t,r)=>{const o=A.getState();zn(t,o.activeTabId,o.tabs,o.zoomLevel,r)}),(n=(e=window.electronAPI).onFileSaved)==null||n.call(e,t=>{const r=A.getState();r.activeTabId!==null&&r.updateTab(r.activeTabId,{name:t.name,path:t.path,isModified:!1,language:ae(t.name)})}))}const ta=[{group:"Unicode",items:[{value:"utf-8",label:"UTF-8"},{value:"utf-8-bom",label:"UTF-8 BOM"},{value:"utf-16le",label:"UTF-16 LE"},{value:"utf-16be",label:"UTF-16 BE"}]},{group:"Western European",items:[{value:"windows-1252",label:"Windows-1252 (ANSI)"},{value:"iso-8859-1",label:"ISO 8859-1 (Latin I)"},{value:"iso-8859-15",label:"ISO 8859-15 (Latin 9)"},{value:"cp850",label:"OEM 850 (DOS Latin)"}]},{group:"Central European",items:[{value:"windows-1250",label:"Windows-1250"},{value:"iso-8859-2",label:"ISO 8859-2 (Latin II)"}]},{group:"Cyrillic",items:[{value:"windows-1251",label:"Windows-1251"},{value:"iso-8859-5",label:"ISO 8859-5"},{value:"koi8-r",label:"KOI8-R"},{value:"koi8-u",label:"KOI8-U"},{value:"cp866",label:"OEM 866 (DOS Cyrillic)"}]},{group:"Greek",items:[{value:"windows-1253",label:"Windows-1253"},{value:"iso-8859-7",label:"ISO 8859-7"}]},{group:"Turkish",items:[{value:"windows-1254",label:"Windows-1254"},{value:"iso-8859-9",label:"ISO 8859-9"}]},{group:"Hebrew",items:[{value:"windows-1255",label:"Windows-1255"},{value:"iso-8859-8",label:"ISO 8859-8"}]},{group:"Arabic",items:[{value:"windows-1256",label:"Windows-1256"},{value:"iso-8859-6",label:"ISO 8859-6"}]},{group:"Baltic",items:[{value:"windows-1257",label:"Windows-1257"},{value:"iso-8859-13",label:"ISO 8859-13"}]},{group:"Vietnamese",items:[{value:"windows-1258",label:"Windows-1258"}]},{group:"East Asian",items:[{value:"big5",label:"Big5 (Traditional Chinese)"},{value:"gb2312",label:"GB2312 (Simplified Chinese)"},{value:"shift_jis",label:"Shift JIS (Japanese)"},{value:"euc-kr",label:"EUC-KR (Korean)"},{value:"iso-2022-jp",label:"ISO-2022-JP"}]},{group:"Thai",items:[{value:"tis-620",label:"TIS-620 (Thai)"}]},{group:"DOS",items:[{value:"cp437",label:"OEM 437 (US)"},{value:"cp737",label:"OEM 737 (Greek)"},{value:"cp775",label:"OEM 775 (Baltic)"},{value:"cp852",label:"OEM 852 (Latin II)"},{value:"cp855",label:"OEM 855 (Cyrillic)"},{value:"cp857",label:"OEM 857 (Turkish)"},{value:"cp858",label:"OEM 858 (Latin I + Euro)"},{value:"cp860",label:"OEM 860 (Portuguese)"},{value:"cp861",label:"OEM 861 (Icelandic)"},{value:"cp862",label:"OEM 862 (Hebrew)"},{value:"cp863",label:"OEM 863 (French Canadian)"},{value:"cp865",label:"OEM 865 (Nordic)"},{value:"cp869",label:"OEM 869 (Greek)"}]}];function dn(){return ta}const na=[{value:"plaintext",label:"Normal Text"},{value:"actionscript",label:"ActionScript"},{value:"ada",label:"Ada"},{value:"asp",label:"ASP"},{value:"asm",label:"Assembly"},{value:"autoit",label:"AutoIt"},{value:"bat",label:"Batch"},{value:"c",label:"C"},{value:"cpp",label:"C++"},{value:"csharp",label:"C#"},{value:"caml",label:"OCaml"},{value:"cmake",label:"CMake"},{value:"cobol",label:"COBOL"},{value:"coffeescript",label:"CoffeeScript"},{value:"css",label:"CSS"},{value:"d",label:"D"},{value:"dart",label:"Dart"},{value:"diff",label:"Diff"},{value:"dockerfile",label:"Dockerfile"},{value:"elixir",label:"Elixir"},{value:"erlang",label:"Erlang"},{value:"fortran",label:"Fortran"},{value:"fsharp",label:"F#"},{value:"gdscript",label:"GDScript"},{value:"go",label:"Go"},{value:"graphql",label:"GraphQL"},{value:"haskell",label:"Haskell"},{value:"html",label:"HTML"},{value:"ini",label:"INI"},{value:"java",label:"Java"},{value:"javascript",label:"JavaScript"},{value:"json",label:"JSON"},{value:"json5",label:"JSON5"},{value:"julia",label:"Julia"},{value:"kotlin",label:"Kotlin"},{value:"latex",label:"LaTeX"},{value:"less",label:"LESS"},{value:"lisp",label:"Lisp"},{value:"lua",label:"Lua"},{value:"makefile",label:"Makefile"},{value:"markdown",label:"Markdown"},{value:"matlab",label:"MATLAB"},{value:"nim",label:"Nim"},{value:"nsis",label:"NSIS"},{value:"objective-c",label:"Objective-C"},{value:"pascal",label:"Pascal"},{value:"perl",label:"Perl"},{value:"php",label:"PHP"},{value:"powershell",label:"PowerShell"},{value:"properties",label:"Properties"},{value:"python",label:"Python"},{value:"r",label:"R"},{value:"raku",label:"Raku"},{value:"restructuredtext",label:"reStructuredText"},{value:"ruby",label:"Ruby"},{value:"rust",label:"Rust"},{value:"sas",label:"SAS"},{value:"scala",label:"Scala"},{value:"scheme",label:"Scheme"},{value:"scss",label:"SCSS"},{value:"shell",label:"Shell/Bash"},{value:"smalltalk",label:"Smalltalk"},{value:"sql",label:"SQL"},{value:"swift",label:"Swift"},{value:"tcl",label:"Tcl"},{value:"toml",label:"TOML"},{value:"typescript",label:"TypeScript"},{value:"vb",label:"Visual Basic"},{value:"verilog",label:"Verilog"},{value:"vhdl",label:"VHDL"},{value:"xml",label:"XML"},{value:"yaml",label:"YAML"}];function ra(){return na}function oa({theme:e,onAction:n,isElectron:t}){const[r,o]=y.useState(null),[a,s]=y.useState(null),[d,f]=y.useState(null),b=y.useRef(null),{settings:u,isRecordingMacro:m}=A(),T=navigator.platform.includes("Mac"),l=T?"":"Ctrl+",x=T?"":"Shift+",_=T?"":"Alt+";y.useEffect(()=>{const I=L=>{b.current&&!b.current.contains(L.target)&&(o(null),f(null))};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]);const C=[];dn().forEach(I=>{C.push({type:"separator",label:`--- ${I.group} ---`}),I.items.forEach(L=>{C.push({label:L.label,action:"encoding",value:L.value})})});const j=ra().map(I=>({label:I.label,action:"language",value:I.value})),R={File:[{label:"New",shortcut:`${l}N`,action:"new"},{type:"separator",label:""},{label:"Open...",shortcut:`${l}O`,action:"open"},{label:"Open Folder as Workspace",action:"open-folder"},{label:"Reload from Disk",action:"reload-from-disk"},{type:"separator",label:""},{label:"Save",shortcut:`${l}S`,action:"save"},{label:"Save As...",shortcut:`${x}${l}S`,action:"save-as"},{label:"Save Copy As...",action:"save-copy-as"},{label:"Save All",action:"save-all"},{type:"separator",label:""},{label:"Rename...",action:"rename-file"},{label:"Delete from Disk",action:"delete-file"},{type:"separator",label:""},{label:"Restore Last Closed Tab",shortcut:`${x}${l}T`,action:"restore-last-closed"},{type:"separator",label:""},{label:"Close Tab",shortcut:`${l}W`,action:"close-tab"},{label:"Close All",action:"close-all"},{label:"Close Others",action:"close-others"},{label:"Close Tabs to Left",action:"close-tabs-to-left"},{label:"Close Tabs to Right",action:"close-tabs-to-right"},{label:"Close Unchanged",action:"close-unchanged"},{label:"Close All but Pinned",action:"close-all-but-pinned"},{type:"separator",label:""},{label:"Pin Tab",action:"pin-tab"},{type:"separator",label:""},{label:"Load Session...",action:"load-session"},{label:"Save Session...",action:"save-session"},{type:"separator",label:""},{label:"Print...",shortcut:`${l}P`,action:"print"}],Edit:[{label:"Undo",shortcut:`${l}Z`,action:"undo"},{label:"Redo",shortcut:`${x}${l}Z`,action:"redo"},{type:"separator",label:""},{label:"Cut",shortcut:`${l}X`,action:"cut"},{label:"Copy",shortcut:`${l}C`,action:"copy"},{label:"Paste",shortcut:`${l}V`,action:"paste"},{label:"Select All",shortcut:`${l}A`,action:"select-all"},{type:"separator",label:""},{label:"Duplicate Line",shortcut:`${l}D`,action:"duplicate-line"},{label:"Delete Line",shortcut:`${x}${l}K`,action:"delete-line"},{label:"Transpose Line",shortcut:`${_}T`,action:"transpose-line"},{label:"Move Line Up",shortcut:`${_}`,action:"move-line-up"},{label:"Move Line Down",shortcut:`${_}`,action:"move-line-down"},{label:"Split Lines",action:"split-lines"},{label:"Join Lines",action:"join-lines"},{type:"separator",label:""},{label:"Toggle Comment",shortcut:`${l}/`,action:"toggle-comment"},{label:"Block Comment",shortcut:`${x}${_}A`,action:"block-comment"},{type:"separator",label:""},{label:"UPPERCASE",shortcut:`${x}${l}U`,action:"uppercase"},{label:"lowercase",shortcut:`${l}U`,action:"lowercase"},{label:"Proper Case",action:"proper-case"},{label:"Sentence Case",action:"sentence-case"},{label:"Invert Case",action:"invert-case"},{label:"Random Case",action:"random-case"},{type:"separator",label:""},{label:"Insert Date/Time",action:"insert-datetime"},{type:"separator",label:""},{label:"Column Editor...",shortcut:`${_}C`,action:"column-editor"},{label:"Clipboard History",shortcut:`${l}${x}V`,action:"clipboard-history"},{label:"Character Panel",action:"char-panel"},{type:"separator",label:""},{label:"Copy File Path",action:"copy-file-path"},{label:"Copy File Name",action:"copy-file-name"},{label:"Copy File Dir",action:"copy-file-dir"},{type:"separator",label:""},{label:"Compare Files...",action:"compare-files"},{label:"Snippet Manager...",action:"snippet-manager"},{type:"separator",label:""},{label:"Set Read-Only",action:"toggle-readonly"}],Search:[{label:"Find...",shortcut:`${l}F`,action:"find"},{label:"Replace...",shortcut:`${l}H`,action:"replace"},{label:"Find in Files...",shortcut:`${x}${l}F`,action:"find-in-files"},{label:"Incremental Search",shortcut:`${l}${_}I`,action:"incremental-search"},{type:"separator",label:""},{label:"Mark...",action:"mark"},{label:"Mark Style 1",action:"mark-style",value:1},{label:"Mark Style 2",action:"mark-style",value:2},{label:"Mark Style 3",action:"mark-style",value:3},{label:"Mark Style 4",action:"mark-style",value:4},{label:"Mark Style 5",action:"mark-style",value:5},{label:"Clear All Marks",action:"clear-marks"},{type:"separator",label:""},{label:"Cut Marked Lines",action:"cut-marked-lines"},{label:"Copy Marked Lines",action:"copy-marked-lines"},{label:"Paste to (Replace) Marked Lines",action:"paste-marked-lines"},{label:"Delete Marked Lines",action:"delete-marked-lines"},{label:"Delete Unmarked Lines",action:"delete-unmarked-lines"},{label:"Inverse Marks",action:"inverse-marks"},{type:"separator",label:""},{label:"Go to Line...",shortcut:`${l}G`,action:"goto-line"},{label:"Go to Matching Bracket",shortcut:`${x}${l}\\`,action:"goto-bracket"},{label:"Select to Matching Bracket",action:"select-to-bracket"},{type:"separator",label:""},{label:"Toggle Bookmark",shortcut:`${l}F2`,action:"toggle-bookmark"},{label:"Next Bookmark",shortcut:"F2",action:"next-bookmark"},{label:"Previous Bookmark",shortcut:`${x}F2`,action:"prev-bookmark"},{label:"Clear All Bookmarks",action:"clear-bookmarks"},{type:"separator",label:""},{label:"Find Characters in Range...",action:"find-char-in-range"}],View:[{label:"Word Wrap",type:"checkbox",checked:u.wordWrap,action:"word-wrap"},{type:"separator",label:""},{label:"Show Whitespace",type:"checkbox",checked:u.showWhitespace,action:"show-whitespace"},{label:"Show EOL",type:"checkbox",checked:u.showEOL,action:"show-eol"},{label:"Show Non-Printable Characters",type:"checkbox",checked:u.showNonPrintable,action:"show-non-printable"},{label:"Show Wrap Symbol",type:"checkbox",checked:u.showWrapSymbol,action:"show-wrap-symbol"},{label:"Show Indent Guides",type:"checkbox",checked:u.showIndentGuides,action:"indent-guide"},{label:"Show Line Numbers",type:"checkbox",checked:u.showLineNumbers,action:"show-line-numbers"},{label:"Show Minimap",type:"checkbox",checked:u.showMinimap,action:"toggle-minimap"},{type:"separator",label:""},{label:"Fold All",action:"fold-all"},{label:"Unfold All",action:"unfold-all"},{label:"Fold Level 1",action:"fold-level",value:1},{label:"Fold Level 2",action:"fold-level",value:2},{label:"Fold Level 3",action:"fold-level",value:3},{label:"Fold Level 4",action:"fold-level",value:4},{label:"Fold Level 5",action:"fold-level",value:5},{label:"Fold Level 6",action:"fold-level",value:6},{label:"Fold Level 7",action:"fold-level",value:7},{label:"Fold Level 8",action:"fold-level",value:8},{type:"separator",label:""},{label:"Zoom In",shortcut:`${l}+`,action:"zoom-in"},{label:"Zoom Out",shortcut:`${l}-`,action:"zoom-out"},{label:"Reset Zoom",shortcut:`${l}0`,action:"zoom-reset"},{type:"separator",label:""},{label:"Toggle Sidebar",shortcut:`${l}B`,action:"toggle-sidebar"},{label:"Document List",action:"show-doc-list"},{label:"Function List",action:"show-function-list"},{label:"Project Panel",action:"show-project-panel"},{type:"separator",label:""},{label:"Distraction-Free Mode",type:"checkbox",checked:u.distractionFreeMode,action:"distraction-free"},{label:"Always on Top",type:"checkbox",checked:u.alwaysOnTop,action:"always-on-top"},{type:"separator",label:""},{label:"Synchronize Vertical Scrolling",type:"checkbox",checked:u.syncScrollVertical,action:"sync-scroll-v"},{label:"Synchronize Horizontal Scrolling",type:"checkbox",checked:u.syncScrollHorizontal,action:"sync-scroll-h"},{type:"separator",label:""},{label:"Split Right",action:"split-right"},{label:"Split Down",action:"split-down"},{label:"Close Split",action:"close-split"},{type:"separator",label:""},{label:"Summary...",action:"show-summary"},{label:"Monitoring (tail -f)",action:"toggle-monitoring"},{type:"separator",label:""},{label:"Command Palette...",shortcut:`${x}${l}P`,action:"command-palette"},{label:"Quick Open...",shortcut:`${l}P`,action:"quick-open"},{label:"Toggle Terminal",shortcut:"Ctrl+`",action:"toggle-terminal"}],Encoding:[...dn().flatMap(I=>[{type:"separator",label:` ${I.group} `},...I.items.map(L=>({label:L.label,action:"encoding",value:L.value}))]),{type:"separator",label:""},{label:"Line Ending: LF (Unix/Mac)",action:"line-ending",value:"LF"},{label:"Line Ending: CRLF (Windows)",action:"line-ending",value:"CRLF"},{label:"Line Ending: CR (Old Mac)",action:"line-ending",value:"CR"}],Language:j,"Line Ops":[{label:"Sort Lines Ascending",action:"sort-asc"},{label:"Sort Lines Descending",action:"sort-desc"},{label:"Sort Lines Case Insensitive (Asc)",action:"sort-asc-ci"},{label:"Sort Lines Case Insensitive (Desc)",action:"sort-desc-ci"},{label:"Sort Lines by Length (Asc)",action:"sort-len-asc"},{label:"Sort Lines by Length (Desc)",action:"sort-len-desc"},{type:"separator",label:""},{label:"Remove Duplicate Lines",action:"remove-duplicates"},{label:"Remove Consecutive Duplicate Lines",action:"remove-consecutive-duplicates"},{label:"Remove Empty Lines",action:"remove-empty-lines"},{label:"Remove Empty Lines (Containing Blank)",action:"remove-blank-lines"},{type:"separator",label:""},{label:"Trim Trailing Spaces",action:"trim-trailing"},{label:"Trim Leading Spaces",action:"trim-leading"},{label:"Trim Leading and Trailing Spaces",action:"trim-both"},{label:"EOL to Space",action:"eol-to-space"},{type:"separator",label:""},{label:"TAB to Space",action:"tab-to-space"},{label:"Space to TAB (Leading)",action:"space-to-tab-leading"},{label:"Space to TAB (All)",action:"space-to-tab-all"},{type:"separator",label:""},{label:"Insert Blank Line Above",action:"insert-blank-above"},{label:"Insert Blank Line Below",action:"insert-blank-below"},{label:"Reverse Line Order",action:"reverse-lines"}],Macro:[{label:m?"Stop Recording":"Start Recording",shortcut:`${x}${l}R`,action:m?"macro-stop":"macro-start"},{label:"Playback",shortcut:`${x}${l}P`,action:"macro-playback"},{type:"separator",label:""},{label:"Run Macro Multiple Times...",action:"macro-run-multiple"},{label:"Save Recorded Macro...",action:"macro-save"}],Git:[{label:"Source Control Panel",action:"show-git-panel"},{type:"separator",label:""},{label:"Clone Repository...",action:"clone-repository"},{type:"separator",label:""},{label:"Compare with HEAD",action:"compare-files"},{type:"separator",label:""},{label:"Git Settings...",action:"git-settings"}],Run:[{label:"Run Command...",action:"run-command"},{type:"separator",label:""},{label:"Search on Google",action:"search-google"},{label:"Search on Wikipedia",action:"search-wikipedia"},{label:"Open in Browser",action:"open-in-browser"}],Tools:[{label:"MD5 - Generate",action:"hash-md5"},{label:"MD5 - Copy to Clipboard",action:"hash-md5-clipboard"},{label:"SHA-1 - Generate",action:"hash-sha1"},{label:"SHA-1 - Copy to Clipboard",action:"hash-sha1-clipboard"},{label:"SHA-256 - Generate",action:"hash-sha256"},{label:"SHA-256 - Copy to Clipboard",action:"hash-sha256-clipboard"},{label:"SHA-512 - Generate",action:"hash-sha512"},{label:"SHA-512 - Copy to Clipboard",action:"hash-sha512-clipboard"},{type:"separator",label:""},{label:"MD5 - Generate from File",action:"hash-md5-file"},{label:"SHA-256 - Generate from File",action:"hash-sha256-file"},{type:"separator",label:""},{label:"Base64 Encode",action:"base64-encode"},{label:"Base64 Decode",action:"base64-decode"},{type:"separator",label:""},{label:"URL Encode",action:"url-encode"},{label:"URL Decode",action:"url-decode"},{type:"separator",label:""},{label:"JSON Format",action:"json-format"},{label:"JSON Minify",action:"json-minify"}],AI:[{label:"AI Chat Panel",shortcut:"Ctrl+Shift+A",action:"ai-chat"},{type:"separator",label:""},{label:"Explain Code",shortcut:"Ctrl+Shift+E",action:"ai-explain"},{label:"Refactor Code",shortcut:"Ctrl+Shift+R",action:"ai-refactor"},{label:"Generate Tests",action:"ai-generate-tests"},{label:"Generate Documentation",action:"ai-generate-docs"},{label:"Fix Error",action:"ai-fix-error"},{label:"Simplify Code",action:"ai-simplify"},{type:"separator",label:""},{label:"Toggle Inline Completions",action:"ai-toggle-inline"},{type:"separator",label:""},{label:"AI Settings...",action:"ai-settings"}],Settings:[{label:"Preferences...",shortcut:`${l},`,action:"preferences"},{label:"Shortcut Mapper...",action:"shortcut-mapper"},{type:"separator",label:""},{label:"About Notemac++",action:"about"}]},B=I=>{I.type!=="separator"&&(I.label.startsWith("")||(I.type==="checkbox"?n(I.action,!I.checked):I.action&&n(I.action,I.value),o(null),f(null)))};return i.jsxs("div",{ref:b,style:{display:"flex",alignItems:"center",height:30,backgroundColor:e.menuBg,borderBottom:`1px solid ${e.border}`,paddingLeft:8,flexShrink:0},children:[i.jsx("span",{style:{fontWeight:600,fontSize:13,marginRight:16,color:e.accent},children:"N++"}),Object.entries(R).map(([I,L])=>i.jsxs("div",{style:{position:"relative"},children:[i.jsx("div",{style:{padding:"4px 10px",cursor:"pointer",borderRadius:4,fontSize:13,backgroundColor:r===I?e.bgHover:"transparent",color:r===I?e.text:e.menuText},onClick:()=>o(r===I?null:I),onMouseEnter:()=>r&&o(I),children:I}),r===I&&i.jsx("div",{style:{position:"absolute",top:"100%",left:0,minWidth:280,maxHeight:"calc(100vh - 80px)",overflowY:"auto",backgroundColor:e.menuBg,border:`1px solid ${e.border}`,borderRadius:6,padding:"4px 0",zIndex:1e4,boxShadow:"0 4px 16px rgba(0,0,0,0.3)"},children:L.map((w,M)=>{if(w.type==="separator")return w.label&&w.label.startsWith("")?i.jsx("div",{style:{padding:"4px 16px",fontSize:11,fontWeight:700,color:e.textMuted,textTransform:"uppercase",letterSpacing:.5,cursor:"default"},children:w.label.replace(/\u2500 /g,"").replace(/ \u2500/g,"")},M):i.jsx("div",{style:{height:1,backgroundColor:e.border,margin:"4px 0"}},M);const p=`${I}-${w.label}-${M}`;return i.jsxs("div",{style:{padding:"5px 16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,fontSize:13,backgroundColor:a===p?e.bgHover:"transparent",color:e.menuText},onClick:()=>B(w),onMouseEnter:()=>s(p),onMouseLeave:()=>s(null),children:[i.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[w.type==="checkbox"&&i.jsx("span",{style:{width:16,textAlign:"center"},children:w.checked?"":""}),w.label]}),w.shortcut&&i.jsx("span",{style:{opacity:.5,fontSize:11},children:w.shortcut})]},M)})})]},I)),m&&i.jsxs("div",{className:"recording-indicator",style:{display:"flex",alignItems:"center",gap:6,marginLeft:"auto",marginRight:12,color:"#ff4444",fontSize:12,fontWeight:600},children:[i.jsx("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:"#ff4444",display:"inline-block"}}),"REC"]})]})}const X={newFile:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M9 1H4a1 1 0 00-1 1v12a1 1 0 001 1h8a1 1 0 001-1V5L9 1z"}),i.jsx("path",{d:"M9 1v4h4"}),i.jsx("path",{d:"M8 8v4M6 10h4"})]}),open:e=>i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M2 13V4a1 1 0 011-1h3.5l1.5 1.5H13a1 1 0 011 1V13a1 1 0 01-1 1H3a1 1 0 01-1-1z"})}),save:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M13 14H3a1 1 0 01-1-1V3a1 1 0 011-1h7l3 3v8a1 1 0 01-1 1z"}),i.jsx("path",{d:"M11 14V9H5v5"}),i.jsx("path",{d:"M5 2v3h5"})]}),saveAll:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 14H4a1 1 0 01-1-1V4a1 1 0 011-1h5.5l2.5 2.5V13a1 1 0 01-1 1z"}),i.jsx("path",{d:"M10 14V10H6v4"}),i.jsx("path",{d:"M6 3v2h3.5"}),i.jsx("path",{d:"M14 5v7.5",opacity:"0.5"}),i.jsx("path",{d:"M5 2H14.5",opacity:"0.5"})]}),undo:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 7h6a3.5 3.5 0 010 7H7"}),i.jsx("path",{d:"M6 4L3 7l3 3"})]}),redo:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M13 7H7a3.5 3.5 0 000 7h2"}),i.jsx("path",{d:"M10 4l3 3-3 3"})]}),find:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"7",cy:"7",r:"4"}),i.jsx("path",{d:"M14 14l-3.5-3.5"})]}),replace:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"5.5",cy:"5.5",r:"3"}),i.jsx("path",{d:"M14 14l-2.8-2.8"}),i.jsx("path",{d:"M10 7l2-2 2 2"}),i.jsx("path",{d:"M12 5v5.5a1.5 1.5 0 01-3 0"})]}),zoomIn:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"7",cy:"7",r:"4"}),i.jsx("path",{d:"M14 14l-3.5-3.5"}),i.jsx("path",{d:"M7 5v4M5 7h4"})]}),zoomOut:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"7",cy:"7",r:"4"}),i.jsx("path",{d:"M14 14l-3.5-3.5"}),i.jsx("path",{d:"M5 7h4"})]}),record:e=>i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:i.jsx("circle",{cx:"8",cy:"8",r:"5",fill:e})}),stop:e=>i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:i.jsx("rect",{x:"4",y:"4",width:"8",height:"8",rx:"1",fill:e})}),play:e=>i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:e,children:i.jsx("polygon",{points:"5,3 13,8 5,13"})}),sidebar:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"2",y:"2",width:"12",height:"12",rx:"1"}),i.jsx("path",{d:"M6 2v12"})]}),wordWrap:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 4h10M3 8h8a2 2 0 010 4H8"}),i.jsx("path",{d:"M10 10l-2 2 2 2"})]}),whitespace:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 12h10"}),i.jsx("circle",{cx:"5",cy:"7",r:"0.8",fill:e}),i.jsx("circle",{cx:"8",cy:"7",r:"0.8",fill:e}),i.jsx("circle",{cx:"11",cy:"7",r:"0.8",fill:e})]}),settings:e=>i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:e,strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"8",cy:"8",r:"2"}),i.jsx("path",{d:"M8 1.5v2M8 12.5v2M1.5 8h2M12.5 8h2M3.4 3.4l1.4 1.4M11.2 11.2l1.4 1.4M3.4 12.6l1.4-1.4M11.2 4.8l1.4-1.4"})]})};function Q({icon:e,title:n,onClick:t,theme:r,active:o,danger:a}){const[s,d]=J.useState(!1);return i.jsx("button",{title:n,onClick:t,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{background:s?r.bgHover:o?r.bgActive:"transparent",border:"none",color:a?r.danger:o?r.accent:r.textSecondary,cursor:"pointer",padding:"4px 6px",borderRadius:4,fontSize:16,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",minWidth:28,height:28},children:e})}function Ee({theme:e}){return i.jsx("div",{style:{width:1,height:20,backgroundColor:e.border,margin:"0 4px"}})}function aa({theme:e,onAction:n}){const{isRecordingMacro:t,settings:r}=A(),o=e.textSecondary,a=e.danger||"#e53e3e";return i.jsxs("div",{style:{display:"flex",alignItems:"center",height:36,backgroundColor:e.bgSecondary,borderBottom:`1px solid ${e.border}`,padding:"0 8px",gap:2,flexShrink:0},children:[i.jsx(Q,{icon:X.newFile(o),title:"New (Cmd+N)",onClick:()=>n("new"),theme:e}),i.jsx(Q,{icon:X.open(o),title:"Open (Cmd+O)",onClick:()=>n("open"),theme:e}),i.jsx(Q,{icon:X.save(o),title:"Save (Cmd+S)",onClick:()=>n("save"),theme:e}),i.jsx(Q,{icon:X.saveAll(o),title:"Save All",onClick:()=>n("save-all"),theme:e}),i.jsx(Ee,{theme:e}),i.jsx(Q,{icon:X.undo(o),title:"Undo (Cmd+Z)",onClick:()=>n("undo"),theme:e}),i.jsx(Q,{icon:X.redo(o),title:"Redo (Cmd+Shift+Z)",onClick:()=>n("redo"),theme:e}),i.jsx(Ee,{theme:e}),i.jsx(Q,{icon:X.find(o),title:"Find (Cmd+F)",onClick:()=>n("find"),theme:e}),i.jsx(Q,{icon:X.replace(o),title:"Replace (Cmd+H)",onClick:()=>n("replace"),theme:e}),i.jsx(Ee,{theme:e}),i.jsx(Q,{icon:X.zoomIn(o),title:"Zoom In (Cmd++)",onClick:()=>n("zoom-in"),theme:e}),i.jsx(Q,{icon:X.zoomOut(o),title:"Zoom Out (Cmd+-)",onClick:()=>n("zoom-out"),theme:e}),i.jsx(Ee,{theme:e}),i.jsx(Q,{icon:t?X.stop(a):X.record(o),title:t?"Stop Recording":"Start Recording",onClick:()=>n(t?"macro-stop":"macro-start"),theme:e,danger:t}),i.jsx(Q,{icon:X.play(o),title:"Playback Macro",onClick:()=>n("macro-playback"),theme:e}),i.jsx(Ee,{theme:e}),i.jsx(Q,{icon:X.sidebar(o),title:"Toggle Sidebar (Cmd+B)",onClick:()=>n("toggle-sidebar"),theme:e}),i.jsx(Q,{icon:X.wordWrap(o),title:"Word Wrap",onClick:()=>n("word-wrap",!r.wordWrap),theme:e}),i.jsx(Q,{icon:X.whitespace(o),title:"Show Whitespace",onClick:()=>n("show-whitespace",!r.showWhitespace),theme:e}),i.jsx("div",{style:{flex:1}}),i.jsx(Q,{icon:X.settings(o),title:"Settings (Cmd+,)",onClick:()=>n("preferences"),theme:e})]})}function ia({theme:e}){const{tabs:n,activeTabId:t,setActiveTab:r,closeTab:o,addTab:a,closeOtherTabs:s,closeAllTabs:d,moveTab:f,setSplitView:b,closeTabsToLeft:u,closeTabsToRight:m,closeUnchangedTabs:T,closeAllButPinned:l,togglePinTab:x,setTabColor:_}=A(),[C,j]=y.useState(null),[R,B]=y.useState(null),[I,L]=y.useState(null),[w,M]=y.useState(!1),p=v=>{j(v)},S=(v,k)=>{v.preventDefault(),B(k)},h=v=>{C!==null&&C!==v&&f(C,v),j(null),B(null)},O=(v,k)=>{v.preventDefault(),L({x:v.clientX,y:v.clientY,tabId:k}),M(!1)},D=(v,k)=>{v.button===1&&(v.preventDefault(),o(k))};J.useEffect(()=>{const v=()=>{L(null),M(!1)};if(I)return document.addEventListener("click",v),()=>document.removeEventListener("click",v)},[I]);const F=I?n.find(v=>v.id===I.tabId):null;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"flex-end",backgroundColor:e.tabBg,borderBottom:`1px solid ${e.border}`,overflowX:"auto",overflowY:"hidden",scrollbarWidth:"thin",flexShrink:0,height:ft},children:[n.map((v,k)=>{const g=v.id===t,z=Xt[v.tabColor];return i.jsxs("div",{draggable:!0,onDragStart:()=>p(k),onDragOver:N=>S(N,k),onDrop:()=>h(k),onDragEnd:()=>{j(null),B(null)},onClick:()=>r(v.id),onMouseDown:N=>D(N,v.id),onContextMenu:N=>O(N,v.id),style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",cursor:"pointer",backgroundColor:g?e.tabActiveBg:e.tabBg,color:g?e.tabActiveText:e.textSecondary,borderRight:`1px solid ${e.tabBorder}`,borderTop:v.tabColor!=="none"?`3px solid ${z}`:g?`2px solid ${e.accent}`:"2px solid transparent",borderBottom:g?"none":`1px solid ${e.border}`,minWidth:ro,maxWidth:oo,height:ft,position:"relative",opacity:C===k?.5:1,borderLeft:R===k?`2px solid ${e.accent}`:"none",fontSize:13,whiteSpace:"nowrap",flexShrink:0},children:[i.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",flex:1,display:"flex",alignItems:"center",gap:4},children:[v.isPinned&&i.jsx("span",{style:{fontSize:10,opacity:.7},title:"Pinned",children:""}),v.isModified&&i.jsx("span",{style:{color:e.warning},children:""}),v.isReadOnly&&i.jsx("span",{style:{fontSize:10,opacity:.7},title:"Read Only",children:""}),v.name]}),!v.isPinned&&i.jsx("span",{onClick:N=>{N.stopPropagation(),o(v.id)},style:{width:tn,height:tn,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,fontSize:14,opacity:.5,flexShrink:0},onMouseEnter:N=>{N.target.style.opacity="1",N.target.style.backgroundColor=e.bgHover},onMouseLeave:N=>{N.target.style.opacity="0.5",N.target.style.backgroundColor="transparent"},children:""})]},v.id)}),i.jsx("div",{onClick:()=>a(),style:{display:"flex",alignItems:"center",justifyContent:"center",width:ao,height:ft,cursor:"pointer",color:e.textMuted,fontSize:18,flexShrink:0},onMouseEnter:v=>{v.target.style.color=e.text},onMouseLeave:v=>{v.target.style.color=e.textMuted},children:"+"})]}),I&&i.jsxs("div",{className:"context-menu",style:{left:I.x,top:I.y,backgroundColor:e.menuBg,border:`1px solid ${e.border}`,position:"fixed",zIndex:2e4,borderRadius:6,padding:"4px 0",minWidth:200,boxShadow:"0 4px 16px rgba(0,0,0,0.3)"},children:[[{label:"Close",action:()=>o(I.tabId)},{label:"Close Others",action:()=>s(I.tabId)},{label:"Close Tabs to the Left",action:()=>u(I.tabId)},{label:"Close Tabs to the Right",action:()=>m(I.tabId)},{label:"Close All",action:()=>d()},{label:"Close Unchanged",action:()=>T()},{label:"Close All but Pinned",action:()=>l()},{label:"separator"},{label:F!=null&&F.isPinned?"Unpin Tab":"Pin Tab",action:()=>x(I.tabId)},{label:"separator"},{label:"Tab Color",action:()=>M(!w)},{label:"separator"},{label:"Clone to Split View",action:()=>b("vertical",I.tabId)}].map((v,k)=>v.label==="separator"?i.jsx("div",{style:{height:1,backgroundColor:e.border,margin:"4px 0"}},k):i.jsx("div",{style:{padding:"5px 16px",cursor:"pointer",fontSize:13,color:e.menuText},onClick:g=>{g.stopPropagation(),v.action(),v.label!=="Tab Color"&&L(null)},onMouseEnter:g=>{g.target.style.backgroundColor=e.bgHover},onMouseLeave:g=>{g.target.style.backgroundColor="transparent"},children:v.label},k)),w&&i.jsx("div",{style:{display:"flex",gap:4,padding:"4px 16px 8px"},children:["none","color1","color2","color3","color4","color5"].map(v=>i.jsx("div",{onClick:k=>{k.stopPropagation(),_(I.tabId,v),L(null)},style:{width:20,height:20,borderRadius:4,backgroundColor:v==="none"?e.bgTertiary:Xt[v],border:(F==null?void 0:F.tabColor)===v?"2px solid white":`1px solid ${e.border}`,cursor:"pointer"},title:v==="none"?"No color":v},v))})]})]})}function un(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function sa(e){if(Array.isArray(e))return e}function la(e,n,t){return(n=ha(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ca(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r,o,a,s,d=[],f=!0,b=!1;try{if(a=(t=t.call(e)).next,n!==0)for(;!(f=(r=a.call(t)).done)&&(d.push(r.value),d.length!==n);f=!0);}catch(u){b=!0,o=u}finally{try{if(!f&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(b)throw o}}return d}}function da(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,r)}return t}function fn(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?pn(Object(t),!0).forEach(function(r){la(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pn(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ua(e,n){if(e==null)return{};var t,r,o=pa(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function pa(e,n){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.indexOf(r)!==-1)continue;t[r]=e[r]}return t}function fa(e,n){return sa(e)||ca(e,n)||ba(e,n)||da()}function ga(e,n){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,n);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function ha(e){var n=ga(e,"string");return typeof n=="symbol"?n:n+""}function ba(e,n){if(e){if(typeof e=="string")return un(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?un(e,n):void 0}}function ma(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function gn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,r)}return t}function hn(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?gn(Object(t),!0).forEach(function(r){ma(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gn(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ya(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(r){return n.reduceRight(function(o,a){return a(o)},r)}}function Me(e){return function n(){for(var t=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var s=arguments.length,d=new Array(s),f=0;f<s;f++)d[f]=arguments[f];return n.apply(t,[].concat(o,d))}}}function Ye(e){return{}.toString.call(e).includes("Object")}function xa(e){return!Object.keys(e).length}function Le(e){return typeof e=="function"}function Sa(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function va(e,n){return Ye(n)||ce("changeType"),Object.keys(n).some(function(t){return!Sa(e,t)})&&ce("changeField"),n}function wa(e){Le(e)||ce("selectorType")}function ka(e){Le(e)||Ye(e)||ce("handlerType"),Ye(e)&&Object.values(e).some(function(n){return!Le(n)})&&ce("handlersType")}function Ca(e){e||ce("initialIsRequired"),Ye(e)||ce("initialType"),xa(e)&&ce("initialContent")}function Ia(e,n){throw new Error(e[n]||e.default)}var Ea={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ce=Me(Ia)(Ea),He={changes:va,selector:wa,handler:ka,initial:Ca};function Ma(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};He.initial(e),He.handler(n);var t={current:e},r=Me(Aa)(t,n),o=Me(ja)(t),a=Me(He.changes)(e),s=Me(Ta)(t);function d(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return He.selector(b),b(t.current)}function f(b){ya(r,o,a,s)(b)}return[d,f]}function Ta(e,n){return Le(n)?n(e.current):n}function ja(e,n){return e.current=hn(hn({},e.current),n),n}function Aa(e,n,t){return Le(n)?n(e.current):Object.keys(t).forEach(function(r){var o;return(o=n[r])===null||o===void 0?void 0:o.call(n,e.current[r])}),t}var Ra={create:Ma},_a={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Pa(e){return function n(){for(var t=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var s=arguments.length,d=new Array(s),f=0;f<s;f++)d[f]=arguments[f];return n.apply(t,[].concat(o,d))}}}function La(e){return{}.toString.call(e).includes("Object")}function Oa(e){return e||bn("configIsRequired"),La(e)||bn("configType"),e.urls?{paths:{vs:e.urls.monacoBase}}:e}function Da(e,n){throw new Error(e[n]||e.default)}var Ba={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},bn=Pa(Da)(Ba),Fa={config:Oa},Na=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return function(o){return t.reduceRight(function(a,s){return s(a)},o)}};function $n(e,n){return Object.keys(n).forEach(function(t){n[t]instanceof Object&&e[t]&&Object.assign(n[t],$n(e[t],n[t]))}),fn(fn({},e),n)}var za={type:"cancelation",msg:"operation is manually canceled"};function bt(e){var n=!1,t=new Promise(function(r,o){e.then(function(a){return n?o(za):r(a)}),e.catch(o)});return t.cancel=function(){return n=!0},t}var $a=["monaco"],Wa=Ra.create({config:_a,isInitialized:!1,resolve:null,reject:null,monaco:null}),Wn=fa(Wa,2),De=Wn[0],nt=Wn[1];function Ha(e){var n=Fa.config(e),t=n.monaco,r=ua(n,$a);nt(function(o){return{config:$n(o.config,r),monaco:t}})}function Ga(){var e=De(function(n){var t=n.monaco,r=n.isInitialized,o=n.resolve;return{monaco:t,isInitialized:r,resolve:o}});if(!e.isInitialized){if(nt({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),bt(mt);if(window.monaco&&window.monaco.editor)return Hn(window.monaco),e.resolve(window.monaco),bt(mt);Na(Ua,Ka)(qa)}return bt(mt)}function Ua(e){return document.body.appendChild(e)}function Va(e){var n=document.createElement("script");return e&&(n.src=e),n}function Ka(e){var n=De(function(r){var o=r.config,a=r.reject;return{config:o,reject:a}}),t=Va("".concat(n.config.paths.vs,"/loader.js"));return t.onload=function(){return e()},t.onerror=n.reject,t}function qa(){var e=De(function(t){var r=t.config,o=t.resolve,a=t.reject;return{config:r,resolve:o,reject:a}}),n=window.require;n.config(e.config),n(["vs/editor/editor.main"],function(t){var r=t.m||t;Hn(r),e.resolve(r)},function(t){e.reject(t)})}function Hn(e){De().monaco||nt({monaco:e})}function Ja(){return De(function(e){var n=e.monaco;return n})}var mt=new Promise(function(e,n){return nt({resolve:e,reject:n})}),Gn={config:Ha,init:Ga,__getMonacoInstance:Ja},Ya={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},yt=Ya,Xa={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Za=Xa;function Qa({children:e}){return J.createElement("div",{style:Za.container},e)}var ei=Qa,ti=ei;function ni({width:e,height:n,isEditorReady:t,loading:r,_ref:o,className:a,wrapperProps:s}){return J.createElement("section",{style:{...yt.wrapper,width:e,height:n},...s},!t&&J.createElement(ti,null,r),J.createElement("div",{ref:o,style:{...yt.fullWidth,...!t&&yt.hide},className:a}))}var ri=ni,Un=y.memo(ri);function oi(e){y.useEffect(e,[])}var Vn=oi;function ai(e,n,t=!0){let r=y.useRef(!0);y.useEffect(r.current||!t?()=>{r.current=!1}:e,n)}var ee=ai;function je(){}function me(e,n,t,r){return ii(e,r)||si(e,n,t,r)}function ii(e,n){return e.editor.getModel(Kn(e,n))}function si(e,n,t,r){return e.editor.createModel(n,t,r?Kn(e,r):void 0)}function Kn(e,n){return e.Uri.parse(n)}function li({original:e,modified:n,language:t,originalLanguage:r,modifiedLanguage:o,originalModelPath:a,modifiedModelPath:s,keepCurrentOriginalModel:d=!1,keepCurrentModifiedModel:f=!1,theme:b="light",loading:u="Loading...",options:m={},height:T="100%",width:l="100%",className:x,wrapperProps:_={},beforeMount:C=je,onMount:j=je}){let[R,B]=y.useState(!1),[I,L]=y.useState(!0),w=y.useRef(null),M=y.useRef(null),p=y.useRef(null),S=y.useRef(j),h=y.useRef(C),O=y.useRef(!1);Vn(()=>{let k=Gn.init();return k.then(g=>(M.current=g)&&L(!1)).catch(g=>(g==null?void 0:g.type)!=="cancelation"&&void 0),()=>w.current?v():k.cancel()}),ee(()=>{if(w.current&&M.current){let k=w.current.getOriginalEditor(),g=me(M.current,e||"",r||t||"text",a||"");g!==k.getModel()&&k.setModel(g)}},[a],R),ee(()=>{if(w.current&&M.current){let k=w.current.getModifiedEditor(),g=me(M.current,n||"",o||t||"text",s||"");g!==k.getModel()&&k.setModel(g)}},[s],R),ee(()=>{let k=w.current.getModifiedEditor();k.getOption(M.current.editor.EditorOption.readOnly)?k.setValue(n||""):n!==k.getValue()&&(k.executeEdits("",[{range:k.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),k.pushUndoStop())},[n],R),ee(()=>{var k,g;(g=(k=w.current)==null?void 0:k.getModel())==null||g.original.setValue(e||"")},[e],R),ee(()=>{let{original:k,modified:g}=w.current.getModel();M.current.editor.setModelLanguage(k,r||t||"text"),M.current.editor.setModelLanguage(g,o||t||"text")},[t,r,o],R),ee(()=>{var k;(k=M.current)==null||k.editor.setTheme(b)},[b],R),ee(()=>{var k;(k=w.current)==null||k.updateOptions(m)},[m],R);let D=y.useCallback(()=>{var z;if(!M.current)return;h.current(M.current);let k=me(M.current,e||"",r||t||"text",a||""),g=me(M.current,n||"",o||t||"text",s||"");(z=w.current)==null||z.setModel({original:k,modified:g})},[t,n,o,e,r,a,s]),F=y.useCallback(()=>{var k;!O.current&&p.current&&(w.current=M.current.editor.createDiffEditor(p.current,{automaticLayout:!0,...m}),D(),(k=M.current)==null||k.editor.setTheme(b),B(!0),O.current=!0)},[m,b,D]);y.useEffect(()=>{R&&S.current(w.current,M.current)},[R]),y.useEffect(()=>{!I&&!R&&F()},[I,R,F]);function v(){var g,z,N,V;let k=(g=w.current)==null?void 0:g.getModel();d||((z=k==null?void 0:k.original)==null||z.dispose()),f||((N=k==null?void 0:k.modified)==null||N.dispose()),(V=w.current)==null||V.dispose()}return J.createElement(Un,{width:l,height:T,isEditorReady:R,loading:u,_ref:p,className:x,wrapperProps:_})}var ci=li,_s=y.memo(ci);function di(e){let n=y.useRef();return y.useEffect(()=>{n.current=e},[e]),n.current}var ui=di,Ge=new Map;function pi({defaultValue:e,defaultLanguage:n,defaultPath:t,value:r,language:o,path:a,theme:s="light",line:d,loading:f="Loading...",options:b={},overrideServices:u={},saveViewState:m=!0,keepCurrentModel:T=!1,width:l="100%",height:x="100%",className:_,wrapperProps:C={},beforeMount:j=je,onMount:R=je,onChange:B,onValidate:I=je}){let[L,w]=y.useState(!1),[M,p]=y.useState(!0),S=y.useRef(null),h=y.useRef(null),O=y.useRef(null),D=y.useRef(R),F=y.useRef(j),v=y.useRef(),k=y.useRef(r),g=ui(a),z=y.useRef(!1),N=y.useRef(!1);Vn(()=>{let H=Gn.init();return H.then(G=>(S.current=G)&&p(!1)).catch(G=>(G==null?void 0:G.type)!=="cancelation"&&void 0),()=>h.current?q():H.cancel()}),ee(()=>{var G,c,E,P;let H=me(S.current,e||r||"",n||o||"",a||t||"");H!==((G=h.current)==null?void 0:G.getModel())&&(m&&Ge.set(g,(c=h.current)==null?void 0:c.saveViewState()),(E=h.current)==null||E.setModel(H),m&&((P=h.current)==null||P.restoreViewState(Ge.get(a))))},[a],L),ee(()=>{var H;(H=h.current)==null||H.updateOptions(b)},[b],L),ee(()=>{!h.current||r===void 0||(h.current.getOption(S.current.editor.EditorOption.readOnly)?h.current.setValue(r):r!==h.current.getValue()&&(N.current=!0,h.current.executeEdits("",[{range:h.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),h.current.pushUndoStop(),N.current=!1))},[r],L),ee(()=>{var G,c;let H=(G=h.current)==null?void 0:G.getModel();H&&o&&((c=S.current)==null||c.editor.setModelLanguage(H,o))},[o],L),ee(()=>{var H;d!==void 0&&((H=h.current)==null||H.revealLine(d))},[d],L),ee(()=>{var H;(H=S.current)==null||H.editor.setTheme(s)},[s],L);let V=y.useCallback(()=>{var H;if(!(!O.current||!S.current)&&!z.current){F.current(S.current);let G=a||t,c=me(S.current,r||e||"",n||o||"",G||"");h.current=(H=S.current)==null?void 0:H.editor.create(O.current,{model:c,automaticLayout:!0,...b},u),m&&h.current.restoreViewState(Ge.get(G)),S.current.editor.setTheme(s),d!==void 0&&h.current.revealLine(d),w(!0),z.current=!0}},[e,n,t,r,o,a,b,u,m,s,d]);y.useEffect(()=>{L&&D.current(h.current,S.current)},[L]),y.useEffect(()=>{!M&&!L&&V()},[M,L,V]),k.current=r,y.useEffect(()=>{var H,G;L&&B&&((H=v.current)==null||H.dispose(),v.current=(G=h.current)==null?void 0:G.onDidChangeModelContent(c=>{N.current||B(h.current.getValue(),c)}))},[L,B]),y.useEffect(()=>{if(L){let H=S.current.editor.onDidChangeMarkers(G=>{var E;let c=(E=h.current.getModel())==null?void 0:E.uri;if(c&&G.find(P=>P.path===c.path)){let P=S.current.editor.getModelMarkers({resource:c});I==null||I(P)}});return()=>{H==null||H.dispose()}}return()=>{}},[L,I]);function q(){var H,G;(H=v.current)==null||H.dispose(),T?m&&Ge.set(a,h.current.saveViewState()):(G=h.current.getModel())==null||G.dispose(),h.current.dispose()}return J.createElement(Un,{width:l,height:x,isEditorReady:L,loading:f,_ref:O,className:_,wrapperProps:C})}var fi=pi,gi=y.memo(fi),hi=gi;function bi(e){const{savedSnippets:n}=A.getState();return n.filter(t=>t.language==="*"||t.language===e)}function mi(e,n){if(!e)return;const t=e.getContribution("snippetController2");if(t)t.insert(n);else{const r=n.replace(/\$\{?\d+(?::([^}]*))?\}?/g,"$1").replace(/\$0/g,""),o=e.getSelection();o&&e.executeEdits("snippet",[{range:o,text:r,forceMoveMarkers:!0}])}}function yi(e){return e.languages.registerCompletionItemProvider("*",{provideCompletionItems:(n,t)=>{const r=n.getLanguageId(),o=bi(r);if(o.length===0)return{suggestions:[]};const a=n.getWordUntilPosition(t),s={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:a.startColumn,endColumn:a.endColumn};return{suggestions:o.map(f=>({label:f.prefix,kind:e.languages.CompletionItemKind.Snippet,documentation:f.description||f.name,insertText:f.body,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:`Snippet: ${f.name}`,range:s}))}}})}function qn(){return A.getState()}let ye=null;function Jn(e,n,t){return{model:n,messages:e,temperature:t.temperature??.7,max_tokens:t.maxTokens??4096,stream:t.stream??!0}}function Yn(e,n,t){const r=[],o=[];for(let a=0,s=e.length;a<s;a++)e[a].role==="system"?r.push(e[a].content):o.push(e[a]);return{model:n,system:0<r.length?r.join(`
`):void 0,messages:o.map(a=>({role:a.role,content:a.content})),max_tokens:t.maxTokens??4096,temperature:t.temperature??.7,stream:t.stream??!0}}function Xn(e,n){const t=e.filter(o=>o.role!=="system").map(o=>({role:o.role==="assistant"?"model":"user",parts:[{text:o.content}]})),r=e.find(o=>o.role==="system");return{contents:t,systemInstruction:r?{parts:[{text:r.content}]}:void 0,generationConfig:{temperature:n.temperature??.7,maxOutputTokens:n.maxTokens??4096}}}function Zn(e,n,t){if(e.type==="anthropic")return`${e.baseUrl}/v1/messages`;if(e.type==="google"){const r=t?"?alt=sse":"";return`${e.baseUrl}/v1beta/models/${n}:${t?"streamGenerateContent":"generateContent"}${r}`}return`${e.baseUrl}/v1/chat/completions`}function Qn(e,n){const t={"Content-Type":"application/json"};return e.type==="anthropic"?(t["x-api-key"]=n.apiKey,t["anthropic-version"]="2023-06-01",t["anthropic-dangerous-direct-browser-access"]="true"):e.type==="google"?t["x-goog-api-key"]=n.apiKey:t.Authorization=`Bearer ${n.apiKey}`,t}function xi(e){var t,r,o;if(!e.startsWith("data: "))return null;const n=e.slice(6).trim();if(n==="[DONE]")return null;try{return((o=(r=(t=JSON.parse(n).choices)==null?void 0:t[0])==null?void 0:r.delta)==null?void 0:o.content)||null}catch{return null}}function Si(e){var t;if(!e.startsWith("data: "))return null;const n=e.slice(6).trim();try{const r=JSON.parse(n);return r.type==="content_block_delta"&&((t=r.delta)==null?void 0:t.text)||null}catch{return null}}function vi(e){var t,r,o,a,s;if(!e.startsWith("data: "))return null;const n=e.slice(6).trim();try{return((s=(a=(o=(r=(t=JSON.parse(n).candidates)==null?void 0:t[0])==null?void 0:r.content)==null?void 0:o.parts)==null?void 0:a[0])==null?void 0:s.text)||null}catch{return null}}function mn(e,n){return e==="anthropic"?Si(n):e==="google"?vi(n):xi(n)}async function pe(e,n={},t,r,o){var _,C,j,R,B,I,L,w,M,p,S;const a=qn(),s=a.GetActiveProvider();if(s===null){const h="No active AI provider configured";throw o==null||o(h),new Error(h)}const d=a.GetCredentialForProvider(s.id);if(d===null){const h=`No API key configured for ${s.name}`;throw o==null||o(h),new Error(h)}const f=a.activeModelId,b=n.stream!==!1,u=[...e];n.systemPrompt&&!u.some(h=>h.role==="system")&&u.unshift({role:"system",content:n.systemPrompt});const m=a.aiSettings.systemPrompt;m&&!u.some(h=>h.role==="system")&&u.unshift({role:"system",content:m});let T;s.type==="anthropic"?T=Yn(u,f,{...n,stream:b}):s.type==="google"?T=Xn(u,{...n}):T=Jn(u,f,{...n,stream:b});const l=Zn(s,f,b),x=Qn(s,d);Ci(),ye=new AbortController;try{const h=await fetch(l,{method:"POST",headers:x,body:JSON.stringify(T),signal:ye.signal});if(!h.ok){const O=await h.text();let D=`API error ${h.status}`;try{const F=JSON.parse(O);D=((_=F.error)==null?void 0:_.message)||F.message||D}catch{}throw o==null||o(D),new Error(D)}if(b&&h.body)return await wi(h.body,s.type,t,r);{const O=await h.json();let D="";return s.type==="anthropic"?D=((j=(C=O.content)==null?void 0:C[0])==null?void 0:j.text)||"":s.type==="google"?D=((w=(L=(I=(B=(R=O.candidates)==null?void 0:R[0])==null?void 0:B.content)==null?void 0:I.parts)==null?void 0:L[0])==null?void 0:w.text)||"":D=((S=(p=(M=O.choices)==null?void 0:M[0])==null?void 0:p.message)==null?void 0:S.content)||"",r==null||r(D),D}}catch(h){if(h.name==="AbortError")return r==null||r(""),"";throw o==null||o(h.message),h}finally{ye=null}}async function wi(e,n,t,r){const o=e.getReader(),a=new TextDecoder;let s="",d="";try{for(;;){const{done:f,value:b}=await o.read();if(f)break;d+=a.decode(b,{stream:!0});const u=d.split(`
`);d=u.pop()||"";const m=u.length;for(let T=0;T<m;T++){const l=u[T].trim();if(l.length===0)continue;const x=mn(n,l);x!==null&&0<x.length&&(s+=x,t==null||t(x))}}if(0<d.trim().length){const f=mn(n,d.trim());f!==null&&0<f.length&&(s+=f,t==null||t(f))}}finally{o.releaseLock()}return r==null||r(s),s}async function ki(e,n,t,r,o){const s=qn().aiSettings,d=`You are an intelligent code completion assistant. Complete the code at the cursor position. Only output the completion text, no explanations, no markdown, no code fences. The code is in ${t}.`,f=`Complete the code at [CURSOR]:

${e}[CURSOR]${n}

Output ONLY the completion text that goes at [CURSOR]. No explanations.`;return pe([{role:"system",content:d},{role:"user",content:f}],{temperature:s.codeTemperature,maxTokens:s.inlineMaxTokens,stream:!1},void 0,r,o)}function Ci(){ye!==null&&(ye.abort(),ye=null)}async function Ps(e,n){var t;try{const r=0<e.models.length?e.models[0].id:"",o=Zn(e,r,!1),a=Qn(e,n);let s;const d=[{role:"user",content:'Say "ok".'}];e.type==="anthropic"?s=Yn(d,r,{maxTokens:10,stream:!1}):e.type==="google"?s=Xn(d,{maxTokens:10}):s=Jn(d,r,{maxTokens:10,stream:!1});const f=await fetch(o,{method:"POST",headers:a,body:JSON.stringify(s)});if(f.ok)return{success:!0};const b=await f.text();let u=`HTTP ${f.status}`;try{const m=JSON.parse(b);u=((t=m.error)==null?void 0:t.message)||m.message||u}catch{}return{success:!1,error:u}}catch(r){return{success:!1,error:r.message}}}function Ii(e){if(e.length===0)return"";const n=[],t=e.length;for(let r=0;r<t;r++){const o=e[r];o.type==="file"?n.push(`--- File: ${o.label} (${o.language||"unknown"}) ---
${o.content}`):o.type==="selection"?n.push(`--- Selected code (${o.language||"unknown"}) ---
${o.content}`):o.type==="error"?n.push(`--- Error ---
${o.content}`):o.type==="diff"&&n.push(`--- Diff ---
${o.content}`)}return n.join(`

`)}function we(e){const n=[],t=/```(\w*)\n([\s\S]*?)```/g;let r;for(;(r=t.exec(e))!==null;)n.push({language:r[1]||"text",code:r[2].trim()});return n}let le=null,xt=0;function Ei(e,n){const t=[];return t.push(e.languages.registerCompletionItemProvider("*",{provideCompletionItems:(r,o)=>{const{tabs:a}=A.getState(),s=r.getValue(),d=r.getWordUntilPosition(o),f={startLineNumber:o.lineNumber,endLineNumber:o.lineNumber,startColumn:d.startColumn,endColumn:d.endColumn},b=new Set,u=/\b[a-zA-Z_$][a-zA-Z0-9_$]{2,}\b/g,m=a.length;for(let l=0;l<m;l++){const x=a[l].content;if(x===s)continue;let _;for(u.lastIndex=0;(_=u.exec(x))!==null;)b.add(_[0])}return d.word&&b.delete(d.word),{suggestions:Array.from(b).map(l=>({label:l,kind:e.languages.CompletionItemKind.Text,detail:"from other tabs",insertText:l,range:f,sortText:"~"+l}))}}})),t.push(yi(e)),t.push(e.languages.registerCompletionItemProvider("*",{triggerCharacters:["/"],provideCompletionItems:(r,o)=>{if(!r.getLineContent(o.lineNumber).substring(0,o.column-1).match(/['".]\/[^'"]*$/))return{suggestions:[]};const{tabs:d,fileTree:f}=A.getState(),b=r.getWordUntilPosition(o),u={startLineNumber:o.lineNumber,endLineNumber:o.lineNumber,startColumn:b.startColumn,endColumn:b.endColumn},m=d.map(T=>({label:T.name,kind:e.languages.CompletionItemKind.File,detail:T.path||"open tab",insertText:T.name,range:u}));if(f){const T=(l,x)=>{for(const _ of l)m.push({label:x+_.name,kind:_.isDirectory?e.languages.CompletionItemKind.Folder:e.languages.CompletionItemKind.File,detail:_.path,insertText:_.name,range:u}),_.children&&T(_.children,x+_.name+"/")};T(f,"")}return{suggestions:m}}})),t.push(Mi(e)),t}function Mi(e,n){return e.languages.registerInlineCompletionsProvider("*",{provideInlineCompletions:async(r,o,a,s)=>{const d=A.getState();if(!d.aiEnabled||!d.inlineSuggestionEnabled)return{items:[]};if(!d.aiSettings.inlineCompletionEnabled)return{items:[]};const f=d.GetActiveProvider();if(f===null)return{items:[]};const b=d.GetCredentialForProvider(f.id);if(b===null||b.apiKey.length===0)return{items:[]};le!==null&&(clearTimeout(le),le=null);const u=++xt,m=d.aiSettings.inlineDebounceMs||On;if(!await new Promise(w=>{le=setTimeout(()=>{le=null,w(u===xt)},m),s.onCancellationRequested(()=>{le!==null&&(clearTimeout(le),le=null),w(!1)})}))return{items:[]};const l=2e3,x=r.getOffsetAt(o),_=r.getValue(),C=_.substring(0,x),j=_.substring(x),R=C.length>l?C.substring(C.length-l):C,B=j.length>l?j.substring(0,l):j;if(R.trimEnd().length<5)return{items:[]};const L=r.getLanguageId()||"plaintext";try{const w=await ki(R,B,L);if(u!==xt)return{items:[]};if(w.length===0)return{items:[]};let M=w.trim();if(M.startsWith("```")){const p=M.split(`
`);p.shift(),0<p.length&&p[p.length-1].startsWith("```")&&p.pop(),M=p.join(`
`)}return M.length===0?{items:[]}:{items:[{insertText:M,range:new e.Range(o.lineNumber,o.column,o.lineNumber,o.column)}]}}catch{return{items:[]}}},freeInlineCompletions:()=>{}})}const xe=new Map;function Ti(e,n){xe.has(e)||xe.set(e,new Set),xe.get(e).add(n)}function ji(e,n){const t=xe.get(e);t&&(t.delete(n),t.size===0&&xe.delete(e))}function St(e,n){const t=xe.get(e);t&&t.forEach(r=>r(n))}const Ae={FIND:"notemac-find",REPLACE:"notemac-replace",MARK:"notemac-mark",GOTO_LINE:"notemac-goto-line",COLUMN_EDIT:"notemac-column-edit",CLEAR_MARKS:"notemac-clear-marks",EDITOR_ACTION:"notemac-editor-action",INSERT_SNIPPET:"notemac-insert-snippet",EXECUTE_COMMAND:"notemac-execute-command",GIT_STATUS_CHANGED:"notemac-git-status-changed",GIT_BRANCH_CHANGED:"notemac-git-branch-changed",GIT_OPERATION_COMPLETE:"notemac-git-operation-complete",AI_RESPONSE_COMPLETE:"notemac-ai-response-complete",AI_STREAM_CHUNK:"notemac-ai-stream-chunk",AI_INLINE_SUGGESTION:"notemac-ai-inline-suggestion",AI_ERROR:"notemac-ai-error",AI_ACTION:"notemac-ai-action"};function se(){return A.getState()}function Ai(e){return{id:ue(),role:"user",content:e,timestamp:Date.now(),codeBlocks:[]}}function yn(e=""){const n=we(e);return{id:ue(),role:"assistant",content:e,timestamp:Date.now(),codeBlocks:n.map(t=>({language:t.language,code:t.code,action:"replace"}))}}function Ri(e){const n=se();return{id:ue(),title:e,messages:[],modelId:n.activeModelId,providerId:n.activeProviderId,createdAt:Date.now()}}async function _i(e){const n=se();let t=n.activeConversationId;if(t===null){const u=e.length>50?e.substring(0,50)+"...":e,m=Ri(u);n.AddConversation(m),t=m.id}const r=Ai(e);n.AddMessageToConversation(t,r);const o=n.conversations.find(u=>u.id===t);if(!o)return;const a=Ii(n.aiContextItems),s=[];0<a.length&&s.push({role:"system",content:`Here is relevant context:

${a}`});const d=o.messages.length;for(let u=0;u<d;u++)s.push({role:o.messages[u].role,content:o.messages[u].content});const f=yn();n.AddMessageToConversation(t,f),n.SetIsAiStreaming(!0),n.SetAiStreamContent(""),n.SetAiOperationError(null);let b="";try{await pe(s,{temperature:n.aiSettings.chatTemperature},u=>{b+=u,n.SetAiStreamContent(b),n.UpdateLastMessage(t,b),St(Ae.AI_STREAM_CHUNK,{text:u})},u=>{const m=yn(u);n.UpdateLastMessage(t,u),St(Ae.AI_RESPONSE_COMPLETE,{conversationId:t,text:u})},u=>{n.SetAiOperationError(u),St(Ae.AI_ERROR,{error:u})})}catch(u){n.SetAiOperationError(u.message)}finally{n.SetIsAiStreaming(!1),n.SetAiStreamContent(""),n.SaveAIState()}}async function xn(e,n){se().setSidebarPanel("ai");const r=`Explain the following ${n} code in detail. What does it do, and why?

\`\`\`${n}
${e}
\`\`\``;await _i(r)}async function Sn(e,n,t){const r=se();r.SetIsAiStreaming(!0),r.SetAiOperationError(null);const o="You are a code refactoring assistant. Refactor the given code to improve readability, performance, and maintainability. Return ONLY the refactored code in a single code block. No explanations before or after.";try{const a=await pe([{role:"system",content:o},{role:"user",content:`Refactor this ${n} code:

\`\`\`${n}
${e}
\`\`\``}],{temperature:r.aiSettings.codeTemperature,stream:!1}),s=we(a),d=0<s.length?s[0].code:a;t(d)}catch(a){r.SetAiOperationError(a.message)}finally{r.SetIsAiStreaming(!1)}}async function vn(e,n,t){const r=se();r.SetIsAiStreaming(!0),r.SetAiOperationError(null);const o="You are a test generation assistant. Generate comprehensive unit tests for the given code. Return ONLY the test code in a single code block. Use appropriate testing framework for the language. No explanations.";try{const a=await pe([{role:"system",content:o},{role:"user",content:`Generate unit tests for this ${n} code:

\`\`\`${n}
${e}
\`\`\``}],{temperature:r.aiSettings.codeTemperature,stream:!1}),s=we(a),d=0<s.length?s[0].code:a;t(d)}catch(a){r.SetAiOperationError(a.message)}finally{r.SetIsAiStreaming(!1)}}async function wn(e,n,t){const r=se();r.SetIsAiStreaming(!0),r.SetAiOperationError(null);const o="You are a documentation assistant. Add comprehensive documentation (JSDoc, docstrings, or appropriate format) to the given code. Return ONLY the fully documented code in a single code block. No explanations.";try{const a=await pe([{role:"system",content:o},{role:"user",content:`Add documentation to this ${n} code:

\`\`\`${n}
${e}
\`\`\``}],{temperature:r.aiSettings.codeTemperature,stream:!1}),s=we(a),d=0<s.length?s[0].code:a;t(d)}catch(a){r.SetAiOperationError(a.message)}finally{r.SetIsAiStreaming(!1)}}async function Pi(e,n,t,r){const o=se();o.SetIsAiStreaming(!0),o.SetAiOperationError(null);const a="You are a debugging assistant. Fix the error in the given code. Return ONLY the fixed code in a single code block. No explanations before or after.";try{const s=await pe([{role:"system",content:a},{role:"user",content:`Fix this ${n} code.

Error: ${t}

Code:
\`\`\`${n}
${e}
\`\`\``}],{temperature:o.aiSettings.codeTemperature,stream:!1}),d=we(s),f=0<d.length?d[0].code:s;r(f)}catch(s){o.SetAiOperationError(s.message)}finally{o.SetIsAiStreaming(!1)}}async function kn(e,n,t){const r=se();r.SetIsAiStreaming(!0),r.SetAiOperationError(null);const o="You are a code simplification assistant. Simplify the given code while maintaining the same functionality. Return ONLY the simplified code in a single code block. No explanations.";try{const a=await pe([{role:"system",content:o},{role:"user",content:`Simplify this ${n} code:

\`\`\`${n}
${e}
\`\`\``}],{temperature:r.aiSettings.codeTemperature,stream:!1}),s=we(a),d=0<s.length?s[0].code:a;t(d)}catch(a){r.SetAiOperationError(a.message)}finally{r.SetIsAiStreaming(!1)}}async function Ls(e,n,t){const r=se();r.SetIsAiStreaming(!0),r.SetAiOperationError(null);const o="You are a git commit message assistant. Write a clear, concise commit message following conventional commits style. First line should be a short summary (under 72 chars). Optionally add a blank line and a longer description if the changes are complex. Output ONLY the commit message text, nothing else.";let a="";try{return a=await pe([{role:"system",content:o},{role:"user",content:`Generate a commit message for these changes:

${e}`}],{temperature:.3,maxTokens:256},s=>{a+=s,r.SetCommitMessageDraft(a),n==null||n(s)},s=>{r.SetCommitMessageDraft(s),t==null||t(s)}),a}catch(s){return r.SetAiOperationError(s.message),""}finally{r.SetIsAiStreaming(!1)}}function Cn({tab:e,theme:n,settings:t,zoomLevel:r}){const o=y.useRef(null),a=y.useRef(null),{updateTabContent:s,updateTab:d,showFindReplace:f}=A(),[b,u]=y.useState(!1),m=y.useCallback((l,x)=>{o.current=l,a.current=x,Ho(x),x.editor.setTheme(n.editorMonacoTheme),u(!0),l.onDidChangeCursorPosition(C=>{d(e.id,{cursorLine:C.position.lineNumber,cursorColumn:C.position.column})}),l.onDidScrollChange(C=>{d(e.id,{scrollTop:C.scrollTop})}),l.addCommand(x.KeyMod.CtrlCmd|x.KeyCode.KeyD,()=>{var C;(C=l.getAction("editor.action.copyLinesDownAction"))==null||C.run()}),l.addCommand(x.KeyMod.CtrlCmd|x.KeyMod.Shift|x.KeyCode.KeyK,()=>{var C;(C=l.getAction("editor.action.deleteLines"))==null||C.run()}),l.addCommand(x.KeyMod.Alt|x.KeyCode.UpArrow,()=>{var C;(C=l.getAction("editor.action.moveLinesUpAction"))==null||C.run()}),l.addCommand(x.KeyMod.Alt|x.KeyCode.DownArrow,()=>{var C;(C=l.getAction("editor.action.moveLinesDownAction"))==null||C.run()}),l.addCommand(x.KeyMod.CtrlCmd|x.KeyCode.Slash,()=>{var C;(C=l.getAction("editor.action.commentLine"))==null||C.run()}),e.scrollTop&&l.setScrollTop(e.scrollTop),l.addAction({id:"ai-explain",label:"AI: Explain Code",contextMenuGroupId:"9_ai",contextMenuOrder:1,run:C=>{const j=C.getSelection(),R=C.getModel();if(j&&!j.isEmpty()&&R){const B=R.getValueInRange(j);xn(B,R.getLanguageId()||"plaintext")}}}),l.addAction({id:"ai-refactor",label:"AI: Refactor Code",contextMenuGroupId:"9_ai",contextMenuOrder:2,run:C=>{const j=C.getSelection(),R=C.getModel();if(j&&!j.isEmpty()&&R){const B=R.getValueInRange(j);Sn(B,R.getLanguageId()||"plaintext",I=>{C.executeEdits("ai-refactor",[{range:j,text:I}])})}}}),l.addAction({id:"ai-generate-tests",label:"AI: Generate Tests",contextMenuGroupId:"9_ai",contextMenuOrder:3,run:C=>{const j=C.getSelection(),R=C.getModel();if(j&&!j.isEmpty()&&R){const B=R.getValueInRange(j);vn(B,R.getLanguageId()||"plaintext",I=>{const L=R.getLineCount(),w=R.getLineMaxColumn(L);C.executeEdits("ai-tests",[{range:new x.Range(L,w,L,w),text:`

`+I}])})}}}),l.addAction({id:"ai-generate-docs",label:"AI: Generate Documentation",contextMenuGroupId:"9_ai",contextMenuOrder:4,run:C=>{const j=C.getSelection(),R=C.getModel();if(j&&!j.isEmpty()&&R){const B=R.getValueInRange(j);wn(B,R.getLanguageId()||"plaintext",I=>{C.executeEdits("ai-docs",[{range:j,text:I}])})}}}),l.addAction({id:"ai-fix-error",label:"AI: Fix Error",contextMenuGroupId:"9_ai",contextMenuOrder:5,run:C=>{const j=C.getSelection(),R=C.getModel();if(j&&!j.isEmpty()&&R){const B=R.getValueInRange(j),I=prompt("Describe the error (or paste error message):")||"Fix any issues";Pi(B,R.getLanguageId()||"plaintext",I,L=>{C.executeEdits("ai-fix",[{range:j,text:L}])})}}}),l.addAction({id:"ai-simplify",label:"AI: Simplify Code",contextMenuGroupId:"9_ai",contextMenuOrder:6,run:C=>{const j=C.getSelection(),R=C.getModel();if(j&&!j.isEmpty()&&R){const B=R.getValueInRange(j);kn(B,R.getLanguageId()||"plaintext",I=>{C.executeEdits("ai-simplify",[{range:j,text:I}])})}}}),Uo(l);const _=Ei(x);l.__completionDisposables=_,l.focus()},[e.id,n.editorMonacoTheme]),T=y.useCallback(l=>{l!==void 0&&s(e.id,l)},[e.id]);return y.useEffect(()=>{a.current&&a.current.editor.setTheme(n.editorMonacoTheme)},[n.editorMonacoTheme]),y.useEffect(()=>{const l=x=>{o.current&&(x!=null&&x.body)&&(mi(o.current,x.body),o.current.focus())};return Ti(Ae.INSERT_SNIPPET,l),()=>ji(Ae.INSERT_SNIPPET,l)},[]),y.useEffect(()=>()=>{var x;const l=o.current;if(l&&l.__completionDisposables)for(const _ of l.__completionDisposables)(x=_==null?void 0:_.dispose)==null||x.call(_)},[]),y.useEffect(()=>{const l=o.current,x=a.current;if(!l||!x)return;Ko((w,M)=>{var S,h,O,D,F,v,k,g,z,N,V,q,H,G;const p=l.getModel();if(p)switch(w){case"cut":l.trigger("keyboard","editor.action.clipboardCutAction",null);break;case"copy":l.trigger("keyboard","editor.action.clipboardCopyAction",null);break;case"paste":{navigator.clipboard.readText().then(c=>{l.trigger("keyboard","paste",{text:c})}).catch(()=>{l.focus(),document.execCommand("paste")});break}case"undo":l.trigger("keyboard","undo",null);break;case"redo":l.trigger("keyboard","redo",null);break;case"select-all":l.setSelection(p.getFullModelRange());break;case"duplicate-line":(S=l.getAction("editor.action.copyLinesDownAction"))==null||S.run();break;case"delete-line":(h=l.getAction("editor.action.deleteLines"))==null||h.run();break;case"move-line-up":(O=l.getAction("editor.action.moveLinesUpAction"))==null||O.run();break;case"move-line-down":(D=l.getAction("editor.action.moveLinesDownAction"))==null||D.run();break;case"toggle-comment":(F=l.getAction("editor.action.commentLine"))==null||F.run();break;case"block-comment":(v=l.getAction("editor.action.blockComment"))==null||v.run();break;case"transpose-line":{const c=l.getPosition();if(!c||c.lineNumber<=1)break;const E=p.getLineContent(c.lineNumber),P=p.getLineContent(c.lineNumber-1);l.executeEdits("transpose",[{range:new x.Range(c.lineNumber-1,1,c.lineNumber,p.getLineMaxColumn(c.lineNumber)),text:E+`
`+P}]);break}case"split-lines":{const c=l.getSelection();if(c&&!c.isEmpty()){const E=p.getValueInRange(c);l.executeEdits("split",[{range:c,text:E.split("").join(`
`)}])}break}case"join-lines":{const c=l.getSelection();c&&!c.isEmpty()&&l.executeEdits("join",[{range:c,text:p.getValueInRange(c).replace(/\n/g," ")}]);break}case"uppercase":{const c=l.getSelection();c&&!c.isEmpty()&&l.executeEdits("uppercase",[{range:c,text:p.getValueInRange(c).toUpperCase()}]);break}case"lowercase":{const c=l.getSelection();c&&!c.isEmpty()&&l.executeEdits("lowercase",[{range:c,text:p.getValueInRange(c).toLowerCase()}]);break}case"proper-case":{const c=l.getSelection();c&&!c.isEmpty()&&l.executeEdits("proper",[{range:c,text:p.getValueInRange(c).replace(/\w\S*/g,E=>E.charAt(0).toUpperCase()+E.substr(1).toLowerCase())}]);break}case"sentence-case":{const c=l.getSelection();c&&!c.isEmpty()&&l.executeEdits("sentence",[{range:c,text:p.getValueInRange(c).toLowerCase().replace(/(^\s*\w|[.!?]\s+\w)/g,E=>E.toUpperCase())}]);break}case"invert-case":{const c=l.getSelection();c&&!c.isEmpty()&&l.executeEdits("invert",[{range:c,text:p.getValueInRange(c).split("").map(E=>E===E.toUpperCase()?E.toLowerCase():E.toUpperCase()).join("")}]);break}case"random-case":{const c=l.getSelection();c&&!c.isEmpty()&&l.executeEdits("random",[{range:c,text:p.getValueInRange(c).split("").map(E=>Math.random()>.5?E.toUpperCase():E.toLowerCase()).join("")}]);break}case"insert-datetime":{const c=l.getPosition();if(c){const P=new Date().toISOString().replace("T"," ").replace(/\.\d+Z/,"");l.executeEdits("datetime",[{range:new x.Range(c.lineNumber,c.column,c.lineNumber,c.column),text:P}])}break}case"sort-asc":case"sort-desc":case"sort-asc-ci":case"sort-desc-ci":case"sort-len-asc":case"sort-len-desc":{const c=p.getFullModelRange(),E=p.getValue().split(`
`);w==="sort-asc"?E.sort((P,$)=>P.localeCompare($)):w==="sort-desc"?E.sort((P,$)=>$.localeCompare(P)):w==="sort-asc-ci"?E.sort((P,$)=>P.toLowerCase().localeCompare($.toLowerCase())):w==="sort-desc-ci"?E.sort((P,$)=>$.toLowerCase().localeCompare(P.toLowerCase())):w==="sort-len-asc"?E.sort((P,$)=>P.length-$.length):w==="sort-len-desc"&&E.sort((P,$)=>$.length-P.length),l.executeEdits("sort",[{range:c,text:E.join(`
`)}]);break}case"remove-duplicates":{const c=p.getFullModelRange();l.executeEdits("remove-dup",[{range:c,text:[...new Set(p.getValue().split(`
`))].join(`
`)}]);break}case"remove-consecutive-duplicates":{const c=p.getFullModelRange(),E=p.getValue().split(`
`);l.executeEdits("remove-consec-dup",[{range:c,text:E.filter((P,$)=>$===0||P!==E[$-1]).join(`
`)}]);break}case"remove-empty-lines":{l.executeEdits("remove-empty",[{range:p.getFullModelRange(),text:p.getValue().split(`
`).filter(c=>c.trim()!=="").join(`
`)}]);break}case"remove-blank-lines":{l.executeEdits("remove-blank",[{range:p.getFullModelRange(),text:p.getValue().split(`
`).filter(c=>c!=="").join(`
`)}]);break}case"trim-trailing":{l.executeEdits("trim",[{range:p.getFullModelRange(),text:p.getValue().split(`
`).map(c=>c.trimEnd()).join(`
`)}]);break}case"trim-leading":{l.executeEdits("trim-lead",[{range:p.getFullModelRange(),text:p.getValue().split(`
`).map(c=>c.trimStart()).join(`
`)}]);break}case"trim-both":{l.executeEdits("trim-both",[{range:p.getFullModelRange(),text:p.getValue().split(`
`).map(c=>c.trim()).join(`
`)}]);break}case"eol-to-space":{l.executeEdits("eol-space",[{range:p.getFullModelRange(),text:p.getValue().replace(/\n/g," ")}]);break}case"tab-to-space":{const c=" ".repeat(A.getState().settings.tabSize);l.executeEdits("tab-space",[{range:p.getFullModelRange(),text:p.getValue().replace(/\t/g,c)}]);break}case"space-to-tab-leading":{const c=A.getState().settings.tabSize,E=new RegExp(`^( {${c}})+`,"gm");l.executeEdits("space-tab",[{range:p.getFullModelRange(),text:p.getValue().replace(E,P=>"	".repeat(P.length/c))}]);break}case"space-to-tab-all":{const c=A.getState().settings.tabSize;l.executeEdits("space-tab-all",[{range:p.getFullModelRange(),text:p.getValue().split(" ".repeat(c)).join("	")}]);break}case"insert-blank-above":{const c=l.getPosition();c&&l.executeEdits("blank-above",[{range:new x.Range(c.lineNumber,1,c.lineNumber,1),text:`
`}]);break}case"insert-blank-below":{const c=l.getPosition();c&&l.executeEdits("blank-below",[{range:new x.Range(c.lineNumber,p.getLineMaxColumn(c.lineNumber),c.lineNumber,p.getLineMaxColumn(c.lineNumber)),text:`
`}]);break}case"reverse-lines":{l.executeEdits("reverse",[{range:p.getFullModelRange(),text:p.getValue().split(`
`).reverse().join(`
`)}]);break}case"fold-all":(k=l.getAction("editor.foldAll"))==null||k.run();break;case"unfold-all":(g=l.getAction("editor.unfoldAll"))==null||g.run();break;case"fold-level":{const c=M;(z=l.getAction(`editor.foldLevel${c}`))==null||z.run();break}case"select-to-bracket":(N=l.getAction("editor.action.selectToBracket"))==null||N.run();break;case"goto-bracket":(V=l.getAction("editor.action.jumpToBracket"))==null||V.run();break;case"toggle-bookmark":{const c=(q=l.getPosition())==null?void 0:q.lineNumber;if(c){const E=[...e.bookmarks],P=E.indexOf(c);P>=0?E.splice(P,1):E.push(c),E.sort(($,K)=>$-K),d(e.id,{bookmarks:E})}break}case"next-bookmark":{const c=((H=l.getPosition())==null?void 0:H.lineNumber)||1,P=e.bookmarks.find($=>$>c)||e.bookmarks[0];P&&l.setPosition({lineNumber:P,column:1}),l.revealLineInCenter(P||c);break}case"prev-bookmark":{const c=((G=l.getPosition())==null?void 0:G.lineNumber)||1,P=[...e.bookmarks].reverse().find($=>$<c)||e.bookmarks[e.bookmarks.length-1];P&&l.setPosition({lineNumber:P,column:1}),l.revealLineInCenter(P||c);break}case"clear-bookmarks":{d(e.id,{bookmarks:[]});break}case"mark-style":{const c=l.getSelection();if(c&&!c.isEmpty()){const E=[...e.marks||[]];E.push({line:c.startLineNumber,column:c.startColumn,length:p.getValueInRange(c).length,style:M||1}),d(e.id,{marks:E})}break}case"clear-marks":{d(e.id,{marks:[]});break}case"cut-marked-lines":case"copy-marked-lines":case"delete-marked-lines":case"delete-unmarked-lines":case"paste-marked-lines":case"inverse-marks":{const c=e.marks||[];if(c.length===0)break;const E=new Set(c.map(K=>K.line)),P=p.getValue().split(`
`),$=(K,U)=>E.has(U+1);if(w==="cut-marked-lines"){const K=P.filter((ne,ke)=>$(ne,ke));navigator.clipboard.writeText(K.join(`
`));const U=P.filter((ne,ke)=>!$(ne,ke));l.executeEdits("cut-marked",[{range:p.getFullModelRange(),text:U.join(`
`)}])}else if(w==="copy-marked-lines")navigator.clipboard.writeText(P.filter((K,U)=>$(K,U)).join(`
`));else if(w==="delete-marked-lines")l.executeEdits("del-marked",[{range:p.getFullModelRange(),text:P.filter((K,U)=>!$(K,U)).join(`
`)}]);else if(w==="delete-unmarked-lines")l.executeEdits("del-unmarked",[{range:p.getFullModelRange(),text:P.filter((K,U)=>$(K,U)).join(`
`)}]);else if(w==="paste-marked-lines")navigator.clipboard.readText().then(K=>{const U=P.map((ne,ke)=>$(ne,ke)?K:ne);l.executeEdits("paste-marked",[{range:p.getFullModelRange(),text:U.join(`
`)}])});else if(w==="inverse-marks"){const K=P.map((U,ne)=>ne+1).filter(U=>!E.has(U)).map(U=>({line:U,column:1,length:P[U-1].length,style:1}));d(e.id,{marks:K})}break}case"macro-playback":{const E=A.getState().currentMacroActions;if(E.length===0)break;for(const P of E)P.type==="type"?l.trigger("keyboard","type",{text:P.data}):P.type==="command"&&l.trigger("keyboard",P.data,null);break}case"macro-run-multiple":{const c=prompt("Run macro how many times?","10");if(!c)break;const E=parseInt(c,10);if(isNaN(E)||E<1)break;const $=A.getState().currentMacroActions;if($.length===0)break;for(let K=0;K<E;K++)for(const U of $)U.type==="type"?l.trigger("keyboard","type",{text:U.data}):U.type==="command"&&l.trigger("keyboard",U.data,null);break}case"macro-save":{const c=A.getState();if(c.currentMacroActions.length===0)break;const E=prompt("Save macro as:","My Macro");E&&c.saveMacro(E);break}case"hash-md5-file":case"hash-sha256-file":{const c=document.createElement("input");c.type="file",c.onchange=async()=>{var ne;const E=(ne=c.files)==null?void 0:ne[0];if(!E)return;const P=await E.text(),$=w==="hash-md5-file"?"md5":"sha256",K=await vt($,P),U=l.getPosition();U&&l.executeEdits("hash-file",[{range:new x.Range(U.lineNumber,U.column,U.lineNumber,U.column),text:`
// ${$.toUpperCase()} (${E.name}): ${K}
`}])},c.click();break}case"json-format":{try{l.executeEdits("json-fmt",[{range:p.getFullModelRange(),text:JSON.stringify(JSON.parse(p.getValue()),null,2)}])}catch{}break}case"json-minify":{try{l.executeEdits("json-min",[{range:p.getFullModelRange(),text:JSON.stringify(JSON.parse(p.getValue()))}])}catch{}break}case"hash-md5":case"hash-sha1":case"hash-sha256":case"hash-sha512":{const c=l.getSelection();let E=c&&!c.isEmpty()?p.getValueInRange(c):p.getValue();vt(w.replace("hash-",""),E).then(P=>{const $=l.getPosition();$&&l.executeEdits("hash",[{range:new x.Range($.lineNumber,$.column,$.lineNumber,$.column),text:`
// ${w.replace("hash-","").toUpperCase()}: ${P}
`}])});break}case"hash-md5-clipboard":case"hash-sha1-clipboard":case"hash-sha256-clipboard":case"hash-sha512-clipboard":{const c=l.getSelection();let E=c&&!c.isEmpty()?p.getValueInRange(c):p.getValue();vt(w.replace("hash-","").replace("-clipboard",""),E).then(P=>navigator.clipboard.writeText(P));break}case"base64-encode":{const c=l.getSelection();c&&!c.isEmpty()&&l.executeEdits("b64enc",[{range:c,text:btoa(p.getValueInRange(c))}]);break}case"base64-decode":{const c=l.getSelection();if(c&&!c.isEmpty())try{l.executeEdits("b64dec",[{range:c,text:atob(p.getValueInRange(c))}])}catch{}break}case"url-encode":{const c=l.getSelection();c&&!c.isEmpty()&&l.executeEdits("urlenc",[{range:c,text:encodeURIComponent(p.getValueInRange(c))}]);break}case"url-decode":{const c=l.getSelection();if(c&&!c.isEmpty())try{l.executeEdits("urldec",[{range:c,text:decodeURIComponent(p.getValueInRange(c))}])}catch{}break}case"copy-file-path":{e.path&&navigator.clipboard.writeText(e.path);break}case"copy-file-name":{navigator.clipboard.writeText(e.name);break}case"copy-file-dir":{e.path&&navigator.clipboard.writeText(e.path.substring(0,e.path.lastIndexOf("/")));break}case"toggle-readonly":{d(e.id,{isReadOnly:!e.isReadOnly});break}case"ai-explain":{const c=l.getSelection();c&&!c.isEmpty()&&xn(p.getValueInRange(c),p.getLanguageId()||"plaintext");break}case"ai-refactor":{const c=l.getSelection();c&&!c.isEmpty()&&Sn(p.getValueInRange(c),p.getLanguageId()||"plaintext",E=>{l.executeEdits("ai-refactor",[{range:c,text:E}])});break}case"ai-generate-tests":{const c=l.getSelection();c&&!c.isEmpty()&&vn(p.getValueInRange(c),p.getLanguageId()||"plaintext",E=>{const P=p.getLineCount(),$=p.getLineMaxColumn(P);l.executeEdits("ai-tests",[{range:new x.Range(P,$,P,$),text:`

`+E}])});break}case"ai-generate-docs":{const c=l.getSelection();c&&!c.isEmpty()&&wn(p.getValueInRange(c),p.getLanguageId()||"plaintext",E=>{l.executeEdits("ai-docs",[{range:c,text:E}])});break}case"ai-simplify":{const c=l.getSelection();c&&!c.isEmpty()&&kn(p.getValueInRange(c),p.getLanguageId()||"plaintext",E=>{l.executeEdits("ai-simplify",[{range:c,text:E}])});break}}});const C=w=>{const{query:M,direction:p,isCaseSensitive:S,isWholeWord:h,isRegex:O}=w.detail;if(!M)return;const D=l.getModel();if(!D)return;const F=D.getValue(),v=l.getPosition(),k=v?D.getOffsetAt(v):0;let g="g";S||(g+="i");let z;O?z=M:z=M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),h&&(z=`\\b${z}\\b`);let N;try{N=new RegExp(z,g)}catch{return}const V=[];let q;for(;(q=N.exec(F))!==null;)V.push({start:q.index,end:q.index+q[0].length}),q[0].length===0&&N.lastIndex++;if(V.length===0)return;let H;p==="next"?H=V.find(E=>E.start>=k)||V[0]:H=[...V].reverse().find(E=>E.end<=k)||V[V.length-1];const G=D.getPositionAt(H.start),c=D.getPositionAt(H.end);l.setSelection(new x.Range(G.lineNumber,G.column,c.lineNumber,c.column)),l.revealLineInCenter(G.lineNumber)},j=w=>{const{find:M,replace:p,all:S,isCaseSensitive:h,isWholeWord:O,isRegex:D}=w.detail;if(!M)return;const F=l.getModel();if(!F)return;let v="g";h||(v+="i");let k;D?k=M:k=M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),O&&(k=`\\b${k}\\b`);let g;try{g=new RegExp(k,v)}catch{return}if(S){const z=F.getFullModelRange(),N=F.getValue().replace(g,p);l.executeEdits("replace-all",[{range:z,text:N}])}else{const z=l.getSelection();if(z&&!z.isEmpty()){const N=F.getValueInRange(z),V=new RegExp(k,h?"":"i");V.test(N)&&l.executeEdits("replace",[{range:z,text:N.replace(V,p)}])}C(new CustomEvent("notemac-find",{detail:{query:M,direction:"next",isCaseSensitive:h,isWholeWord:O,isRegex:D}}))}},R=w=>{const{query:M,isCaseSensitive:p,isWholeWord:S,isRegex:h,style:O}=w.detail;if(!M)return;const D=l.getModel();if(!D)return;let F="g";p||(F+="i");let v=h?M:M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");S&&(v=`\\b${v}\\b`);let k;try{k=new RegExp(v,F)}catch{return}const g=D.getValue(),z=[];let N;for(;(N=k.exec(g))!==null;){const q=D.getPositionAt(N.index);z.push({line:q.lineNumber,column:q.column,length:N[0].length,style:O||1}),N[0].length===0&&k.lastIndex++}const V=e.marks||[];d(e.id,{marks:[...V,...z]})},B=()=>{d(e.id,{marks:[]})},I=w=>{const{line:M}=w.detail;M&&(l.setPosition({lineNumber:M,column:1}),l.revealLineInCenter(M),l.focus())},L=w=>{const{text:M,startLine:p,endLine:S,column:h}=w.detail,O=l.getModel();if(!O)return;const D=[],F=Math.min(S||O.getLineCount(),O.getLineCount());for(let v=p||1;v<=F;v++){const k=Math.min(h||1,O.getLineMaxColumn(v));D.push({range:new x.Range(v,k,v,k),text:M||""})}0<D.length&&l.executeEdits("column-edit",D)};return document.addEventListener("notemac-find",C),document.addEventListener("notemac-replace",j),document.addEventListener("notemac-mark",R),document.addEventListener("notemac-clear-marks",B),document.addEventListener("notemac-goto-line",I),document.addEventListener("notemac-column-edit",L),()=>{qo(),Vo(),document.removeEventListener("notemac-find",C),document.removeEventListener("notemac-replace",j),document.removeEventListener("notemac-mark",R),document.removeEventListener("notemac-clear-marks",B),document.removeEventListener("notemac-goto-line",I),document.removeEventListener("notemac-column-edit",L)}},[b,e.id,e.bookmarks,e.marks]),y.useEffect(()=>{const l=o.current,x=a.current;if(!l||!x||!b)return;const _=e.bookmarks.map(j=>({range:new x.Range(j,1,j,1),options:{isWholeLine:!0,linesDecorationsClassName:"bookmark-decoration",glyphMarginClassName:"bookmark-glyph",overviewRuler:{color:"#007acc",position:1}}})),C=l.deltaDecorations([],_);return()=>{l.deltaDecorations(C,[])}},[e.bookmarks,b]),i.jsx("div",{style:{flex:1,overflow:"hidden"},children:i.jsx(hi,{height:"100%",language:e.language,value:e.content,onChange:T,onMount:m,theme:n.editorMonacoTheme,options:{fontSize:t.fontSize+r,fontFamily:t.fontFamily,tabSize:t.tabSize,insertSpaces:t.insertSpaces,wordWrap:t.wordWrap?"on":"off",lineNumbers:t.showLineNumbers?"on":"off",minimap:{enabled:t.showMinimap,scale:1,showSlider:"mouseover"},renderWhitespace:t.renderWhitespace,guides:{indentation:t.showIndentGuides,bracketPairs:!0},cursorBlinking:t.cursorBlinking,cursorStyle:t.cursorStyle,smoothScrolling:t.smoothScrolling,bracketPairColorization:{enabled:!0},matchBrackets:t.matchBrackets?"always":"never",autoClosingBrackets:t.autoCloseBrackets?"always":"never",autoClosingQuotes:t.autoCloseQuotes?"always":"never",renderLineHighlight:t.highlightCurrentLine?"all":"none",folding:!0,foldingStrategy:"indentation",showFoldingControls:"mouseover",glyphMargin:!0,scrollBeyondLastLine:!1,automaticLayout:!0,contextmenu:!0,dragAndDrop:!0,links:!0,multiCursorModifier:"alt",inlineSuggest:{enabled:!0},snippetSuggestions:"top",suggestOnTriggerCharacters:!0,wordBasedSuggestions:"currentDocument",padding:{top:8},readOnly:e.isReadOnly,overviewRulerBorder:!1,hideCursorInOverviewRuler:!1,colorDecorators:!0,columnSelection:!0,copyWithSyntaxHighlighting:!0,emptySelectionClipboard:!0,find:{addExtraSpaceOnTop:!1,autoFindInSelection:"never",seedSearchStringFromSelection:"always"}},loading:i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:n.textMuted},children:"Loading editor..."})})})}async function vt(e,n){const r=new TextEncoder().encode(n),o={md5:"MD5",sha1:"SHA-1",sha256:"SHA-256",sha512:"SHA-512"}[e];if(!o||e==="md5"){let a=0;for(let s=0;s<n.length;s++){const d=n.charCodeAt(s);a=(a<<5)-a+d,a=a&a}return Math.abs(a).toString(16).padStart(8,"0")}try{const a=await crypto.subtle.digest(o,r);return Array.from(new Uint8Array(a)).map(d=>d.toString(16).padStart(2,"0")).join("")}catch{return"error computing hash"}}function Li(e){return e.trim().split(/\s+/).filter(Boolean).length}function Oi(e){return e?e.split(/\r\n|\r|\n/).length:0}function Os(e){return 1024>e?`${e} B`:1024*1024>e?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function In(e){return{plaintext:"Plain Text",javascript:"JavaScript",typescript:"TypeScript",python:"Python",ruby:"Ruby",go:"Go",rust:"Rust",c:"C",cpp:"C++",csharp:"C#",java:"Java",swift:"Swift",kotlin:"Kotlin",php:"PHP",html:"HTML",css:"CSS",scss:"SCSS",less:"LESS",json:"JSON",xml:"XML",yaml:"YAML",markdown:"Markdown",sql:"SQL",shell:"Shell",powershell:"PowerShell",r:"R",lua:"Lua",perl:"Perl",dart:"Dart",elixir:"Elixir",erlang:"Erlang",haskell:"Haskell",scala:"Scala",clojure:"Clojure",coffeescript:"CoffeeScript",bat:"Batch",ini:"INI",dockerfile:"Dockerfile",graphql:"GraphQL"}[e]||e}function Di({theme:e}){const{tabs:n,activeTabId:t,settings:r,zoomLevel:o,isRecordingMacro:a,updateTab:s,updateSettings:d,isRepoInitialized:f,currentBranch:b,gitStatus:u,setSidebarPanel:m,aiEnabled:T,isAiStreaming:l,activeModelId:x,inlineSuggestionEnabled:_,SetShowAiSettings:C}=A(),j=n.find(g=>g.id===t),[R,B]=y.useState(!1),[I,L]=y.useState(!1),[w,M]=y.useState(!1);if(j===void 0)return null;const p=Oi(j.content),S=j.content.length,h=Li(j.content),O=["plaintext","javascript","typescript","python","ruby","go","rust","c","cpp","csharp","java","swift","kotlin","php","html","css","scss","json","xml","yaml","markdown","sql","shell","lua","perl","r","dart","scala","haskell"],D=["utf-8","utf-8-bom","utf-16le","utf-16be","iso-8859-1","windows-1252"],F=[{value:"LF",label:"LF (Unix/Mac)"},{value:"CRLF",label:"CRLF (Windows)"},{value:"CR",label:"CR (Old Mac)"}],v=J.memo(({children:g,onClick:z,title:N})=>{const[V,q]=y.useState(!1);return i.jsx("div",{title:N,onClick:z,onMouseEnter:()=>q(!0),onMouseLeave:()=>q(!1),style:{padding:"0 8px",cursor:z!==null?"pointer":"default",backgroundColor:V&&z!==null?"rgba(255,255,255,0.1)":"transparent",height:"100%",display:"flex",alignItems:"center",borderRadius:2,position:"relative"},children:g})});v.displayName="StatusItem";const k=J.memo(({items:g,onSelect:z,onClose:N})=>i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:lo},onClick:N}),i.jsx("div",{style:{position:"absolute",bottom:"100%",left:0,minWidth:180,maxHeight:io,overflowY:"auto",backgroundColor:e.menuBg,border:`1px solid ${e.border}`,borderRadius:6,padding:"4px 0",zIndex:co,boxShadow:"0 -4px 16px rgba(0,0,0,0.3)"},children:g.map(V=>i.jsx("div",{onClick:()=>{z(V.value),N()},style:{padding:"6px 16px",cursor:"pointer",fontSize:13,color:e.menuText},onMouseEnter:q=>q.target.style.backgroundColor=e.bgHover,onMouseLeave:q=>q.target.style.backgroundColor="transparent",children:V.label},V.value))})]}));return k.displayName="Picker",i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",height:24,backgroundColor:e.statusBarBg,color:e.statusBarText,fontSize:12,flexShrink:0,padding:"0 4px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",height:"100%"},children:[f===!0&&i.jsx(v,{title:`Branch: ${b}${u!==null&&u.aheadBy!==void 0?` ${u.aheadBy}`:""}${u!==null&&u.behindBy!==void 0?` ${u.behindBy}`:""}`,onClick:()=>m("git"),children:i.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[i.jsx("span",{style:{fontSize:11},children:""}),b,u!==null&&0<u.aheadBy&&i.jsxs("span",{style:{fontSize:10},children:["",u.aheadBy]}),u!==null&&0<u.behindBy&&i.jsxs("span",{style:{fontSize:10},children:["",u.behindBy]}),u!==null&&u.isRepoDirty===!0&&i.jsx("span",{style:{fontSize:10,color:"#f9e2af"},children:""})]})}),a===!0&&i.jsx(v,{children:i.jsxs("span",{className:"recording-indicator",style:{color:"#ff4444"},children:[""," Recording"]})}),i.jsxs(v,{title:"Cursor Position",children:["Ln ",j.cursorLine,", Col ",j.cursorColumn]}),i.jsxs(v,{title:"Character Count",children:[S," chars"]}),i.jsxs(v,{title:"Word Count",children:[h," words"]}),i.jsxs(v,{title:"Line Count",children:[p," lines"]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",height:"100%"},children:[i.jsxs(v,{title:"Tab Size",onClick:()=>{const g=r.tabSize===4?2:4;d({tabSize:g})},children:[r.insertSpaces?"Spaces":"Tabs",": ",r.tabSize]}),i.jsxs(v,{title:"Line Ending",onClick:()=>M(!w),children:[j.lineEnding,w&&i.jsx(k,{items:F.map(g=>({value:g.value,label:g.label})),onSelect:g=>s(j.id,{lineEnding:g}),onClose:()=>M(!1)})]}),i.jsxs(v,{title:"Encoding",onClick:()=>L(!I),children:[j.encoding.toUpperCase(),I&&i.jsx(k,{items:D.map(g=>({value:g,label:g.toUpperCase()})),onSelect:g=>s(j.id,{encoding:g}),onClose:()=>L(!1)})]}),i.jsxs(v,{title:"Language",onClick:()=>B(!R),children:[In(j.language),R&&i.jsx(k,{items:O.map(g=>({value:g,label:In(g)})),onSelect:g=>s(j.id,{language:g}),onClose:()=>B(!1)})]}),T===!0&&i.jsx(v,{title:`AI: ${x}${_===!0?" (Inline On)":""}`,onClick:()=>C(!0),children:i.jsx("span",{style:{display:"flex",alignItems:"center",gap:4},children:l===!0?i.jsxs("span",{style:{color:"#a6e3a1",animation:"pulse 1s infinite"},children:[""," Generating..."]}):i.jsxs("span",{style:{color:e.statusBarText,opacity:.8},children:[""," ",x||"No Model"]})})}),o!==0&&i.jsxs(v,{title:"Zoom Level",children:[0<o?"+":"",o]})]})]})}const Bi=y.lazy(()=>Y(()=>import("./GitPanelViewPresenter-CqCzFp7K.js"),__vite__mapDeps([0,1,2,3,4,5])).then(e=>({default:e.GitPanelViewPresenter}))),Fi=y.lazy(()=>Y(()=>import("./AIChatPanelViewPresenter-CxtIYBXa.js"),__vite__mapDeps([6,3,4,5])).then(e=>({default:e.AIChatPanelViewPresenter})));function Ni({theme:e}){const{sidebarPanel:n,sidebarWidth:t,fileTree:r,workspacePath:o,tabs:a,activeTabId:s,setSidebarPanel:d,toggleTreeNode:f,addTab:b,setActiveTab:u,setFileTree:m,setWorkspacePath:T,GetChangedFileCount:l}=A(),[x,_]=y.useState(!1),[C,j]=y.useState(t),R=y.useRef(null),B=y.useRef(null),I=y.useCallback(S=>{S.preventDefault(),_(!0);const h=S.clientX,O=C,D=v=>{const k=Math.max(to,Math.min(no,O+v.clientX-h));j(k)},F=()=>{_(!1),R.current!==null&&document.removeEventListener("mousemove",R.current),B.current!==null&&document.removeEventListener("mouseup",B.current),R.current=null,B.current=null};R.current=D,B.current=F,document.addEventListener("mousemove",D),document.addEventListener("mouseup",F)},[C]);y.useEffect(()=>()=>{R.current!==null&&document.removeEventListener("mousemove",R.current),B.current!==null&&document.removeEventListener("mouseup",B.current)},[]);const L=async()=>{if("showDirectoryPicker"in window)try{const S=await window.showDirectoryPicker(),h=await er(S);m(h),T(S.name)}catch{}},w=async S=>{if(S.isDirectory){f(S.path);return}const h=a.find(O=>O.path===S.path||O.name===S.name);if(h){u(h.id);return}if(window.electronAPI){const O=await window.electronAPI.readFile(S.path);b({name:S.name,path:S.path,content:O,language:ae(S.name),lineEnding:de(O)})}else if(S.handle)try{const D=await(await S.handle.getFile()).text();b({name:S.name,path:S.path,content:D,language:ae(S.name),lineEnding:de(D)})}catch{}},M=J.memo(({node:S,depth:h=0})=>{var k,g;const[O,D]=y.useState(!1),F=S.isExpanded,v=((k=a.find(z=>z.id===s))==null?void 0:k.path)===S.path;return i.jsxs("div",{children:[i.jsxs("div",{onClick:()=>w(S),onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),style:{display:"flex",alignItems:"center",gap:4,padding:"3px 8px",paddingLeft:8+h*16,cursor:"pointer",backgroundColor:v?e.bgActive:O?e.bgHover:"transparent",color:v?e.text:e.sidebarText,fontSize:13,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[i.jsx("span",{style:{fontSize:10,width:16,textAlign:"center",flexShrink:0},children:S.isDirectory?F?"":"":""}),i.jsx("span",{style:{marginRight:4,flexShrink:0},children:S.isDirectory?F?"":"":Gi(S.name)}),i.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:S.name})]}),S.isDirectory&&F&&((g=S.children)==null?void 0:g.map((z,N)=>i.jsx(M,{node:z,depth:h+1},z.path||N)))]})});M.displayName="TreeNode";const p=J.memo(()=>{const S=a.find(O=>O.id===s);if(S===void 0)return null;const h=Ui(S.content,S.language);return i.jsxs("div",{style:{padding:8},children:[i.jsx("div",{style:{fontSize:11,color:e.textMuted,marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Functions"}),h.length===0?i.jsx("div",{style:{color:e.textMuted,fontSize:12,padding:8},children:"No functions found"}):h.map((O,D)=>i.jsxs("div",{onClick:()=>{document.dispatchEvent(new CustomEvent("notemac-goto-line",{detail:{line:O.line}}))},style:{padding:"4px 8px",cursor:"pointer",fontSize:13,color:e.sidebarText,borderRadius:4},onMouseEnter:F=>F.target.style.backgroundColor=e.bgHover,onMouseLeave:F=>F.target.style.backgroundColor="transparent",children:[i.jsx("span",{style:{color:e.accent,marginRight:4},children:"f"}),O.name,i.jsxs("span",{style:{color:e.textMuted,fontSize:11,marginLeft:8},children:[":",O.line]})]},D))]})});return p.displayName="FunctionListPanel",i.jsxs("div",{style:{display:"flex",flexShrink:0},children:[i.jsx("div",{style:{width:40,backgroundColor:e.bgSecondary,borderRight:`1px solid ${e.border}`,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:8,gap:4},children:[{panel:"explorer",icon:"",title:"Explorer"},{panel:"search",icon:"",title:"Search"},{panel:"functions",icon:"",title:"Function List"},{panel:"docList",icon:"",title:"Document List"},{panel:"project",icon:"",title:"Project"},{panel:"clipboardHistory",icon:"",title:"Clipboard History"},{panel:"charPanel",icon:"",title:"Character Panel"},{panel:"git",icon:"",title:"Source Control"},{panel:"ai",icon:"",title:"AI Assistant"}].map(({panel:S,icon:h,title:O})=>{const D=S==="git"?l():0;return i.jsxs("div",{title:O,onClick:()=>d(n===S?null:S),style:{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:6,fontSize:16,backgroundColor:n===S?e.bgHover:"transparent",borderLeft:n===S?`2px solid ${e.accent}`:"2px solid transparent",position:"relative"},children:[h,D>0&&i.jsx("span",{style:{position:"absolute",top:2,right:2,minWidth:14,height:14,borderRadius:7,backgroundColor:e.accent,color:e.accentText,fontSize:9,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 3px"},children:D})]},S)})}),n!==null&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{width:C-40,backgroundColor:e.sidebarBg,borderRight:`1px solid ${e.border}`,overflow:"auto",display:"flex",flexDirection:"column"},children:[i.jsxs("div",{style:{padding:"8px 12px",fontSize:11,fontWeight:600,textTransform:"uppercase",letterSpacing:1,color:e.textSecondary,borderBottom:`1px solid ${e.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n==="explorer"?"Explorer":n==="search"?"Search":n==="functions"?"Functions":n==="docList"?"Document List":n==="project"?"Project":n==="clipboardHistory"?"Clipboard History":n==="charPanel"?"Character Panel":n==="git"?"Source Control":n==="ai"?"AI Assistant":"",i.jsx("div",{title:"Collapse Panel",onClick:()=>d(null),style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:4,fontSize:12,color:e.textMuted},onMouseEnter:S=>{S.target.style.backgroundColor=e.bgHover,S.target.style.color=e.text},onMouseLeave:S=>{S.target.style.backgroundColor="transparent",S.target.style.color=e.textMuted},children:""})]}),i.jsxs("div",{style:{flex:1,overflow:"auto"},children:[n==="explorer"&&i.jsx(i.Fragment,{children:r.length>0?i.jsxs("div",{style:{paddingTop:4},children:[o&&i.jsxs("div",{style:{padding:"6px 12px",fontSize:12,fontWeight:600,color:e.text,display:"flex",alignItems:"center",gap:6},children:[i.jsx("span",{children:""}),typeof o=="string"&&o.split("/").pop()||o]}),r.map((S,h)=>i.jsx(M,{node:S},S.path||h))]}):i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24,gap:12},children:[i.jsx("div",{style:{color:e.textMuted,fontSize:13,textAlign:"center"},children:"No folder opened"}),i.jsx("button",{onClick:L,style:{backgroundColor:e.accent,color:e.accentText,border:"none",borderRadius:6,padding:"8px 16px",cursor:"pointer",fontSize:13},children:"Open Folder"})]})}),n==="search"&&i.jsx("div",{style:{padding:12},children:i.jsx(Hi,{theme:e})}),n==="functions"&&i.jsx(p,{}),n==="docList"&&i.jsx(zi,{theme:e}),n==="project"&&i.jsx("div",{style:{padding:16,color:e.textMuted,fontSize:13,textAlign:"center"},children:o?i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:600,color:e.text,marginBottom:8},children:["Project: ",typeof o=="string"?o.split("/").pop():o]}),i.jsxs("div",{children:[r.length," items"]})]}):"No project opened. Open a folder to use the project panel."}),n==="clipboardHistory"&&i.jsx($i,{theme:e}),n==="charPanel"&&i.jsx(Wi,{theme:e}),n==="git"&&i.jsx(y.Suspense,{fallback:i.jsx("div",{style:{padding:16,color:e.textMuted,fontSize:12},children:"Loading..."}),children:i.jsx(Bi,{theme:e})}),n==="ai"&&i.jsx(y.Suspense,{fallback:i.jsx("div",{style:{padding:16,color:e.textMuted,fontSize:12},children:"Loading..."}),children:i.jsx(Fi,{theme:e})})]})]}),i.jsx("div",{className:`resizer ${x?"active":""}`,onMouseDown:I,style:{backgroundColor:x?e.accent:e.border}})]})]})}const zi=J.memo(function({theme:n}){const{tabs:t,activeTabId:r,setActiveTab:o}=A();return i.jsx("div",{style:{padding:4},children:t.map(a=>i.jsxs("div",{onClick:()=>o(a.id),style:{display:"flex",alignItems:"center",gap:6,padding:"5px 8px",cursor:"pointer",borderRadius:4,fontSize:13,color:a.id===r?n.text:n.sidebarText,backgroundColor:a.id===r?n.bgActive:"transparent"},children:[i.jsx("span",{style:{fontSize:10,color:a.isModified?n.accent:"transparent"},children:""}),i.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.name}),a.isPinned&&i.jsx("span",{style:{fontSize:10},children:""}),a.isReadOnly&&i.jsx("span",{style:{fontSize:10},children:""})]},a.id))})}),$i=J.memo(function({theme:n}){const{clipboardHistory:t}=A();return i.jsxs("div",{style:{padding:8},children:[i.jsx("div",{style:{fontSize:11,color:n.textMuted,marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Clipboard History"}),t.length===0?i.jsx("div",{style:{color:n.textMuted,fontSize:12,padding:8},children:"No clipboard entries yet"}):t.map((r,o)=>i.jsxs("div",{onClick:()=>navigator.clipboard.writeText(r.text),style:{padding:"6px 8px",cursor:"pointer",fontSize:12,color:n.sidebarText,borderRadius:4,borderBottom:`1px solid ${n.border}`,marginBottom:2},title:"Click to copy",children:[i.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontFamily:"monospace"},children:r.text.slice(0,100)}),i.jsx("div",{style:{fontSize:10,color:n.textMuted,marginTop:2},children:new Date(r.timestamp).toLocaleTimeString()})]},o))]})}),Wi=J.memo(function({theme:n}){const{tabs:t,activeTabId:r}=A(),o=t.find(b=>b.id===r),[a,s]=y.useState(65),d=[{label:"Common Symbols",chars:""},{label:"Currency",chars:"$"},{label:"Greek",chars:""},{label:"Math",chars:""},{label:"Box Drawing",chars:""}],f=b=>{const u=Nn();u!==null&&u("insert-text",b)};return i.jsxs("div",{style:{padding:8},children:[i.jsx("div",{style:{fontSize:11,color:n.textMuted,marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Character Panel"}),o!==void 0&&i.jsxs("div",{style:{fontSize:12,color:n.textSecondary,marginBottom:8,padding:"4px 0",borderBottom:`1px solid ${n.border}`},children:["Cursor pos: Ln ",o.cursorLine,", Col ",o.cursorColumn]}),i.jsxs("div",{style:{display:"flex",gap:4,marginBottom:8},children:[i.jsx("input",{type:"number",value:a,onChange:b=>s(parseInt(b.target.value)||0),style:{width:60,height:24,fontSize:12,backgroundColor:n.bg,color:n.text,border:`1px solid ${n.border}`,borderRadius:3,padding:"0 4px"}}),i.jsx("div",{style:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:n.bg,border:`1px solid ${n.border}`,borderRadius:3,fontFamily:"monospace",fontSize:14,color:n.accent},children:String.fromCharCode(a)}),i.jsx("button",{onClick:()=>f(String.fromCharCode(a)),style:{height:24,fontSize:11,backgroundColor:n.accent,color:n.accentText,border:"none",borderRadius:3,padding:"0 8px",cursor:"pointer"},children:"Insert"})]}),d.map((b,u)=>i.jsxs("div",{style:{marginBottom:8},children:[i.jsx("div",{style:{fontSize:11,color:n.textMuted,marginBottom:4},children:b.label}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:2},children:b.chars.split("").map((m,T)=>i.jsx("div",{onClick:()=>f(m),title:`U+${m.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")}`,style:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",fontSize:13,fontFamily:"monospace",backgroundColor:n.bg,border:`1px solid ${n.border}`,borderRadius:2,cursor:"pointer",color:n.text},children:m},T))})]},u))]})}),Hi=J.memo(function({theme:n}){const[t,r]=y.useState(""),[o,a]=y.useState([]),s=()=>{const d=A.getState().tabs,f=[];for(const b of d)b.content.split(`
`).forEach((m,T)=>{m.toLowerCase().includes(t.toLowerCase())&&f.push({file:b.name,line:T+1,text:m.trim()})});a(f)};return i.jsxs("div",{children:[i.jsx("div",{style:{display:"flex",gap:6},children:i.jsx("input",{type:"text",placeholder:"Search in files...",value:t,onChange:d=>r(d.target.value),onKeyDown:d=>d.key==="Enter"&&s(),style:{flex:1,height:28,backgroundColor:n.bg,color:n.text,border:`1px solid ${n.border}`,borderRadius:4,padding:"0 8px",fontSize:13}})}),0<o.length&&i.jsxs("div",{style:{marginTop:8},children:[i.jsxs("div",{style:{fontSize:12,color:n.textMuted,marginBottom:4},children:[o.length," results"]}),o.map((d,f)=>i.jsxs("div",{style:{padding:"4px 8px",fontSize:12,color:n.sidebarText,cursor:"pointer",borderRadius:4},onMouseEnter:b=>b.target.style.backgroundColor=n.bgHover,onMouseLeave:b=>b.target.style.backgroundColor="transparent",children:[i.jsxs("div",{style:{color:n.accent,fontSize:11},children:[d.file,":",d.line]}),i.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.text})]},f))]})]})});function Gi(e){var r;const n=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return{js:"",jsx:"",ts:"",tsx:"",py:"",rb:"",go:"",rs:"",html:"",css:"",json:"",md:"",txt:"",svg:""}[n||""]||""}function Ui(e,n){const t=[],r=e.split(`
`),o={javascript:[/function\s+(\w+)/,/(?:const|let|var)\s+(\w+)\s*=\s*(?:async\s+)?(?:\([^)]*\)|(\w+))\s*=>/,/(\w+)\s*\([^)]*\)\s*\{/],typescript:[/function\s+(\w+)/,/(?:const|let|var)\s+(\w+)\s*=\s*(?:async\s+)?(?:\([^)]*\)|(\w+))\s*=>/,/(\w+)\s*\([^)]*\)\s*(?::\s*\w+)?\s*\{/],python:[/def\s+(\w+)/,/class\s+(\w+)/],ruby:[/def\s+(\w+)/,/class\s+(\w+)/],go:[/func\s+(?:\(\w+\s+\*?\w+\)\s+)?(\w+)/],rust:[/fn\s+(\w+)/,/struct\s+(\w+)/,/impl\s+(\w+)/],java:[/(?:public|private|protected|static|\s)+[\w<>\[\]]+\s+(\w+)\s*\(/],c:[/(?:void|int|char|float|double|long|short|unsigned|\w+)\s+(\w+)\s*\(/],cpp:[/(?:void|int|char|float|double|long|short|unsigned|\w+)\s+(\w+)\s*\(/],csharp:[/(?:public|private|protected|internal|static|\s)+[\w<>\[\]]+\s+(\w+)\s*\(/],swift:[/func\s+(\w+)/,/class\s+(\w+)/,/struct\s+(\w+)/],php:[/function\s+(\w+)/,/class\s+(\w+)/]},a=o[n]||o.javascript||[];return r.forEach((s,d)=>{for(const f of a){const b=s.match(f);if(b&&b[1]){const u=b[1];["if","else","for","while","switch","catch","return","new"].includes(u)||t.push({name:u,line:d+1});break}}}),t}async function er(e,n=0){if(n>so)return[];const t=[];for await(const r of e.values()){if(r.name.startsWith(".")||r.name==="node_modules")continue;const o={name:r.name,path:r.name,isDirectory:r.kind==="directory",isExpanded:!1,handle:r};r.kind==="directory"&&(o.children=await er(r,n+1)),t.push(o)}return t.sort((r,o)=>r.isDirectory&&!o.isDirectory?-1:!r.isDirectory&&o.isDirectory?1:r.name.localeCompare(o.name))}function Vi({theme:e}){const{findReplaceMode:n,searchOptions:t,updateSearchOptions:r,setShowFindReplace:o}=A(),a=y.useRef(null),[s,d]=y.useState(0),[f,b]=y.useState(0),[u,m]=y.useState(1);y.useEffect(()=>{var p,S;(p=a.current)==null||p.focus(),(S=a.current)==null||S.select()},[n]);const T=y.useCallback(p=>{l(t.query,p,t)},[t]),l=(p,S,h)=>{document.dispatchEvent(new CustomEvent("notemac-find",{detail:{query:p,direction:S,isCaseSensitive:h.isCaseSensitive,isWholeWord:h.isWholeWord,isRegex:h.isRegex}}))},x=()=>T("next"),_=()=>T("prev"),C=()=>{document.dispatchEvent(new CustomEvent("notemac-replace",{detail:{find:t.query,replace:t.replaceText,all:!1,...t}}))},j=()=>{document.dispatchEvent(new CustomEvent("notemac-replace",{detail:{find:t.query,replace:t.replaceText,all:!0,...t}}))},R=()=>{document.dispatchEvent(new CustomEvent("notemac-mark",{detail:{...t,style:u}}))},B=()=>{document.dispatchEvent(new CustomEvent("notemac-clear-marks",{}))},I=p=>{p.key==="Enter"&&(p.preventDefault(),p.shiftKey?_():x()),p.key==="Escape"&&o(!1)},L=({active:p,onClick:S,title:h,children:O})=>i.jsx("button",{title:h,onClick:S,style:{background:p?e.accent:"transparent",color:p?e.accentText:e.textSecondary,border:`1px solid ${p?e.accent:e.border}`,borderRadius:4,padding:"2px 6px",cursor:"pointer",fontSize:12,fontWeight:p?600:400,minWidth:28,height:24,display:"flex",alignItems:"center",justifyContent:"center"},children:O}),w=({onClick:p,title:S,children:h,primary:O})=>i.jsx("button",{title:S,onClick:p,style:{background:O?e.accent:"transparent",color:O?e.accentText:e.textSecondary,border:`1px solid ${O?e.accent:e.border}`,borderRadius:4,padding:"2px 8px",cursor:"pointer",fontSize:12,height:24,display:"flex",alignItems:"center",justifyContent:"center"},children:h}),M=[{key:"find",label:"Find"},{key:"replace",label:"Replace"},{key:"findInFiles",label:"Find in Files"},{key:"mark",label:"Mark"}];return i.jsxs("div",{style:{backgroundColor:e.findBg,borderBottom:`1px solid ${e.border}`,padding:"8px 12px",display:"flex",flexDirection:"column",gap:6,flexShrink:0},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:4},children:[M.map(p=>i.jsx("span",{onClick:()=>A.getState().setShowFindReplace(!0,p.key),style:{fontSize:12,fontWeight:n===p.key?600:400,color:n===p.key?e.accent:e.textSecondary,cursor:"pointer",borderBottom:n===p.key?`2px solid ${e.accent}`:"none",paddingBottom:2},children:p.label},p.key)),i.jsx("div",{style:{flex:1}}),i.jsx("span",{onClick:()=>o(!1),style:{cursor:"pointer",color:e.textMuted,fontSize:16,padding:"0 4px"},children:""})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[i.jsx("input",{ref:a,type:"text",placeholder:"Find...",value:t.query,onChange:p=>r({query:p.target.value}),onKeyDown:I,style:{flex:1,height:28,backgroundColor:e.bg,color:e.text,border:`1px solid ${e.border}`,borderRadius:4,padding:"0 8px",fontSize:13}}),i.jsx(L,{active:t.isCaseSensitive,onClick:()=>r({isCaseSensitive:!t.isCaseSensitive}),title:"Match Case",children:"Aa"}),i.jsx(L,{active:t.isWholeWord,onClick:()=>r({isWholeWord:!t.isWholeWord}),title:"Whole Word",children:"W"}),i.jsx(L,{active:t.isRegex,onClick:()=>r({isRegex:!t.isRegex}),title:"Use Regular Expression",children:".*"}),i.jsx(w,{onClick:_,title:"Previous Match (Shift+Enter)",children:""}),i.jsx(w,{onClick:x,title:"Next Match (Enter)",children:""})]}),(n==="replace"||n==="findInFiles")&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[i.jsx("input",{type:"text",placeholder:"Replace...",value:t.replaceText,onChange:p=>r({replaceText:p.target.value}),onKeyDown:I,style:{flex:1,height:28,backgroundColor:e.bg,color:e.text,border:`1px solid ${e.border}`,borderRadius:4,padding:"0 8px",fontSize:13}}),i.jsx(w,{onClick:C,title:"Replace",children:"Replace"}),i.jsx(w,{onClick:j,title:"Replace All",primary:!0,children:"Replace All"})]}),n==="mark"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("span",{style:{fontSize:12,color:e.textSecondary},children:"Style:"}),[1,2,3,4,5].map(p=>i.jsx("div",{onClick:()=>m(p),style:{width:24,height:20,borderRadius:3,backgroundColor:Pr[p],border:u===p?"2px solid white":`1px solid ${e.border}`,cursor:"pointer",opacity:u===p?1:.6,display:"flex",alignItems:"center",justifyContent:"center",fontSize:10,color:"#fff",fontWeight:700},children:p},p)),i.jsx("div",{style:{flex:1}}),i.jsx(w,{onClick:R,title:"Mark All",primary:!0,children:"Mark All"}),i.jsx(w,{onClick:B,title:"Clear All Marks",children:"Clear Marks"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,fontSize:12,color:e.textSecondary},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:t.wrapAround,onChange:p=>r({wrapAround:p.target.checked}),style:{accentColor:e.accent}}),"Wrap around"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:t.searchInSelection,onChange:p=>r({searchInSelection:p.target.checked}),style:{accentColor:e.accent}}),"In selection"]})]})]})}function Ki({theme:e}){const{addTab:n,recentFiles:t,setActiveTab:r}=A(),a=navigator.platform.includes("Mac")?"":"Ctrl";return i.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:e.editorBg,gap:24},children:[i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{fontSize:64,fontWeight:200,color:e.textMuted,letterSpacing:-2,marginBottom:8},children:"N++"}),i.jsx("h1",{style:{fontSize:28,fontWeight:300,color:e.textSecondary,marginBottom:4},children:"Notemac++"}),i.jsx("p",{style:{color:e.textMuted,fontSize:14},children:"A powerful text editor for Mac & Web"})]}),i.jsxs("div",{style:{display:"flex",gap:12,marginTop:8},children:[i.jsx(wt,{theme:e,label:"New File",shortcut:`${a}N`,onClick:()=>n()}),i.jsx(wt,{theme:e,label:"Open File",shortcut:`${a}O`,onClick:()=>{window.electronAPI||qi().then(s=>{s&&n({name:s.name,content:s.content,language:ae(s.name),lineEnding:de(s.content)})})}}),i.jsx(wt,{theme:e,label:"Open Folder",onClick:async()=>{if("showDirectoryPicker"in window)try{const s=await window.showDirectoryPicker();A.getState().setSidebarPanel("explorer")}catch{}}})]}),i.jsxs("div",{style:{marginTop:24,padding:24,backgroundColor:e.bgSecondary,borderRadius:12,border:`1px solid ${e.border}`,width:400},children:[i.jsx("div",{style:{fontSize:12,fontWeight:600,color:e.textSecondary,textTransform:"uppercase",letterSpacing:1,marginBottom:12},children:"Keyboard Shortcuts"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"8px 16px",fontSize:13},children:[[`${a}N`,"New file"],[`${a}O`,"Open file"],[`${a}S`,"Save"],[`${a}F`,"Find"],[`${a}H`,"Find & Replace"],[`${a}G`,"Go to line"],[`${a}D`,"Duplicate line"],[`${a}B`,"Toggle sidebar"],[`${a},`,"Preferences"]].map(([s,d],f)=>i.jsxs(J.Fragment,{children:[i.jsx("kbd",{style:{backgroundColor:e.bgTertiary,color:e.textSecondary,padding:"2px 8px",borderRadius:4,fontSize:12,fontFamily:"-apple-system, system-ui, sans-serif",border:`1px solid ${e.border}`,textAlign:"center",minWidth:60},children:s}),i.jsx("span",{style:{color:e.textSecondary},children:d})]},f))})]}),t.length>0&&i.jsxs("div",{style:{marginTop:8},children:[i.jsx("div",{style:{fontSize:12,fontWeight:600,color:e.textSecondary,textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Recent Files"}),t.slice(0,5).map((s,d)=>i.jsxs("div",{onClick:async()=>{if(window.electronAPI){const f=await window.electronAPI.readFile(s.path);n({name:s.name,path:s.path,content:f,language:ae(s.name),lineEnding:de(f)})}},style:{padding:"6px 12px",cursor:"pointer",color:e.accent,fontSize:13,borderRadius:4},onMouseEnter:f=>f.target.style.backgroundColor=e.bgHover,onMouseLeave:f=>f.target.style.backgroundColor="transparent",children:[s.name,i.jsx("span",{style:{color:e.textMuted,fontSize:11,marginLeft:8},children:s.path})]},d))]})]})}function wt({theme:e,label:n,shortcut:t,onClick:r}){const[o,a]=J.useState(!1);return i.jsxs("button",{onClick:r,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,padding:"12px 20px",backgroundColor:o?e.bgHover:e.bgSecondary,color:e.text,border:`1px solid ${e.border}`,borderRadius:8,cursor:"pointer",fontSize:13,transition:"background-color 0.15s ease",minWidth:110},children:[i.jsx("span",{children:n}),t&&i.jsx("span",{style:{fontSize:11,color:e.textMuted},children:t})]})}async function qi(){if("showOpenFilePicker"in window)try{const[e]=await window.showOpenFilePicker({multiple:!1}),n=await e.getFile(),t=await n.text();return{name:n.name,content:t}}catch{return null}return new Promise(e=>{const n=document.createElement("input");n.type="file",n.onchange=async t=>{var a;const r=(a=t.target.files)==null?void 0:a[0];if(!r){e(null);return}const o=await r.text();e({name:r.name,content:o})},n.click()})}const Ji=1200*1e3,En="notemac_feedback_shown_version",Mn="2.0.0";function Yi({theme:e}){const[n,t]=y.useState(!1),[r,o]=y.useState(null);if(y.useEffect(()=>{if(localStorage.getItem(En)===Mn)return;const m=setTimeout(()=>{t(!0),localStorage.setItem(En,Mn)},Ji);return()=>clearTimeout(m)},[]),!n)return null;const a="I've been using Notemac++ and it's an awesome text editor for Mac & Web! Check it out:",s="https://sergioadevita.github.io/notemac-plus-plus/",d=encodeURIComponent("Check out Notemac++!"),f=encodeURIComponent(`Hey!

${a}
${s}

Give it a try!`),b=[{id:"github",label:"Open an issue",sublabel:"Report bugs or request features",icon:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:e.text,children:i.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),href:"https://github.com/sergioadevita/notemac-plus-plus/issues/new",color:e.bgTertiary,textColor:e.text,borderColor:e.border},{id:"twitter",label:"Share on X",sublabel:"Tell the world about it",icon:i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"#fff",children:i.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),href:`https://twitter.com/intent/tweet?text=${encodeURIComponent(a)}&url=${encodeURIComponent(s)}`,color:"#000",textColor:"#fff",borderColor:"#333"},{id:"email",label:"Share via email",sublabel:"Send to a friend",icon:i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:e.accent,children:i.jsx("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),href:`mailto:?subject=${d}&body=${f}`,color:e.bgTertiary,textColor:e.text,borderColor:e.border},{id:"donate",label:"Buy me a coffee",sublabel:"Support development",icon:i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"#fff",children:i.jsx("path",{d:"M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604 0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407 0 0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"})}),href:"https://ko-fi.com/sergioadevita",color:"#FF5E5B",textColor:"#fff",borderColor:"#FF5E5B"}];return i.jsx("div",{className:"dialog-overlay",onClick:()=>t(!1),style:{zIndex:1e4},children:i.jsxs("div",{onClick:u=>u.stopPropagation(),style:{backgroundColor:e.bgSecondary,border:`1px solid ${e.border}`,borderRadius:16,padding:32,width:440,boxShadow:"0 12px 48px rgba(0,0,0,0.5)",textAlign:"center",animation:"feedbackSlideIn 0.4s ease-out"},children:[i.jsx("style",{children:`
                    @keyframes feedbackSlideIn {
                        from { opacity: 0; transform: translateY(30px) scale(0.95); }
                        to { opacity: 1; transform: translateY(0) scale(1); }
                    }
                `}),i.jsx("div",{style:{fontSize:48,marginBottom:8},children:""}),i.jsx("h2",{style:{color:e.text,fontSize:22,fontWeight:700,marginBottom:8},children:"Hey, you're still here!"}),i.jsxs("p",{style:{color:e.textSecondary,fontSize:14,lineHeight:1.6,marginBottom:8,padding:"0 8px"},children:["You've been coding for 20 minutes straight  that's either dedication or a really nasty bug. Either way, we're glad you're using ",i.jsx("span",{style:{color:e.accent,fontWeight:600},children:"Notemac++"}),"!"]}),i.jsx("p",{style:{color:e.textMuted,fontSize:13,marginBottom:24},children:"If this octopus has been helpful, here are some ways to spread the love:"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:24},children:b.map(u=>{let m=r===u.id;return i.jsxs("a",{href:u.href,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:12,backgroundColor:u.color,color:u.textColor,border:`1px solid ${u.borderColor}`,borderRadius:10,padding:"10px 16px",textDecoration:"none",transition:"all 0.2s ease",transform:m?"translateX(4px)":"none",opacity:m?.9:1},onMouseEnter:()=>o(u.id),onMouseLeave:()=>o(null),children:[i.jsx("div",{style:{flexShrink:0},children:u.icon}),i.jsxs("div",{style:{textAlign:"left"},children:[i.jsx("div",{style:{fontWeight:600,fontSize:14},children:u.label}),i.jsx("div",{style:{fontSize:11,opacity:.7},children:u.sublabel})]})]},u.id)})}),i.jsx("button",{onClick:()=>t(!1),style:{backgroundColor:"transparent",color:e.textMuted,border:"none",cursor:"pointer",fontSize:13,padding:"6px 16px",transition:"color 0.2s"},onMouseEnter:u=>u.currentTarget.style.color=e.text,onMouseLeave:u=>u.currentTarget.style.color=e.textMuted,children:"Maybe later  I'm in the zone"})]})})}const Xi=y.lazy(()=>Y(()=>import("./SettingsDialogViewPresenter-CBwwIk1t.js"),__vite__mapDeps([7,3,4,5])).then(e=>({default:e.SettingsDialog}))),Zi=y.lazy(()=>Y(()=>import("./GoToLineDialogViewPresenter-CMWlZt_P.js"),__vite__mapDeps([8,3,4,5])).then(e=>({default:e.GoToLineDialog}))),Qi=y.lazy(()=>Y(()=>import("./AboutDialogViewPresenter-BjtZPLmW.js"),__vite__mapDeps([9,3,4,5])).then(e=>({default:e.AboutDialog}))),es=y.lazy(()=>Y(()=>import("./RunCommandDialogViewPresenter-BYo1X5gm.js"),__vite__mapDeps([10,3,4,5])).then(e=>({default:e.RunCommandDialog}))),ts=y.lazy(()=>Y(()=>import("./ColumnEditorDialogViewPresenter-aCObRRw4.js"),__vite__mapDeps([11,3,4,5])).then(e=>({default:e.ColumnEditorDialog}))),ns=y.lazy(()=>Y(()=>import("./SummaryDialogViewPresenter-DOHUIpCh.js"),__vite__mapDeps([12,3,4,5])).then(e=>({default:e.SummaryDialog}))),rs=y.lazy(()=>Y(()=>import("./CharInRangeDialogViewPresenter-BgRIMveI.js"),__vite__mapDeps([13,3,4,5])).then(e=>({default:e.CharInRangeDialog}))),os=y.lazy(()=>Y(()=>import("./ShortcutMapperDialogViewPresenter-DD9HIWYo.js"),__vite__mapDeps([14,15,3,4,5])).then(e=>({default:e.ShortcutMapperDialog}))),as=y.lazy(()=>Y(()=>import("./CommandPaletteViewPresenter-B0LCj2Lc.js"),__vite__mapDeps([16,15,17,3,4,5])).then(e=>({default:e.CommandPaletteViewPresenter}))),is=y.lazy(()=>Y(()=>import("./QuickOpenViewPresenter-DJLCeF16.js"),__vite__mapDeps([18,17,3,4,5])).then(e=>({default:e.QuickOpenViewPresenter}))),ss=y.lazy(()=>Y(()=>import("./DiffViewerViewPresenter-XbQSO7ri.js"),__vite__mapDeps([19,1,2,3,4,5])).then(e=>({default:e.DiffViewerViewPresenter}))),ls=y.lazy(()=>Y(()=>import("./SnippetManagerViewPresenter-DL09HFKf.js"),__vite__mapDeps([20,3,4,5])).then(e=>({default:e.SnippetManagerViewPresenter}))),cs=y.lazy(()=>Y(()=>import("./TerminalPanelViewPresenter-CvYfhQ5a.js"),__vite__mapDeps([21,3,4,5])).then(e=>({default:e.TerminalPanelViewPresenter}))),ds=y.lazy(()=>Y(()=>import("./CloneRepositoryViewPresenter-DY_qCN3s.js"),__vite__mapDeps([22,4,5,1,2,3])).then(e=>({default:e.CloneRepositoryViewPresenter}))),us=y.lazy(()=>Y(()=>import("./GitSettingsViewPresenter-BOH1tFXR.js"),__vite__mapDeps([23,2,3,4,5])).then(e=>({default:e.GitSettingsViewPresenter}))),ps=y.lazy(()=>Y(()=>import("./AISettingsViewPresenter-BEcgfLYY.js"),__vite__mapDeps([24,3,4,5])).then(e=>({default:e.AISettingsViewPresenter})));function fs(){const e=A(g=>g.tabs),n=A(g=>g.activeTabId);A(g=>g.sidebarPanel);const t=A(g=>g.showStatusBar),r=A(g=>g.showToolbar),o=A(g=>g.settings),a=A(g=>g.showFindReplace),s=A(g=>g.showSettings),d=A(g=>g.showGoToLine),f=A(g=>g.showAbout),b=A(g=>g.showRunCommand),u=A(g=>g.showColumnEditor),m=A(g=>g.showSummary),T=A(g=>g.showCharInRange),l=A(g=>g.showShortcutMapper),x=A(g=>g.showCommandPalette),_=A(g=>g.showQuickOpen),C=A(g=>g.showDiffViewer),j=A(g=>g.showSnippetManager),R=A(g=>g.showTerminalPanel),B=A(g=>g.showCloneDialog),I=A(g=>g.showGitSettings),L=A(g=>g.showAiSettings),w=A(g=>g.splitView),M=A(g=>g.splitTabId),p=A(g=>g.addTab),S=A(g=>g.zoomLevel),h=y.useMemo(()=>Wo(o.theme),[o.theme]),O=y.useCallback(g=>{Go(g,n,S)},[n,S]);y.useEffect(()=>(window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)),[O]),y.useEffect(()=>(document.addEventListener("dragover",ln),document.addEventListener("drop",cn),()=>{document.removeEventListener("dragover",ln),document.removeEventListener("drop",cn)}),[]),y.useEffect(()=>{ea()},[]);const D=y.useCallback((g,z)=>{zn(g,n,e,S,z)},[n,S,e]);y.useEffect(()=>{e.length===0&&p({name:"new 1",content:""})},[]),y.useEffect(()=>{A.getState().LoadAIState()},[]);const F=e.find(g=>g.id===n),v=o.distractionFreeMode,k=!!window.electronAPI;return i.jsxs("div",{className:"notemac-app",style:{backgroundColor:h.bg,color:h.text,fontSize:o.fontSize+S},children:[k&&!v&&i.jsx("div",{style:{height:38,backgroundColor:h.menuBg,borderBottom:`1px solid ${h.border}`,display:"flex",alignItems:"center",paddingLeft:78,flexShrink:0,WebkitAppRegion:"drag"},children:i.jsxs("span",{style:{fontWeight:600,fontSize:13,color:h.text,opacity:.7,WebkitAppRegion:"no-drag",userSelect:"none"},children:[F?F.name+(F.isModified?" ":"")+"  ":"","Notemac++"]})}),!v&&!k&&i.jsx(oa,{theme:h,onAction:D,isElectron:k}),r&&!v&&i.jsx(aa,{theme:h,onAction:D}),!v&&i.jsx(ia,{theme:h}),i.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[!v&&i.jsx(Ni,{theme:h}),i.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[a&&i.jsx(Vi,{theme:h}),i.jsx("div",{style:{flex:1,display:"flex",flexDirection:w==="horizontal"?"column":"row",overflow:"hidden"},children:F?i.jsxs(i.Fragment,{children:[i.jsx(Cn,{tab:F,theme:h,settings:o,zoomLevel:S},F.id),w!=="none"&&M&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{width:w==="vertical"?4:void 0,height:w==="horizontal"?4:void 0,backgroundColor:h.border,cursor:w==="vertical"?"col-resize":"row-resize"}}),i.jsx(Cn,{tab:e.find(g=>g.id===M)||F,theme:h,settings:o,zoomLevel:S},M+"-split")]})]}):i.jsx(Ki,{theme:h})}),R&&i.jsx(y.Suspense,{fallback:null,children:i.jsx(cs,{theme:h})})]})]}),t&&!v&&i.jsx(Di,{theme:h}),i.jsxs(y.Suspense,{fallback:null,children:[s&&i.jsx(Xi,{theme:h}),d&&i.jsx(Zi,{theme:h}),f&&i.jsx(Qi,{theme:h}),b&&i.jsx(es,{theme:h}),u&&i.jsx(ts,{theme:h}),m&&i.jsx(ns,{theme:h}),T&&i.jsx(rs,{theme:h}),l&&i.jsx(os,{theme:h}),x&&i.jsx(as,{theme:h}),_&&i.jsx(is,{theme:h}),C&&i.jsx(ss,{theme:h}),j&&i.jsx(ls,{theme:h}),B&&i.jsx(ds,{theme:h}),I&&i.jsx(us,{theme:h}),L&&i.jsx(ps,{theme:h})]}),i.jsx(Yi,{theme:h})]})}ir.createRoot(document.getElementById("root")).render(i.jsx(J.StrictMode,{children:i.jsx(fs,{})}));export{Ci as A,Nn as B,ms as C,St as D,Rs as E,qr as G,zn as H,Ae as N,J as R,Ie as S,Ps as T,vs as U,ws as a,Ss as b,Li as c,xs as d,ze as e,Os as f,ue as g,gt as h,xo as i,i as j,ys as k,Cs as l,js as m,We as n,As as o,Ls as p,Is as q,y as r,Es as s,Ms as t,A as u,Ts as v,_s as w,bs as x,_i as y,ks as z};
