import{Z as p,E as u,F as d,p as r,u as F}from"./index-BLISzHqN.js";import"./react-vendor-P8ZuH1e3.js";import"./monaco-editor-BYMRfcD5.js";function f(){return F.getState()}async function T(o=p){const t=f(),s=u();if(s!==null)try{const n=d(),a=(await r.log({fs:s,dir:n,depth:o})).map(e=>({oid:e.oid,message:e.commit.message,author:{name:e.commit.author.name,email:e.commit.author.email},timestamp:e.commit.author.timestamp}));t.SetCommitLog(a)}catch{t.SetCommitLog([])}}async function S(o){const t=u();if(t===null)return null;try{const s=d(),n=await r.resolveRef({fs:t,dir:s,ref:"HEAD"}),{blob:i}=await r.readBlob({fs:t,dir:s,oid:n,filepath:o});return new TextDecoder().decode(i)}catch{return null}}async function b(){var i;const o=f(),t=o.gitStatus;if(t===null||t.stagedFiles.length===0)return"";const s=[],n=t.stagedFiles.length;for(let a=0;a<n;a++){const e=t.stagedFiles[a];if(s.push(`${e.status}: ${e.path}`),e.status==="modified"){const m=await S(e.path);if(m!==null){const h=m.split(`
`),c=(((i=o.tabs.find(g=>{var l;return(l=g.path)==null?void 0:l.endsWith(e.path)}))==null?void 0:i.content)||"").split(`
`).length-h.length;c!==0&&s.push(`  (${0<c?"+":""}${c} lines)`)}}}return s.join(`
`)}export{T as FetchCommitLog,S as GetFileAtHead,b as GetStagedDiff};
